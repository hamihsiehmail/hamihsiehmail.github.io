{
  "hruby-on-rails [指令]<!-- --> The Rails Command Line Interface (CLI) pjchender.dev": {
    "prefix": "hruby-on-rails [指令]<!-- --> The Rails Command Line Interface (CLI) pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[指令]<!-- --> The Rails Command Line Interface (CLI)</h1><p>在 Rails cli 中，有時候會看到使用 <code>rails</code> ，有時候用 <code>bin/rails</code>。如果是直接輸入 rails ，則它會在系統中的任何地方尋找到名為 rails 的執行檔並執行，因此如果你的系統安裝多於一個版本的 rails 時，這麼做可能會出問題，因此建議除了建立新專案時，其他時候都使用 bin/rails 指令開頭。</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 建立專案</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails new &lt;project_name&gt; --webpack=stimulus --database=postgresql --skip-coffee --skip-test</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails active_storage:install</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails generate scaffold Product title:string description:text image_url:string price:decimal</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails notes          # 找出所有 TODO 的項目</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails g              # Rails generator</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails d              # rails destroy 刪除產生器產生的檔案</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails s              # rails server</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails c              # rails console</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails dbconsole      # 直接進到資料庫裡，使用 SQL 語法對資料庫進行存取</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># run server</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails s</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails s -e production    # with production mode</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails server -p 3090         # Run server at specific port</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails s -b 0.0.0.0.      # Binding on a proxy</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># deploy</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ tail -f log/production.log      # 進到 Rails 專案資料夾後，即可使用 tail 指令看 logs</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"rails-assets\">rails assets<a href=\"#rails-assets\" class=\"hash-link\" aria-label=\"rails assets的直接連結\" title=\"rails assets的直接連結\">​</a></h4><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails assets:clobber      // 把 assets 中的檔案砍掉</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails assets:precompile   // 在 local 端執行 compile</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"http://guides.rubyonrails.org/command_line.html\" target=\"_blank\" rel=\"noopener noreferrer\">Command Line</a> @ RailsGuides</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"清除垃圾\">清除垃圾<a href=\"#清除垃圾\" class=\"hash-link\" aria-label=\"清除垃圾的直接連結\" title=\"清除垃圾的直接連結\">​</a></h4><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 必要時需要手動 rm -rf 刪除</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails log:clear</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rake tmp:clear</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立-rails-專案\">建立 Rails 專案<a href=\"#建立-rails-專案\" class=\"hash-link\" aria-label=\"建立 Rails 專案的直接連結\" title=\"建立 Rails 專案的直接連結\">​</a></h2><blockquote><p>若要建立新專案可進一步參考 [<!-- -->[Rails]<!-- --> 安裝並啟動 Rails 專案](<!-- -->[Rails]<!-- --> 安裝並啟動 Rails 專案.md) 。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"rails-常用指令\">Rails 常用指令<a href=\"#rails-常用指令\" class=\"hash-link\" aria-label=\"Rails 常用指令的直接連結\" title=\"Rails 常用指令的直接連結\">​</a></h2><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 自動產生一組 MVC 的程式碼，完成一個簡易的 CRUD 程式</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails generate scaffold Product title:string description:text image_url:string price:decimal</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails destroy controller Stores           # 如果 generate 錯誤，可以再把它 destroy （建議少用）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails d controller Stores                 # destroy 可以省略成 d</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails server                              # 啟動伺服器（簡寫：rails s）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">RAILS_ENV=production rails s                  # 以發佈環境啟動伺服器</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails routes                              # 顯示目前 rails 的路由設定</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 進行測試</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails test                                # 測試透過 scaffolding 產生的 model 和 controller 有無錯誤</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails test:controllers                    # 執行 functional tests</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails test:models                         # 執行 model tests</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 快取相關</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails dev:cache                               # 打開／關閉 開發環境下的快取機制</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [指令] Bundler CLI pjchender.dev": {
    "prefix": "hruby-on-rails [指令] Bundler CLI pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[指令] Bundler CLI</h1></header><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##           bundler 安裝            ##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem install bundler</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##           bundler 操作            ##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bundle init                                          # 初始化 bundler，產生 Gemfile 檔案</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bundle install                                       # 開始安裝 Gemfile 裡面所列的 gem，並產生 Gemfile.lock 檔案</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bundle exec rails                                    # 在當前的 bundler context 中執行，讓 Gemfile 中的所有 gems 能夠被 require 和使用</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bundle update                                        # 更新 Gemfile 中所有 gems 及其相依的版本</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bundle update [gem_name]                             # 更新 Gemfile 中特定 gems 及其相依的版本</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bundle outdated                                      # 列出有新版本但尚未更新的 gems</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bundle show                                          # 列出所有透過 bundle 安裝的 gem</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bundle show --paths                                  # 列出所有透過 bundle 安裝的 gem 安裝的位置</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bundle show [gem_name]                               # 顯示特定 gem 的位置</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bundle lock                                          # 修改／更新 Gemfile 的檔案</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [指令] RVM Gemsets CLI pjchender.dev": {
    "prefix": "hruby-on-rails [指令] RVM Gemsets CLI pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[指令] RVM Gemsets CLI</h1></header><p>Ruby 中有各種 gem 可以安裝，而 gemset 就像一個一個的菜籃一樣，每次安裝 gem，就是放一個 gem 到菜籃裡面。使用者可以有不同的菜籃，放入不同的 gem，在不同的時候選擇使用不同的菜籃，藉此測試各種相容性問題。</p><p>在安裝的 Ruby 過程中， RVM 會產生兩個 gemsets：</p><ul><li>default - 當沒有選擇特定的 gemset 時，會安裝到這裡面</li><li>global - super gemset, inherited by all other gemsets for the given ruby</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"基本操作指令\">基本操作指令<a href=\"#基本操作指令\" class=\"hash-link\" aria-label=\"基本操作指令的直接連結\" title=\"基本操作指令的直接連結\">​</a></h2><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># gemset 基本操作</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm gemset create [gemsetname]        # 建立一個 gemset</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm gemset delete [gemsetname]        # 刪除一個 gemset</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm gemset use    [gemsetname]        # 使用某個 gemset</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm gemset empty  [gemsetname]        # 清空 gemset</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># gemset 進階操作</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm gemset copy xxx yyy               # 將 xxx 複製到 yyy，兩者都要存在</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm gemset rename xxx zzz             # 將 xxx 改名為 zzz</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 列出</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm gemset list                       # 列出目前 Ruby 版本的 gemset</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm gemset list_all                   # 列出所有 Ruby 版本中已安裝的 gemset</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 將 gem 安裝到 @global 以讓它套用到所有該版本的 gem</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm @global do gem install [gemsetname]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 說明</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm gemset                            # 看 gemset 指令說明</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"進入某資料節後自動載入-gemset\">進入某資料節後自動載入 gemset<a href=\"#進入某資料節後自動載入-gemset\" class=\"hash-link\" aria-label=\"進入某資料節後自動載入 gemset的直接連結\" title=\"進入某資料節後自動載入 gemset的直接連結\">​</a></h2><p>在該專案資料夾的根目錄建立一支 <code>.ruby-gemset</code>，內容寫上要套用的 gemset 名稱：</p><div class=\"language-shell codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-shell codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># .ruby-gemset</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">shopping_mall</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><p><a href=\"https://rvm.io/\" target=\"_blank\" rel=\"noopener noreferrer\">RVM</a> @ Official",
      "<a href=\"https://rvm.io/workflow/projects\" target=\"_blank\" rel=\"noopener noreferrer\">Typical RVM Project Workflow</a> @ RVM</p></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [指令] RubyGems gem CLI pjchender.dev": {
    "prefix": "hruby-on-rails [指令] RubyGems gem CLI pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[指令] RubyGems gem CLI</h1></header><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##              常用指令             ##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem -v                      # 告訴你 RubyGems 的版本</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem install [gemname]       # 安裝某個套件</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem list                    # 列出安裝的套件（locally）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem update --system         # 升級 RubyGems 的版本（不是 gems）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem update [gemname]        # 更新最新版本</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem update                  # 更新所有你安裝的Gems</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem install [gemname] -v    # x.x.x gemname 安裝特定版本</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem uninstall [gemname]     # 反安裝</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##              其他指令             ##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem help                        # 列出 gem 的說明文件</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem search [gemName] -d         # 搜尋遠端某一個 gem，並查看細項</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem server                      # 在本地端查看和所安裝的 gem 有關的文件</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem env                         # 查看 gem 所在環境</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem content [gemName]           # 查看某一個 gem 的所有檔案位置</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>想要找的 gem 安裝的位置可以透過，gem 安裝的位置在 <code>$PATH/gems</code> 裡面：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ echo $PATH        # /Users/pjchen/.rvm/gems/ruby-2.5.1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ cd /Users/pjchen/.rvm/gems/ruby-2.5.1/gems</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [指令] RVM 指令操作 CLI pjchender.dev": {
    "prefix": "hruby-on-rails [指令] RVM 指令操作 CLI pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[指令] RVM 指令操作 CLI</h1></header><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm list known                </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 檢視所有 RVM 中可安裝 Ruby 版本</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm list                      </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 檢視所有本機安裝的 ruby 版本</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">install</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.1</span><span class=\"token plain\">               </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 安裝特定版本的 Ruby</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm use </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.1</span><span class=\"token plain\">                   </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 使用特定版本的 Ruby，use 可以省略</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm use </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1.9</span><span class=\"token plain\">.1@gemset_name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm uninstall </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.3</span><span class=\"token plain\">.3           </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 移除特定版本的 Ruby</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"觀念\">觀念<a href=\"#觀念\" class=\"hash-link\" aria-label=\"觀念的直接連結\" title=\"觀念的直接連結\">​</a></h2><p>RVM 是一個用來作為 Ruby 版本管理的工具，而 Ruby Gemsets 則可以管理在該 Ruby 環境下所使用到的 gems。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"安裝流程\">安裝流程<a href=\"#安裝流程\" class=\"hash-link\" aria-label=\"安裝流程的直接連結\" title=\"安裝流程的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"ruby-on-rails-建議安裝方式for-mac-----透過-rvm\">Ruby on Rails 建議安裝方式（for MAC） --- 透過 RVM<a href=\"#ruby-on-rails-建議安裝方式for-mac-----透過-rvm\" class=\"hash-link\" aria-label=\"Ruby on Rails 建議安裝方式（for MAC） --- 透過 RVM的直接連結\" title=\"Ruby on Rails 建議安裝方式（for MAC） --- 透過 RVM的直接連結\">​</a></h3><ol><li>安裝 Homebrew (透過下載安裝 | MAC 套件管理)</li><li>安裝 RVM（需透過 brew 安裝前置環境）</li><li>安裝 Ruby （透過 RVM 安裝）</li><li>安裝 RubeGems （透過下載安裝 | Ruby 套件管理程式，指令簡稱 gem）</li><li>安裝 Rails （透過 RubyGems 安裝 ｜ Ruby 網頁開發框架）</li><li>安裝 Bundler（透過 RubyGems 安裝 ｜ Gems 套件管理）</li></ol><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"rvm-安裝\">RVM 安裝<a href=\"#rvm-安裝\" class=\"hash-link\" aria-label=\"RVM 安裝的直接連結\" title=\"RVM 安裝的直接連結\">​</a></h2><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># rvm 前置步驟 — 安裝 mpapis public key</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ brew </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">install</span><span class=\"token plain\"> gnupg gnupg2        </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 先透過 homebrew 安裝 gpg 程式</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># rvm 安裝選項</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">\\</span><span class=\"token plain\">curl -sSL https://get.rvm.io </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">|</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">bash</span><span class=\"token plain\"> -s stable    </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 安裝穩定版本</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">\\</span><span class=\"token plain\">curl -sSL https://get.rvm.io </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">|</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">bash</span><span class=\"token plain\">              </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 安裝最新版本</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 測試 rvm 是否安裝成功</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token builtin class-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token plain\"> rvm </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">|</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">head</span><span class=\"token plain\"> -n </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token plain\">                              </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 成功的話會回傳 RVM is a shell function</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># rvm 更新或重新安裝（按照上面的步驟重新執行一次安裝程式是可以的，或者可以透過下面的方式更新）</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm get stable                                     </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 更新 rvm 到穩定版</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm get </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">head</span><span class=\"token plain\">     w                                 </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 更新到最新版（有修正最新的 bug）</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 其他指令</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm use </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.4</span><span class=\"token plain\">.0 --default                           </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 將某版本設為登入 Terminal 時的預設</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm requirements                                  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 安裝所有 RVM 所依賴的套件</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm reset                                         </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 重置 rvm</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm uninstall </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.0</span><span class=\"token plain\">.0                               </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 移除特定版本的 rvm</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">which</span><span class=\"token plain\"> ruby                                        </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 查看 ruby 位置</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"透過-rvm-安裝並使用-ruby\">透過 RVM 安裝並使用 Ruby<a href=\"#透過-rvm-安裝並使用-ruby\" class=\"hash-link\" aria-label=\"透過 RVM 安裝並使用 Ruby的直接連結\" title=\"透過 RVM 安裝並使用 Ruby的直接連結\">​</a></h2><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 安裝 Ruby 步驟</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm list known                </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 檢視所有 RVM 中的 Ruby 版本</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">install</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.1</span><span class=\"token plain\">               </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 安裝特定版本的 Ruby</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm use </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.1</span><span class=\"token plain\">                   </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 使用特定版本的 Ruby，use 可以省略</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 檢查是否安裝成功</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ruby -v</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ruby </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.1</span><span class=\"token plain\">.1p76 </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2014</span><span class=\"token plain\">-02-24 revision </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">45161</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token plain\">x86_64-linux</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">which</span><span class=\"token plain\"> ruby                    </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 安裝成功的話路徑會改變</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">/home/mpapis/.rvm/rubies/ruby-2.1.1/bin/ruby</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他操作指令\">其他操作指令<a href=\"#其他操作指令\" class=\"hash-link\" aria-label=\"其他操作指令的直接連結\" title=\"其他操作指令的直接連結\">​</a></h2><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">#########################</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">#        其他指令操作     #</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">#########################</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm use </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.1</span><span class=\"token plain\"> --default         </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 為 shell 設定 Ruby 版本預設值（這會覆蓋掉系統的 Ruby）</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm remove </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.1</span><span class=\"token plain\">                </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 移除特定版本的 Ruby</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm info                      </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 目前使用的相關 Ruby 資料</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># Ruby 版本相關</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm --default use </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.1</span><span class=\"token plain\">.1         </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 設定打開終端機時預設的 Ruby 版本</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm use </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.4</span><span class=\"token plain\">.0                   </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 將 Ruby 切換到 2.4.0 版本（要先 install 過），use 可以省略</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm use system                  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 將 Ruby 版本假裝還原成系統預設值</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm use default                 </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 將 Ruby 切換到 RVM 預設的 Ruby 版本</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1.9</span><span class=\"token plain\">.1@gemsetname            </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 使用特定版本的 Ruby 和 gemset</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 列表</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm list                        </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 列出目前 rvm 安裝的 ruby 版本</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm list known                  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 檢查 rvm 中所有可安裝的 ruby 版本</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm list gemsets                </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 列出目前 rvm 中的 ruby 版本和所用的 gemset</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># Gem 相關</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rvm gemdir                         </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 查看 gem 所在檔案位置，也可以寫 echo $GEM_HOME</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"問題解決\">問題解決<a href=\"#問題解決\" class=\"hash-link\" aria-label=\"問題解決的直接連結\" title=\"問題解決的直接連結\">​</a></h2><ul><li><a href=\"https://stackoverflow.com/questions/9336596/rvm-installation-not-working-rvm-is-not-a-function\" target=\"_blank\" rel=\"noopener noreferrer\">rvm installation not working: “RVM is not a function”</a> @ stackOverflow</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><p>[官方]</p><ul><li><a href=\"https://rvm.io/\" target=\"_blank\" rel=\"noopener noreferrer\">RVM</a> @ RVM</li><li><a href=\"https://rvm.io/rvm/cli\" target=\"_blank\" rel=\"noopener noreferrer\">RVM Cli</a> @ RVM</li><li><a href=\"https://rvm.io/rvm/upgrading\" target=\"_blank\" rel=\"noopener noreferrer\">Upgrading RVM</a> @ RVM</li></ul><p>[影音]</p><ul><li><a href=\"https://teamtreehouse.com/library/installing-rails-on-mac\" target=\"_blank\" rel=\"noopener noreferrer\">Installing Rails on Mac</a> @ Treehouse</li><li><a href=\"https://www.youtube.com/watch?v=cQVb7fHFjSM\" target=\"_blank\" rel=\"noopener noreferrer\">How to use RVM</a> @ Youtube</li></ul><p>[文章]</p><ul><li><a href=\"http://cheat.errtheblog.com/s/rvm\" target=\"_blank\" rel=\"noopener noreferrer\">RVM CheatSheet</a></li><li><a href=\"http://ithelp.ithome.com.tw/articles/10158158\" target=\"_blank\" rel=\"noopener noreferrer\">Ruby gem 想要一機裝多個版本？RVM 來幫你！</a> @ iThome</li><li><a href=\"http://railsfun.tw/t/rvm/28\" target=\"_blank\" rel=\"noopener noreferrer\">RVM 安裝與使用教學</a> @ Rails Fun</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails Ruby on Rails 命名慣例整理 pjchender.dev": {
    "prefix": "hruby-on-rails Ruby on Rails 命名慣例整理 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>Ruby on Rails 命名慣例整理</h1><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"ruby\">Ruby<a href=\"#ruby\" class=\"hash-link\" aria-label=\"Ruby的直接連結\" title=\"Ruby的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"變數與方法\">變數與方法<a href=\"#變數與方法\" class=\"hash-link\" aria-label=\"變數與方法的直接連結\" title=\"變數與方法的直接連結\">​</a></h3><ul><li>結尾如果是<code>！</code>，執行方式和一般方法沒有差別，但通常用！結尾，表示會有「副作用」，例如，這個方法會改變原本的變數值，同時也表示它會有一個相對應不會改變原本變數值的方法。</li><li>結尾如果是<code>？</code>，這個方法經常會回傳表示 true 或 false 的物件。</li><li>結尾如果是<code>＝</code>，表示這個方法是指派方法（assignment method），在 assignment method 中，函式中的回傳值會被忽略，而是自動回傳參數的值。</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"rails\">Rails<a href=\"#rails\" class=\"hash-link\" aria-label=\"Rails的直接連結\" title=\"Rails的直接連結\">​</a></h2><p>在 Rails 中會自動將 class 名稱轉成複數的形式到資料庫找相對應的資料表：</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"database-table--model-class\">Database Table &amp; Model Class<a href=\"#database-table--model-class\" class=\"hash-link\" aria-label=\"Database Table &amp; Model Class的直接連結\" title=\"Database Table &amp; Model Class的直接連結\">​</a></h3><ul><li>Database Table： 複數小寫底線 (e.g., book_clubs)。</li><li>Model Class：單數大寫駝峰 (e.g., BookClub)。</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"database-columns\">Database Columns<a href=\"#database-columns\" class=\"hash-link\" aria-label=\"Database Columns的直接連結\" title=\"Database Columns的直接連結\">​</a></h3><ul><li>Foreign keys：這些欄位的名稱會以++單數小寫資料表名稱後面加上 <code>_id （singularized_table_name_id)</code>++，例如 <code>item_id</code>, <code>order_id</code>。</li><li>created_at</li><li>updated_at</li><li>lock_version</li><li>type</li><li>(association_name)<!-- -->_<!-- -->type</li><li>(table_name)<!-- -->_<!-- -->count</li></ul><blockquote><p><a href=\"https://docs.google.com/spreadsheets/d/143OLh_tn_abnzu54ce63gOvDe_SF1_WTiBui1f8U69Q/edit?usp=sharing\" target=\"_blank\" rel=\"noopener noreferrer\">Rails 命名慣例檔案</a> @ Google Sheet</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"views\">Views<a href=\"#views\" class=\"hash-link\" aria-label=\"Views的直接連結\" title=\"Views的直接連結\">​</a></h3><p>以小寫底線單數命名，如果是 <code>partial</code> 的話檔名最前面會加上底線 <code>_</code>，例如（<code>_form.html.erb</code>）。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"資料來源\">資料來源<a href=\"#資料來源\" class=\"hash-link\" aria-label=\"資料來源的直接連結\" title=\"資料來源的直接連結\">​</a></h2><ul><li><a href=\"http://guides.rubyonrails.org/active_record_basics.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Basics</a> @ RailsGuides</li><li><a href=\"http://railsbook.tw/chapters/10-mvc.html\" target=\"_blank\" rel=\"noopener noreferrer\">Model、View、Controller 三分天下</a> @ 為你自己學 Ruby on Rails</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Ruby] block, Proc 和 Lambda pjchender.dev": {
    "prefix": "hruby-on-rails [Ruby] block, Proc 和 Lambda pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Ruby] block, Proc 和 Lambda</h1></header><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-block-yield-proc-lambda\">keywords: <code>block</code>, <code>yield</code>, <code>Proc</code>, <code>lambda</code><a href=\"#keywords-block-yield-proc-lambda\" class=\"hash-link\" aria-label=\"keywords-block-yield-proc-lambda的直接連結\" title=\"keywords-block-yield-proc-lambda的直接連結\">​</a></h6><p>在 Ruby 裡，幾乎什麼東西都是物件，但其實還是有少數的例外，<strong>Block 就不是物件</strong>。也因此 Block 沒有辦法單獨的存在，也沒辦法把它指定給某個變數，像這樣的寫法都會造成語法錯誤（Syntax Error）：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">{ puts &quot;Hello, Ruby&quot; }            # 這樣會產生語法錯誤</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">action = { puts &quot;Hello, Ruby&quot; }   # 這樣也會產生語法錯誤</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"block\">Block<a href=\"#block\" class=\"hash-link\" aria-label=\"Block的直接連結\" title=\"Block的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立-block\">建立 Block<a href=\"#建立-block\" class=\"hash-link\" aria-label=\"建立 Block的直接連結\" title=\"建立 Block的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 第一種方式，用 do...end，通常用在多行的 block</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">do |token|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   # ...blockCode...</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 第二種方式，直接用 { |token| } 表示，通常用在單行的 block</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">{ |token| ... }</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"在-methods-中執行-block\">在 methods 中執行 block<a href=\"#在-methods-中執行-block\" class=\"hash-link\" aria-label=\"在 methods 中執行 block的直接連結\" title=\"在 methods 中執行 block的直接連結\">​</a></h3><p>如果想要讓附掛在 methods 後的 Block 執行，可使用 <code>yield</code> 方法，暫時把控制權交棒給 Block，等 Block 執行結束後再把控制權交回來：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 透過 yield 掛上 block</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def say_hello</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts &quot;開始&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  yield     # 把控制權暫時讓給附掛在 say_hello 後的 Block</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts &quot;結束&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">say_hello {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts &quot;這裡是 Block&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">=begin</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &quot;開始&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &quot;這裡是 Block&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &quot;結束&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">=end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-pipe-在-block-中代入參數token\">使用 pipe 在 block 中代入參數（token）<a href=\"#使用-pipe-在-block-中代入參數token\" class=\"hash-link\" aria-label=\"使用 pipe 在 block 中代入參數（token）的直接連結\" title=\"使用 pipe 在 block 中代入參數（token）的直接連結\">​</a></h3><p>Block 本質上是匿名函式，我們也可以在 Block 中代入參數，而 Block 中的 │ （pipe）就是這個匿名函式的參數，稱做 <code>token</code>，token 是在這個 Block 裡專屬的區域變數，Block 執行結束後就會失效了：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># pipe 中的變數是區域變數，離開 block 就找不到</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">5.times do |i|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts i     # 這個變數 i 只有在 Block 裡有效</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts i       # NameError，離開 Block 之後就失效</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>其他使用 pipe 代入 token 的例子：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 pipe 的例子 1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def say_hello</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts &quot;開始&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  yield 123      # 把控制權暫時讓給 Block， 並且傳數字 123 給 Block</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts &quot;結束&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">say_hello do | x |    # 這個 x 是來自 yield 方法，把 123 代入 |x|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts &quot;這裡是 Block，我收到了 #{x}&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 pipe 的例子 2</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def this_method_takes_a_block</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  yield(5)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">this_method_takes_a_block do |num|   # 把 5 代入 |num|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts num                           # 回傳 5</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 pipe 的例子 3</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def this_silly_method_too(num)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  yield(num + 5)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">this_silly_method_too(3) do |wtf|     # 把 3 + 5 代入 |wtf|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts wtf + 1                        # 回傳 9</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"block-的回傳值\">Block 的回傳值<a href=\"#block-的回傳值\" class=\"hash-link\" aria-label=\"Block 的回傳值的直接連結\" title=\"Block 的回傳值的直接連結\">​</a></h3><p>yield 方法除了把控制權暫時的讓給後面的 Block 之外，<strong>Block 最後一行的執行結果也會自動變成 Block 的回傳值</strong>，所以可把 Block 當做判斷內容。</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 利用 Block 判斷元素內容（類似 Array.select{|i|}）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def pick(list)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  result = []</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  list.each do |i|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    result &lt;&lt; i if yield(i)   # 如果 yield 的回傳值是 true 的話，則將 block 的回傳值推入 result</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  result</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 這裡會把 pick() 中 i 的值代入 yield(i) 中，進而代入 pick 所接的 block |x| 中，</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 而 block 最後一行執行的結果，作為 yield(i) 的回傳值。</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">p pick([ *1. .10]) { | x | x % 2 == 0 }   # =&gt; [2, 4, 6, 8, 10]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">p pick([ *1. .10]) { | x | x &lt; 5 }        # =&gt; [1, 2, 3, 4]</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 利用 Block 寫出 times（類似 Number.times{|i|}）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def times_pj(time)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  i = 0</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  while i &lt; time</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    yield(i)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    i += 1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">times_pj(5){|x| puts &quot;This is my timer #{x}&quot; }</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"theme-admonition theme-admonition-info alert alert--info admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>信息</div><div class=\"admonitionContent_S0QG\"><p>簡單來說，method 中的代入 yield 的參數，會被代入 block 的 token ，然後 block 最後一行執行的結果，會再回傳給 yield。</p></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"proc\">Proc<a href=\"#proc\" class=\"hash-link\" aria-label=\"Proc的直接連結\" title=\"Proc的直接連結\">​</a></h2><p>Block 本身並不是物件，它沒辦法單獨的存在 Ruby 的世界裡，需要依附在方法或物件後面。但是透過 <code>Proc</code> 我們可以把 block 物件化，讓我們可以使用任何物件可以使用的方法；另外，我們也可以避免重複撰寫功能類似的 Block。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"透過-proc-將-block-物件化\">透過 Proc 將 block 物件化<a href=\"#透過-proc-將-block-物件化\" class=\"hash-link\" aria-label=\"透過 Proc 將 block 物件化的直接連結\" title=\"透過 Proc 將 block 物件化的直接連結\">​</a></h3><p>我們可以使用 <code>Proc.new &lt;BLOCK&gt;</code> 將 block 保存成物件：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># variable = Proc.new &lt;BLOCK&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">greeting = Proc.new { puts &quot;哈囉，世界&quot; }   # 使用 Proc 類別可把 Block 物件化</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hello_world = Proc.new do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts &quot;Hello, World!&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Proc 中也可以代入 token</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># varibale = Proc.new { |token| }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">say_hello_to = Proc.new { |name| puts &quot;你好，#{name}&quot;}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">say_hello_to = Proc.new do |name|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts &quot;Hello, #{name}&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"在函式中代入-proc\">在函式中代入 Proc<a href=\"#在函式中代入-proc\" class=\"hash-link\" aria-label=\"在函式中代入 Proc的直接連結\" title=\"在函式中代入 Proc的直接連結\">​</a></h3><p>透過 <code>Proc.new</code> 可以將 block 物件化，但當我們要附掛到 method 後時，要再轉回 block 使用，這時使用關鍵字 <code>&amp;</code>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 把 Proc 變回 block 代入方法中（使用＆）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = [1, 2, 3, 4, 5, 6]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">multiple_by_2 = Proc.new {|i| i * 2}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr_mulitple_by_2 = arr.collect(&amp;multiple_by_2)      # [2, 4, 6, 8, 10, 12]</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"直接執行-proc\">直接執行 Proc<a href=\"#直接執行-proc\" class=\"hash-link\" aria-label=\"直接執行 Proc的直接連結\" title=\"直接執行 Proc的直接連結\">​</a></h3><p>我們也可以直接執行透過 <code>Proc</code> 物件化後的 block：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 直接呼叫 Proc 的方式</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">say_hello_to.call(&quot;Aaron&quot;)  # 使用 call 方法</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">say_hello_to.(&quot;Aaron&quot;)      # 使用小括號（注意，有多一個小數點）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">say_hello_to[&quot;Aaron&quot;]       # 使用中括號</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">say_hello_to === &quot;Aaron&quot;    # 使用三個等號</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">say_hello_to.yield &quot;Aaron&quot;  # 使用 yield 方法</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"lambda\">lambda<a href=\"#lambda\" class=\"hash-link\" aria-label=\"lambda的直接連結\" title=\"lambda的直接連結\">​</a></h2><p>除了 <code>Proc</code> 之外，我們也可以透過 <code>lambda</code> 來將 block 物件化，用法和 <code>Proc</code> 幾乎一模一樣：</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立-lambda\">建立 lambda<a href=\"#建立-lambda\" class=\"hash-link\" aria-label=\"建立 lambda的直接連結\" title=\"建立 lambda的直接連結\">​</a></h3><p>使用關鍵字 <code>lambda</code>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">succ_lambda = lambda {|x| x + 2}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">succ_lambda.call(3)     # 5</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>使用 <code>-&gt;</code>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">succ_arrow = -&gt;(x){ x + 2 }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">succ_arrow.call(3)                        # 5</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"lambda-和-proc-的差異\">lambda 和 Proc 的差異<a href=\"#lambda-和-proc-的差異\" class=\"hash-link\" aria-label=\"lambda 和 Proc 的差異的直接連結\" title=\"lambda 和 Proc 的差異的直接連結\">​</a></h3><p><code>lambda</code> 和 <code>Proc</code> 幾乎一模一樣，除了：</p><ol><li>lambda 會檢查代入的參數數目，Proc 不會。因此當丟入的參數數目不對時，lambda 會丟出錯誤，而 proc 只會忽略未預期的參數並代入 nil。</li></ol><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">say_hello_lambda = lambda { |first_name, last_name| puts &quot;Hello #{first_name}, #{last_name}.&quot;}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">say_hello_proc = Proc.new { |first_name, last_name| puts &quot;Hello #{first_name}, #{last_name}.&quot;}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">say_hello_lambda.call(&#x27;Aaron&#x27;)  # wrong number of arguments (given 1, expected 2)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">say_hello_proc.call(&#x27;Aaron&#x27;)    # Hello Aaron, .</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ol start=\"2\"><li>當 lambda 內執行到 <code>return</code> 後，它會將控制權交回呼叫它的方法，繼續執行該方法後的片段；但當 Proc 內使用到 <code>return</code> 時，不會回到呼叫它的方法，而是立即跳出該方法：</li></ol><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def batman_ironman_proc</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  victor = Proc.new { return &quot;Batman will win!&quot; }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  victor.call</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &quot;Iron Man will win!&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts batman_ironman_proc         # Batman will win!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def batman_ironman_lambda</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  victor = lambda { return &quot;Batman will win!&quot; }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  victor.call</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &quot;Iron Man will win!&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts batman_ironman_lambda        # Iron Man will win!</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他補充\">其他補充<a href=\"#其他補充\" class=\"hash-link\" aria-label=\"其他補充的直接連結\" title=\"其他補充的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"block-不是參數\">Block 不是參數<a href=\"#block-不是參數\" class=\"hash-link\" aria-label=\"Block 不是參數的直接連結\" title=\"Block 不是參數的直接連結\">​</a></h3><p>Block 通常得像寄生蟲一樣依附或寄生在其它的方法或物件（或是使用某些類別把它物件化），但它不是參數。在下面這段範例中，name 才是參數，但 Block 不是。上面這段程式碼執行之後不會有任何錯誤，但 Block 裡要執行的動作也不會執行：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def say_hello_to(name)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # do something here</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">say_hello_to(&quot;悟空&quot;) { puts &quot;這裡是 Block&quot; }</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"https://www.codecademy.com/courses/\" target=\"_blank\" rel=\"noopener noreferrer\">Codecademy</a></li><li><a href=\"http://referrals.trhou.se/pojungchen\" target=\"_blank\" rel=\"noopener noreferrer\">Treehouse</a></li><li><a href=\"http://railsbook.tw/\" target=\"_blank\" rel=\"noopener noreferrer\">為你自己學 Ruby on Rails</a></li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Ruby] 變數（variable）與常數（Constant） pjchender.dev": {
    "prefix": "hruby-on-rails [Ruby] 變數（variable）與常數（Constant） pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Ruby] 變數（variable）與常數（Constant）</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"變數種類\">變數種類<a href=\"#變數種類\" class=\"hash-link\" aria-label=\"變數種類的直接連結\" title=\"變數種類的直接連結\">​</a></h2><table><thead><tr><th>種類</th><th>範例</th><th>預設值</th><th>說明</th></tr></thead><tbody><tr><td>區域變數 （local Variable）</td><td>name</td><td>沒有</td><td>被定義在 method 裡面的變數，它們沒辦法在該 method 外被使用。</td></tr><tr><td>實例變數 （instance Variable）</td><td>@name</td><td>nil</td><td>可以視為 class 的屬性（attribute），並會成為物件中的屬性（property）。它可以在該 class 中被存取，因此可以被 class 中的其他 method 使用。它也可以在特定的 object 中被使用，每一個物件的屬性會各別賦值，不會和其他的物件共享，它會隨著不同的物件而有不同的值。</td></tr><tr><td>類別變數（class Variable）</td><td>@@name</td><td>沒有</td><td>在同一個 class 所建立的實例物件中都可以存用，但沒辦法在不同的 class 中被取用。</td></tr><tr><td>全域變數（global Variable）</td><td>$name</td><td>nil</td><td>可以在不同的 class 中被取用。</td></tr></tbody></table><blockquote><p><a href=\"https://gist.github.com/dvliman/10402435\" target=\"_blank\" rel=\"noopener noreferrer\">各種 $ 開頭的變數</a> @ Gist</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"區域變數和實例變數local-variable--instance-variable\">區域變數和實例變數（local variable &amp; instance variable）<a href=\"#區域變數和實例變數local-variable--instance-variable\" class=\"hash-link\" aria-label=\"區域變數和實例變數（local variable &amp; instance variable）的直接連結\" title=\"區域變數和實例變數（local variable &amp; instance variable）的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def create_lv</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  local_var = &quot;區域變數無法在方法外被提取&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @instance_var = &quot;實例便是可以被任何特並的實例或物件提取&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">create_lv</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#puts local_var     # error:undefined local variable</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts @instance_var  #  get @instance_var in create_lv</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"類別變數class-variable\">類別變數（class variable）<a href=\"#類別變數class-variable\" class=\"hash-link\" aria-label=\"類別變數（class variable）的直接連結\" title=\"類別變數（class variable）的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Person</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # 在這裡定義類別變數（class variable）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @@people_count = 0</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def initialize(name)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    @name = name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    @@people_count += 1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def self.number_of_instances</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    @@people_count</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">matz = Person.new(&quot;Yukihiro&quot;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">dhh = Person.new(&quot;David&quot;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts &quot;Number of Person instances: #{Person.number_of_instances}&quot;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"全域變數global-variable\">全域變數（global variable）<a href=\"#全域變數global-variable\" class=\"hash-link\" aria-label=\"全域變數（global variable）的直接連結\" title=\"全域變數（global variable）的直接連結\">​</a></h3><p>定義的方式可以透過在所有的方法和類別外定義，或者如果想要在方法或類別內部定義全域變數時，使用 <code>$</code>。</p><p>在 MyClass 中定義的 local variable 並沒有辦法在 class 外被提取，但我們可以在 local variable 前面加上 <code>$</code> 讓它變成全域變數。</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class MyClass</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  $my_variable = &quot;Hello!&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts $my_variable</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"常數constant\">常數（Constant）<a href=\"#常數constant\" class=\"hash-link\" aria-label=\"常數（Constant）的直接連結\" title=\"常數（Constant）的直接連結\">​</a></h2><p>常數需要<strong>全部都是英語大寫，中間以底線分隔</strong>，例如，<code>THIS_IS_CONSTANCT</code>。</p><p>事實上，所有的類別、模組的名字都必需是常數。</p><p>要特別注意的是，<strong>Ruby 中常數的內容是可以修改而且不會發生錯誤（只會有警告，程式可以繼續運作</strong>）。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他慣例\">其他慣例<a href=\"#其他慣例\" class=\"hash-link\" aria-label=\"其他慣例的直接連結\" title=\"其他慣例的直接連結\">​</a></h2><ul><li>方法以 <code>!</code> 結尾，通常表示會改變該變數本身的值。</li><li>方法以 <code>?</code> 結尾，通常表示會回傳 Boolean。</li><li>方法以 <code>=</code> 結尾，通常表示這個方法是用來對此變數賦值（setter）。</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"虛擬變數pseudo-variable\">虛擬變數（pseudo variable）<a href=\"#虛擬變數pseudo-variable\" class=\"hash-link\" aria-label=\"虛擬變數（pseudo variable）的直接連結\" title=\"虛擬變數（pseudo variable）的直接連結\">​</a></h2><p>除了上述變數外，Ruby 還有一種稱之虛擬變數的東西，這是由 Ruby 自己定義的，例如 <code>nil</code>, <code>self</code>, <code>true</code>, <code>false</code>，虛擬變數通常有特別的用途或意義，所以內容不能被改變。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"變數多重指定\">變數多重指定<a href=\"#變數多重指定\" class=\"hash-link\" aria-label=\"變數多重指定的直接連結\" title=\"變數多重指定的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"一次賦予多個變數多個值\">一次賦予多個變數多個值<a href=\"#一次賦予多個變數多個值\" class=\"hash-link\" aria-label=\"一次賦予多個變數多個值的直接連結\" title=\"一次賦予多個變數多個值的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">x = 1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">y = 2</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">z = 3</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 可寫成</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">x, y, z = 1, 2, 3</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 也可寫成</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">x, y, z = [1, 2, 3]</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"當變數數目和賦值的數目不一樣多時\">當變數數目和賦值的數目不一樣多時<a href=\"#當變數數目和賦值的數目不一樣多時\" class=\"hash-link\" aria-label=\"當變數數目和賦值的數目不一樣多時的直接連結\" title=\"當變數數目和賦值的數目不一樣多時的直接連結\">​</a></h3><p>右邊比較多的情況（值比變數多）：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a, b = 1, 2, 3, 4</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># =&gt; a = 1, b = 2, 其它的內容被丟掉了</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a, *b = 1, 2, 3, 4</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># =&gt; a = 1, 變數 b 前面的星號會讓 b 接收剩下的數值變成一個陣列 [2, 3, 4]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">x, y, z = [1, 2, 3, 4, 5]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># =&gt; x = 1, y = 2, z = 3, 剩下的被忽略</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">x, y, *z = [1, 2, 3, 4, 5]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># =&gt; x = 1, y = 2, 同上，z 會接受其它的值變成陣列 [3, 4, 5]</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>左邊比較多的情況（變數比值多）</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a, b, c = 1, 2</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># =&gt; a = 1, b = 2, c 因為分不到值而變成 nil</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">x, y, z = [1, 2]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># =&gt; x = 1, y = 2, z 因為分不到值而變成 nil</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"變數交換\">變數交換<a href=\"#變數交換\" class=\"hash-link\" aria-label=\"變數交換的直接連結\" title=\"變數交換的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">x, y = y, x</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"https://www.codecademy.com/courses/\" target=\"_blank\" rel=\"noopener noreferrer\">Codecademy</a></li><li><a href=\"http://referrals.trhou.se/pojungchen\" target=\"_blank\" rel=\"noopener noreferrer\">Treehouse</a></li><li><a href=\"http://railsbook.tw/\" target=\"_blank\" rel=\"noopener noreferrer\">為你自己學 Ruby on Rails</a></li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Ruby] 流程控制（control flow）與運算子（operator） pjchender.dev": {
    "prefix": "hruby-on-rails [Ruby] 流程控制（control flow）與運算子（operator） pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Ruby] 流程控制（control flow）與運算子（operator）</h1></header><p>在 Ruby 裡因為所有的東西都是物件，在 Ruby 只有 <code>nil</code> 跟 <code>false</code> 會被當假的（false），除此這兩個之外，其它都是真的（true），<strong>包括數字 0、空陣列、空字串都是 true</strong>。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"控制結構control-structure\">控制結構（Control Structure）<a href=\"#控制結構control-structure\" class=\"hash-link\" aria-label=\"控制結構（Control Structure）的直接連結\" title=\"控制結構（Control Structure）的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"if-statement\">if statement<a href=\"#if-statement\" class=\"hash-link\" aria-label=\"if statement的直接連結\" title=\"if statement的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># if condition</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">if a &gt; b</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # do something ...</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">elsif a &gt; c</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    [do something]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">else</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    [do something else ...]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 把 if 放到後面: express if boolean</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts &quot;你是大人了&quot; if age &gt;= 18</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 三元運算子: boolean ? Do this if true: Do this if false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">title = (gender == 1) ? &quot;先生&quot; : &quot;小姐&quot;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"unless-statement\">unless statement<a href=\"#unless-statement\" class=\"hash-link\" aria-label=\"unless statement的直接連結\" title=\"unless statement的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 為了增加程式碼的可讀性，除了 if 之外，Ruby 還有提供 unless 語法可以用，unless 等於 if not 的效果，所以如果本來長得像這樣的：</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">unless age &gt; 18                # 等於 if not age &gt; 18</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts &quot;kid&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts &quot;kid&quot; unless age &gt; 18</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"case-statement\">case statement<a href=\"#case-statement\" class=\"hash-link\" aria-label=\"case statement的直接連結\" title=\"case statement的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 寫法一</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">case [variableName]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">when &quot;reverse&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # do something ...</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">when &quot;uppercase&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # do something ...</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">when &quot;both&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # do something ...</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">else</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # do something ...</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 寫法二</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">case language</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  when &quot;JS&quot; then puts &quot;Websites!&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  when &quot;Python&quot; then puts &quot;Science!&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  when &quot;Ruby&quot; then puts &quot;Web apps!&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  else puts &quot;I don&#x27;t know!&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"運算子operator\">運算子（Operator）<a href=\"#運算子operator\" class=\"hash-link\" aria-label=\"運算子（Operator）的直接連結\" title=\"運算子（Operator）的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"booleanlogical-operators\">Boolean/Logical Operators<a href=\"#booleanlogical-operators\" class=\"hash-link\" aria-label=\"Boolean/Logical Operators的直接連結\" title=\"Boolean/Logical Operators的直接連結\">​</a></h3><p>可以使用符號（<code>&amp;&amp;</code>, <code>||</code>, <code>!</code>）或文字（<code>and</code>, <code>or</code>, <code>not</code>），但符號有較高的優先權（precedence）：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># boolean / logical operators</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a &amp;&amp; b        # and</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a and b</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a || b        # or</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a or b</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">!a            # not</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">not a</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a &lt;=&gt; b       # combined comparison operator，如果 a &gt; b 回傳 1；a = b 回傳 0； a &lt; b 回傳 -1</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"theme-admonition theme-admonition-info alert alert--info admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>信息</div><div class=\"admonitionContent_S0QG\"><p><a href=\"https://stackoverflow.com/questions/1426826/difference-between-and-and-in-ruby\" target=\"_blank\" rel=\"noopener noreferrer\">Difference between and &amp;&amp; in ruby</a> @ StackOverflow</p></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"comparators--relational-operators\">comparators / relational operators<a href=\"#comparators--relational-operators\" class=\"hash-link\" aria-label=\"comparators / relational operators的直接連結\" title=\"comparators / relational operators的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># comparators / relational operators</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a == b            # Equal</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a != b            # Unequal</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a &lt;  b            # Less Than</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a &lt;= b            # Less than or equal to</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a &gt;  b</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a &gt;= b</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"conditional-assignment-operator\">conditional assignment operator<a href=\"#conditional-assignment-operator\" class=\"hash-link\" aria-label=\"conditional assignment operator的直接連結\" title=\"conditional assignment operator的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a ||= b        # a = a || b</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"https://www.codecademy.com/courses/\" target=\"_blank\" rel=\"noopener noreferrer\">Codecademy</a></li><li><a href=\"http://referrals.trhou.se/pojungchen\" target=\"_blank\" rel=\"noopener noreferrer\">Treehouse</a> - Ruby 運算子和控制結構</li><li><a href=\"http://railsbook.tw/\" target=\"_blank\" rel=\"noopener noreferrer\">為你自己學 Ruby on Rails</a></li><li><a href=\"https://ruby-doc.org/core-2.4.1/doc/syntax/control_expressions_rdoc.html\" target=\"_blank\" rel=\"noopener noreferrer\">Control Expression</a> @ Ruby Documentation</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Ruby] Error Handling（錯誤處理） pjchender.dev": {
    "prefix": "hruby-on-rails [Ruby] Error Handling（錯誤處理） pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Ruby] Error Handling（錯誤處理）</h1></header><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-error-exceptions\">keywords: <code>error</code>, <code>exceptions</code><a href=\"#keywords-error-exceptions\" class=\"hash-link\" aria-label=\"keywords-error-exceptions的直接連結\" title=\"keywords-error-exceptions的直接連結\">​</a></h6><p>放在 <code>begin</code> 和 <code>end</code> 這兩個關鍵字中的方法或程式區塊（block）都可以使用 <code>rescue</code> 來攔截例外狀況。在測試的過程中，我們可以使用 <code>raise</code> 來引發錯誤，讓它進入到 <code>rescue</code> 中：</p><ul><li><strong><code>retry</code></strong>：當你在 rescue 區塊中捕捉到例外時，可以使用 <code>retry</code> 來再次從 <code>begin</code> 開始執行。</li><li><strong><code>raise</code></strong>： 這個方法可以引發一個例外（exception），它會打斷原本程式執行的流動，例如使用 <code>raise</code>。</li><li><strong><code>else</code></strong>： 會寫在 <code>rescue</code> 後， <code>ensure</code> 之前，當程式碼的主體（<code>begin</code> 中的內容）沒有被引發例外的話，<code>else</code> 就會被執行。</li><li><strong><code>ensure</code></strong>： 則可以確保某段程式碼一定會在區塊的最後被執行，不論例外是否有被引發（<code>raise</code>）。</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Ruby Error Handling 語法</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">begin</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   #.. 要執行的程式主體</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   raise # 使用 raise 可以引發例外做為測試</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rescue</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   #.. 錯誤處理</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   retry # 這將會讓程式回到最開始的 begin 執行</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">else</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   #.. 如果沒有例外的話才會執行這段</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ensure</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   #.. finally ensure execution</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   #.. 放在這的內容總是會被執行到</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"範例程式\">範例程式<a href=\"#範例程式\" class=\"hash-link\" aria-label=\"範例程式的直接連結\" title=\"範例程式的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a = 0</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">begin</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts a</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  if a &lt; 5</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    raise   # 引發例外，進入 rescue</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  else</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    puts &quot;#{a} is bigger than 4&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rescue</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  a += 1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  retry</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"在-rails-中使用\">在 Rails 中使用<a href=\"#在-rails-中使用\" class=\"hash-link\" aria-label=\"在 Rails 中使用的直接連結\" title=\"在 Rails 中使用的直接連結\">​</a></h2><p>在 Rails 中使用的方式稍有不同（更簡潔）：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/controllers/events_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def destroy_file</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#.. do something</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># raise &#x27;123123&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rescue</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  #.. do some rescue</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"https://ihower.tw/rails/ruby.html#sec23\" target=\"_blank\" rel=\"noopener noreferrer\">Ruby 程式語言入門：錯誤處理</a> @ Rails 實戰聖經 by ihower</li><li><a href=\"https://medium.com/rails-ember-beyond/error-handling-in-rails-the-modular-way-9afcddd2fe1b\" target=\"_blank\" rel=\"noopener noreferrer\">Error Handling in Rails — The Modular Way</a> @ Medium</li><li><a href=\"https://stackoverflow.com/questions/3694153/catch-all-exceptions-in-a-rails-controller\" target=\"_blank\" rel=\"noopener noreferrer\">Catch all exceptions in rails controller</a> @ StackOverflow</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Ruby] 方法／函式（function / method） pjchender.dev": {
    "prefix": "hruby-on-rails [Ruby] 方法／函式（function / method） pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Ruby] 方法／函式（function / method）</h1></header><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"實例方法\">實例方法<a href=\"#實例方法\" class=\"hash-link\" aria-label=\"實例方法的直接連結\" title=\"實例方法的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 檢驗 object 中是否包含某一 method</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># [object].respond_to?(:[method])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 也可以不加冒號用引號寫 Obj.respond_to?(&#x27;[method]&#x27;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Obj.respond_to?(:next)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Obj.class.respond_to?([method]) # 檢驗某個 obj 的 class 是否包含某 class method</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">defined? (methods)      # 註1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 檢驗 object 是否為 nil</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.nil?               # [object].nil?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 檢驗物件類型</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">:hello.is_a? Symbol    # true，[object].is_a? String/Integer/Symbol</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">:hello.class           # Symbol，[object].class</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 找出某一物件內的方法來源（註2, 註3）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 也可以不加冒號用引號寫 Obj.method(&#x27;methodName&#x27;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Obj.method(:methodName)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"類別方法\">類別方法<a href=\"#類別方法\" class=\"hash-link\" aria-label=\"類別方法的直接連結\" title=\"類別方法的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">[Class].methods    # 列出物件內的所有方法</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"theme-admonition theme-admonition-info alert alert--info admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>信息</div><div class=\"admonitionContent_S0QG\"><p>註 1: <a href=\"https://stackoverflow.com/questions/2348521/in-ruby-how-do-i-check-if-method-foo-is-defined\" target=\"_blank\" rel=\"noopener noreferrer\">In Ruby, how do I check if method “foo=()” is defined?</a> @ StackOverflow",
      "註 2: <a href=\"https://stackoverflow.com/questions/175655/how-to-find-where-a-method-is-defined-at-runtime\" target=\"_blank\" rel=\"noopener noreferrer\">How to find where a method is defined at runtime?</a> @ StackOverflow",
      "註 3: <a href=\"https://makandracards.com/makandra/15157-ruby-find-where-a-method-is-defined\" target=\"_blank\" rel=\"noopener noreferrer\">Find where a method is defined</a></p></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"觀念\">觀念<a href=\"#觀念\" class=\"hash-link\" aria-label=\"觀念的直接連結\" title=\"觀念的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"implicit-return自動回傳\">implicit return（自動回傳）<a href=\"#implicit-return自動回傳\" class=\"hash-link\" aria-label=\"implicit return（自動回傳）的直接連結\" title=\"implicit return（自動回傳）的直接連結\">​</a></h3><p>在 Ruby 中方法如果沒有寫 <code>return</code> 則會自動回傳方法中最後的表達式。</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># method 會自動以 string 的格式 return（implicit return）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def add(a, b)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    a+b</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts add(3, 5)                        # 8</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"命名慣例\">命名慣例<a href=\"#命名慣例\" class=\"hash-link\" aria-label=\"命名慣例的直接連結\" title=\"命名慣例的直接連結\">​</a></h3><p>在 Ruby 中函式（function）就是方法（method），命名的開頭一般是小寫（也可以是 <!-- -->_<!-- --> 或數字）；結尾可以是？（問號，question）或！（驚嘆號，bang，exclamation）或＝（等號，equal）。</p><p>一般來說（慣例）：</p><ul><li>結尾如果是<code>！</code>，執行方式和一般方法沒有差別，但通常用！結尾，表示會有「副作用」，例如，這個方法會改變原本的變數值，同時也表示它會有一個相對應不會改變原本變數值的方法。</li><li>結尾如果是<code>？</code>，這個方法經常會回傳表示 true 或 false 的物件。</li><li>結尾如果是<code>＝</code>，表示這個方法是指派方法（assignment method），在 assignment method 中，函式中的回傳值會被忽略，而是自動回傳參數的值。</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># bang, exclamation, 驚嘆號：表示有副作用</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a = &quot;Hello everyone&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a.upcase       # 沒有驚嘆號，不會改變原本變數的值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts a         # &quot;Hello everyone&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a.upcase!      # 有驚嘆號，會改變原本變數的值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts a         # &quot;HELLO EVERYONE&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># question mark，問號：表示回傳 Boolean</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a = &quot;Hello everyone&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts a.nil?                     # false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts a.empty?                   # false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># equal，等號，回傳值會被忽略，直接回傳參數值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def a=</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  return 3</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts a= &quot;Hello&quot;, 7</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立方法method\">建立方法（method）<a href=\"#建立方法method\" class=\"hash-link\" aria-label=\"建立方法（method）的直接連結\" title=\"建立方法（method）的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立帶有參數的方法\">建立帶有參數的方法<a href=\"#建立帶有參數的方法\" class=\"hash-link\" aria-label=\"建立帶有參數的方法的直接連結\" title=\"建立帶有參數的方法的直接連結\">​</a></h3><p>建立一般的方法</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def add(a, b)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    puts &quot;{#a} + {#b} is {#a+b}&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立帶有參數預設值的方法\">建立帶有參數預設值的方法<a href=\"#建立帶有參數預設值的方法\" class=\"hash-link\" aria-label=\"建立帶有參數預設值的方法的直接連結\" title=\"建立帶有參數預設值的方法的直接連結\">​</a></h3><p>方法內可以定義參數預設值，預設值不一定要放在最前面或最後面，但是必須是組在一起的：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def add_values(a = 2, b)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    a + b</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">p add_values 3                        # 5</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def add_values(a, b = 4)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    a + b</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">p add_values 3                        # 7</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"為物件直接新增方法\">為物件直接新增方法<a href=\"#為物件直接新增方法\" class=\"hash-link\" aria-label=\"為物件直接新增方法的直接連結\" title=\"為物件直接新增方法的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">greeting = &quot;Hello &quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def greeting.sayhi(name)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts self + name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">greeting.sayhi(&quot;Mark&quot;)            # Hello Mark</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立具有具名參數的方法named-parameter-keyword-arguments\">建立具有具名參數的方法（named parameter, keyword arguments）<a href=\"#建立具有具名參數的方法named-parameter-keyword-arguments\" class=\"hash-link\" aria-label=\"建立具有具名參數的方法（named parameter, keyword arguments）的直接連結\" title=\"建立具有具名參數的方法（named parameter, keyword arguments）的直接連結\">​</a></h3><p>在定義 function 的參數時使用 <code>:</code> 可以達到具名參數的作用， <code>[變數名稱]:[變數預設值]</code> ，一旦對應到相同的名稱，就可以直接使用：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 : 定義具名參數</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def select_options(selected = nil, disabled: nil, prompt: nil)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts prompt      # 可以直接取得具名參數的值，&#x27;this is prompt&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts disabled    # 可以直接取得具名參數的值，&#x27;disabled&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用時可以透過 Hash 的方式帶入參數</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">select_options(1, prompt: &#x27;this is prompt&#x27;, disabled: &#x27;disabled&#x27;)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"呼叫方法\">呼叫方法<a href=\"#呼叫方法\" class=\"hash-link\" aria-label=\"呼叫方法的直接連結\" title=\"呼叫方法的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"可省略括號\">可省略括號（）<a href=\"#可省略括號\" class=\"hash-link\" aria-label=\"可省略括號（）的直接連結\" title=\"可省略括號（）的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= link_to &#x27;刪除&#x27;, user, method: :delete, data: { confirm: &#x27;sure?&#x27; }, class:&#x27;btn&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= link_to (&#x27;刪除&#x27;, user, method: :delete, data: { confirm: &#x27;sure?&#x27; }, class:&#x27;btn&#x27;) %        # 括號可以省略</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= link_to(&#x27;刪除&#x27;, user, {method: :delete, data: { confirm: &#x27;sure?&#x27; }, class:&#x27;btn&#x27;}) %&gt;&gt;     # 最後一個參數是 hash 時也可省略大括號</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"最後一個參數如果是-hash-可省略大括號--\">最後一個參數如果是 hash 可省略大括號 { }<a href=\"#最後一個參數如果是-hash-可省略大括號--\" class=\"hash-link\" aria-label=\"最後一個參數如果是 hash 可省略大括號 { }的直接連結\" title=\"最後一個參數如果是 hash 可省略大括號 { }的直接連結\">​</a></h3><p><strong>方法的最後一個參數如果是 hash 的話可以省略大括號</strong>。</p><p>這是因為如果第一個參數放 hash 的話，它無法辨識那是 block 或是 hash；如果放在中間，它無法辨識那是一個 {age: 18}，還是 {age: 18, favorite: ruby}</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def say_hello_to(name, options = {})</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &quot;Hello, #{name}. Your age is #{options[:age]}. Your favorite programming language is #{options[:favorite]}&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">say_hello_to &quot;Eddie&quot;, {age: 18, favorite: &#x27;ruby&#x27;}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">say_hello_to &quot;Eddie&quot;, age: 18, favorite: &#x27;ruby&#x27;   # 省略大括號</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參數解構decomposition\">參數解構（decomposition)<a href=\"#參數解構decomposition\" class=\"hash-link\" aria-label=\"參數解構（decomposition)的直接連結\" title=\"參數解構（decomposition)的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#########################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#       陣列解構賦值     ##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#########################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 可以在參數的地方多包一個括號來解構陣列</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def arr_decompo((a, b))</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  p a: a, b: b</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr_decompo([1,2])     # 回傳 {:a=&gt;1, :b=&gt;2}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 如果參數的地方所給予的陣列元素超過參數數目，則會自動省略</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def arr_decompo((a, b))</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts a: a, b: b</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr_decompo([1,2,3])   # 回傳 {:a=&gt;1, :b=&gt;2}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># splat arguments：可以使用*來將多餘的陣列元素轉為陣列</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def arr_decompo((a, *b))</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts a: a, b: b      # 回傳 {:a=&gt;1, :b=&gt;2}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr_decompo([1,2,3])   # 回傳 {:a=&gt;1, :b=&gt;[2, 3]}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"特殊情況\">特殊情況<a href=\"#特殊情況\" class=\"hash-link\" aria-label=\"特殊情況的直接連結\" title=\"特殊情況的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 當定義同樣名稱的方法時，原本的方法會被覆蓋（overriding）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts &quot;3&quot;.to_i       # 3</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class String</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def to_i</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        &quot;6&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts &quot;3&quot;.to_i       # 6</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 當定義同樣名稱的變數和方法時，會以區域變數優先</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">age = 18</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def age</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts 20</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">age       # 18（以區域變數優先）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">age()     # 20</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"http://ruby-doc.org/core-2.4.1/doc/syntax/methods_rdoc.html\" target=\"_blank\" rel=\"noopener noreferrer\">Methods</a> @ Ruby Documentation</li><li><a href=\"https://www.codecademy.com/courses/\" target=\"_blank\" rel=\"noopener noreferrer\">Codecademy</a></li><li><a href=\"http://referrals.trhou.se/pojungchen\" target=\"_blank\" rel=\"noopener noreferrer\">TreeHouse</a></li><li><a href=\"http://railsbook.tw/\" target=\"_blank\" rel=\"noopener noreferrer\">為你自己學 Ruby on Rails</a></li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Ruby] Hash pjchender.dev": {
    "prefix": "hruby-on-rails [Ruby] Hash pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Ruby] Hash</h1></header><p>在 Ruby 中的 Hash 就類似 JavaScript 中的 Object，是 key-value pairs。</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># hash with default value</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">my_hash = Hash.new([default_value])  # Hash.new constructor</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># a hash with default hash</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">my_default_hash = Hash.new{ |h, k| h[k] = { video_counts: 0, device_counts: 0 } }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">my_hash = {}                         # Hash literal notation</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"https://ruby-doc.org/core-2.4.1/Hash.html\" target=\"_blank\" rel=\"noopener noreferrer\">Ruby Documentation</a> @ 官方</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"目錄\">目錄<a href=\"#目錄\" class=\"hash-link\" aria-label=\"目錄的直接連結\" title=\"目錄的直接連結\">​</a></h2><p>[TOC]</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立雜湊-hash\">建立雜湊 Hash<a href=\"#建立雜湊-hash\" class=\"hash-link\" aria-label=\"建立雜湊 Hash的直接連結\" title=\"建立雜湊 Hash的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##              雜湊建立             ##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 建立空 hash</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">item = Hash.new        # {} hash constructor notation</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">item = Hash.new(0)     # 建立帶有預設值的 Hash</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">item = {}              # {} hash literal notation</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 建立帶有預設值的 Hash</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">item = Hash.new(&#x27;這裡放預設值&#x27;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts new_hash                      # {}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts new_hash[&#x27;abc&#x27;]               # {abc =&gt; 這裡放預設值}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 建立帶值的 hash</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">receipt = {&quot;item&quot; =&gt; &quot;apple&quot;, &quot;quantity&quot; =&gt; 1}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">receipt = {:item =&gt; &quot;apple&quot;, :quantity =&gt; 1}             # hash 的 key 可以是其他資料型態，最常用的是 symbol</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">receipt = {item: &quot;apple&quot;, quantity: 1}                   # 如果你的 key 是 symbol，那麼可以縮寫成這樣</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"取用雜湊\">取用雜湊<a href=\"#取用雜湊\" class=\"hash-link\" aria-label=\"取用雜湊的直接連結\" title=\"取用雜湊的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">receipt[&quot;item&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##              疊代雜湊             ##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.each do |key,value|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts &quot;KEY:#{key}, VALUE: #{value}&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-dig-來取用雜湊\">使用 dig() 來取用雜湊<a href=\"#使用-dig-來取用雜湊\" class=\"hash-link\" aria-label=\"使用 dig() 來取用雜湊的直接連結\" title=\"使用 dig() 來取用雜湊的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-hashdig\">keywords: <code>Hash.dig()</code><a href=\"#keywords-hashdig\" class=\"hash-link\" aria-label=\"keywords-hashdig的直接連結\" title=\"keywords-hashdig的直接連結\">​</a></h5><p>使用 <code>dig()</code> 可以避免當 Hash 中的內容不存在時</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash = {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  image: {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &#x27;1x&#x27;: &#x27;v6/customer_brands/openstack.png&#x27;,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &#x27;2x&#x27;: &#x27;v6/customer_brands/openstack@2x.png&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.dig(:image, :&#x27;1x&#x27;)      # &#x27;v6/customer_brands/openstack.png&#x27;,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.dig(:image, :foo, :bar)  # nil</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash[:image][:&#x27;1x&#x27;]        # &quot;v6/customer_brands/openstack.png&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash[:image][:&#x27;foo&#x27;][:&#x27;bar&#x27;]    # NoMethodError: undefined method `[]&#x27; for nil:NilClass</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建值取值檢測值\">建值、取值、檢測值<a href=\"#建值取值檢測值\" class=\"hash-link\" aria-label=\"建值、取值、檢測值的直接連結\" title=\"建值、取值、檢測值的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##              雜湊操作             ##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 增加 hash 的鍵值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">receipt[:price] = 300                                    # {:item=&gt;&quot;apple&quot;, :quantity=&gt;1, :price=&gt;300}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">receipt.store(:price, 300)                               # {:item=&gt;&quot;apple&quot;, :quantity=&gt;1, :price=&gt;300}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># hash 對於鍵的操作方法</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.keys                      # 取得 hash 所有的 key，[:item, :quantity, :price]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.has_key?(&quot;brand&quot;)         # 檢驗是否包含某一 key</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.key?(&quot;brand&quot;)             # 檢驗是否包含某一 key</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.member?(&quot;brand&quot;)          # 檢驗是否包含某一 key</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.each_key{|key|}           # 疊代所有的 key</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># hash 對於值的操作方法</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.values                       # 取得 hash 所有的 value，[&quot;apple&quot;, 1, 400]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.has_value?(400)              # 檢驗是否包含某一 value</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.value?(&quot;apple&quot;)              # 檢驗是否包含某一 value</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.values_at(:item, :price)     # 顯示對應該鍵的值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.each_value{|v|}              # 疊代所有的 value</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 其他方法（不會改變原 hash）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.length       # 回傳鍵值配對數</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.invert       # 鍵值互換後回傳</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.merge        # 將兩個 hash 合併後回傳，如果兩個 hash 有相同的鍵，則以 merge 中的為主</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.sort_by {|k, v| v}       # 根據 Hash 的 Value 排序</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.select{|k, v| v &gt; 10}    # 篩選 filter hash 中的內容</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.each{|k, v|}             # 疊代 hash</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 其他方法（會改變原 hash）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.shift         # 刪除第一個鍵值對（會改變原 hash）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.reverse!      # 改變（反轉）hash 中的排序</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.delete(&lt;key&gt;) # 刪除 hash 中的某一個key-value pair</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 參數中代入 hash</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts(a: &quot;A&quot;,b: &quot;B&quot;)                                      # {:a=&gt;&quot;A&quot;, :b=&gt;&quot;B&quot;}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts({:a =&gt; &quot;A&quot;, :b =&gt; &quot;B&quot;})                             # {:a=&gt;&quot;A&quot;, :b=&gt;&quot;B&quot;}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 建立 Hash 的預設值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">my_hash = Hash.new([default_value])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">my_default_hash = Hash.new{ |h, k| h[k] = { foo: 0, bar: 0 } }</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"https://stackoverflow.com/questions/16159370/ruby-hash-default-value-behavior\" target=\"_blank\" rel=\"noopener noreferrer\">Ruby Hash Default Behavior</a> @ StackOverflow</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"常用方法\">常用方法<a href=\"#常用方法\" class=\"hash-link\" aria-label=\"常用方法的直接連結\" title=\"常用方法的直接連結\">​</a></h2><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"hashmerge\">hash.merge()<a href=\"#hashmerge\" class=\"hash-link\" aria-label=\"hash.merge()的直接連結\" title=\"hash.merge()的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 類似 JavaScript 中的 {...obj, {foo: &#x27;bar&#x27;}}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">obj = {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  a: &#x27;a&#x27;,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  b: &#x27;b&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">obj_merge = {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  a: &#x27;aaa&#x27;,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  c: &#x27;c&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">obj.merge(obj_merge)  # {a: &quot;aaa&quot;, b: &quot;b&quot;, c: &quot;c&quot;}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"hashsort_by-key-value-\">hash.sort_by{ |key, value| }<a href=\"#hashsort_by-key-value-\" class=\"hash-link\" aria-label=\"hash.sort_by{ |key, value| }的直接連結\" title=\"hash.sort_by{ |key, value| }的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 根據 hash 的 value 排序</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.sort_by do |key, value|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  value</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"hashselect-key-value-\">hash.select{ |key, value| }<a href=\"#hashselect-key-value-\" class=\"hash-link\" aria-label=\"hash.select{ |key, value| }的直接連結\" title=\"hash.select{ |key, value| }的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">good_movies = movie_ratings.select { |k, v| v &gt; 3 }</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"hasheach_with_index-key-value--index\">hash.each_with_index {|(key, value) , index|}<a href=\"#hasheach_with_index-key-value--index\" class=\"hash-link\" aria-label=\"hash.each_with_index {|(key, value) , index|}的直接連結\" title=\"hash.each_with_index {|(key, value) , index|}的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ticket = {&quot;86138dda-2b1b-4cb1-8d51-05bedb77bc78&quot;=&gt;&quot;2&quot;, &quot;72b5f8f3-951b-4121-8c6a-ed8f7d711fff&quot;=&gt;&quot;1&quot;}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">data = []</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ticket.each_with_index do |(ticket_id, quantity), index|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  data.push([ &quot;autopick[#{index}][&#x27;size&#x27;]&quot;, quantity ])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  data.push([ &quot;autopick[#{index}][&#x27;category&#x27;]&quot;, ticket_id ])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts data</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他小技巧\">其他小技巧<a href=\"#其他小技巧\" class=\"hash-link\" aria-label=\"其他小技巧的直接連結\" title=\"其他小技巧的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"將雜湊根據值排序\">將雜湊根據值排序<a href=\"#將雜湊根據值排序\" class=\"hash-link\" aria-label=\"將雜湊根據值排序的直接連結\" title=\"將雜湊根據值排序的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">metrics = {&quot;sitea.com&quot; =&gt; 745, &quot;siteb.com&quot; =&gt; 9, &quot;sitec.com&quot; =&gt; 10 }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">metrics.sort_by {|_key, value| value}.to_h</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ==&gt; {&quot;siteb.com&quot; =&gt; 9, &quot;sitec.com&quot; =&gt; 10, &quot;sitea.com&quot;, 745}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li><a href=\"https://stackoverflow.com/questions/2540435/how-to-sort-a-ruby-hash-by-number-value\" target=\"_blank\" rel=\"noopener noreferrer\">How to sort a Ruby Hash by number value?</a> @ StackOverflow</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"計算某字出現的次數\">計算某字出現的次數<a href=\"#計算某字出現的次數\" class=\"hash-link\" aria-label=\"計算某字出現的次數的直接連結\" title=\"計算某字出現的次數的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts &#x27;Whatever sentence you want to enter&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">text = gets.chomp</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">words = text.split</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">frequencies = Hash.new(0)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">words.each do |item|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    frequencies[item] += 1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">frequencies = frequencies.sort_by do |key, count|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    count</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">frequencies.reverse!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">frequencies.each do |word, count|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    puts word + &quot; &quot; + count.to_s</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"https://www.codecademy.com/\" target=\"_blank\" rel=\"noopener noreferrer\">Codecademy</a></li><li><a href=\"https://ruby-doc.org/core-2.4.1/Hash.html\" target=\"_blank\" rel=\"noopener noreferrer\">Ruby Doc</a> @ 官方</li><li><a href=\"http://railsbook.tw/chapters/06-ruby-basic-2.html\" target=\"_blank\" rel=\"noopener noreferrer\">為你自己學 Ruby on Rails</a></li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Ruby] HTTP request 請求 pjchender.dev": {
    "prefix": "hruby-on-rails [Ruby] HTTP request 請求 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Ruby] HTTP request 請求</h1></header><p>發送一般的 GET 請求：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">begin</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  uri = URI(&quot;http://localhost:8080/api/v1/languages?limit=-1&quot;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  http = Net::HTTP.new(uri.host, uri.port)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  http.use_ssl = uri.scheme == &#x27;https&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  req = Net::HTTP::Get.new(uri, {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &#x27;Content-Type&#x27; =&gt; &#x27;application/json&#x27;,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &#x27;Version&#x27; =&gt; &#x27;1&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  })</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  res = http.request(req)   # 發送請求</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  if res.kind_of? Net::HTTPSuccess</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    res_body = JSON.parse(res.body) # 取得回應，並解析 JSON</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    languages = res_body[&#x27;data&#x27;][&#x27;languages&#x27;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rescue</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  flash.now[:alert] = &#x27;Failed to get option for languages, please try again later.&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>發送 POST 請求：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/controllers/pages_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def tester_create</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @tester = Tester.new(tester_params)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  if @tester.valid?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    begin</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      uri = URI(&quot;#{Rails.application.config.api_url}/tester/create&quot;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      http = Net::HTTP.new(uri.host, uri.port)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      http.use_ssl = uri.scheme == &#x27;https&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      req = Net::HTTP::Post.new(uri.path, {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        &#x27;Content-Type&#x27; =&gt;&#x27;application/json&#x27;,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        &#x27;Version&#x27; =&gt; &#x27;1&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      })</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      req.body = {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        name: @tester.name,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        email: @tester.email,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      }.to_json</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      res = http.request(req)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      if res.kind_of? Net::HTTPSuccess</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        redirect_to tester_confirmation_url, notice: &#x27;Thank you! We will contact you as soon as possible.&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      else</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        # 當請求不是 HTTPSuccess 時</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        res_body = JSON.parse(res.body)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        flash.now[:alert] = &#x27;Failed to register, please try again later.&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        render :tester</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    rescue</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      # 當 HTTP Request 有錯誤回應時</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      flash.now[:alert] = &#x27;Failed to register, please try again later.&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      render :tester</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  else</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    flash.now[:notice] = &#x27;Please make sure you have filled in all fields in the form.&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    render :tester</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Ruby] 迴圈及疊代（Loop and Iterator） pjchender.dev": {
    "prefix": "hruby-on-rails [Ruby] 迴圈及疊代（Loop and Iterator） pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Ruby] 迴圈及疊代（Loop and Iterator）</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"迴圈loop\">迴圈（Loop）<a href=\"#迴圈loop\" class=\"hash-link\" aria-label=\"迴圈（Loop）的直接連結\" title=\"迴圈（Loop）的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"while\">while<a href=\"#while\" class=\"hash-link\" aria-label=\"while的直接連結\" title=\"while的直接連結\">​</a></h3><p>while 後面 do 可省略</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">counter = 1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">while counter &lt; 11 do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts counter</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  counter += 1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"until\">until<a href=\"#until\" class=\"hash-link\" aria-label=\"until的直接連結\" title=\"until的直接連結\">​</a></h3><p>until 後面 do 可省略</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">counter = 1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">until counter &gt; 10 do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts counter</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # Add code to update &#x27;counter&#x27; here!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  counter += 1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"times-限制執行次數建議使用\">times: 限制執行次數（建議使用）<a href=\"#times-限制執行次數建議使用\" class=\"hash-link\" aria-label=\"times: 限制執行次數（建議使用）的直接連結\" title=\"times: 限制執行次數（建議使用）的直接連結\">​</a></h3><p>使用 <code>Number.times {...}</code> 來重複執行多次迴圈，類似 <code>for...in</code>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">10.times do |item|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    print &#x27;cool&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"forin-限制執行次數不建議使用\">for...in: 限制執行次數（不建議使用）<a href=\"#forin-限制執行次數不建議使用\" class=\"hash-link\" aria-label=\"for...in: 限制執行次數（不建議使用）的直接連結\" title=\"for...in: 限制執行次數（不建議使用）的直接連結\">​</a></h3><p>在 Ruby 中大部分不會去用 <code>for loop</code>，而是用 <code>each</code> 來做疊代，這是因為 for loop 的變數會存在於 for 迴圈外，但其他的 iterators 並不會。</p><p>Range Operator：</p><ul><li><code>...</code>：<code>1...10</code> 表示從 1 開始但++不包括++ 10。</li><li><code>..</code>：<code>1..10</code> 表示從 1 開始且++包括++ 10。</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">for num in 1...10</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts num</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts num   # 變數會存在 for 迴圈外</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"loop-不限制執行次數直到遇到-break\">loop: 不限制執行次數，直到遇到 break<a href=\"#loop-不限制執行次數直到遇到-break\" class=\"hash-link\" aria-label=\"loop: 不限制執行次數，直到遇到 break的直接連結\" title=\"loop: 不限制執行次數，直到遇到 break的直接連結\">​</a></h3><p>重複一直執行 loop 裡面的內容，直到 <code>break</code> 才停止：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">i = 20</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">loop do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  i -= 1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts &quot;#{i}&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  break if i &lt;= 0</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"next-if-break-if\">next if, break if<a href=\"#next-if-break-if\" class=\"hash-link\" aria-label=\"next if, break if的直接連結\" title=\"next if, break if的直接連結\">​</a></h3><p>我們可以在迴圈中使用 <code>next if</code> ，意思是如果符合這個條件的就，就幫我ㄊ這次迴圈，從下一次繼續執行（要注意在 <code>next if</code> 前的內容依然會執行到）：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">i = 20</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">loop do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  i -= 1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  next if i % 2 == 1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  print &quot;#{i}&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  break if i &lt;= 0</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"upto-downto\">upto, downto<a href=\"#upto-downto\" class=\"hash-link\" aria-label=\"upto, downto的直接連結\" title=\"upto, downto的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#           upto &amp; downto            #</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># upto</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">1.upto(5) do |i|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts &quot;hi, ruby #{i}&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot;L&quot;.upto(&quot;P&quot;){|character| puts character}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># downto</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">5.downto(1) do |i|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts &quot;hi, ruby #{i}&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"疊代iterator\">疊代（Iterator）<a href=\"#疊代iterator\" class=\"hash-link\" aria-label=\"疊代（Iterator）的直接連結\" title=\"疊代（Iterator）的直接連結\">​</a></h2><p>在 Ruby 中，大括號（<code>{ }</code>） 和 <code>do ... end</code> 是可以交替使用的，前者通常用在單行的程式碼，後者用在多行的程式碼區塊。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"陣列的疊代arrayeach\">陣列的疊代（Array.each）<a href=\"#陣列的疊代arrayeach\" class=\"hash-link\" aria-label=\"陣列的疊代（Array.each）的直接連結\" title=\"陣列的疊代（Array.each）的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#            陣列的疊代          #</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = [1,2,3,4,5]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Use While</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">i = 0</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">while i &lt; arr.length</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts arr[i]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  i += 1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Use Each</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = [1,2,3,4,5]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.each do |item|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts item += 2</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.each { |item| puts item += 2 }</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"hash-的疊代\">Hash 的疊代<a href=\"#hash-的疊代\" class=\"hash-link\" aria-label=\"Hash 的疊代的直接連結\" title=\"Hash 的疊代的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#            Hash 的疊代          #</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash = {apple: &quot;pen&quot;, pen: &quot;pineapple&quot;}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 疊代 key 和 value</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.each do |key, value|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts &quot;Key: #{key}, Value: #{value}&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 疊代 key</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.each_key do |key|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts key</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 疊代 value</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">hash.each_value do |value|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts value</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"http://referrals.trhou.se/pojungchen\" target=\"_blank\" rel=\"noopener noreferrer\">Treehouse</a></li><li><a href=\"http://codecademy.com/learn\" target=\"_blank\" rel=\"noopener noreferrer\">Codecademy</a></li><li><a href=\"http://railsbook.tw/\" target=\"_blank\" rel=\"noopener noreferrer\">為你自己學 Ruby on Rails</a></li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Ruby] 陣列（Array） pjchender.dev": {
    "prefix": "hruby-on-rails [Ruby] 陣列（Array） pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Ruby] 陣列（Array）</h1></header><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">## 陣列疊代</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.each{|element|}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.collect{|element|}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.map{|element|}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.select{|element|}    # 選出回傳為 true 的 element</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.reject{|element|}    # 刪掉回傳為 true 的 element</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.each.with_index{|element, index|}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.all?{|element|}      # 如果陣列裡面沒東西也會回傳 true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.any?{|element|}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">## 陣列取用</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.slice([start], [length])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">## 添加元素</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.push([element])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.insert([index], [element])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.unshift([element])  # 添加在最前面</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">## 其他</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.flatten      # 拆成一維陣列</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.uniq         # 移除陣列中相同的值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">[*&#x27;A&#x27;..&#x27;Z&#x27;]        # 產生 A...Z 的陣列</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">foo, bar = [&#x27;a&#x27;, &#x27;b&#x27;]  # 陣列的解構賦值</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Rails 方法</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.blank?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.present?</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"http://ruby-doc.org/core-2.4.1/Array.html\" target=\"_blank\" rel=\"noopener noreferrer\">Array</a> @ Ruby-doc</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"陣列建立\">陣列建立<a href=\"#陣列建立\" class=\"hash-link\" aria-label=\"陣列建立的直接連結\" title=\"陣列建立的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##              建立陣列             ##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Array.new constructor</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = Array.new()        # []</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = Array.new([repeat], [item])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Array literal notation</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = [ ]                # []</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 建立帶值陣列</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = Array.new(3,&quot;Hello&quot;)    # [&quot;Hello&quot;,&quot;Hello&quot;,&quot;Hello&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = [*1..52]                # [1, 2, 3, ..., 51, 52]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = [&quot;milk&quot;, &quot;is&quot;, &quot;good&quot;]  # [&quot;milk&quot;,&quot;is&quot;,&quot;good&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = %w(milk is good)        # 如果陣列的元素都是字串，可以使用 %w ，回傳[&quot;milk&quot;, &quot;is&quot;, &quot;good&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = %W(#{food} is good)     # 大寫的 %W 可以 inteporated</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 建立帶有 symbol 的陣列</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = %i(jan feb mar apr may jun jul aug sep oct nov dec)    # [:jan, :feb, :mar, :apr, :may, :jun, :jul, :aug, :sep, :oct, :nov, :dec]</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"陣列取用\">陣列取用<a href=\"#陣列取用\" class=\"hash-link\" aria-label=\"陣列取用的直接連結\" title=\"陣列取用的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##              陣列取用             ##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 提取陣列元素（不會改變原本的 arr）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = [&quot;milk&quot;, &quot;bread&quot;, &quot;egg&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr[0]            # 根據索引值，[&quot;milk&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr[-1]           # 根據索引值，[&quot;egg&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr[0..2]         # 根據索引值，[&quot;milk&quot;, &quot;bread&quot;, &quot;egg&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.at(1)         # 根據索引值，[&quot;bread&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.fetch(100, &quot;what&quot;)   # 根據索引值，如果無該元素，則以第二個參數為預設值，[&quot;what&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.first           # 提取第一個，[&quot;milk&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.last            # 提取最後一個，[&quot;egg&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.drop(2)         # 刪除前兩個陣列元素後再提取，[&quot;egg&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.slice(1,2)      # 從第 i 個元素開始取 j 個元素，[&quot;bread&quot;,&quot;egg&quot;]</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"陣列操作\">陣列操作<a href=\"#陣列操作\" class=\"hash-link\" aria-label=\"陣列操作的直接連結\" title=\"陣列操作的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##              陣列操作             ##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">######################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 為陣列添加元素（會改變原本的 arr）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = [&quot;milk&quot;, &quot;bread&quot;, &quot;egg&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr &lt;&lt; &quot;apples&quot;                  # 添加在最後面，[&quot;milk&quot;,&quot;bread&quot;,&quot;egg&quot;,&quot;apple&quot;]，concatenation operator</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.push(&quot;orange&quot;)               # 添加在最後面，[&quot;milk&quot;,&quot;bread&quot;,&quot;egg&quot;,&quot;orange&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr += [&quot;ice-cream&quot;, &quot;sugar&quot;]    # 添加在最後面，[&quot;milk&quot;, &quot;bread&quot;, &quot;egg&quot;, &quot;ice-cream&quot;, &quot;sugar&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.unshfit(3)                   # 添加在最前面，[3, &quot;milk&quot;, &quot;bread&quot;, &quot;egg&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.insert(1,&quot;carrot&quot;)           # 插入指定位置，[&quot;milk&quot;, &quot;carrot&quot;, &quot;bread&quot;, &quot;egg&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 為陣列刪除元素（會改變原本的 arr）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = [&quot;milk&quot;, &quot;bread&quot;, &quot;egg&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr -= [&quot;egg&quot;, &quot;milk&quot;]           # 刪除指定元素，[&quot;bread&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.pop                          # 刪除最後一個元素</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.shift                        # 刪除第一個元素</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 其他方法</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.length                       # 回傳陣列元素數目</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.count                        # 回傳陣列元素數目</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.count(&quot;milk&quot;)                # 回傳陣列元素為 milk 的數目</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.include?(&quot;apple&quot;)            # 陣列是否包含該元素</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.sort!                        # 根據陣列內容排序</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.sort! { |a, b| a &lt;=&gt; b }     # 如果要換排序方式可以改成 b &lt;=&gt; a</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">[*1..52].select { |i| i.odd? }    # 選擇陣列中的元素</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">[*1..52].sample 5                 # 從陣列中隨機抽取 5 個元素</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">[*1..52].shuffle                  # 將陣列元素順序打亂</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"輸出元素\">輸出元素<a href=\"#輸出元素\" class=\"hash-link\" aria-label=\"輸出元素的直接連結\" title=\"輸出元素的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.inspect</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.to_s</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.to_h     # 陣列轉雜湊</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"arrayto_h-陣列轉雜湊array-to-hash\">Array.to_h: 陣列轉雜湊（array to hash）<a href=\"#arrayto_h-陣列轉雜湊array-to-hash\" class=\"hash-link\" aria-label=\"Array.to_h: 陣列轉雜湊（array to hash）的直接連結\" title=\"Array.to_h: 陣列轉雜湊（array to hash）的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">[[:foo, :bar], [1, 2]].to_h    # =&gt; {:foo =&gt; :bar, 1 =&gt; 2}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"陣列疊代\">陣列疊代<a href=\"#陣列疊代\" class=\"hash-link\" aria-label=\"陣列疊代的直接連結\" title=\"陣列疊代的直接連結\">​</a></h2><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"arraycollecti疊代陣列\">Array.collect{|i|}：疊代陣列<a href=\"#arraycollecti疊代陣列\" class=\"hash-link\" aria-label=\"Array.collect{|i|}：疊代陣列的直接連結\" title=\"Array.collect{|i|}：疊代陣列的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 不會改變原陣列（immutable）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">new_array = array.collect {|i| i * 2}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 會改變原陣列（mutable）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">array.collect! {|i| i * 2}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"arraymapi疊代陣列\">Array.map{|i|}：疊代陣列<a href=\"#arraymapi疊代陣列\" class=\"hash-link\" aria-label=\"Array.map{|i|}：疊代陣列的直接連結\" title=\"Array.map{|i|}：疊代陣列的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = [1,2,3,4,5,6,7,8,9,0]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.map { |i| i * 2 }          # [2, 4, 6, 8, 10, 12, 14, 16, 18, 0]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.map do |item|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  item*2</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.map do |item|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  {name: item}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"arrayeachi疊代陣列\">Array.each{|i|}：疊代陣列<a href=\"#arrayeachi疊代陣列\" class=\"hash-link\" aria-label=\"Array.each{|i|}：疊代陣列的直接連結\" title=\"Array.each{|i|}：疊代陣列的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = [1,2,3,4,5,6,7,8,9,0]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.each do |item|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts item*2</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"arrayselecti篩選陣列中的內容filter\">Array.select{|i|}：篩選陣列中的內容（filter）<a href=\"#arrayselecti篩選陣列中的內容filter\" class=\"hash-link\" aria-label=\"Array.select{|i|}：篩選陣列中的內容（filter）的直接連結\" title=\"Array.select{|i|}：篩選陣列中的內容（filter）的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = [1, 2, 3, 4, 5, 6 ]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.select {|i| i % 2 == 0}    # [2, 4, 6]</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"利用-proc-轉換陣列裡的內容\">利用 Proc 轉換陣列裡的內容<a href=\"#利用-proc-轉換陣列裡的內容\" class=\"hash-link\" aria-label=\"利用 Proc 轉換陣列裡的內容的直接連結\" title=\"利用 Proc 轉換陣列裡的內容的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 將陣列內的數值轉成字串</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">number = [1,2,3,4,5]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">string = number.collect(&amp;:to_s)    # [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 將陣列內的字串轉成數值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">string = [&#x27;1&#x27;, &#x27;2&#x27;, &#x27;3&#x27;, &#x27;4&#x27;, &#x27;5&#x27;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">number = string.collect(&amp;:to_i)    # [1, 2, 3, 4, 5]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">number = string.map(&amp;:to_i)    # [1, 2, 3, 4, 5]</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"陣列方法\">陣列方法<a href=\"#陣列方法\" class=\"hash-link\" aria-label=\"陣列方法的直接連結\" title=\"陣列方法的直接連結\">​</a></h2><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"select--reject\">select &amp; reject<a href=\"#select--reject\" class=\"hash-link\" aria-label=\"select &amp; reject的直接連結\" title=\"select &amp; reject的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">filter = [1,2]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">target = [1,2,3,4,5]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># select: [1,2]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">target = target.select do |item|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  filter.include? item</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># reject: [3,4,5]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">target = target.reject do |item|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  filter.include? item</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他技巧\">其他技巧<a href=\"#其他技巧\" class=\"hash-link\" aria-label=\"其他技巧的直接連結\" title=\"其他技巧的直接連結\">​</a></h2><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"根據特定目標排序\">根據特定目標排序<a href=\"#根據特定目標排序\" class=\"hash-link\" aria-label=\"根據特定目標排序的直接連結\" title=\"根據特定目標排序的直接連結\">​</a></h4><p>讓 arr 根據 target 的順序排序：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">target = [&#x27;a&#x27;, &#x27;c&#x27;, &#x27;b&#x27;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr = [{name: &#x27;a&#x27;}, {name: &#x27;b&#x27;}, {name: &#x27;c&#x27;}]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr_sort_by_target = []</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.each do |item|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  index = target.index(item[:name])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  arr_sort_by_target[index] = item</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">puts arr_sort_by_target.inspect</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># [{:name=&gt;&quot;a&quot;}, {:name=&gt;&quot;c&quot;}, {:name=&gt;&quot;b&quot;}]</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><p><a href=\"https://ruby-doc.org/core-2.4.1/Array.html\" target=\"_blank\" rel=\"noopener noreferrer\">Array</a> @ Ruby-doc</p></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Ruby] 物件（object）、類別（class）和模組（module） pjchender.dev": {
    "prefix": "hruby-on-rails [Ruby] 物件（object）、類別（class）和模組（module） pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Ruby] 物件（object）、類別（class）和模組（module）</h1></header><p>透過類別（class）我們可以組織和產生許多具有相似屬性（attributes）和方法（methods）的物件。</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># CheatSheet</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Customer</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  attr_reader :id, :name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  attr_writer :id, :name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  attr_accessor :id, :name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def initialize(id, name)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    @id = id</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    @name = name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def self.greeting</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  private</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  protected</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [gem] AASM 狀態機 pjchender.dev": {
    "prefix": "hruby-on-rails [gem] AASM 狀態機 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[gem] AASM 狀態機</h1></header><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Gemfile</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># AASM is a continuation of the acts-as-state-machine rails plugin, built for plain Ruby objects.</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;aasm&#x27;, &#x27;~&gt; 4.12&#x27;, &#x27;&gt;= 4.12.0&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"instance-method\">instance method<a href=\"#instance-method\" class=\"hash-link\" aria-label=\"instance method的直接連結\" title=\"instance method的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># check status</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">job.running?           # =&gt; true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">job.may_run?           # =&gt; false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">job.aasm.current_state # stage3</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">job.aasm_state         # =&gt; &#x27;sleeping&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">job.aasm.human_state   # =&gt; &#x27;sleeping&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">job.aasm.states(:permitted =&gt; true).map(&amp;:name)   # show all permitted states (from initial state)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">job.aasm.states(:permitted =&gt; false).map(&amp;:name)  # show all non permitted states</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">job.aasm.events.map(&amp;:name)                       # show all possible (triggerable) events from the current state</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># change status 的方法要根據在 AASM 中 event 所定義的名稱</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">job.sleep  # =&gt; triggered :sleep</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">job.sleep! # =&gt; triggered :sleep!</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"class-method\">class method<a href=\"#class-method\" class=\"hash-link\" aria-label=\"class method的直接連結\" title=\"class method的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Job.aasm.states_for_select  # 產生可以直接套用到 select 的 options</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"erb-中帶入-select-options\">erb 中帶入 select options<a href=\"#erb-中帶入-select-options\" class=\"hash-link\" aria-label=\"erb 中帶入 select options的直接連結\" title=\"erb 中帶入 select options的直接連結\">​</a></h4><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= select_tag :transaction_state, options_for_select(Transaction.aasm.states_for_select), class: &#x27;form-control&#x27; %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"目錄\">目錄<a href=\"#目錄\" class=\"hash-link\" aria-label=\"目錄的直接連結\" title=\"目錄的直接連結\">​</a></h2><p>[TOC]</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"automatic-scope\">Automatic Scope<a href=\"#automatic-scope\" class=\"hash-link\" aria-label=\"Automatic Scope的直接連結\" title=\"Automatic Scope的直接連結\">​</a></h2><p>在 AASM 中內建了 Model Scope 讓我們使用：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 假設 Order 有 paid 的狀態，那麼可以直接使用</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Order.paid</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"i18n\">i18n<a href=\"#i18n\" class=\"hash-link\" aria-label=\"i18n的直接連結\" title=\"i18n的直接連結\">​</a></h2><p>AASM 支援在 i18n 定義：</p><div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token key atrule\">zh-TW</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token key atrule\">activerecord</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token key atrule\">attributes</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">order</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">status/waiting_for_payment</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 等待付款</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">status/paid</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 已付款</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">status/failed</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 已出貨</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">status/canceled</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 已逾期</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">status/expired</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 已退款</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">status/refunded</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 已退款</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用範例\">使用範例<a href=\"#使用範例\" class=\"hash-link\" aria-label=\"使用範例的直接連結\" title=\"使用範例的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./OnePageShop/app/models/order.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Order &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # Concerns macros</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  include AASM</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # Attributes related macros</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  aasm column: &#x27;status&#x27;, no_direct_assignment: true, requires_lock: true do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # 等待付款</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    state :waiting_for_payment, initial: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # 已付款</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    state :paid</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # 已出貨</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    state :shipped</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # 訂單逾期</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    state :expired</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # 已退款</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    state :refunded</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    after_all_transitions :generate_status_transition_log!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    event :mark_as_paid do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      transitions from: %i(placed waiting_for_payment), to: :paid</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    event :mark_as_shipped do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      transitions from: :paid, to: :shipped</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    event :mark_as_expired do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      transitions from: :waiting_for_payment, to: :expired</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    event :mark_as_refunded do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      transitions from: :paid, to: :refunded</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # ...</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  private</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # callback methods</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def can_not_be_destroyed</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      throw :abort</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def generate_status_transition_log!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      status_logs.create!(status: aasm.to_state)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./OnePageShop/app/models/transaction.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Transaction &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # Concerns macros</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  include AASM</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # Attributes related macros</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  aasm column: &#x27;status&#x27;, no_direct_assignment: true, requires_lock: true do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # 等待繳款</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    state :waiting_for_payment, initial: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # 已付款</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    state :paid</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # 交易失敗</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    state :failed</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # 取消</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    state :canceled</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # 逾期</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    state :expired</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # 已退款</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    state :refunded</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    after_all_transitions :generate_status_transition_log!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    event :mark_as_paid do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      transitions from: :waiting_for_payment, to: :paid</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    event :mark_as_paid do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      transitions from: :waiting_for_payment, to: :failed</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    event :mark_as_canceled do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      transitions from: :waiting_for_payment, to: :canceled</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    event :mark_as_expired do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      transitions from: :waiting_for_payment, to: :expired</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    event :mark_as_refunded, after: :check_all_transactions_refunded! do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      transitions from: :paid, to: :refunded</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # callbacks</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  after_initialize :generate_trade_number</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  after_create :generate_status_change_log!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  after_update :update_order_status!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  private</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # callback methods</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def generate_status_change_log!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      status_logs.create!(status: aasm.current_state)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def generate_status_transition_log!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      status_logs.create!(status: aasm.to_state)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def update_order_status!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      return if payment_info.nil?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      if self.paid?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        # set all waiting for payment transaction as canceled</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        self.order.transactions.waiting_for_payment.each do |transaction|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">          transaction.mark_as_canceled! if transaction.may_mark_as_canceled?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        self.order.mark_as_paid! if self.order.may_mark_as_paid?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def check_all_transactions_refunded!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      # 若沒有其餘等待付款或已付款的交易，則將訂單狀態改為已退款</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      if !Transaction.where(order_id: self.order_id, status: %i(waiting_for_payment paid)).exists?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        self.order.mark_as_refunded!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"https://github.com/aasm/aasm\" target=\"_blank\" rel=\"noopener noreferrer\">AASM</a> @ github</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Action Controller Overview pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Action Controller Overview pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Action Controller Overview</h1></header><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-params-permit-fetch-require-querystring\">keywords: <code>params</code>, <code>permit</code>, <code>fetch</code>, <code>require</code>, <code>queryString</code><a href=\"#keywords-params-permit-fetch-require-querystring\" class=\"hash-link\" aria-label=\"keywords-params-permit-fetch-require-querystring的直接連結\" title=\"keywords-params-permit-fetch-require-querystring的直接連結\">​</a></h5><p>在 Rails 中，當我們使用 Scaffold 時，會自動產生幾個 controller，像是 <code>index</code>, <code>show</code>, <code>new</code>, <code>edit</code>, <code>create</code>, <code>update</code> 和 <code>destroy</code>，這幾個是 Rails 中的保留字。</p><blockquote><p><a href=\"http://guides.rubyonrails.org/action_controller_overview.html\" target=\"_blank\" rel=\"noopener noreferrer\">Action Controller Overview</a> @ Rails Guides</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"parameters\">Parameters<a href=\"#parameters\" class=\"hash-link\" aria-label=\"Parameters的直接連結\" title=\"Parameters的直接連結\">​</a></h2><p>在網頁應用程式中通常有兩種獲取參數（parameters）的方式：</p><ul><li>一種是 <code>query string parameters</code>，這通常是透過 <code>GET</code> 方法帶在 URL 的 <code>?</code> 後；</li><li>一種是 <code>POST data</code>，通常是透過 <code>POST</code> 方法傳送到後端。</li></ul><p>在 Rails 中並沒有區分這兩種 parameters ，他們都可以在 controller 中透過 <code>params</code> 這個 hash 取得。<code>params</code> 這個物件就和 <code>Hash</code> 沒什麼差別，但是可以讓你透過 <code>Symbol</code> 或 <code>String</code> 都可以當作鍵（Key）。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"hash-and-array-parameters\">Hash and Array Parameters<a href=\"#hash-and-array-parameters\" class=\"hash-link\" aria-label=\"Hash and Array Parameters的直接連結\" title=\"Hash and Array Parameters的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"array-parameters\">Array parameters<a href=\"#array-parameters\" class=\"hash-link\" aria-label=\"Array parameters的直接連結\" title=\"Array parameters的直接連結\">​</a></h4><p>如果我們需要傳送陣列資料，可以透過這樣的方式傳送：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">GET /clients?ids[]=1&amp;ids[]=2&amp;ids[]=3</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在 Controller 中會收到 <code>params[:ids]</code> 等同於 <code>[&quot;1&quot;, &quot;2&quot;, &quot;3&quot;]</code>。</p><blockquote><p>注意：parameter 的值總是會是字串，因此 Rails 不需要去猜測它的資料型別。</p></blockquote><p>如果傳送的參數是 <code>[nil]</code> 或 <code>[nil, nil, ...]</code> 那麼基於安全的理由，預設會全部替代為 <code>[]</code> 。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"hash-parameters\">Hash parameters<a href=\"#hash-parameters\" class=\"hash-link\" aria-label=\"Hash parameters的直接連結\" title=\"Hash parameters的直接連結\">​</a></h4><p>如果要傳送 Hash 的資料，則資料傳送可以像這樣：</p><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">form</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">accept-charset</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">UTF-8</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">action</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">/clients</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">method</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">post</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">text</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">client[name]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">Acme</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">text</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">client[phone]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">12345</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">text</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">client[address][postcode]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">12345</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">text</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">client[address][city]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">Carrot City</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">form</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如此將會收到 <code>params[:client]</code> ，其中內容會是：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">{</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &quot;name&quot; =&gt; &quot;Acme&quot;,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &quot;phone&quot; =&gt; &quot;12345&quot;,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &quot;address&quot; =&gt; { &quot;postcode&quot; =&gt; &quot;12345&quot;, &quot;city&quot; =&gt; &quot;Carrot City&quot; }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>可以注意到 <code>params[:client][:address]</code> 會是 hash 裡面又包著 hash</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"json-parameters\">JSON Parameters<a href=\"#json-parameters\" class=\"hash-link\" aria-label=\"JSON Parameters的直接連結\" title=\"JSON Parameters的直接連結\">​</a></h2><p>如果資料傳送的 <code>Content-Type</code> 設成是 <code>application/json</code> 的話，Rails 會自動將資料存到 <code>params</code> 這個 hash 中。因此，如果傳送的資料是：</p><div class=\"language-json codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// JSON</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"> </span><span class=\"token property\">&quot;company&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"> </span><span class=\"token property\">&quot;name&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;acme&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token property\">&quot;address&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;123 Carrot Street&quot;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>會得到 <code>params[:company]</code> 且值為 <code>{ &quot;name&quot; =&gt; &quot;acme&quot;, &quot;address&quot; =&gt; &quot;123 Carrot Street&quot; }</code>。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"routing-parameters\">Routing Parameters<a href=\"#routing-parameters\" class=\"hash-link\" aria-label=\"Routing Parameters的直接連結\" title=\"Routing Parameters的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-controller_name-action_name\">keywords: <code>controller_name</code>, <code>action_name</code><a href=\"#keywords-controller_name-action_name\" class=\"hash-link\" aria-label=\"keywords-controller_name-action_name的直接連結\" title=\"keywords-controller_name-action_name的直接連結\">​</a></h5><p><code>params</code> 這個 hash 總是會包含 <code>:controller</code> 和 <code>:action</code> 這兩個 key，但你還是應該使用 <code>controller_name</code> 和 <code>action_name</code> 這兩個方法，而不是直接使用該 key 取值。</p><p>其他定義在路由中的參數像是 <code>:id</code> 也可以透過相同的方法取得，假設我們在路由中設定個參數叫做 <code>:status</code>：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">get &#x27;/clients/:status&#x27; =&gt; &#x27;clients#index&#x27;, foo: &#x27;bar&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>當使用者進入 <code>/clients/active</code> 的 URL 時，<code>params[:status]</code> 就會被設成 <code>&quot;active&quot;</code>，而且當這個路由被使用時， <code>params[:foo] </code> 的值就會是 <code>&quot;bar&quot;</code> （就像透過 <code>query string</code> 設定一樣）。</p><p>在 <code>params</code> 中，<code>params[:action]</code> 會是 <code>&quot;index&quot;</code> ，而 <code>params[:controller]</code> 會是 <code>&quot;clients&quot;</code>。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"strong-parameters\">Strong Parameters<a href=\"#strong-parameters\" class=\"hash-link\" aria-label=\"Strong Parameters的直接連結\" title=\"Strong Parameters的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-strong-parameters-mass-assignments-require-permit\">keywords: <code>strong parameters</code>, <code>mass assignments</code>, <code>require</code>, <code>permit</code><a href=\"#keywords-strong-parameters-mass-assignments-require-permit\" class=\"hash-link\" aria-label=\"keywords-strong-parameters-mass-assignments-require-permit的直接連結\" title=\"keywords-strong-parameters-mass-assignments-require-permit的直接連結\">​</a></h5><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"whitelist-parameters\">WhiteList parameters<a href=\"#whitelist-parameters\" class=\"hash-link\" aria-label=\"WhiteList parameters的直接連結\" title=\"WhiteList parameters的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"paramsrequire-或-paramsfetch\">params.require 或 params.fetch<a href=\"#paramsrequire-或-paramsfetch\" class=\"hash-link\" aria-label=\"params.require 或 params.fetch的直接連結\" title=\"params.require 或 params.fetch的直接連結\">​</a></h4><p>一般來說為了避免不安全的參數進入後端，如果 Action Controller 中所拿到的參數沒有加入白名單前，都是禁止進入 <code>Active Model</code> 的。因此要傳入 Model 的參數都會先經過處理，通常會放在 controller 的 <code>private</code> 中：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class PeopleController &lt; ActionController::Base</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # 由於 params[:person] 這個參數並未被允許，</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # 因此會噴 ActiveModel::ForbiddenAttributesError 的錯誤</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def create</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    Person.create(params[:person])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # 由於在 private method 中已經定義了 person_params 是可被允許的參數</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # 因此可以成功 update! 但若 params[:person] 不存在時（使用 params.require），</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # 會因為缺乏參數而噴 ActionController::ParameterMissing 的錯誤</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def update</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    person = current_account.people.find(params[:person])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    person.update!(person_params)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    redirect_to person</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  private</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # 使用 private method 來封裝可允許的參數</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # require(:person) 表示可以允許 person 物件</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # .permit(:name, :age) 表示允許 person 物件裡面的 :name 和 :age 物件</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def person_params</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      params.require(:person).permit(:name, :age)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      # params.fetch(:product, {}).permit(:title, :description)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>require 和 fetch 的主要差異在</p><ul><li>當 require 的 Hash 如果不存在時，會直接噴錯（ActionController::ParameterMissing: param is missing or the value is empty: product）</li><li>當 fetch 的 Hash 不存在時，不會直接噴錯，而是會得到空的 Hash</li></ul></blockquote><p>傳進來的資料格式長這樣：</p><div class=\"language-json codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-json codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">&quot;id&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">&quot;person&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">&quot;name&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;Aaron&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">&quot;age&quot;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">29</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"permitted-scalar-values\">Permitted Scalar Values<a href=\"#permitted-scalar-values\" class=\"hash-link\" aria-label=\"Permitted Scalar Values的直接連結\" title=\"Permitted Scalar Values的直接連結\">​</a></h3><p>如果只想允許某些單一參數，可以使用：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">params.permit(:id)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如果想要允許單一參數，並且限制型別：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">params.permit(id: [])</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"session-and-flash\">Session and Flash<a href=\"#session-and-flash\" class=\"hash-link\" aria-label=\"Session and Flash的直接連結\" title=\"Session and Flash的直接連結\">​</a></h2><blockquote><p><a href=\"http://guides.rubyonrails.org/action_controller_overview.html#session\" target=\"_blank\" rel=\"noopener noreferrer\">Action Controller Overview: Session</a> @ RailsGuides</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"session\">Session<a href=\"#session\" class=\"hash-link\" aria-label=\"Session的直接連結\" title=\"Session的直接連結\">​</a></h3><p>在 Rails 中 Session 可以像 Hash 一樣被使用，取用 session 的內容，只需使用 <strong><code>session[:session_key]</code></strong>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 取用 session 內容</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def current_user</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @_current_user ||= session[:current_user_id] &amp;&amp;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  User.find_by(id: session[:current_user_id])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>使用 <strong><code>session[:session_key]</code></strong> 即可儲存 session：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 儲存 session 內容</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def create</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  if user = User.authenticate(params[:username], params[:password])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    session[:current_user_id] = user.id</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    redirect_to root_url</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>若要移除 session 內的內容，只需將它設成 <code>nil</code> 即可：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def destroy</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # Remove the user id from the session</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @_current_user = session[:current_user_id] = nil</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  redirect_to root_url</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"flash\">Flash<a href=\"#flash\" class=\"hash-link\" aria-label=\"Flash的直接連結\" title=\"Flash的直接連結\">​</a></h3><blockquote><p><a href=\"http://api.rubyonrails.org/v5.2.0/classes/ActionDispatch/Flash/FlashHash.html\" target=\"_blank\" rel=\"noopener noreferrer\">FlashHash</a> @ Rails API</p></blockquote><p>flash 是一種特別形式的 session，它的值只會在下一次的 request 中可以被使用，因此經常會用來處理錯誤訊息。</p><p>flash 的使用方式和 session 一樣，可以作為 Hash 使用：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># foo_controllers.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># flash 的內容會在下一次 request 中可以被使用</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def destroy</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  session[:current_user_id] = nil</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  flash[:notice] = &quot;You have successfully logged out.&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # flash.now[:error] = &quot;Could not save client&quot;   # 不要在下次 request 才拿到</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  redirect_to root_url</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>除了使用預設的 flash_key 像是 <code>notice</code>, <code>alert</code>，也可以自訂 flash 的內容：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># foo_controllers.eb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用預設的 flash</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">redirect_to root_url, notice: &quot;You have successfully logged out.&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">redirect_to root_url, alert: &quot;You&#x27;re stuck here!&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 自訂 flash</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">redirect_to root_url, flash: { just_signed_up: &#x27;Welcome&#x27;, referral_code: 1234 }</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在下一次的 request 中（除非使用 <code>flash.now[]</code>），即可在 View 中使用到此 flash：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;html&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;!-- &lt;head/&gt; --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;body&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;!-- 列出所有 flash 的內容 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;% flash.each do |name, msg| -%&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      &lt;%= content_tag :div, msg, class: name %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;% end -%&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;!-- more content --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/body&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/html&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>使用 flash 預設的 <code>notice</code>, <code>alter</code>：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% if notice %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;%= render &#x27;shared/flash.html&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% if alter %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;%= render &#x27;shared/flash.html&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>或者呼叫特定 key 的 flash 內容：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% if flash[:just_signed_up] %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;p class=&quot;welcome&quot;&gt;Welcome to our site!&lt;/p&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"generator\">Generator<a href=\"#generator\" class=\"hash-link\" aria-label=\"Generator的直接連結\" title=\"Generator的直接連結\">​</a></h2><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 新增 pages controller</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails g controller pages</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"將內容直接輸出到網頁\">將內容直接輸出到網頁<a href=\"#將內容直接輸出到網頁\" class=\"hash-link\" aria-label=\"將內容直接輸出到網頁的直接連結\" title=\"將內容直接輸出到網頁的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class PagesController &lt; ApplicationController</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def hello</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    puts &quot;Puts 的內容會出現在 Rails 的 console 中，可以在 Terminal 看到&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # render plain: &quot;&lt;h1&gt;你好，世界!&lt;/h1&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # render html: &quot;&lt;h1&gt;你好，世界!&lt;/h1&gt;&quot;.html_safe</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # render json: object.to_json</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # render template: &#x27;pages/index.html.erb&#x27;, layout: &#x27;application&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"http://guides.rubyonrails.org/action_controller_overview.html\" target=\"_blank\" rel=\"noopener noreferrer\">Action Controller Overview</a> @ Rails Guides</li><li><a href=\"http://referrals.trhou.se/pojungchen\" target=\"_blank\" rel=\"noopener noreferrer\">Treehouse</a></li><li><a href=\"http://railsbook.tw/\" target=\"_blank\" rel=\"noopener noreferrer\">為你自己學 Ruby on Rails</a></li><li><a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html\" target=\"_blank\" rel=\"noopener noreferrer\">Layout and Rendering</a> @ Rails Guide</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Action Mailer Basic pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Action Mailer Basic pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Action Mailer Basic</h1></header><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"generate-mailer\">Generate Mailer<a href=\"#generate-mailer\" class=\"hash-link\" aria-label=\"Generate Mailer的直接連結\" title=\"Generate Mailer的直接連結\">​</a></h3><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails g mailer AdminMailer</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"create-mailer-controller\">Create Mailer Controller<a href=\"#create-mailer-controller\" class=\"hash-link\" aria-label=\"Create Mailer Controller的直接連結\" title=\"Create Mailer Controller的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/mailers/admin_mailer.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class AdminMailer &lt; ApplicationMailer</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # default from: &#x27;info@passer.cc&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  layout &#x27;admin_mailer&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def admin_email(subject, content)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    @content = content</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    mail(subject: subject, to: Rails.application.secrets.admin_email_list)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"view-layout-templates-and-partials\">View: Layout, Templates and Partials<a href=\"#view-layout-templates-and-partials\" class=\"hash-link\" aria-label=\"View: Layout, Templates and Partials的直接連結\" title=\"View: Layout, Templates and Partials的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"template\">Template<a href=\"#template\" class=\"hash-link\" aria-label=\"Template的直接連結\" title=\"Template的直接連結\">​</a></h5><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- HTML</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">./app/views/admin_mailer/admin_email.html.erb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;h3&gt;Hello Rails Mailer&lt;/h3&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= render &quot;user_summary&quot;, user: &quot;Wavinfo Admin&quot; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- TEXT</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">./app/views/admin_mailer/admin_email.text.erb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Hello Rails Mailer</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= render &quot;user_summary&quot;, user: &quot;Wavinfo Admin&quot; %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"layout\">Layout<a href=\"#layout\" class=\"hash-link\" aria-label=\"Layout的直接連結\" title=\"Layout的直接連結\">​</a></h5><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--  HTML</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">./app/views/layouts/admin_mailer.html.erb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= yield %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--  TEXT</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">./app/views/layouts/admin_mailer.text.erb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= yield %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"partials\">Partials<a href=\"#partials\" class=\"hash-link\" aria-label=\"Partials的直接連結\" title=\"Partials的直接連結\">​</a></h5><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--  HTML</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">./app/views/admin_mailer/_user_summary.html.erb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;h4&gt;使用者資訊&lt;/h4&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--  TEXT</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">./app/views/admin_mailer/_user_summary.text.erb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">使用者資訊</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"preview\">Preview<a href=\"#preview\" class=\"hash-link\" aria-label=\"Preview的直接連結\" title=\"Preview的直接連結\">​</a></h3><p>建立 <code>test</code> 資料夾，但要注意這個資料夾並不在 <code>app</code> 資料夾內：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./test/mailers/previews/admin_mailer_preview.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class AdminMailerPreview &lt; ActionMailer::Preview</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def admin_email</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # preview the mailer template in</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # http://localhost:3000/rails/mailers/admin_mailer/admin_email.html</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    @content = &quot;Hello&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    AdminMailer.admin_email(&#x27;Passer 測試信&#x27;, @content)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"config\">Config<a href=\"#config\" class=\"hash-link\" aria-label=\"Config的直接連結\" title=\"Config的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./config/environments/development.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># To preview mailer</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">config.action_mailer.preview_path = &quot;#{Rails.root}/test/mailers/previews&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Other Mailer Config</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Rails.application.routes.default_url_options[:host] = &#x27;localhost:3000&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">config.action_mailer.default_url_options = { host: &#x27;localhost&#x27;, port: 3000 }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">config.action_mailer.delivery_method = :test</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">config.action_mailer.perform_deliveries = false</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他注意事項\">其他注意事項<a href=\"#其他注意事項\" class=\"hash-link\" aria-label=\"其他注意事項的直接連結\" title=\"其他注意事項的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"在-mailer-中使用圖片\">在 Mailer 中使用圖片<a href=\"#在-mailer-中使用圖片\" class=\"hash-link\" aria-label=\"在 Mailer 中使用圖片的直接連結\" title=\"在 Mailer 中使用圖片的直接連結\">​</a></h3><ul><li>圖片在使用時<strong>不可</strong>使用 SVG。</li><li>在 Rails 中可以設定 assets 的位置：</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./config/environments/production.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">config.action_mailer.asset_host = &#x27;https://passer.cc&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>接著就可以於 Template 使用 <code>image_tag</code></p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- ./app/views/layouts/order_mailer.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= image_tag &#x27;logo.png&#x27;, alt: &#x27;Passer&#x27;, style: &#x27;height: 27px; width: 139px; margin: 0 auto;&#x27; %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"http://guides.rubyonrails.org/action_mailer_basics.html\" target=\"_blank\" rel=\"noopener noreferrer\">Action Mailer Basic</a> @ RailsGuides</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Action Text Overview pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Action Text Overview pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Action Text Overview</h1></header><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywordsaction-text\">keywords：<code>action text</code><a href=\"#keywordsaction-text\" class=\"hash-link\" aria-label=\"keywordsaction-text的直接連結\" title=\"keywordsaction-text的直接連結\">​</a></h5><blockquote><p><a href=\"https://edgeguides.rubyonrails.org/action_text_overview.html\" target=\"_blank\" rel=\"noopener noreferrer\">Action Text</a> @ Edge RailsGuides</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"安裝\">安裝<a href=\"#安裝\" class=\"hash-link\" aria-label=\"安裝的直接連結\" title=\"安裝的直接連結\">​</a></h2><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails action_text:install</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用\">使用<a href=\"#使用\" class=\"hash-link\" aria-label=\"使用的直接連結\" title=\"使用的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"model\">Model<a href=\"#model\" class=\"hash-link\" aria-label=\"Model的直接連結\" title=\"Model的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/models/message.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Message &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_rich_text :content</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"controller\">Controller<a href=\"#controller\" class=\"hash-link\" aria-label=\"Controller的直接連結\" title=\"Controller的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class MessagesController &lt; ApplicationController</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def create</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    message = Message.create! params.require(:message).permit(:title, :content)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    redirect_to message</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"view\">View<a href=\"#view\" class=\"hash-link\" aria-label=\"View的直接連結\" title=\"View的直接連結\">​</a></h3><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%# app/views/messages/_form.html.erb %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_with(model: message) do |form| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;field&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= form.label :content %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= form.rich_text_area :content %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%# app/views/messages/show.html.erb %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= @message.content %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"客製化\">客製化<a href=\"#客製化\" class=\"hash-link\" aria-label=\"客製化的直接連結\" title=\"客製化的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"新增一顆-h2-的按鈕\">新增一顆 h2 的按鈕<a href=\"#新增一顆-h2-的按鈕\" class=\"hash-link\" aria-label=\"新增一顆 h2 的按鈕的直接連結\" title=\"新增一顆 h2 的按鈕的直接連結\">​</a></h3><p>建立一支 <code>trix_init.js</code>：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// ./app/javascript/packs/trix_init.js</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> </span><span class=\"token function-variable function\" style=\"color:rgb(130, 170, 255)\">trixInit</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> trix </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> e</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">target</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">addSubHeadingButton</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">trix</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword control-flow\" style=\"font-style:italic\">return</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">addSubHeadingButton</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">trix</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> toolBar </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> trix</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">toolbarElement</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// Creation of the sub-heading button</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> subHeadingButton </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token dom variable\" style=\"color:rgb(191, 199, 213)\">document</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">createElement</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;button&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  subHeadingButton</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">innerText</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;h2&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">setAttributes</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">subHeadingButton</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token literal-property property\">type</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;button&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">class</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;trix-button trix-button--icon trix-button--icon-heading-2&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token literal-property property\">title</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;subHeading&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token literal-property property\">tabindex</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;-1&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token string-property property\">&#x27;data-trix-attribute&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;subHeading&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// Attachment of the sub-heading button to the toolBar</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> headingButton </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> toolBar</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">querySelector</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;[data-trix-attribute=&quot;heading1&quot;]&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  headingButton</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">insertAdjacentElement</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;afterend&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> subHeadingButton</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// When the sub-heading button is clicked</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  subHeadingButton</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">addEventListener</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;click&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword control-flow\" style=\"font-style:italic\">if</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">trix</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">editor</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">attributeIsActive</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;subHeading&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      headingButton</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">setAttribute</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;disabled&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"> </span><span class=\"token keyword control-flow\" style=\"font-style:italic\">else</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      headingButton</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">removeAttribute</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;disabled&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">setAttributes</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">element</span><span class=\"token parameter punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token parameter\"> attributes</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword control-flow\" style=\"font-style:italic\">if</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">!</span><span class=\"token plain\">element </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">||</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">!</span><span class=\"token plain\">attributes</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token console class-name\" style=\"color:rgb(255, 203, 107)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">warn</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Element or attributes is not existed in setAttributes function&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword control-flow\" style=\"font-style:italic\">return</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token known-class-name class-name\" style=\"color:rgb(255, 203, 107)\">Object</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">entries</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">attributes</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">forEach</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token parameter\">key</span><span class=\"token parameter punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token parameter\"> value</span><span class=\"token parameter punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    element</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">setAttribute</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">key</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> value</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">module</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">exports</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> trixInit</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>接著在 <code>application.js</code> 中去載入 <code>trix_init.js</code> 這支檔案：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// app/javascript/packs/application.js</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">require</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;@rails/actiontext&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> </span><span class=\"token maybe-class-name\">Trix</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">require</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;trix&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> trixInit </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">require</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;./trix_init.js&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 告訴 Trix 當 attribute 是 subHeading 時，要產生 &lt;h2&gt; 的標籤</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token maybe-class-name\">Trix</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">config</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">textAttributes</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">subHeading</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">inheritable</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(255, 88, 116)\">true</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">tagName</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;h2&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// trix-initialize 時執行 trixInit</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token dom variable\" style=\"color:rgb(191, 199, 213)\">document</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">addEventListener</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;turbolinks:load&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token dom variable\" style=\"color:rgb(191, 199, 213)\">document</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">addEventListener</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;trix-initialize&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> trixInit</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(255, 88, 116)\">false</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"樣式\">樣式<a href=\"#樣式\" class=\"hash-link\" aria-label=\"樣式的直接連結\" title=\"樣式的直接連結\">​</a></h2><div class=\"language-scss codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-scss codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">trix-toolbar </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// REMOVE:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">max-width</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">730</span><span class=\"token unit\">px</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">margin</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\"> auto</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">.trix-button--icon-heading-1::before </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">background-image</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token url\" style=\"color:rgb(221, 221, 221)\">url</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;...&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">.trix-button--icon-heading-2::before </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">background-image</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token url\" style=\"color:rgb(221, 221, 221)\">url</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;...&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  .trix-button-group</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  .trix-button</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  .</span><span class=\"token property\">trix-button</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">not</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\">first-child</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">border</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">.trix-button::before </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">background-size</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">60</span><span class=\"token unit\">%</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">.trix-content </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">color</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token hexcode color\">#333333</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// REMOVE:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">max-width</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">730</span><span class=\"token unit\">px</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">margin</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\"> auto</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">&gt; div </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">font-size</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">16</span><span class=\"token unit\">px</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">line-height</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">24</span><span class=\"token unit\">px</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">letter-spacing</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">-0.003</span><span class=\"token unit\">em</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">margin-bottom</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">16</span><span class=\"token unit\">px</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">h2 </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">font-size</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">18</span><span class=\"token unit\">px</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">margin-bottom</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token unit\">rem</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">ul,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">  ol </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">margin-bottom</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token unit\">rem</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">padding-left</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">40</span><span class=\"token unit\">px</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">a </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">color</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token hexcode color\">#007bff</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">text-decoration</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> none</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">blockquote </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">margin-bottom</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2</span><span class=\"token unit\">rem</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">margin-top</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2</span><span class=\"token unit\">rem</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">font-style</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> italic</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">color</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token hexcode color\">#7f8c8d</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">font-size</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">22</span><span class=\"token unit\">px</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">line-height</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1.5</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">.attachment </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token property\">margin-bottom</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token unit\">rem</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">.attachment-gallery </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">&gt; action-text-attachment,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">    &gt; .attachment </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token property\">flex</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">33</span><span class=\"token unit\">%</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token property\">padding</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0.5</span><span class=\"token unit\">em</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token property\">max-width</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">33</span><span class=\"token unit\">%</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token selector parent important\" style=\"color:rgb(199, 146, 234)\">&amp;</span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">.attachment-gallery--2,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">    </span><span class=\"token selector parent important\" style=\"color:rgb(199, 146, 234)\">&amp;</span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">.attachment-gallery--4 </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">&gt; action-text-attachment,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">      &gt; .attachment </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token property\">flex-basis</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">50</span><span class=\"token unit\">%</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token property\">max-width</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">50</span><span class=\"token unit\">%</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">action-text-attachment </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">.attachment </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token property\">padding</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\"> </span><span class=\"token important\">!important</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token property\">max-width</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">100</span><span class=\"token unit\">%</span><span class=\"token plain\"> </span><span class=\"token important\">!important</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h3><ul><li>⭐ 在 toolbar 添加功能：<a href=\"https://github.com/basecamp/trix/issues/133\" target=\"_blank\" rel=\"noopener noreferrer\">What is the best way to extend the toolbar?</a></li><li>⭐ <a href=\"https://github.com/basecamp/trix/wiki/Configuration\" target=\"_blank\" rel=\"noopener noreferrer\">Trix Configuration</a> @ Official Github Wiki</li><li><a href=\"https://gist.github.com/pmhoudry/a0dc6905872a41a316135d42a5537ddb#file-trixupload-js-L14\" target=\"_blank\" rel=\"noopener noreferrer\">trixUpload.js</a> @ Gist</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Action View Form Helpers pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Action View Form Helpers pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Action View Form Helpers</h1></header><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-form_for-fields_for\">keywords: <code>form_for</code>, <code>fields_for</code><a href=\"#keywords-form_for-fields_for\" class=\"hash-link\" aria-label=\"keywords-form_for-fields_for的直接連結\" title=\"keywords-form_for-fields_for的直接連結\">​</a></h5><blockquote><p><a href=\"http://api.rubyonrails.org/v5.1/classes/ActionView/Helpers/FormHelper.html\" target=\"_blank\" rel=\"noopener noreferrer\">FormHelper</a> @ Ruby on Rails API",
      "<a href=\"http://guides.rubyonrails.org/form_helpers.html\" target=\"_blank\" rel=\"noopener noreferrer\">Action View Form Helpers</a> @ RailsGuides",
      "<a href=\"http://api.rubyonrails.org/v5.1/classes/ActionView/Helpers/FormTagHelper.html\" target=\"_blank\" rel=\"noopener noreferrer\">FormTagHelper</a> @ Ruby on Rails API",
      "<a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html\" target=\"_blank\" rel=\"noopener noreferrer\">FormBuilder</a> @ Ruby on Rails API</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"速查\">速查<a href=\"#速查\" class=\"hash-link\" aria-label=\"速查的直接連結\" title=\"速查的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"form_for\">form_for<a href=\"#form_for\" class=\"hash-link\" aria-label=\"form_for的直接連結\" title=\"form_for的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-form_forrecord-options---block\">keywords: <code>form_for(record, options = {}, &amp;block)</code><a href=\"#keywords-form_forrecord-options---block\" class=\"hash-link\" aria-label=\"keywords-form_forrecord-options---block的直接連結\" title=\"keywords-form_forrecord-options---block的直接連結\">​</a></h5><blockquote><p><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for\" target=\"_blank\" rel=\"noopener noreferrer\">form_for</a> @ Rails API</p></blockquote><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_for :post do |f| %&gt;          &lt;!-- 等同於： form_for &#x27;post&#x27; --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 直接在 form_for 帶入 model object --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_for @post do |f| %&gt;      &lt;!-- 等同於下面的寫法 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_for @post, as: :post, url: post_path(@post), method: :patch, html: { class: &quot;edit_post&quot;, id: &quot;edit_post_45&quot; } do |f| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--  --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_for(Post.new) do |f| %&gt;    &lt;!-- 等同於下面的寫法 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_for @post, as: :post, url: posts_path, html: { class: &quot;new_post&quot;, id: &quot;new_post&quot; } do |f| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 透過 format 可以指定回傳的資料型態  --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_for(@post, format: :json) do |f| %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li><strong><code>:url</code></strong>: 如果沒代的話預設會是傳到當前的 URL</li><li><strong><code>:html</code></strong>: 使用其他和 html 相關的 attributes</li><li><strong><code>:method</code></strong>: get, post, patch, put, delete</li><li><strong><code>:remote</code></strong>: 設為 <code>true</code> 時，為允許 Unobstrusive JavaScript drivers 控制表單發送的行爲，預設這個行為會是 AJAX Submit。</li><li><strong><code>:format</code></strong>：設定要求回傳的檔案型態。</li><li><code>:as</code>: 預設所有 <code>&lt;input name=&quot;&quot;&gt;</code> 中的 <code>name</code> 都會是該 model 的名稱，例如 <code>@post</code> 的當中的 input (<code>form.text_field :title</code>)欄位，會編譯成 <code>&lt;input name=post[title]&gt;</code>，因此在 controller 就可以透過 <code>params[:post]</code> 去取得各欄位的內容。若想要改變 name 的值就可以使用 <strong>:as</strong>。</li><li><code>:authenticity_token</code>: 只有在想要客製化 authenticity_token 或者不使用它時（<code>false</code>）才會加上這個選項</li><li><code>:enforce_utf8</code></li><li><code>:namespace</code>: 會在 form 當中的 id 欄位都加上指定的 namespace 作為前綴</li></ul><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用範例\">使用範例<a href=\"#使用範例\" class=\"hash-link\" aria-label=\"使用範例的直接連結\" title=\"使用範例的直接連結\">​</a></h4><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_for @post do |form| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;field&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= form.label :title %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= form.text_field :title, id: :post_title %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;field&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= form.label :description %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= form.text_area :description, id: :post_description %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;actions&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= form.submit %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;form class=&quot;edit_post&quot; id=&quot;edit_post_1&quot; action=&quot;/posts/1&quot; accept-charset=&quot;UTF-8&quot; method=&quot;post&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"處理-model-中不存在的屬性\">處理 Model 中不存在的屬性<a href=\"#處理-model-中不存在的屬性\" class=\"hash-link\" aria-label=\"處理 Model 中不存在的屬性的直接連結\" title=\"處理 Model 中不存在的屬性的直接連結\">​</a></h3><p>使用 <code>form_for</code> 時，其中的欄位必須是 Model 有的屬性，那如果資料庫沒有這個欄位時，你需要在 Model 程式中加上存取方法，例如：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Event &lt; ActiveRecord::Base</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    #...</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def custom_field</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        # 根據其他屬性的值或條件，來決定這個欄位的值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def custom_field=(value)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        # 根據value，來調整其他屬性的值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>這樣就可以在 <code>form_for</code> 裡使用 <code>custom_field</code> 了：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_for @event do |f| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= f.text_field :custom_field %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= f.submit %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>記得把 <code>:custom_field</code> 也加到 Strong Parameters 清單裡，這樣按下送出後，就可以跟著 <code>@event</code> 本來的欄位一起處理了。</p><blockquote><ul><li><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html\" target=\"_blank\" rel=\"noopener noreferrer\">Form Helper</a> @ RubyOnRails org</li><li><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html\" target=\"_blank\" rel=\"noopener noreferrer\">Form Builder</a> @ RubyOnRails org</li></ul></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"form_with\">form_with<a href=\"#form_with\" class=\"hash-link\" aria-label=\"form_with的直接連結\" title=\"form_with的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-form_withmodel-nil-scope-nil-url-nil-format-nil-options\">keywords: <code>form_with(model: nil, scope: nil, url: nil, format: nil, **options)</code><a href=\"#keywords-form_withmodel-nil-scope-nil-url-nil-format-nil-options\" class=\"hash-link\" aria-label=\"keywords-form_withmodel-nil-scope-nil-url-nil-format-nil-options的直接連結\" title=\"keywords-form_withmodel-nil-scope-nil-url-nil-format-nil-options的直接連結\">​</a></h5><blockquote><p><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_with\" target=\"_blank\" rel=\"noopener noreferrer\">form_with</a> @ Rails API</p></blockquote><ul><li>:<strong>model</strong>: 使用 <code>model</code> 後會自動會表單加上 <code>url</code> 和 <code>scope</code></li><li><strong>:scope</strong>: 用來為表單中的 <code>&lt;input name=&quot;&quot;&gt;</code> 欄位增加 namespace 的 prefix</li><li><strong>:method</strong></li><li><strong>:format</strong></li><li><strong>:authenticity_token</strong></li><li><strong>:local</strong>: 如果不希望使用 <code>remote: true</code> ，可以加上 <code>local: true</code></li></ul><p>預設的情況下，如果 Unobstrusive JavaScript driver 有使用的話（<code>rails-ujs</code>），那麼使用 <code>form_with</code> 會直接添加 <code>&lt;form data-remote=&quot;true&quot;&gt;</code> ，並透過 XMLHTTPRequest 來送出請求。</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_with model: @post do |form| %&gt;        &lt;!--  等同於下面那行  --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_with scope: :post, url: post_path(@post), method: :patch do |form| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_with model: Post.new do |form| %&gt;      &lt;!--  等同於下面那行  --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_with scope: :post, url: posts_path do |form| %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"select\">select<a href=\"#select\" class=\"hash-link\" aria-label=\"select的直接連結\" title=\"select的直接連結\">​</a></h3><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--  select --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form.select :game, options_for_select(game_options_for_select), { prompt: &#x27;--請選擇--&#x27; }, { class: &#x27;form-control&#x27;, required: true } %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= select_tag :question_type, options_for_select([[&quot;訂單問題&quot;], [&quot;退貨問題&quot;], [&quot;購買問題&quot;], [&quot;技術問題&quot;]]), { prompt: &#x27;--請選擇--&#x27;, class: &#x27;form-control&#x27;, required: true } %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;select name=&quot;question_type&quot; id=&quot;question_type&quot; required=&quot;required&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;option value=&quot;&quot;&gt;請選擇您的問題分類&lt;/option&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;option value=&quot;訂單問題&quot;&gt;訂單問題&lt;/option&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;option value=&quot;退貨問題&quot;&gt;退貨問題&lt;/option&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;option value=&quot;購買問題&quot;&gt;購買問題&lt;/option&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;option value=&quot;技術問題&quot;&gt;技術問題&lt;/option&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/select&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-select_tag\" target=\"_blank\" rel=\"noopener noreferrer\">select_tag</a> @ RailsGuides</p></blockquote><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># options 中的陣列：[顯示的文字, 實際的 value]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def enum_options(enum_field, selected = nil)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  options = enum_field.collect { |key, _| [key.humanize, key] }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  options_for_select(options, selected)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"讓第一個選項prompt不能被選取\">讓第一個選項（prompt）不能被選取<a href=\"#讓第一個選項prompt不能被選取\" class=\"hash-link\" aria-label=\"讓第一個選項（prompt）不能被選取的直接連結\" title=\"讓第一個選項（prompt）不能被選取的直接連結\">​</a></h4><blockquote><p>直接在 select tag 上加上 <code>required</code>，Bootstrap 即會判斷，是否已有被選取</p></blockquote><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def gender_options(selected = nil, prompt: nil)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  options = [[&#x27;Male&#x27;, &#x27;male&#x27;], [&#x27;Female&#x27;, &#x27;female&#x27;], [&#x27;Other&#x27;, &#x27;other&#x27;]]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # 如果有寫 prompt 且沒有選擇 selected 的項目則添加進去</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  options.unshift([prompt, nil, hidden: true, selected: true]) if prompt.present? &amp;&amp; selected.blank?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  options_for_select(options, selected)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form.select :gender, gender_options(prompt: &#x27; Gender &#x27;), {}, class: &#x27;custom-select&#x27; %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"https://api.rubyonrails.org/v5.1/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-options_for_select\" target=\"_blank\" rel=\"noopener noreferrer\">options for select</a> @ Rails API</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"textarea\">textarea<a href=\"#textarea\" class=\"hash-link\" aria-label=\"textarea的直接連結\" title=\"textarea的直接連結\">​</a></h3><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--  textarea  --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= text_area_tag :content, nil, size: &quot;30x10&quot;, placeholder: &quot;請詳細描述您的問題，以利克服人員回覆&quot;, required: true %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;textarea name=&quot;content&quot; id=&quot;content&quot; placeholder=&quot;請詳細描述您的問題，以利克服人員回覆&quot; required=&quot;required&quot; cols=&quot;30&quot; rows=&quot;10&quot;&gt;&lt;/textarea&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"radio-and-label\">radio and label<a href=\"#radio-and-label\" class=\"hash-link\" aria-label=\"radio and label的直接連結\" title=\"radio and label的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-fradio_button-label_tag\">keywords: <code>f.radio_button</code>, <code>label_tag</code><a href=\"#keywords-fradio_button-label_tag\" class=\"hash-link\" aria-label=\"keywords-fradio_button-label_tag的直接連結\" title=\"keywords-fradio_button-label_tag的直接連結\">​</a></h5><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;div class=&quot;form-group&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;label&gt;Gender&lt;/label&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;div class=&quot;w-100&quot;&gt;&lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;div class=&quot;custom-control custom-radio custom-control-inline&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      &lt;%= f.radio_button :gender, &#x27;male&#x27;, checked: @personal_info.gender == &#x27;male&#x27;, class: &#x27;custom-control-input&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      &lt;%= label_tag &#x27;personal_info_gender_male&#x27;, &#x27;Male&#x27;, class: &#x27;custom-control-label&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;div class=&quot;custom-control custom-radio custom-control-inline&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      &lt;%= f.radio_button :gender, &#x27;female&#x27;, checked: @personal_info.gender == &#x27;female&#x27;, class: &#x27;custom-control-input&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      &lt;%= label_tag &#x27;personal_info_gender_female&#x27;, &#x27;Female&#x27;, class: &#x27;custom-control-label&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/div&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"checkbox\">checkbox<a href=\"#checkbox\" class=\"hash-link\" aria-label=\"checkbox的直接連結\" title=\"checkbox的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-fcheck_box-fcollection_check_boxes\">keywords: <code>f.check_box</code>, <code>f.collection_check_boxes</code><a href=\"#keywords-fcheck_box-fcollection_check_boxes\" class=\"hash-link\" aria-label=\"keywords-fcheck_box-fcollection_check_boxes的直接連結\" title=\"keywords-fcheck_box-fcollection_check_boxes的直接連結\">​</a></h5><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%# 直接關聯到 article.users %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_with model: article, local: true, html: { class: &#x27;needs-validation&#x27;, novalidate: true } do |form| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;form-group&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= form.label :status, class: &#x27;d-block&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= form.collection_check_boxes(:user_ids, User.all, :id, :name) %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>⚠️ 注意：<code>xxx_ids</code> 這是 Rails 的慣例。</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"other-field\">other field<a href=\"#other-field\" class=\"hash-link\" aria-label=\"other field的直接連結\" title=\"other field的直接連結\">​</a></h3><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--  text --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= text_field :person, :name, required: true %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;input required=&quot;required&quot; type=&quot;text&quot; name=&quot;name[person]&quot; id=&quot;name_person&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--  email  --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= email_field(:user, :address) %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- tel --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= telephone_field :user, :phone_code, required: true, required: true, placeholder: &quot;886&quot; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;input required=&quot;required&quot; placeholder=&quot;886&quot; type=&quot;tel&quot; name=&quot;user[phone_code]&quot; id=&quot;user_phone_code&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"基本使用\">基本使用<a href=\"#基本使用\" class=\"hash-link\" aria-label=\"基本使用的直接連結\" title=\"基本使用的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"解決-double-click-issues\">解決 double-click issues<a href=\"#解決-double-click-issues\" class=\"hash-link\" aria-label=\"解決 double-click issues的直接連結\" title=\"解決 double-click issues的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-data-disabled-data-disabled-with\">keywords: <code>data-disabled</code>, <code>data-disabled-with</code><a href=\"#keywords-data-disabled-data-disabled-with\" class=\"hash-link\" aria-label=\"keywords-data-disabled-data-disabled-with的直接連結\" title=\"keywords-data-disabled-data-disabled-with的直接連結\">​</a></h5><p>使用 <code>data-disabled=true</code> 來避免使用者連續點擊：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 使用 data-disabled --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;input type=&quot;submit&quot; value=&quot;Create User&quot; data-disable=&quot;true&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 使用 Rails View Helper --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= submit_tag &quot;Create User&quot;, data: { disable: true } %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>使用 <code>data-disable-with</code> 可以在使用者點擊後改變顯示的文字：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= submit_tag &quot;Create User&quot;, data: { disable_with: &quot;Creating user...&quot; } %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"產生確認提示confirmation-checkbox\">產生確認提示（confirmation checkbox）<a href=\"#產生確認提示confirmation-checkbox\" class=\"hash-link\" aria-label=\"產生確認提示（confirmation checkbox）的直接連結\" title=\"產生確認提示（confirmation checkbox）的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-data-confirm\">keywords: <code>data-confirm</code><a href=\"#keywords-data-confirm\" class=\"hash-link\" aria-label=\"keywords-data-confirm的直接連結\" title=\"keywords-data-confirm的直接連結\">​</a></h5><p>使用 <code>data-confirm</code> 可以在使用者送出表單前產生 <strong>alert 視窗</strong> 讓使用者確認：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 使用 data-confirm --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;input type=&quot;submit&quot; value=&quot;Delete User&quot; data-confirm=&quot;Are you sure?&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 使用 Rails View Helper --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= submit_tag &quot;Delete User&quot;, data: { confirm: &quot;Are you sure&quot; } %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用非-get-請求make-a-non-get-request\">使用非 get 請求（Make a non-GET request）<a href=\"#使用非-get-請求make-a-non-get-request\" class=\"hash-link\" aria-label=\"使用非 get 請求（Make a non-GET request）的直接連結\" title=\"使用非 get 請求（Make a non-GET request）的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-data-method\">keywords: <code>data-method</code><a href=\"#keywords-data-method\" class=\"hash-link\" aria-label=\"keywords-data-method的直接連結\" title=\"keywords-data-method的直接連結\">​</a></h5><p>使用 <code>data-method</code> 可以做出非 GET 的請求：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 使用 data-method --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;a href=&quot;/users/1&quot; data-method=&quot;delete&quot;&gt;Delete user&lt;/a&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 使用 Rails View Helper --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= link_to &quot;Delete user&quot;, user_path(user), data: { method: &quot;delete&quot; } %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= link_to &quot;Delete user&quot;, user_path(user), data: { method: &quot;delete&quot;, confirm: &quot;Are you sure?&quot; } %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"http://guides.rubyonrails.org/form_helpers.html\" target=\"_blank\" rel=\"noopener noreferrer\">Form Helpers</a> @ RailsGuides</li><li><a href=\"http://api.rubyonrails.org/v5.1/classes/ActionView/Helpers/FormHelper.html#method-i-form_for\" target=\"_blank\" rel=\"noopener noreferrer\">Form Helpers API</a> @ RailsGuides</li><li><a href=\"https://stackoverflow.com/questions/13144624/use-rails-form-for-but-set-custom-classes-attributes-on-form-element\" target=\"_blank\" rel=\"noopener noreferrer\">Use Rails’ form_for but set custom classes, attributes on form element?</a> @ StackOverflow</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Action View Helper pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Action View Helper pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Action View Helper</h1></header><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywordsview-helper\">keywords：<code>view helper</code><a href=\"#keywordsview-helper\" class=\"hash-link\" aria-label=\"keywordsview-helper的直接連結\" title=\"keywordsview-helper的直接連結\">​</a></h5><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"tldr\">TL;DR<a href=\"#tldr\" class=\"hash-link\" aria-label=\"TL;DR的直接連結\" title=\"TL;DR的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># content_tag(&lt;tag&gt;, content, options)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">content_tag(:i, nil, class: klass, style: style)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>[TOC]</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"觀念\">觀念<a href=\"#觀念\" class=\"hash-link\" aria-label=\"觀念的直接連結\" title=\"觀念的直接連結\">​</a></h2><p>在 Rails 中，<code>Helper</code> 指的是可以在 Template 中使用的輔助方法，主要用途是可以將資料轉化成輸出用的 HTML 字串。另一個使用 Helper 的理由是可以簡化 Template 中的複雜結構，將 Template 中較為複雜的程式都用 Helper 包裝起來，最好讓 Template 只包含單純的變數以及最簡單的條件邏輯和迴圈，這樣就算是不會程式的網頁設計師，也能夠輕易了解套版甚至修改 Template 樣板。</p><p>因為 Helper 預設只能在 Template 中使用，如果想在 <code>rails console</code> 中呼叫，必須加上關鍵字 <code>helper</code>，例如 <code>helper.link_to</code>。</p><p>另外，雖然機會不多，如果真的要在 Rails Controller 或 Model 程式中呼叫 Helper，則可以加上 <code>ApplicationController.helpers</code> 前置詞。</p><blockquote><p><a href=\"http://guides.rubyonrails.org/action_view_overview.html#overview-of-helpers-provided-by-action-view\" target=\"_blank\" rel=\"noopener noreferrer\">Action View Overview</a> @ RailsGuides",
      "<a href=\"http://guides.rubyonrails.org/action_view_overview.html#overview-of-helpers-provided-by-action-view\" target=\"_blank\" rel=\"noopener noreferrer\">Overview of helpers provide by action view</a> @ RailsGuides in Action View Overview</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"自訂-helpercustomer-view-helper\">自訂 Helper（Customer View Helper）<a href=\"#自訂-helpercustomer-view-helper\" class=\"hash-link\" aria-label=\"自訂 Helper（Customer View Helper）的直接連結\" title=\"自訂 Helper（Customer View Helper）的直接連結\">​</a></h2><p>除了使用 Rails 內建的 Helper，我們可以建立自定的 Helper（不要把邏輯規則寫在 view 中），只需要將方法定義在 <code>app/helpers/</code> 目錄下的任意一個檔案就可以了（因為所有的 View Helper 都可以被 Rails 載入）。</p><p>在產生 Controller 的同時，Rails 就會自動產生一個同名的 Helper 檔案，照慣例該 Controller 下的 Template 所用的 Helper，就放在該檔案下。如果是全站使用的 Helper，則會放在 app/helpers/application_helper_rb。</p><blockquote><ul><li><a href=\"https://rubyplus.com/articles/3651-Custom-View-Helpers-in-Rails-5\" target=\"_blank\" rel=\"noopener noreferrer\">Custom View Helpers in Rails 5</a> @ RubyPlus</li><li><a href=\"https://stackoverflow.com/questions/3797040/create-custom-html-helpers-in-ruby-on-rails\" target=\"_blank\" rel=\"noopener noreferrer\">create custom html helpers in ruby on rails</a> @ StackOverflow</li></ul></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用客制化的-helper\">使用客制化的 Helper<a href=\"#使用客制化的-helper\" class=\"hash-link\" aria-label=\"使用客制化的 Helper的直接連結\" title=\"使用客制化的 Helper的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"在-view-中使用\">在 View 中使用<a href=\"#在-view-中使用\" class=\"hash-link\" aria-label=\"在 View 中使用的直接連結\" title=\"在 View 中使用的直接連結\">​</a></h3><p>在 View 中，可以直接使用該 helper。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"在-controller-中使用\">在 Controller 中使用<a href=\"#在-controller-中使用\" class=\"hash-link\" aria-label=\"在 Controller 中使用的直接連結\" title=\"在 Controller 中使用的直接連結\">​</a></h3><p>如果要在 Controller 中使用，則可以用 <code>helpers.helper_name()</code>。</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">helpers.number_to_currency(line_item.ticket.unit_price, locale: :&#x27;zh-TW&#x27;, precision: 0)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><ul><li><a href=\"https://stackoverflow.com/questions/5130150/rails-how-to-use-a-helper-inside-a-controller\" target=\"_blank\" rel=\"noopener noreferrer\">Use a Helper inside a Controller</a> @ StackOverflow</li></ul></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"在-mailer-中使用\">在 Mailer 中使用<a href=\"#在-mailer-中使用\" class=\"hash-link\" aria-label=\"在 Mailer 中使用的直接連結\" title=\"在 Mailer 中使用的直接連結\">​</a></h3><p>在 Mailer 中使用，可以加上 <code>add_template_helper [HelperName]</code></p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class OrderMailer &lt; ApplicationMailer</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  add_template_helper XeatHelper</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # default from: &#x27;info@passer.cc&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  layout &#x27;order_mailer&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def order_email(order, subject)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    mail(to: order.user.email, subject: subject)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"html-結構相關\">HTML 結構相關<a href=\"#html-結構相關\" class=\"hash-link\" aria-label=\"HTML 結構相關的直接連結\" title=\"HTML 結構相關的直接連結\">​</a></h2><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">color_field</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">date_field</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">email_field</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">month_field</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">number_field</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">url_field</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">range_field</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">search_field</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">content_tag                    # 產生有內容的 HTML標籤</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">tag                            # 產生 HTML 標籤</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 放在 &lt;head&gt;&lt;/head&gt; 裡面</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">javascript_include_tag         # 產生 link:js</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">stylesheet_link_tag            # 產生 script:src</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">csrf_meta_tags                 # 避免 cross site request forgery attack（CSRF）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">auto_discovery_link_tag</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">favicon_link_tag</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">video_tag</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">audio_tag</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">link_to                        # 文字超連結（預設是用 GET）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">mail_to                        # E-mail</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">button_to                      # 按鈕連結（預設是用 POST）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">current_page?(url)             # 是否目前是url這個頁面</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"格式化-format-相關\">格式化 Format 相關<a href=\"#格式化-format-相關\" class=\"hash-link\" aria-label=\"格式化 Format 相關的直接連結\" title=\"格式化 Format 相關的直接連結\">​</a></h2><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">simple_format           # 將一些HTML格式簡化</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">truncate                # 擷取前幾個字元</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">strip_tags              # 把 HTML 的標籤拿掉</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">strip_links             # 移除 HTML 連結標籤</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">sanitize                # 將 HTML 中不合法的 tag 或 attribute 移除</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"時間相關datehelper\">時間相關（DateHelper）<a href=\"#時間相關datehelper\" class=\"hash-link\" aria-label=\"時間相關（DateHelper）的直接連結\" title=\"時間相關（DateHelper）的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-date_select-datetime_select-select_date-select_datetime-select_day-select_hour-select_minute-select_month-select_second-select_time-select_year-time_ago_in_words-time_select-distance_of_time_in_words\">keywords: <code>date_select</code>, <code>datetime_select</code>, <code>select_date</code>, <code>select_datetime</code>, <code>select_day</code>, <code>select_hour</code>, <code>select_minute</code>, <code>select_month</code>, <code>select_second</code>, <code>select_time</code>, <code>select_year</code>, <code>time_ago_in_words</code>, <code>time_select</code>, <code>distance_of_time_in_words</code>,<a href=\"#keywords-date_select-datetime_select-select_date-select_datetime-select_day-select_hour-select_minute-select_month-select_second-select_time-select_year-time_ago_in_words-time_select-distance_of_time_in_words\" class=\"hash-link\" aria-label=\"keywords-date_select-datetime_select-select_date-select_datetime-select_day-select_hour-select_minute-select_month-select_second-select_time-select_year-time_ago_in_words-time_select-distance_of_time_in_words的直接連結\" title=\"keywords-date_select-datetime_select-select_date-select_datetime-select_day-select_hour-select_minute-select_month-select_second-select_time-select_year-time_ago_in_words-time_select-distance_of_time_in_words的直接連結\">​</a></h5><blockquote><p><a href=\"http://guides.rubyonrails.org/action_view_overview.html#datehelper\" target=\"_blank\" rel=\"noopener noreferrer\">DateHelp</a> @ RailsGuides in Action View Overview</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"除錯相關debughelper\">除錯相關（DebugHelper）<a href=\"#除錯相關debughelper\" class=\"hash-link\" aria-label=\"除錯相關（DebugHelper）的直接連結\" title=\"除錯相關（DebugHelper）的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-debug\">keywords: <code>debug</code><a href=\"#keywords-debug\" class=\"hash-link\" aria-label=\"keywords-debug的直接連結\" title=\"keywords-debug的直接連結\">​</a></h5><p>在 View 中使用 <code>debug</code> 關鍵字，可以讓物件變得以容易閱讀的方式輸出於網頁上：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># View Helper</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">my_hash = { &#x27;first&#x27; =&gt; 1, &#x27;second&#x27; =&gt; &#x27;two&#x27;, &#x27;third&#x27; =&gt; [1,2,3] }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">debug(my_hash)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"數字相關\">數字相關<a href=\"#數字相關\" class=\"hash-link\" aria-label=\"數字相關的直接連結\" title=\"數字相關的直接連結\">​</a></h2><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">number_with_delimiter   # 將數字加上每三位加上&quot;,&quot;，例如，12,345,678</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">number_with_precision   # 四捨五入到小數第幾位</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">sprintf                 # 用來格式化數值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">number_to_currency      # 將數值轉為貨幣金額</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"表單相關formhelper\">表單相關（FormHelper）<a href=\"#表單相關formhelper\" class=\"hash-link\" aria-label=\"表單相關（FormHelper）的直接連結\" title=\"表單相關（FormHelper）的直接連結\">​</a></h2><blockquote><p>筆記在其他頁中</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"image-相關-helper\">image 相關 helper<a href=\"#image-相關-helper\" class=\"hash-link\" aria-label=\"image 相關 helper的直接連結\" title=\"image 相關 helper的直接連結\">​</a></h2><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-image_path-image_url-image_tag\">keywords: <code>image_path</code>, <code>image_url</code>, <code>image_tag</code><a href=\"#keywords-image_path-image_url-image_tag\" class=\"hash-link\" aria-label=\"keywords-image_path-image_url-image_tag的直接連結\" title=\"keywords-image_path-image_url-image_tag的直接連結\">​</a></h6><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">image_tag(&#x27;avatar.jpg&#x27;)        # 取得放在 assets/images 中某圖檔的相對路徑，並建立 &lt;img&gt; 標籤</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">image_path(&#x27;avatar.jpg&#x27;)       # 取得放在 assets/images 中某圖檔的相對路徑</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">image_url(&#x27;avatar.jpg&#x27;)        # 取得放在 assets/images 中某圖檔的相對路徑</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>圖片預設要放在 <code>app/assets/images</code></p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"image_tag\">image_tag：<a href=\"#image_tag\" class=\"hash-link\" aria-label=\"image_tag：的直接連結\" title=\"image_tag：的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">image_tag(&quot;icon.png&quot;) # =&gt; &lt;img src=&quot;/assets/icon.png&quot; alt=&quot;Icon&quot; /&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">image_tag &quot;icons/delete.gif&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 Hash 給予設定</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">image_tag &quot;icons/delete.gif&quot;, { height: 45 }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">image_tag &quot;home.gif&quot;, size: &quot;50x20&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 給與圖片 class, alt, id</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">image_tag &quot;home.gif&quot;, alt: &quot;Go Home&quot;, id: &quot;HomeImage&quot;, class: &quot;nav_bar&quot;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"javascript-相關-helper\">JavaScript 相關 helper<a href=\"#javascript-相關-helper\" class=\"hash-link\" aria-label=\"JavaScript 相關 helper的直接連結\" title=\"JavaScript 相關 helper的直接連結\">​</a></h2><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywordsjavascript_include_tag-javascript_url-javascript_path\">keywords:<code>javascript_include_tag</code>, <code>javascript_url</code>, <code>javascript_path</code><a href=\"#keywordsjavascript_include_tag-javascript_url-javascript_path\" class=\"hash-link\" aria-label=\"keywordsjavascript_include_tag-javascript_url-javascript_path的直接連結\" title=\"keywordsjavascript_include_tag-javascript_url-javascript_path的直接連結\">​</a></h6><ul><li><code>javascript_include_tag</code>：載入在 <code>app/assets/javascripts</code> 中的 JS 檔</li><li><code>javascript_url</code>：取得該 JS 檔的相對路徑</li><li><code>javascript_path</code>：取得該 JS 檔的絕對路徑</li></ul><blockquote><p>JS 檔案預設放在 <code>app/assets/javascripts</code></p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"javascript_include_tag\">javascript_include_tag<a href=\"#javascript_include_tag\" class=\"hash-link\" aria-label=\"javascript_include_tag的直接連結\" title=\"javascript_include_tag的直接連結\">​</a></h4><p>自動載入 js 檔：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 載入 ./assets/ 中特定一支 js 檔</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">javascript_include_tag &quot;common&quot; # =&gt; &lt;script src=&quot;/assets/common.js&quot;&gt;&lt;/script&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">javascript_include_tag &quot;http://example.com/main.js&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 載入 ./assets/ 中多支 js 檔</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">javascript_include_tag &quot;main&quot;, &quot;columns&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">javascript_include_tag &quot;main&quot;, &quot;/photos/columns&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 載入 ./assets/ 中所有 js 檔</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">javascript_include_tag :all</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>若要將所有的 JS 檔快取成一支檔案，可以透過設定 <code> ActionController::Base.perform_caching</code> 成 True 達到，預設 production mode 是 true；developemnt mode 是 false：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 快取</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">javascript_include_tag :all, cache: true # =&gt; &lt;script src=&quot;javascripts/all.js&quot;&gt;&lt;/script&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"javascript_path-javascript_url\">javascript_path, javascript_url<a href=\"#javascript_path-javascript_url\" class=\"hash-link\" aria-label=\"javascript_path, javascript_url的直接連結\" title=\"javascript_path, javascript_url的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">javascript_path &quot;common&quot; # 相對路徑 =&gt; /assets/common.js</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">javascript_url &quot;common&quot;  # 絕對路徑 =&gt; http://www.example.com/assets/common.js</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"stylesheet-相關-helper\">stylesheet 相關 helper<a href=\"#stylesheet-相關-helper\" class=\"hash-link\" aria-label=\"stylesheet 相關 helper的直接連結\" title=\"stylesheet 相關 helper的直接連結\">​</a></h2><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-stylesheet_link_tag-stylesheet_path-stylesheet_url\">keywords: <code>stylesheet_link_tag</code>, <code>stylesheet_path</code>, <code>stylesheet_url</code><a href=\"#keywords-stylesheet_link_tag-stylesheet_path-stylesheet_url\" class=\"hash-link\" aria-label=\"keywords-stylesheet_link_tag-stylesheet_path-stylesheet_url的直接連結\" title=\"keywords-stylesheet_link_tag-stylesheet_path-stylesheet_url的直接連結\">​</a></h6><p>預設檔案放在 <code>./assets/stylesheets/</code> 資料夾中；此外預設會產生 <code>media=&quot;screen&quot; rel=&quot;stylesheet&quot;</code>，可以透過<code>:media</code> 或 <code>:rel</code> 選項覆蓋預設值。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"stylesheet_link_tag\">stylesheet_link_tag<a href=\"#stylesheet_link_tag\" class=\"hash-link\" aria-label=\"stylesheet_link_tag的直接連結\" title=\"stylesheet_link_tag的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 載入 ./assets/ 中特定一支 css 檔</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">stylesheet_link_tag &quot;application&quot; # =&gt; &lt;link href=&quot;/assets/application.css&quot; media=&quot;screen&quot; rel=&quot;stylesheet&quot; /&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 載入 ./assets/ 中多支 css 檔</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">stylesheet_link_tag &quot;main&quot;, &quot;columns&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 如果要載入所有的 css 樣式檔</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">stylesheet_link_tag :all</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>若要將所有的 CSS 檔快取成一支檔案，可以透過設定 <code> ActionController::Base.perform_caching</code> 成 True 達到，預設 production mode 是 true；developemnt mode 是 false</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">stylesheet_link_tag :all, cache: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># =&gt; &lt;link href=&quot;/assets/all.css&quot; media=&quot;screen&quot; rel=&quot;stylesheet&quot; /&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"stylesheet_path-stylesheet_url\">stylesheet_path, stylesheet_url<a href=\"#stylesheet_path-stylesheet_url\" class=\"hash-link\" aria-label=\"stylesheet_path, stylesheet_url的直接連結\" title=\"stylesheet_path, stylesheet_url的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">stylesheet_path &quot;application&quot; # 相對路徑 =&gt; /assets/application.css</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">stylesheet_url &quot;application&quot;  # 絕對路徑 =&gt; http://www.example.com/assets/application.css</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他\">其他<a href=\"#其他\" class=\"hash-link\" aria-label=\"其他的直接連結\" title=\"其他的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-link_to\">keywords: <code>link_to</code><a href=\"#keywords-link_to\" class=\"hash-link\" aria-label=\"keywords-link_to的直接連結\" title=\"keywords-link_to的直接連結\">​</a></h5><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"link_to\">link_to<a href=\"#link_to\" class=\"hash-link\" aria-label=\"link_to的直接連結\" title=\"link_to的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-data-method-data-remote-data-params\">keywords: <code>data-method</code>, <code>data-remote</code>, <code>data-params</code><a href=\"#keywords-data-method-data-remote-data-params\" class=\"hash-link\" aria-label=\"keywords-data-method-data-remote-data-params的直接連結\" title=\"keywords-data-method-data-remote-data-params的直接連結\">​</a></h5><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= link_to &quot;Add to cart&quot;, cart_path, data: { method: :post, remote: true, params: { product_id: product.id }.to_param } %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers.html\" target=\"_blank\" rel=\"noopener noreferrer\">ActionView Helpers</a> @ Rails API</li><li><a href=\"https://ihower.tw/rails/actionview-helpers.html\" target=\"_blank\" rel=\"noopener noreferrer\">ActionView Helpers</a> @ Rails 實戰聖經 by ihower</li><li><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html\" target=\"_blank\" rel=\"noopener noreferrer\">Form Helper</a> @ Rails API</li><li><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html\" target=\"_blank\" rel=\"noopener noreferrer\">Form Builder</a> @ Rails API</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails]<!-- --> Action View, Layout, Partial, Render pjchender.dev": {
    "prefix": "hruby-on-rails [Rails]<!-- --> Action View, Layout, Partial, Render pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails]<!-- --> Action View, Layout, Partial, Render</h1><blockquote><p><a href=\"http://guides.rubyonrails.org/action_view_overview.html\" target=\"_blank\" rel=\"noopener noreferrer\">Action View Overview</a> @ RailsGuides",
      "<a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html\" target=\"_blank\" rel=\"noopener noreferrer\">Layouts and Rendering in Rails</a> @ RailsGuides</p></blockquote><p>[TOC]</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"速記\">速記<a href=\"#速記\" class=\"hash-link\" aria-label=\"速記的直接連結\" title=\"速記的直接連結\">​</a></h2><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 當 yield 後沒有接任何參數時，</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 它會自動轉譯該 controller#action 下的</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># views/controller_name/action_name.html.erb 樣版（template）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= yield %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"概念\">概念<a href=\"#概念\" class=\"hash-link\" aria-label=\"概念的直接連結\" title=\"概念的直接連結\">​</a></h2><p>在 Rails 中，web requests 是透過 <strong>Action Controller</strong> 和 <strong>Action Viewer</strong> 來處理，一般來說 Action Controller 關注的是和資料庫溝通以及處理 CRUD；Action View 則負責編譯要回傳的 response。</p><p>從 Controller 中，我們主要有三種建立回應的方式，分別是 <code>render</code>, <code>redirect_to</code> 和 <code>head</code>：</p><ul><li><code>render</code>: 建立一個完整的回應，並回傳給瀏覽器。</li><li><code>redirect_to</code>：傳送 HTTP redirect status code 給瀏覽器。</li><li><code>head</code>：傳送只有 HTTP headers 的內容給瀏覽器。</li></ul><p>在 Rails 中，一份完整的 HTML 檔會包含 <code>templates</code>, <code>partials</code> 和 <code>layouts</code> 三個部分。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"templates\">Templates<a href=\"#templates\" class=\"hash-link\" aria-label=\"Templates的直接連結\" title=\"Templates的直接連結\">​</a></h2><p>一般來說，我們不會在 View 中去使用 <code>puts</code> 或 <code>print</code> 來輸出結果，而是直接使用 <code>&lt;%= %&gt;</code>。</p><blockquote><p><strong>慣例</strong>：在 <code>articles_controller.rb</code> 中的 index <strong>action</strong> （<code>articles#index</code>）會使用在 <code>app/views/articles</code> 中的 <code>index.html.erb</code> 這支 Template。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"partials\">Partials<a href=\"#partials\" class=\"hash-link\" aria-label=\"Partials的直接連結\" title=\"Partials的直接連結\">​</a></h2><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-render-collection\">keywords: <code>render</code>, <code>collection</code><a href=\"#keywords-render-collection\" class=\"hash-link\" aria-label=\"keywords-render-collection的直接連結\" title=\"keywords-render-collection的直接連結\">​</a></h6><p><strong>Partial Templates</strong> 一般會簡稱為 <strong>partials</strong>，透過 partials，可以把重複的 code 拉出來，在其他的 templates 中重複使用它。</p><blockquote><p><strong>慣例</strong>：partials 命名的慣例會在檔名前面加上底線 <code>_</code> ，以此來區別是一般的 templates 或是 partials 。</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"render-的使用in-views\">render 的使用(in Views)<a href=\"#render-的使用in-views\" class=\"hash-link\" aria-label=\"render 的使用(in Views)的直接連結\" title=\"render 的使用(in Views)的直接連結\">​</a></h3><p>使用 <code>render</code> 關鍵字可以載入 partials：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 會去轉譯同資料夾下的 _menu.html.erb 這支檔案</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= render &quot;menu&quot; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 會去轉譯 app/views/shared/_menu.html.erb 這支檔案</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= render &quot;shared/menu&quot; %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>render 可以接受兩個參數，<code>partials</code> 和 <code>locals</code>，<strong>在預設的情況下，會以和該 partials 同名的方式來命名 partial 中的 local variable</strong>。</p><p>透過 <code>locals</code> 我們可以在 <code>_product.html.erb</code> 這個 partial 中使用 <code>product</code> 這個 local variable，值則是 <code>@product</code>：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= render partial: &quot;product&quot;, locals: { product: @product } %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 縮寫</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= render &quot;product&quot;, product: @product %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 再縮</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= render partial: &quot;product&quot; %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"options\">options<a href=\"#options\" class=\"hash-link\" aria-label=\"options的直接連結\" title=\"options的直接連結\">​</a></h4><ul><li><code>object</code>：可以在 partial 的檔案中透過 <code>product</code> 這個 local_variable 取得 <code>@item</code>：</li></ul><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= render partial: &#x27;product&#x27;, object: @item %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li><code>as</code>：搭配 <code>object</code> 使用，可以在 partial 的檔案中透過 <code>item</code> 這個 local_variable 取得 <code>@item</code>：</li></ul><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= render partial: &#x27;product&#x27;, object: @item , as: &#x27;item&#x27;%&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 等同於</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= render partial: &quot;product&quot;, locals: { item: @item } %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-collection-疊代陣列\">使用 collection 疊代陣列<a href=\"#使用-collection-疊代陣列\" class=\"hash-link\" aria-label=\"使用 collection 疊代陣列的直接連結\" title=\"使用 collection 疊代陣列的直接連結\">​</a></h4><p>有時候我們需要將陣列的資料以疊代的方式呈現在 HTML 上，這時候如果疊代的資料要套用 partial 的話，可以使用 <code>collection</code> 關鍵字，如此將可以在 partial 中使用到該 collection （<code>@products</code>）的陣列元素（<code>product</code>），partial 中陣列元素 local variable 的命名是使用該 partial 名稱：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 原本的寫法</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% @products.each do |product| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;%= render partial: &quot;product&quot;, locals: { product: product } %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 collection 關鍵字</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= render partial: &quot;product&quot;, collection: @products %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 縮寫</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= render @products %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"render-的使用-in-controller\">render 的使用 (in Controller)<a href=\"#render-的使用-in-controller\" class=\"hash-link\" aria-label=\"render 的使用 (in Controller)的直接連結\" title=\"render 的使用 (in Controller)的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">render :Symbol</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">render template: &#x27;index&#x27;      # 等同於 render &#x27;index&#x27;, 也等同於 render :index</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">render plain: &quot;OK&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">render html: &quot;&lt;strong&gt;Not Found&lt;/strong&gt;&quot;.html_safe</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 不用另外呼叫 to_json, to_xml，Rails 會自動處理</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">render json: @product</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">render xml: @product</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 以 MIME type of text/javascript 回傳瀏覽器</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">render js: &quot;alert(&#x27;Hello Rails&#x27;);&quot;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在 Rails 中不斷強調慣例優於設定，因此如果你沒有明確的在 controller 的 action 中定義要 <code>render</code> 的內容，Rails 會自動尋找並轉譯名為 <code>app/views/controller_name/action_name.html.erb</code> 的 template：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 會自動轉譯 `app/views/books/index.html.erb`</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class BooksController &lt; ApplicationController</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def index</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # render &#x27;index&#x27;        # 可以省略會自動轉譯</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"轉譯同一個-controller-內的不同-template\">轉譯同一個 controller 內的不同 template<a href=\"#轉譯同一個-controller-內的不同-template\" class=\"hash-link\" aria-label=\"轉譯同一個 controller 內的不同 template的直接連結\" title=\"轉譯同一個 controller 內的不同 template的直接連結\">​</a></h4><p><code>render [String || Symbol]</code></p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class BooksController &lt; ApplicationController</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def index</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    render :index       # 等同於 render &#x27;index&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"轉譯不同-controller-中的-template\">轉譯不同 controller 中的 template<a href=\"#轉譯不同-controller-中的-template\" class=\"hash-link\" aria-label=\"轉譯不同 controller 中的 template的直接連結\" title=\"轉譯不同 controller 中的 template的直接連結\">​</a></h4><p>如果你是在 <code>app/controllers/admin</code> 中的 <code>AdminProductsController</code> 你可以透過 <code>render &quot;products/show&quot;</code> 來轉譯 <code>app/views/products</code>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 在 app/controllers/admin 的 controller 中轉譯 app/views/products</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class AdminProductsController &lt; ApplicationController</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def index</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    render &#x27;products/show&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # 等同於 render template: &quot;products/show&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他相同結果但不同寫法\">其他相同結果但不同寫法<a href=\"#其他相同結果但不同寫法\" class=\"hash-link\" aria-label=\"其他相同結果但不同寫法的直接連結\" title=\"其他相同結果但不同寫法的直接連結\">​</a></h4><blockquote><p><a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#wrapping-it-up\" target=\"_blank\" rel=\"noopener noreferrer\">wrapping it up</a> @ RailsGuides</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"options-for-render\">options for render<a href=\"#options-for-render\" class=\"hash-link\" aria-label=\"options for render的直接連結\" title=\"options for render的直接連結\">​</a></h4><ul><li><code>:content_type</code>：改變 content_type 格式，預設是 <code>text/html</code>。</li><li><code>:layout</code></li><li><code>:location</code>：設定 HTTP Location header</li><li><code>:status</code>：Rails 預設會自動產生適當的 status code，可以透過這個指定 status code。</li><li><code>:formats</code>：預設是 html</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># content_type:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">render file: filename, content_type: &quot;application/rss&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># :layout:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">render layout: &quot;special_layout&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">render layout: false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># location:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">render xml: photo, location: photo_url(photo)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># status:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">render status: 500</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">render status: :forbidden</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># formats:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">render formats: :xml</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">render formats: [:json, :xml]</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#the-status-option\" target=\"_blank\" rel=\"noopener noreferrer\">Semantic Status Code</a> @ RailsGuides</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"respond_to-的使用in-controller\">respond_to 的使用（in Controller）<a href=\"#respond_to-的使用in-controller\" class=\"hash-link\" aria-label=\"respond_to 的使用（in Controller）的直接連結\" title=\"respond_to 的使用（in Controller）的直接連結\">​</a></h3><p>在 Rails 中當我們寫，會自動代入 <code>render &#x27;index&#x27;</code> 的指令，而且預設可以<strong>回傳任何形態的檔案</strong>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def index</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @posts = Post.all</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>所以當網址是使用不同的副檔名時，都會回傳相對應的內下：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">http://localhost:3000/posts        # 等同於 http://localhost:3000/posts.html</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">http://localhost:3000/posts.js</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">http://localhost:3000/posts.json</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>但也可以透過 <code>respond_to</code> 指定只能回傳的檔案類型，這裡則是可以回傳 <code>html</code> 和 <code>json</code> 格式的檔案，當我們去請求其他的檔案型態時，都會回傳錯誤：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">respond_to :html, :json</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>至於要回傳哪個資料型態回去，取決於 client 所傳送的 HTTP Accept Header 中希望的資料型態為何：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def create</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @post = Post.new(post_params)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  respond_to do |format|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    if @post.save</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      format.html { redirect_to @post, notice: &#x27;Post was successfully created.&#x27; }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      format.json { render :show, status: :created, location: @post }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    else</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      format.html { render :new }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      format.json { render json: @post.errors, status: :unprocessable_entity }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"respond_with-的使用\">respond_with 的使用<a href=\"#respond_with-的使用\" class=\"hash-link\" aria-label=\"respond_with 的使用的直接連結\" title=\"respond_with 的使用的直接連結\">​</a></h3><p>透過 <code>respond_to</code> 可以設定要回傳的資料型態，但如果在每個 action 中都要寫一次的話有點麻煩，因此可以使用 <code>respond_with</code> 這個方法，可以先告知 controller respond_to 支援哪幾種檔案形態，如此一來在 action 內只要寫 respond_with 就可以了：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">respond_to :html, :xml, :json</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def index</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    @topics = Topic.all</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    respond_with(@topics)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"layout\">Layout<a href=\"#layout\" class=\"hash-link\" aria-label=\"Layout的直接連結\" title=\"Layout的直接連結\">​</a></h2><p>Rails 會先去 <code>app/views/layouts</code> 中和 controller 相同名稱的 layout，例如 PhotosController 會使用 <code>app/views/layouts/photos.html.erb</code>，如果 layout 不存在，則會使用 <code>app/views/layouts/application.html.erb</code>。</p><p>如果想要變更預設值，可以使用：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Products Controller 中的 View 會以 app/views/layouts/inventory.html.erb 作為 layout</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class ProductsController &lt; ApplicationController</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  layout &quot;inventory&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 整個 Controller 會使用同一個 Layout，app/views/layouts/main.html.erb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class ApplicationController &lt; ActionController::Base</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  layout &quot;main&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"dynamic-layout-動態指定-layout\">Dynamic Layout 動態指定 layout<a href=\"#dynamic-layout-動態指定-layout\" class=\"hash-link\" aria-label=\"Dynamic Layout 動態指定 layout的直接連結\" title=\"Dynamic Layout 動態指定 layout的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 透過 layout Symbol 我們可以在拿到 request 時才決定套用哪個 layout</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class ProductsController &lt; ApplicationController</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  layout :products_layout</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # layout false             整個 class 都不會套用版型</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def show</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    @product = Product.find(params[:id])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  private</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def products_layout</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      @current_user.special? ? &quot;special&quot; : &quot;products&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"限定情況使用-layout\">限定情況使用 Layout<a href=\"#限定情況使用-layout\" class=\"hash-link\" aria-label=\"限定情況使用 Layout的直接連結\" title=\"限定情況使用 Layout的直接連結\">​</a></h3><p>Layout 支援使用 <code>:only</code> 和 <code>:except</code>，可以接收 method name 或 an array of method namse：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class ProductsController &lt; ApplicationController</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  layout &quot;product&quot;, except: [:index, :rss]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # render layout: false       這個 action 不要套用版型</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"注意事項\">注意事項<a href=\"#注意事項\" class=\"hash-link\" aria-label=\"注意事項的直接連結\" title=\"注意事項的直接連結\">​</a></h3><p>要避免在重複 Render 的錯誤出現，在下面的例子中，可能會同時 <code>render action: &quot;special_show&quot;</code>和 <code>render action: &quot;regular_show&quot;</code>，這時候為導致錯誤：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def show</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @book = Book.find(params[:id])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  if @book.special?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    render action: &quot;special_show&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  render action: &quot;regular_show&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>其中一個簡單的解法是透過 <code>and return</code> （不能使用 <code>&amp;&amp; return</code>）</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def show</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @book = Book.find(params[:id])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  if @book.special?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    render action: &quot;special_show&quot; and return</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  render action: &quot;regular_show&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>由於 Rails 中自動化的 render（implicit render）會自己偵測 <code>render</code> 有沒有被呼叫過，因此下面這段程式碼不會有錯誤：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def show</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @book = Book.find(params[:id])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  if @book.special?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    render action: &quot;special_show&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-yield-和-content_for\">使用 yield 和 content_for<a href=\"#使用-yield-和-content_for\" class=\"hash-link\" aria-label=\"使用 yield 和 content_for的直接連結\" title=\"使用 yield 和 content_for的直接連結\">​</a></h2><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-yield-content_for\">keywords: <code>yield</code>, <code>content_for</code><a href=\"#keywords-yield-content_for\" class=\"hash-link\" aria-label=\"keywords-yield-content_for的直接連結\" title=\"keywords-yield-content_for的直接連結\">​</a></h6><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"單一個-yield\">單一個 <code>yield</code><a href=\"#單一個-yield\" class=\"hash-link\" aria-label=\"單一個-yield的直接連結\" title=\"單一個-yield的直接連結\">​</a></h4><p>當 <code>yield</code> 後沒有接任何參數時，它會自動轉譯該 controller#action 下的樣版（template），因此，如果是在 <code>cars#show</code> 下，則會自動轉譯 <code>views/cars/show.html.erb.</code> 這個樣版（template）</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;html&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;head&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/head&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;body&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= yield %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/body&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/html&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"多個-yield\">多個 <code>yield</code><a href=\"#多個-yield\" class=\"hash-link\" aria-label=\"多個-yield的直接連結\" title=\"多個-yield的直接連結\">​</a></h4><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;html&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;head&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;%= yield :head %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/head&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;body&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;%= yield %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/body&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/html&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>要在 yield 中轉譯內容，必須透過 <code>content_for</code> 關鍵字：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% content_for :head do %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;title&gt;A simple page&lt;/title&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;p&gt;Hello, Rails!&lt;/p&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>透過 content_for，可以用來區隔 sidebars 和 footers，或者是插入頁面特定的 JavaScript, css 檔。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"redirect_to\">redirect_to<a href=\"#redirect_to\" class=\"hash-link\" aria-label=\"redirect_to的直接連結\" title=\"redirect_to的直接連結\">​</a></h2><p>透過 <code>render</code> 來告訴 Rails 在發送 response 的時候要使用哪一個 view；透過 <code>redirect_to</code> 則是透過瀏覽器向另一個 URL 發送 request。</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">redirect_to photos_url</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">redirect_to photos_path, status: 301</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 回到上一頁</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">redirect_back(fallback_location: root_path)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"render-和-redirect_to-的重要差異\">render 和 redirect_to 的重要差異<a href=\"#render-和-redirect_to-的重要差異\" class=\"hash-link\" aria-label=\"render 和 redirect_to 的重要差異的直接連結\" title=\"render 和 redirect_to 的重要差異的直接連結\">​</a></h3><p>在下面的程式碼中，當我們使用 <code>render</code> 時，並不會去執行 <code>index</code> action 中的內容，因此 index 頁面無法取得 @books 變數；@books 這個變數會是 <code>nil</code>；但是<strong>如果我們使用的是 <code>redirect_to</code> 時，瀏覽器會對 index 頁面建立一個全新的 request</strong>，因此 index action 中的內容將會重新執行，所以 @books 將不會是空值。</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def index</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @books = Book.all</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def show</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @book = Book.find_by(id: params[:id])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  if @book.nil?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # render action: &quot;index&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    redirect_to action: :index</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>但是這樣的寫法因為需要重新轉導到 <code>index</code> 頁面，會消耗比較多的時間，因此更好的寫法如下：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def index</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @books = Book.all</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def show</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @book = Book.find_by(id: params[:id])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  if @book.nil?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    @books = Book.all    # 直接把 books 的資料撈出來</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    flash.now[:alert] = &quot;Your book was not found&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    render &quot;index&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"assets\">Assets<a href=\"#assets\" class=\"hash-link\" aria-label=\"Assets的直接連結\" title=\"Assets的直接連結\">​</a></h2><p>使用 Rails 內建的靜態檔案(Assets)輔助方法有幾個好處：</p><ul><li>Rails 會合併 Stylesheet 和 JavasSript 檔案，可以加速瀏覽器的下載。</li><li>Rails 會編譯 Sass 和 CoffeeScript 等透過 Assets template engine 產生的 Stylesheet 和 JavasScript。</li><li>Rails 會在靜態檔案網址中加上時間序號，如果內容有修改則會重新產生。這樣的好處是強迫用戶的瀏覽器一定會下載到最新的版本，而不會有瀏覽器快取到舊版本的問題。</li><li>變更 Assets host 主機位址時，可以一次搞定，例如上 CDN 時。透過 Helpers，Rails 可以幫所有的 Assets 加上靜態檔案伺服器網址。</li></ul><p>若想變更預設 <code>assets</code> 的位置，可以到 <code>config/environments/production.rb</code> 中可以看到相關的設定檔。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"http://guides.rubyonrails.org/action_view_overview.html\" target=\"_blank\" rel=\"noopener noreferrer\">Action View Overview</a> @ RailsGuides</li><li><a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html\" target=\"_blank\" rel=\"noopener noreferrer\">Layouts and Rendering in Rails</a> @ RailsGuides</li><li><a href=\"https://ihower.tw/rails/actionview.html\" target=\"_blank\" rel=\"noopener noreferrer\">Ruby on Rails 實戰聖經</a> @ ihower</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Active Record Association (Model) pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Active Record Association (Model) pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Active Record Association (Model)</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"速查\">速查<a href=\"#速查\" class=\"hash-link\" aria-label=\"速查的直接連結\" title=\"速查的直接連結\">​</a></h2><ul><li>Book <code>belongs_to</code> Author: Book 會多 author_id</li><li>Supplier <code>has_one</code> Account: Account 會多 supplier_id</li></ul><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 會產生 store_id 和 product_id</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails g model WareHouse store:references product:references</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>有 column_id 的 table 表示在比較下階。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"觀念\">觀念<a href=\"#觀念\" class=\"hash-link\" aria-label=\"觀念的直接連結\" title=\"觀念的直接連結\">​</a></h2><p>在處理關連性資料庫時，我們經常需要透過 Query 的方式找出另一個關連的資料。但是透過 Active Record Association，我們可以更方便的去操作關連性資料庫。</p><p>在 Rails 裡所謂的關係，是指在 Model 層級的關係，主要是透過 Model 的方法（例如 <code>has_many</code> 或 <code>belongs_to</code>）搭配 Rails 的資料表慣例設定主鍵（Primary Key）及外部鍵（Foreign Key），讓這些資料表串在一起。</p><blockquote><p>每一個 association 使用後對應會產生的方法：</p><ul><li><a href=\"http://guides.rubyonrails.org/association_basics.html#detailed-association-reference\" target=\"_blank\" rel=\"noopener noreferrer\">Detailed Association Reference</a> @ RailsGuides</li><li><a href=\"http://guides.rubyonrails.org/association_basics.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Association</a> @ RailsGuides</li></ul></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"generator\">Generator<a href=\"#generator\" class=\"hash-link\" aria-label=\"Generator的直接連結\" title=\"Generator的直接連結\">​</a></h2><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># rails g model [ModelClassName &lt;column:type:options&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails g model WareHouse store:references product:references</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails g model user email:index location_id:integer:index</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li>最後加上 <code>--skip-migration</code> 將不會產生 migration 檔。</li><li><code>column:type:option</code>，options 可以加入 <code>index</code></li></ul><p>這裡的 <code>store:references</code> 寫法其實也可以用前面的 <code>store_id:integer</code> 寫法，但 references 的寫法會多做幾件事：</p><ul><li>自動加上索引（index），加快查詢速度。</li><li>自動幫 Model 加上 <code>belongs_to</code>。</li></ul><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"column-options\">column options<a href=\"#column-options\" class=\"hash-link\" aria-label=\"column options的直接連結\" title=\"column options的直接連結\">​</a></h4><ul><li><code>index</code></li><li><code>unique</code></li></ul><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"column-type\">column type<a href=\"#column-type\" class=\"hash-link\" aria-label=\"column type的直接連結\" title=\"column type的直接連結\">​</a></h4><ul><li><code>integer</code></li><li><code>primary_key</code></li><li><code>decimal</code></li><li><code>float</code></li><li><code>boolean</code></li><li><code>binary</code></li><li><code>string</code></li><li><code>text</code></li><li><code>date</code></li><li><code>time</code></li><li><code>datetime</code></li><li><code>timestamp</code></li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考範例\">參考範例<a href=\"#參考範例\" class=\"hash-link\" aria-label=\"參考範例的直接連結\" title=\"參考範例的直接連結\">​</a></h3><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># price 要記得加上引號</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails g model user pseudo:string{30}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails g model product &#x27;price:decimal{10,2}&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># uniq, references, index</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails g model user email:index location_id:integer:index</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails g model user pseudo:string:uniq</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails g model user username:string{30}:uniq</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails g model photo album:references</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails g model WareHouse store:references product:references</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># polymorphic</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails g model product supplier:references{polymorphic}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails g model product supplier:references{polymorphic}:index</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"http://railsguides.net/advanced-rails-model-generators/\" target=\"_blank\" rel=\"noopener noreferrer\">Advanced Rails model generator</a> @ BY ANDREY KOLESHKO</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"關連類型\">關連類型<a href=\"#關連類型\" class=\"hash-link\" aria-label=\"關連類型的直接連結\" title=\"關連類型的直接連結\">​</a></h2><ul><li>belongs_to</li><li>has_one</li><li>has_many</li><li>has_many :through</li><li>has_one :through</li><li>has_and_belongs_to_many</li></ul><blockquote><p>在使用上面這些 Active Record Association 的方法時， Database 的資料表和欄位必須透過 <code>migration</code> 或 <code>model</code> 的 generator 先建立好。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"一對一對應關係\">一對一對應關係<a href=\"#一對一對應關係\" class=\"hash-link\" aria-label=\"一對一對應關係的直接連結\" title=\"一對一對應關係的直接連結\">​</a></h2><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-belongs_to-has_one\">keywords: <code>belongs_to</code>, <code>has_one</code><a href=\"#keywords-belongs_to-has_one\" class=\"hash-link\" aria-label=\"keywords-belongs_to-has_one的直接連結\" title=\"keywords-belongs_to-has_one的直接連結\">​</a></h6><p>一對一的對應關係在使用時 AAA 會 <code>belongs_to</code> BBB；而 BBB 則會 <code>has_one</code> AAA，這兩者的差別在於要把 foreign_key 放在誰身上。當使用 AAA belongs_to BBB 時，AAA 的資料表中會多出 bbb_id。</p><p>但更重要的是透過資料實際的意義來思考，舉例來說應該是 User 擁有（has_one）Account，而非帳號擁有使用者；<strong>Account 應該是屬於（belongs_to）User 的，這時候 accounts 資料表中會多出一個 user_id 的 <code>foreign_key</code> 欄位</strong>。</p><blockquote><p>過去在建立 migration 檔案時，會直接使用 <code>t.integer :user_id</code> 現在則可以使用 <code>t.references :user</code>，兩個意思是一樣的。</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"belongs_to\">belongs_to<a href=\"#belongs_to\" class=\"hash-link\" aria-label=\"belongs_to的直接連結\" title=\"belongs_to的直接連結\">​</a></h3><p>假設我們有 <code>Author</code> 和 <code>Book</code> 兩個 Model，其中每本書都會對應到一個作者（資料表和欄位需要先透過 migration 或 model generator 建立），那麼我們可以用 <code>belongs_to</code> 建立一對一的關連性關係：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/book.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Book &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  belongs_to :author</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在 <code>Book</code> 資料表中會多一個 <code>author_id</code> 的欄位，用來對應到 <code>Author</code> 的 <code>id</code> ，這個 author_id 被用來做外部對應的欄位，稱為<code>外部鍵（foreign key）</code>。</p><blockquote><p>*<em>Book belongs to Author</em>- 表示，要在 migration 時 Book 資料表中會多出 author_id 的欄位。</p></blockquote><p><img loading=\"lazy\" src=\"../../../edgeguides.rubyonrails.org/images/belongs_to.html\" alt=\"belongs_to\" class=\"img_ev3q\"></p><blockquote><p>belongs_to 在使用時要用單數。</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"migration-檔內容\">migration 檔內容<a href=\"#migration-檔內容\" class=\"hash-link\" aria-label=\"migration 檔內容的直接連結\" title=\"migration 檔內容的直接連結\">​</a></h4><p>相對應的 migration 檔會長這樣：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./db/migrate/migration_file.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class CreateBooks &lt; ActiveRecord::Migration[5.0]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :authors do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :books do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.belongs_to :author, index: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.datetime :published_at</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-association-association\">使用 :association, association=<a href=\"#使用-association-association\" class=\"hash-link\" aria-label=\"使用 :association, association=的直接連結\" title=\"使用 :association, association=的直接連結\">​</a></h4><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords\">keywords<a href=\"#keywords\" class=\"hash-link\" aria-label=\"keywords的直接連結\" title=\"keywords的直接連結\">​</a></h6><ul><li><code>:association</code>,</li><li><code>association=(associate)</code>,</li><li><code>build_association(attributes = {})</code>,</li><li><code>create_association(attributes = {})</code>,</li><li><code>create_association!(attributes = {})</code></li></ul><p>association 就是 belongs_to 後面方的 Symbol，因此當加上 <code>belongs_to :author</code> 之後，Book Model 會動態的多了幾個好用的方法，像是 <code>:author</code>, <code>author=</code>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># rails console</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># :author 方法</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">book = Book.first</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">book.author             # 列出屬於該本書的 author 實例物件</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># author= 方法</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">aaron = Author.find(1)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">book.author = aaron     # = 後面要放 Model 的實例物件</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"has_one\">has_one<a href=\"#has_one\" class=\"hash-link\" aria-label=\"has_one的直接連結\" title=\"has_one的直接連結\">​</a></h3><blockquote><p>Supplier has one Account 表示要在 migration 時，Account 資料表中會多出 supplier_id 的欄位。</p></blockquote><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/supplier.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Supplier &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_one :account</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"migration-檔案內容\">migration 檔案內容<a href=\"#migration-檔案內容\" class=\"hash-link\" aria-label=\"migration 檔案內容的直接連結\" title=\"migration 檔案內容的直接連結\">​</a></h4><p>其中相對應的 migration 檔會長這樣，資料表在建立的時候一樣試用 <code>account belongs_to supplier</code>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./db/migrate/migration_file.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class CreateSuppliers &lt; ActiveRecord::Migration[5.0]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :suppliers do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :accounts do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.belongs_to :supplier, index: { unique: true }, foreign_key: true # 表示 supplier 是 foreign key</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :account_number</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p><img loading=\"lazy\" src=\"../../../edgeguides.rubyonrails.org/images/has_one.html\" alt=\"has_one\" class=\"img_ev3q\"></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用\">使用<a href=\"#使用\" class=\"hash-link\" aria-label=\"使用的直接連結\" title=\"使用的直接連結\">​</a></h4><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-1\">keywords<a href=\"#keywords-1\" class=\"hash-link\" aria-label=\"keywords的直接連結\" title=\"keywords的直接連結\">​</a></h6><ul><li><code>:association</code>,</li><li><code>association=(associate)</code>,</li><li><code>build_association(attributes = {})</code>,</li><li><code>create_association(attributes = {})</code>,</li><li><code>create_association!(attributes = {})</code></li></ul><blockquote><p><strong><code>build</code> 和 <code>create</code> 的差別在於 <code>build</code> 需要 <code>save</code> 而 <code>create</code> 不用。</strong></p></blockquote><p>當在 <code>Supplier</code> 加上 <code>has_one :account</code> 之後，User Model 會動態的多了幾個好用的方法，像是<code>:account</code>, <code>account=</code>, <code>build_account</code>, <code>create_account</code>：</p><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-account-account\">使用 :account, account=<a href=\"#使用-account-account\" class=\"hash-link\" aria-label=\"使用 :account, account=的直接連結\" title=\"使用 :account, account=的直接連結\">​</a></h5><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># rails console</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># :account</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">supplier_aaron = Supplier.find(1)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">supplier_aaron.account    # 取的該 supplier 的 account 實例物件</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># account= ，執行時資料會直接存到 database</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">new_account = Account.create()</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">supplier_aaron = Supplier.find(1)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">supplier_aaron.account = new_account  # 把 account 實例物件給 supplier</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-build_account-create_account\">使用 build_account, create_account<a href=\"#使用-build_account-create_account\" class=\"hash-link\" aria-label=\"使用 build_account, create_account的直接連結\" title=\"使用 build_account, create_account的直接連結\">​</a></h5><p><strong><code>build_account</code> 需要 save；<code>create_account</code> 不需要 save</strong>。另外 <code>create_account</code> 只能用在該 supplier 還沒有 account 的情況。</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># rails console</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># build_account</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">supplier_pj = Supplier.find(2)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">supplier_pj.build_account(account_number: &#x27;0323232&#x27;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">supplier_pj.save</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># create_account</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">supplier_aaron = Supplier.create(name: &#x27;aaron&#x27;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">supplier_aaron.create_account(account_number: &#x27;245434&#x27;)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><strong>在 table 中有包含 <!-- -->_<!-- -->id 欄位的是屬於比較低階層的</strong>。",
      "例如 Account table 中有 user_id 的欄位，表示 Account belongs_to User；User has_one Account。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"一對多對應關係\">一對多對應關係<a href=\"#一對多對應關係\" class=\"hash-link\" aria-label=\"一對多對應關係的直接連結\" title=\"一對多對應關係的直接連結\">​</a></h2><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-has_many\">keywords: <code>has_many</code><a href=\"#keywords-has_many\" class=\"hash-link\" aria-label=\"keywords-has_many的直接連結\" title=\"keywords-has_many的直接連結\">​</a></h6><p>每個 author 可以有很多本 books：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/author.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 透過 dependent 可以處理有關連資料存在是要如何處理</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># destroy: 把關連的資料刪除</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># restrict_with_error: 有關連資料時產生錯誤，不能儲存</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># restrict_with_exception: 有關連資料時產生錯誤，會直接噴錯，要 catch 處理</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># delete_all</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># nullify</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Author &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_many :books, dependent: :restrict_with_error</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>has_many 在使用時要用複數。</p></blockquote><p><img loading=\"lazy\" src=\"../../../edgeguides.rubyonrails.org/images/has_many.html\" alt=\"has_many\" class=\"img_ev3q\"></p><blockquote><p>*<em>Author has_many Books</em>- 表示要 migration 時在 Book 資料表中會多出 author_id 的欄位。</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"migration-檔案內容-1\">migration 檔案內容<a href=\"#migration-檔案內容-1\" class=\"hash-link\" aria-label=\"migration 檔案內容的直接連結\" title=\"migration 檔案內容的直接連結\">​</a></h3><p>在建立 migration 當時，也是 <code>book belongs to author</code>，表示會在 book 多出 author_id 的欄位：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./db/migrate/migration_file.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class CreateAuthors &lt; ActiveRecord::Migration[5.0]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :authors do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :books do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.belongs_to :author, index: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.datetime :published_at</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-1\">使用<a href=\"#使用-1\" class=\"hash-link\" aria-label=\"使用的直接連結\" title=\"使用的直接連結\">​</a></h3><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-2\">keywords<a href=\"#keywords-2\" class=\"hash-link\" aria-label=\"keywords的直接連結\" title=\"keywords的直接連結\">​</a></h6><ul><li><code>collection</code></li><li><code>collection&lt;&lt;(object, ...)</code></li><li><code>collection.delete(object, ...)</code></li><li><code>collection.destroy(object, ...)</code></li><li><code>collection=(objects)</code></li><li><code>collection_singular_ids</code></li><li><code>collection_singular_ids=(ids)</code></li><li><code>collection.clear</code></li><li><code>collection.empty?</code></li><li><code>collection.size</code></li><li><code>collection.find(...)</code></li><li><code>collection.where(...)</code></li><li><code>collection.exists?(...)</code></li><li><code>collection.build(attributes = {}, ...)</code></li><li><code>collection.create(attributes = {})</code></li><li><code>collection.create!(attributes = {})</code></li></ul><p>collection 用放在 has_many 後面的 Symbol 名稱替代。</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Rails Console</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># :models</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">author_aaron = Author.find(1)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">author_aaron.books      # 取得屬於 author_aaron 的 books</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">author_aaron.book_ids   # 取得屬於 author_aaron 的 book ids</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># models=</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">book1 = Book.find(1)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">book2 = Book.find(2)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">author_aaron.books = [book1, book2]    # 將 book1 和 book2 歸於 author_aaron 所寫</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">author_aaron.book_ids = [1, 2]         # 直接根據 books 的 id 歸於 authro_aaron</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># models.build</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">author_aaron.books.build(name: &#x27;Learn JavaScript the hard way&#x27;)    # 建立一本由 author_aaron 所寫的書</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"多對多對應關係\">多對多對應關係<a href=\"#多對多對應關係\" class=\"hash-link\" aria-label=\"多對多對應關係的直接連結\" title=\"多對多對應關係的直接連結\">​</a></h2><p>多對多的對應關係一般可以有兩種作法：</p><ul><li><code>has_many :through</code>: 透過另外建立一個 table，並使用一個獨立的 model 來將兩個 table 間產生關連性。</li><li><code>has_and_belongs_to_many</code>: <strong><u>不會</u>另外建立一個 model（但一樣<u>會</u>建立 table）</strong>，來直接將兩個 table 關連起來。</li></ul><p>在選擇上，比較簡單的作法是直接使用 <code>has_and_belongs_to_many</code>，除非你有需要透過 Model 來操作、驗證、使用回呼（callback）第三個資料表時（join table），再使用 <code>has_many :through</code>。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"方法一使用-has_many-through\">方法一：使用 has_many :through<a href=\"#方法一使用-has_many-through\" class=\"hash-link\" aria-label=\"方法一：使用 has_many :through的直接連結\" title=\"方法一：使用 has_many :through的直接連結\">​</a></h3><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-has_many-through\">keywords: <code>has_many :through</code><a href=\"#keywords-has_many-through\" class=\"hash-link\" aria-label=\"keywords-has_many-through的直接連結\" title=\"keywords-has_many-through的直接連結\">​</a></h6><p>這表示所宣告的 model 可以透過第三個 model 對應另一個 model 的一個或多個物件實例。例如，醫生和病人的約診：</p><ul><li>醫生(physician)有很多約診單（appointments）</li><li>醫生可以透過約診單約很多病人</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/physician.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Physician &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_many :appointments</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_many :patients, through: :appointments</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li>約診單(appointment)屬於醫生(physician)和病人(patient)</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/appointment.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Appointment &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  belongs_to :physician</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  belongs_to :patient</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li>病人(patient)有很多約診單（appointments）</li><li>病人可以透過約診單約很多醫生</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/patient.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Patient &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_many :appointments</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_many :physicians, through: :appointments</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><ul><li><code>has_many</code> 後要用複數</li><li><code>:through</code> 後要用複數</li><li><code>belongs_to</code> 後要用單數</li></ul></blockquote><p><img loading=\"lazy\" src=\"../../../edgeguides.rubyonrails.org/images/has_many_through.html\" alt=\"has_many :through\" class=\"img_ev3q\"></p><blockquote><p>這時候必需要在 migration 檔時中建立 physician_id 和 patient_id 的欄位。</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"migration-檔案內容-2\">migration 檔案內容<a href=\"#migration-檔案內容-2\" class=\"hash-link\" aria-label=\"migration 檔案內容的直接連結\" title=\"migration 檔案內容的直接連結\">​</a></h4><ul><li>Appointments belongs_to Physician：會在 Appointments table 中多出 physician_id 欄位</li><li>Appointments belongs_to Patient：會在 Appointments table 中多出 patient_id 欄位</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./db/migrate/migration_file.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class CreateAppointments &lt; ActiveRecord::Migration[5.1]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :physicians do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :patients do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :appointments do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.belongs_to :physician, index: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.belongs_to :patient, index: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.datetime :appointment_date</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-2\">使用<a href=\"#使用-2\" class=\"hash-link\" aria-label=\"使用的直接連結\" title=\"使用的直接連結\">​</a></h4><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-models-models\">keywords: <code>:models</code>, <code>models=</code><a href=\"#keywords-models-models\" class=\"hash-link\" aria-label=\"keywords-models-models的直接連結\" title=\"keywords-models-models的直接連結\">​</a></h6><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># rails console</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">dr_aaron = Physician.find(1)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">dr_pj = Physician.find(2)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">pt_aaron = Patient.find(1)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">pt_pj = Patient.find(2)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">pt_ma = Patient.find(3)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># models=</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">dr_aaron.patients = [pt_aaron, pt_pj]  # 此時就已經將資料寫入 appointments 資料表中了</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">dr_pj.patients = [pt_pj, pt_ma]    # 此時就已經將資料寫入 appointments 資料表中了</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># :models</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">dr_aaron.patients     # 取得屬於 dr_aaron 的 patients 實例物件</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">pt_ma.physicians       # 取得屬於 pt_ma 的 physicians 時記錄鍵</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"方法二使用-habtm\">方法二：使用 HABTM<a href=\"#方法二使用-habtm\" class=\"hash-link\" aria-label=\"方法二：使用 HABTM的直接連結\" title=\"方法二：使用 HABTM的直接連結\">​</a></h3><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-has_and_belongs_to_many\">keywords: <code>has_and_belongs_to_many</code><a href=\"#keywords-has_and_belongs_to_many\" class=\"hash-link\" aria-label=\"keywords-has_and_belongs_to_many的直接連結\" title=\"keywords-has_and_belongs_to_many的直接連結\">​</a></h6><blockquote><p>參考：<a href=\"https://medium.com/@kansetsu7/rails-多對多關聯設定與存取-37f57bbcad73\" target=\"_blank\" rel=\"noopener noreferrer\">Rails 多對多關聯設定與存取</a></p></blockquote><p>假設一個 Author 可以出很多本 Books，一本 Book 也可能有許多 Authors，這時候就可以使用 <code>has_and_belongs_to_many</code> 來建立資料庫：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/book.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Book &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_and_belongs_to_many :authors</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/author.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Author &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_and_belongs_to_many :books</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>這種情況在 migration 時要另外建立一個儲存關連性資料表，這個第三方資料表的名字是有規定的，<strong>預設是「兩個資料表依照英文字母先後順序排序，中間以底線分格」</strong>，所以以我們這個例子來說，這個資料表的名字就是「authors_books」。</p><p><img loading=\"lazy\" src=\"../../../edgeguides.rubyonrails.org/images/habtm.html\" alt=\"has_and_belongs_to_many\" class=\"img_ev3q\"></p><blockquote><p><code>has_and_belongs_to_many</code> 後面要接複數</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"migration-檔案內容-3\">migration 檔案內容<a href=\"#migration-檔案內容-3\" class=\"hash-link\" aria-label=\"migration 檔案內容的直接連結\" title=\"migration 檔案內容的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./db/migrate/migration_file.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class CreateAssembliesAndParts &lt; ActiveRecord::Migration[5.0]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :assemblies do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :parts do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :part_number</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :assemblies_parts, id: false do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.belongs_to :assembly, index: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.belongs_to :part, index: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"提醒belongs_to-和-has_and_belongs_to_many-可以同時存在\">提醒：belongs_to 和 has_and_belongs_to_many 可以同時存在<a href=\"#提醒belongs_to-和-has_and_belongs_to_many-可以同時存在\" class=\"hash-link\" aria-label=\"提醒：belongs_to 和 has_and_belongs_to_many 可以同時存在的直接連結\" title=\"提醒：belongs_to 和 has_and_belongs_to_many 可以同時存在的直接連結\">​</a></h3><p><code>belongs_to</code> 和 <code>has_and_belongs_to_many</code> 可以同時存在：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/models/article.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Article &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  belongs_to :user</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_and_belongs_to_many :users</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>這樣就可以同時使用 <code>article.user</code> 和 <code>article.users</code> 這兩種方法。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"嵌套式架構一對多對多\">嵌套式架構：一對多對多<a href=\"#嵌套式架構一對多對多\" class=\"hash-link\" aria-label=\"嵌套式架構：一對多對多的直接連結\" title=\"嵌套式架構：一對多對多的直接連結\">​</a></h2><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-has_many-through-1\">keywords: <code>has_many :through</code><a href=\"#keywords-has_many-through-1\" class=\"hash-link\" aria-label=\"keywords-has_many-through-1的直接連結\" title=\"keywords-has_many-through-1的直接連結\">​</a></h6><p>透過 <code>has_many :through</code> 我們也可以建立嵌套式的模型，例如，一份文件（document）有很多的章節（sections）；每個章節又可以有很多段落（paragraph）：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/document.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Document &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_many :sections</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_many :paragraphs, through: :sections</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/section.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Section &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  belongs_to :document</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_many :paragraphs</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/paragraph.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Paragraph &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  belongs_to :section</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"一對一對一\">一對一對一<a href=\"#一對一對一\" class=\"hash-link\" aria-label=\"一對一對一的直接連結\" title=\"一對一對一的直接連結\">​</a></h2><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-has_one-through\">keywords: <code>has_one :through</code><a href=\"#keywords-has_one-through\" class=\"hash-link\" aria-label=\"keywords-has_one-through的直接連結\" title=\"keywords-has_one-through的直接連結\">​</a></h6><p>宣告的第一個 model 透過 <code>through</code> 與另外第三個 model 去和第二個 model 產生關連性。例如 Supplier 有一個 Account，而每一個 Account 又可以有一個 AccountHistory：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/supplier.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Supplier &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_one :account</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_one :account_history, through: :account</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>Account belongs to Supplier，所以在 migration 設定檔中， accounts 中會有 supplier_id：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/account.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Account &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  belongs_to :supplier</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_one :account_history</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>AccountHistory belongs_to Account，所以在 migration 設定檔中，account_histories 中會有 account_id：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/account_history.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class AccountHistory &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  belongs_to :account</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p><img loading=\"lazy\" src=\"../../../edgeguides.rubyonrails.org/images/has_one_through.html\" alt=\"img has_one :through\" class=\"img_ev3q\"></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"migration-檔案內容-4\">migration 檔案內容<a href=\"#migration-檔案內容-4\" class=\"hash-link\" aria-label=\"migration 檔案內容的直接連結\" title=\"migration 檔案內容的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./db/migrate/migration_files.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class CreateAccountHistories &lt; ActiveRecord::Migration[5.0]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :suppliers do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :accounts do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.belongs_to :supplier, index: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :account_number</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :account_histories do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.belongs_to :account, index: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.integer :credit_rating</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"polymorphic-association\">Polymorphic association<a href=\"#polymorphic-association\" class=\"hash-link\" aria-label=\"Polymorphic association的直接連結\" title=\"Polymorphic association的直接連結\">​</a></h2><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-polymorphic-able\">keywords: <code>polymorphic</code>, <code>able</code><a href=\"#keywords-polymorphic-able\" class=\"hash-link\" aria-label=\"keywords-polymorphic-able的直接連結\" title=\"keywords-polymorphic-able的直接連結\">​</a></h6><p>透過 polymorphic associations，一個 model 可以屬於多個 model，例如，我們可以讓一個 pictures model 同時屬於 employee model, product model 和其他更多的 model。</p><p>使用關鍵字 <code>polymorphic: true</code> 和 <code>as:</code></p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/picture.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Picture &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  belongs_to :imageable, polymorphic: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/employee.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Employee &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_many :pictures, as: :imageable</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/product.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Product &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_many :pictures, as: :imageable</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>其中 在 pictures table 中 <code>imageable_type</code> 指的是對應到的 table 欄位（例如 employees 或 products）而 <code>imageable_id</code> 指的是該欄位的 id（也就是 product_id 或 employees_id）。</p><p><img loading=\"lazy\" src=\"../../../edgeguides.rubyonrails.org/images/polymorphic.html\" alt=\"img\" class=\"img_ev3q\"></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"migration-檔案內容-5\">migration 檔案內容<a href=\"#migration-檔案內容-5\" class=\"hash-link\" aria-label=\"migration 檔案內容的直接連結\" title=\"migration 檔案內容的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./db/migrate/migration_files.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class CreatePictures &lt; ActiveRecord::Migration[5.1]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :pictures do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string  :name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.integer :imageable_id</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string  :imageable_type</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    add_index :pictures, [:imageable_type, :imageable_id]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>也可以用 <code>t.references</code> 簡化寫法：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./db/migrate/migration_files.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class CreatePictures &lt; ActiveRecord::Migration[5.0]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :pictures do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.references :imageable, polymorphic: true, index: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-3\">使用<a href=\"#使用-3\" class=\"hash-link\" aria-label=\"使用的直接連結\" title=\"使用的直接連結\">​</a></h3><p>你可以想成 <code>belongs_to</code> + <code>polymorphic</code> 設定了一個 interface 讓其他 model 可以使用，因此從 <code>Employee</code> 你可以透過 <code>@employee.pictures</code> 取得屬於該 Employee 的所有 pictures 實例物件。相似的，你也可以取得 <code>@product.pictures</code>。</p><p>如果你有 Picture Model 的實例，你也可以透過 <code>@picture.imageable</code> 的方式取得它的父層。要讓它可以辦到，你需要在 model 中同時宣告 <code>foreign key column</code> (:imageable_id) 和 <code>type column</code> (:imageable_type) 來定義 <code>polymorphic interface</code>：</p><blockquote><p>參考資料：<a href=\"http://guides.rubyonrails.org/association_basics.html#polymorphic-associations\" target=\"_blank\" rel=\"noopener noreferrer\">Polymorphic association</a> @Active Record Basic</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"instance-method-options\">instance method options<a href=\"#instance-method-options\" class=\"hash-link\" aria-label=\"instance method options的直接連結\" title=\"instance method options的直接連結\">​</a></h2><ul><li><code>:autosave</code>: Boolean</li><li><code>:class_name</code>: String</li><li><code>:counter_cache</code>: Boolean || Symbol，減少需要的 query 次數，但要記得使用前新增 table 的欄位。</li><li><code>:dependent</code>：當相關連的物件被銷毀時要做的處理。</li><li><code>:foreign_key</code></li><li><code>:primary_key</code></li><li><code>:polymorphic</code></li><li><code>:touch</code></li><li><code>:validate</code></li><li><code>:optional</code></li><li><code>:conditions</code></li><li><code>:through</code></li><li><code>:as</code></li><li><code>:inverse_of</code>： 用來定義 bi-direction association</li></ul><blockquote><p><a href=\"http://guides.rubyonrails.org/association_basics.html#detailed-association-reference\" target=\"_blank\" rel=\"noopener noreferrer\">Detailed Association Reference</a> @ RailsGuide</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"注意事項\">注意事項<a href=\"#注意事項\" class=\"hash-link\" aria-label=\"注意事項的直接連結\" title=\"注意事項的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"留意快取cache\">留意快取（cache）<a href=\"#留意快取cache\" class=\"hash-link\" aria-label=\"留意快取（cache）的直接連結\" title=\"留意快取（cache）的直接連結\">​</a></h3><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-reload\">keywords: <code>reload</code><a href=\"#keywords-reload\" class=\"hash-link\" aria-label=\"keywords-reload的直接連結\" title=\"keywords-reload的直接連結\">​</a></h6><p>Rails 會向 database 要一次資料，接著會把這份資料快取起來，如過要清除快取，可以透過關鍵字 <code>reload</code>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">author.books                 # retrieves books from the database</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">author.books.size            # uses the cached copy of books</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">author.books.reload.empty?   # discards the cached copy of books</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">                             # and goes back to the database</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"避免命名衝突naming-collision\">避免命名衝突（naming collision）<a href=\"#避免命名衝突naming-collision\" class=\"hash-link\" aria-label=\"避免命名衝突（naming collision）的直接連結\" title=\"避免命名衝突（naming collision）的直接連結\">​</a></h3><p>不要使用到 <code>attributes</code> 或 <code>connection</code> 等等在 <code>ActiveRecord::Base</code> 中 instance method 有的關鍵字。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"記得更新資料庫結構schema\">記得更新資料庫結構（Schema）<a href=\"#記得更新資料庫結構schema\" class=\"hash-link\" aria-label=\"記得更新資料庫結構（Schema）的直接連結\" title=\"記得更新資料庫結構（Schema）的直接連結\">​</a></h3><p>Active Record 主要是 ORM，幫助 Model 和 table 溝通，但是要留意不要只建立的 Model 卻忘記改 table 的架構（Schema）。</p><ul><li>對於 <code>belongs_to</code> 的關連式資料表，記得加上外部鍵（foreign keys），並且建議對加上索引（index）以加速搜尋。</li><li>對於 <code>has_and_belongs_to_many</code> 的關連式資料表，記得建立對應的 join table（兩個資料表的名稱根據字母排序連接起來），<strong>並且需要移除 Primary Key</strong>。</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./db/migrate/migration_files.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 透過 id: false 來移除主鍵</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">create_table :assemblies_parts, id: false do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"http://guides.rubyonrails.org/association_basics.html#updating-the-schema\" target=\"_blank\" rel=\"noopener noreferrer\">Updating the Schema</a> @ Active Record Association in Rails Guides</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"http://railsbook.tw/chapters/18-model-relationship.html\" target=\"_blank\" rel=\"noopener noreferrer\">Model 關連性</a> @ 為你自己學 Ruby on Rails</li><li><a href=\"http://guides.rubyonrails.org/active_record_basics.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Basics</a> @ RailsGuides</li><li><a href=\"http://guides.rubyonrails.org/association_basics.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Association</a> @ RailsGuides</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Active Record Basic（Model 基本的 CRUD 操作） pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Active Record Basic（Model 基本的 CRUD 操作） pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Active Record Basic（Model 基本的 CRUD 操作）</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"速記\">速記<a href=\"#速記\" class=\"hash-link\" aria-label=\"速記的直接連結\" title=\"速記的直接連結\">​</a></h2><ul><li>用 <code>where</code> 取出來的資料會是陣列</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"目錄\">目錄<a href=\"#目錄\" class=\"hash-link\" aria-label=\"目錄的直接連結\" title=\"目錄的直接連結\">​</a></h2><p>[TOC]</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"觀念\">觀念<a href=\"#觀念\" class=\"hash-link\" aria-label=\"觀念的直接連結\" title=\"觀念的直接連結\">​</a></h2><p>Active Record 在 Rails 中負責的 Model 部分，主要負責處理商業邏輯和資料。每個資料表（table）大部分都能對應到一個 Rails 中的 Model Class，但是 Model Class 並不是真正的資料表，而是一個負責跟實體的資料表溝通的抽象類別。</p><p>Object Relational Mapping（ORM）則是將應用程式中的許多物件和關連性資料庫中的資料表做結合，透過 ORM 可以更容易以物件的方式存取資料庫中的資料而不需直接撰寫 SQL。</p><blockquote><p>-<a href=\"http://guides.rubyonrails.org/active_record_basics.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Basic</a> @ RailsGuides -<a href=\"https://hackmd.io/MYDgzAbApgDAZhAtAFgOxgIwoIYgEyIhRjaLbCq5gCsxJARkA===?both\" target=\"_blank\" rel=\"noopener noreferrer\">Ruby on Rails 命名慣例整理</a></p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"套用-active-record-modelapplicationrecord\">套用 Active Record Model（ApplicationRecord）<a href=\"#套用-active-record-modelapplicationrecord\" class=\"hash-link\" aria-label=\"套用 Active Record Model（ApplicationRecord）的直接連結\" title=\"套用 Active Record Model（ApplicationRecord）的直接連結\">​</a></h2><p>只要讓 Model 的 Class 繼承 <code>ApplicationRecord</code></p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class User &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>就可以使用基本操作 Model 的方法：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">new_user = User.new</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">new_user.name = &#x27;Aaron&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">new_user.save</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"console\">Console<a href=\"#console\" class=\"hash-link\" aria-label=\"Console的直接連結\" title=\"Console的直接連結\">​</a></h2><p>進入 rails console 後可以使用下面 CRUD 的指令來操作資料庫：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails c</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"create\">Create<a href=\"#create\" class=\"hash-link\" aria-label=\"Create的直接連結\" title=\"Create的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-create-new\">keywords: <code>create</code>, <code>new</code><a href=\"#keywords-create-new\" class=\"hash-link\" aria-label=\"keywords-create-new的直接連結\" title=\"keywords-create-new的直接連結\">​</a></h5><p>可以使用 Model class method 中的 <code>create</code> 或 <code>new</code> 來建立一個新的實例。</p><p><strong>new 跟 create 的差別，就是 <code>new</code> 方法只是先把物件做出來，尚未存入資料表，因此要手動透過 <code>save</code> 儲存；而 <code>create</code> 方法則是直接把存入資料表</strong>。</p><p>不管是 new 或 create，在寫入失敗的時候都會回傳一個「內容都是 nil 的 Model 物件」，通常在 Controller 的 Action 裡常會藉此判定資料寫入是否成功。</p><p>如果希望在 create 寫敗時就回拋錯誤訊息，可以使用 <code>create!</code>。</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user = User.create(name: &#x27;Aaron&#x27;, email: &#x27;aaronchen@wavinfo.com&#x27;, age: 29)  # 直接儲存</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user = User.new(name: &#x27;PJCHENder&#x27;, email: &#x27;pjchender@gmail.com&#x27;, age: 27)   # 建立物件實例但尚未儲存</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 一次建立多筆 record</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">reviewers = User.create([{name: &#x27;Aaron&#x27;}, {name: &#x27;Andyyou&#x27;, email: &#x27;aaronchen@wavinfo.com&#x27;, age: 29})</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"程式範例\">程式範例<a href=\"#程式範例\" class=\"hash-link\" aria-label=\"程式範例的直接連結\" title=\"程式範例的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"new\">new<a href=\"#new\" class=\"hash-link\" aria-label=\"new的直接連結\" title=\"new的直接連結\">​</a></h4><p>記得最後要用 <code>save</code> 後才會寫入 database：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#####################################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##            使用 new 方法 - 需要 save              ##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#####################################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 備註：該物件的 id 值一開始是 nil ，寫入 save 後才會自動帶值，</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#      如果寫入的 id 的值不存在，後面新增的資料 id 會依序最大的 id 往後排</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#      如果寫入的 id 值已經存在過，則 save 會出現錯誤</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 直接將要設定的值代入在 new 當中</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">candidate = Candidate.new(party: &quot;綠黨&quot;, politics: &quot;多蓋大樹&quot;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">post.save</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 也可以一步一步做</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">post = Post.new     # 建立一個空資料（一列空資料）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># =&gt; &lt;Post id: nil, title: nil, created_at: nil, updated_at: nil&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">post.title = &quot;Hello everyone!&quot;      # 設定 title 的值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># =&gt; &quot;Hello everyone!&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">post                # 輸入 post 會回傳現在該物件的內容</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># =&gt; #&lt;Post id: nil, title: &quot;Hello everyone!&quot;, created_at: nil, updated_at: nil&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">post.save        # 將物件的資料寫入資料庫中，要記得是 instance object 的 save method（小寫）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># =&gt; true</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"create-1\">create<a href=\"#create-1\" class=\"hash-link\" aria-label=\"create的直接連結\" title=\"create的直接連結\">​</a></h4><p>不需要用 <code>save</code> 就會寫入 database：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># create 方法有另一個叫做 create! 的方法，兩者差別是當寫入發生錯誤時，create! 會產生例外（Exception）訊息。</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Candidate.create(name: &quot;馬應九&quot;, party: &quot;綠黨&quot;, age: 32, politics: &quot;多蓋大樹&quot;)        # 沒有填的欄位，若沒有預設值，會填入 nil</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"read-and-filter\">Read and Filter<a href=\"#read-and-filter\" class=\"hash-link\" aria-label=\"Read and Filter的直接連結\" title=\"Read and Filter的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-all-includes-limit-find-find_by-where-order-reorder\">keywords: <code>all</code>, <code>includes</code>, <code>limit</code>, <code>find</code>, <code>find_by</code>, <code>where</code>, <code>order</code>, <code>reorder</code><a href=\"#keywords-all-includes-limit-find-find_by-where-order-reorder\" class=\"hash-link\" aria-label=\"keywords-all-includes-limit-find-find_by-where-order-reorder的直接連結\" title=\"keywords-all-includes-limit-find-find_by-where-order-reorder的直接連結\">​</a></h5><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.all</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Post.includes(:user)    # 透過 IN 的方式進行 SQL，節省效能</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.first          # 取得 User 資料表的第一筆資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.first(3)       # 取得 User 資料表的前三筆資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.limit(3)       # 限制取得的資料筆數</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.last           # 取得 User 資料表的最末筆資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.find(3)   # 找出資料表 User 中 id 為 3 的資料，找不到時會拋錯誤，效能較好</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.find_by(name: &#x27;Aaron&#x27;) # 根據某欄位進行尋找，找不到時回傳 nil</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.where(name: &#x27;David&#x27;, occupation: &#x27;Code Artist&#x27;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.where(&quot;age &gt; 18&quot;, &quot;vote &gt; 3&quot;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.where.not(&quot;age &gt; 18&quot;, &quot;vote &gt; 3&quot;)  # 不要取某些值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.order(:age)        # 按照年齡排序，預設由小排到大</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.order(age: :desc)  # 按照年齡排序，由大到小</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.order(:age).reorder(age: :desc)    # 如果之前已經有 order 過要再重新排序，需要下 reorder</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>可以使用方法鍊的方式：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Candidate.where(&quot;age &gt; 18&quot;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">         .where(gender: &quot;female&quot;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">         .limit(2)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">         .order(age: :desc)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Post.order(age: :desc).first      # 先排序在找出第一個（找出年紀最大者）</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>不需要擔心連續兩次的 where 方法或是這樣一直連下去會造成多次的查詢，事實上 Rails 在處理這行語法的時候，是先整行語法解讀完才向資料庫進行查詢。</p></blockquote><blockquote><p><a href=\"http://guides.rubyonrails.org/active_record_querying.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Query Interface</a> @ RailsGuides</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"update\">Update<a href=\"#update\" class=\"hash-link\" aria-label=\"Update的直接連結\" title=\"Update的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-save-update-update_attribute-update_attributes-modelupdate_all\">keywords: <code>save</code>, <code>update</code>, <code>update_attribute</code>, <code>update_attributes</code>, <code>Model.update_all</code><a href=\"#keywords-save-update-update_attribute-update_attributes-modelupdate_all\" class=\"hash-link\" aria-label=\"keywords-save-update-update_attribute-update_attributes-modelupdate_all的直接連結\" title=\"keywords-save-update-update_attribute-update_attributes-modelupdate_all的直接連結\">​</a></h5><ul><li><code>save</code>：預設會經過驗證（Validation，在稍後的章節會介紹）流程，如果驗證失敗將無法寫入。如果想要跳過驗證，可加上 validates: false 參數。</li><li><code>update</code> 跟 <code>update_attributes</code> 其實只是名字不一樣，但事實上是一模一樣的內容。</li><li><code>update_attribute</code> 方法會跳過驗證（Validation），等於是 <code>save(validate: false)</code> 的效果。</li><li><code>save!</code>, <code>update!</code> 會在資料無法驗證存入時回拋例外錯誤。</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.name = &#x27;Aaron&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.save      # 使用 user.save! 當儲存失敗（或驗證失敗）時會拋出錯誤</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.update(name: &#x27;Aaron&#x27;) # 使用 user.update! 當儲存失敗（或驗證失敗）時會拋出錯誤</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 一次更新多筆資料的多個欄位</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.update_all &quot;max_login_attempts = 3, must_change_password = &#x27;true&#x27;&quot;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"程式範例-1\">程式範例<a href=\"#程式範例-1\" class=\"hash-link\" aria-label=\"程式範例的直接連結\" title=\"程式範例的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 先找出想要更新的對象</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">post = Post.find(5)         # 根據 id 選擇想要更新的資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># =&gt; &lt;Post id: 5, title: &quot;Set id manually&quot;, created_at: &quot;2017-02-17 09:16:15&quot;, updated_at: &quot;2017-02-17 09:16:15&quot;&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"儲存資料save\">儲存資料(save)<a href=\"#儲存資料save\" class=\"hash-link\" aria-label=\"儲存資料(save)的直接連結\" title=\"儲存資料(save)的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 修改欄位值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">post.title = &quot;I want to be updated&quot;          # 設定要更新的欄位值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> =&gt; &quot;I want to be updated&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">post.save                                    # 寫入資料庫</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> =&gt; true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Post.find(5)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">=&gt; #&lt;Post id: 5, title: &quot;I want to be updated&quot;, created_at: &quot;2017-02-17 09:16:15&quot;, updated_at: &quot;2017-02-17 09:33:14&quot;&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"以不驗證資料的方式儲存validate-false\">以不驗證資料的方式儲存(validate: false)<a href=\"#以不驗證資料的方式儲存validate-false\" class=\"hash-link\" aria-label=\"以不驗證資料的方式儲存(validate: false)的直接連結\" title=\"以不驗證資料的方式儲存(validate: false)的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">order.save(validate: false)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"更新多個欄位update-update_attributes\">更新多個欄位(update, update_attributes)<a href=\"#更新多個欄位update-update_attributes\" class=\"hash-link\" aria-label=\"更新多個欄位(update, update_attributes)的直接連結\" title=\"更新多個欄位(update, update_attributes)的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">candidate.update_attributes(name: &quot;陳橘&quot;, age: 54)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">candidate.update(name: &quot;陳橘&quot;, age: 54)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"更新單一欄位資料update_attribute\">更新單一欄位資料(update_attribute)<a href=\"#更新單一欄位資料update_attribute\" class=\"hash-link\" aria-label=\"更新單一欄位資料(update_attribute)的直接連結\" title=\"更新單一欄位資料(update_attribute)的直接連結\">​</a></h4><p>不需要在呼叫 <code>save</code></p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">candidate.update_attribute(:name, &quot;賴神&quot;)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"更新整個資料表modelupdate_all\">更新整個資料表(Model.update_all)<a href=\"#更新整個資料表modelupdate_all\" class=\"hash-link\" aria-label=\"更新整個資料表(Model.update_all)的直接連結\" title=\"更新整個資料表(Model.update_all)的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 這是類別方法(class method）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Candidate.update_all(vote: 0)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"重新載入資料表reload\">重新載入資料表(reload)<a href=\"#重新載入資料表reload\" class=\"hash-link\" aria-label=\"重新載入資料表(reload)的直接連結\" title=\"重新載入資料表(reload)的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">order = Order.first</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">order.reload</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"delete-destroy\">Delete, Destroy<a href=\"#delete-destroy\" class=\"hash-link\" aria-label=\"Delete, Destroy的直接連結\" title=\"Delete, Destroy的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-delete-destroy-modeldestroy_all\">keywords: <code>delete</code>, <code>destroy</code>, <code>Model.destroy_all</code><a href=\"#keywords-delete-destroy-modeldestroy_all\" class=\"hash-link\" aria-label=\"keywords-delete-destroy-modeldestroy_all的直接連結\" title=\"keywords-delete-destroy-modeldestroy_all的直接連結\">​</a></h5><p><code>destroy</code> 跟 <code>delete</code> 的差別，在於 destroy 方法在執行的時候，會執行完整的回呼（Callbacks），但 delete 方法僅直接執行 SQL 的 delete from ... 語法，不會觸發任何回呼。</p><blockquote><p>Wavinfo 開發上習慣用 <code>destroy</code></p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"instance-method\">instance method<a href=\"#instance-method\" class=\"hash-link\" aria-label=\"instance method的直接連結\" title=\"instance method的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.destroy</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.delete</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"class-method\">class method<a href=\"#class-method\" class=\"hash-link\" aria-label=\"class method的直接連結\" title=\"class method的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Candidate.destroy(1)       # 刪除編號 1 的資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Candidate.delete(1)        # 刪除編號 1 的資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Candidate.destroy_all      # 刪除資料表所有資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Candidate.destroy_all(&quot;age &lt; 18&quot;)          # 刪除所有年齡小於 18 的資料</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"http://guides.rubyonrails.org/active_record_basics.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Basic</a> @ RailsGuides</li><li><a href=\"http://guides.rubyonrails.org/active_record_querying.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Query Interface</a> @ RailsGuides</li><li><a href=\"http://guides.rubyonrails.org/active_record_validations.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Validations</a> @ RailsGuides</li><li><a href=\"http://guides.rubyonrails.org/active_record_callbacks.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Callbacks</a> @ RailsGuides</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Active Record Migration (Database Migration) pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Active Record Migration (Database Migration) pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Active Record Migration (Database Migration)</h1></header><blockquote><p>參考資料：<a href=\"http://edgeguides.rubyonrails.org/active_record_migrations.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Migrations</a> @ RailsGuides</p></blockquote><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># CLI</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 會去執行 ./lib/tasks/dev.rake，需先設定</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bin/rails dev:build</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 把資料庫砍掉重建</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bin/rails db:drop db:create db:migrate db:seed</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./db/migrate/20170919064947_add_need_eticket_to_activities.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # add_column :table_name, :column_name, :type, :options</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  add_column :activities, :need_eticket, :boolean, {comment: &#x27;是否使用電子票券&#x27;, default: false}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-jsonb\">使用 jsonb<a href=\"#使用-jsonb\" class=\"hash-link\" aria-label=\"使用 jsonb的直接連結\" title=\"使用 jsonb的直接連結\">​</a></h4><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails g migration enable_hstore_extension</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># migration 檔案中放入以下內容</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">enable_extension &#x27;hstore&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-uuid\">使用 uuid<a href=\"#使用-uuid\" class=\"hash-link\" aria-label=\"使用 uuid的直接連結\" title=\"使用 uuid的直接連結\">​</a></h4><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails g migration enable_uuid_extension</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># migration 檔案中放入以下內容</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">enable_extension &#x27;uuid-ossp&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">enable_extension &#x27;pgcrypto&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"觀念\">觀念<a href=\"#觀念\" class=\"hash-link\" aria-label=\"觀念的直接連結\" title=\"觀念的直接連結\">​</a></h2><p>Migration 是用來描述「資料庫的架構長什麼樣子」的檔案，它會隨著專案開發的過程中逐漸增加。有了 Migration，記得要執行 <code>rails db:migrate</code> 指令，這樣就會把這些描述轉換成真實的資料表。</p><p>你可以把每一次的 migrate 都視為一次新「版本」的資料庫，因為 <code>bin/rails db:migrate</code> <strong>這個指令只會針對還沒執行過的 Migration 檔案有效果</strong>，已經做過的 Migration ，再做一次是不會有反應的，所以即使修改同一個 Migration 檔再重新執行是沒用的。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"透過-generator-建立-migration-檔\">透過 Generator 建立 migration 檔<a href=\"#透過-generator-建立-migration-檔\" class=\"hash-link\" aria-label=\"透過 Generator 建立 migration 檔的直接連結\" title=\"透過 Generator 建立 migration 檔的直接連結\">​</a></h2><p>我們可以利用 rails 中的 generator 來建立 migration 檔，migration 的檔案會存在 <code>db/migrate/</code> 中，其中 migration 檔案的檔名（以小寫底線或大寫駝峰命名）必須和 migration 檔中的 class （以大寫駝峰命名）相對應。</p><p>在尚未執行 <code>db:migrate</code> 前，利用 Generator 產生的 migration 檔案都可以在自己新增、移除或修改。</p><blockquote><p>透過 model 和 scaffold Generator 也會自動產生 migration 檔。</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"cheat-sheet\">Cheat Sheet<a href=\"#cheat-sheet\" class=\"hash-link\" aria-label=\"Cheat Sheet的直接連結\" title=\"Cheat Sheet的直接連結\">​</a></h3><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bin/rails g migration &lt;migration_file_name&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 建立資料表</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bin/rails g migration &lt;CREATE_tableName&gt; &lt;column_name: column_type&gt; &lt;column_name: column_type&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 新增移除欄位</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bin/rails g migration &lt;ADD_columnname_TO_tableName&gt; &lt;column_name&gt;:&lt;column_type&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bin/rails g migration &lt;REMOVE_columnname_FROM_tableName&gt; &lt;column_name&gt;:&lt;column_type&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 關連式資料表</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bin/rails g migration &lt;ADD_tableName_REF_TO_tableName&gt; &lt;table_name&gt;:references</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bin/rails g migration &lt;CREATE_JOIN_TABLE_tableName1_tableName2&gt; &lt;tableName1&gt; &lt;tableName2&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"產生一般的-migration-檔案\">產生一般的 migration 檔案<a href=\"#產生一般的-migration-檔案\" class=\"hash-link\" aria-label=\"產生一般的 migration 檔案的直接連結\" title=\"產生一般的 migration 檔案的直接連結\">​</a></h3><p>migration 檔案的名稱可以用<strong>大寫駝峰</strong>或<strong>小寫底線</strong>：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># bin/rails g migration &lt;migration_file_name&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails g migration combine_items_in_cart</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立資料表createxxx\">建立資料表（CreateXXX）<a href=\"#建立資料表createxxx\" class=\"hash-link\" aria-label=\"建立資料表（CreateXXX）的直接連結\" title=\"建立資料表（CreateXXX）的直接連結\">​</a></h3><p>如果 migration 的檔名是以 <code>create</code> 開頭，例如 <code>CreateProducts</code>，則會在產生的 migration 檔案中使用 <code>create_table</code>：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># bin/rails g migration create_tableName &lt;column_name: column_type&gt; &lt;column_name: column_type&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bin/rails g migration CreateProducts name:string part_number:string</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-add_column_to_table-新增欄位\">使用 add_column_to_table 新增欄位<a href=\"#使用-add_column_to_table-新增欄位\" class=\"hash-link\" aria-label=\"使用 add_column_to_table 新增欄位的直接連結\" title=\"使用 add_column_to_table 新增欄位的直接連結\">​</a></h3><p>使用關鍵字 <code>add</code> 和 <code>to</code> 可以在 migration 檔中自動增加 <code>add_column</code> 欄位：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># bin/rails g migration &lt;add_columnname_to_tableName&gt; &lt;column_name&gt;:&lt;column_type&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails g migration add_income_to_candidates income:integer</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-remove_column_from_table-移除欄位\">使用 remove_column_from_table 移除欄位<a href=\"#使用-remove_column_from_table-移除欄位\" class=\"hash-link\" aria-label=\"使用 remove_column_from_table 移除欄位的直接連結\" title=\"使用 remove_column_from_table 移除欄位的直接連結\">​</a></h3><p>使用關鍵字 <code>remove</code> 和 <code>from</code> 可以在 migration 檔中自動增加 <code>remove_column</code> 欄位：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># bin/rails g migration &lt;remove_columnname_from_tableName&gt; &lt;column_name&gt;:&lt;column_type&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails g migration remove_votes_from_candidates votes:integer</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"將欄位加入-index\">將欄位加入 index<a href=\"#將欄位加入-index\" class=\"hash-link\" aria-label=\"將欄位加入 index的直接連結\" title=\"將欄位加入 index的直接連結\">​</a></h3><p>若需要將該資料庫欄位設為 <code>index</code> 可以在該欄位後直接加上 <code>:index</code>，則在該 migration 檔中會自動加上 <code>add_index</code>：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bin/rails g migration AddPartNumberToProducts part_number:string:index</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-add_table_ref_to_table-將不同資料表關連\">使用 add_table_ref_to_table 將不同資料表關連<a href=\"#使用-add_table_ref_to_table-將不同資料表關連\" class=\"hash-link\" aria-label=\"使用 add_table_ref_to_table 將不同資料表關連的直接連結\" title=\"使用 add_table_ref_to_table 將不同資料表關連的直接連結\">​</a></h3><p>檔名為 <code>Add_tableName_ref_to_tableName</code> 搭配關鍵字 <code>references</code> 或 <code>belongs_to</code> 可以將不同資料表間的欄位互相關連，例如 <code>AddUserRefToProducts</code>，將會<strong>在 products 資料表中多出一個 user_id 的欄位</strong>：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># bin/rails g migration &lt;ADD_tableName_REF_TO_tableName&gt; &lt;table_name&gt;:references</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bin/rails g migration AddUserRefToProducts user:references</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-create_join_table_tablename_tablename\">使用 create_join_table_tableName_tableName<a href=\"#使用-create_join_table_tablename_tablename\" class=\"hash-link\" aria-label=\"使用 create_join_table_tableName_tableName的直接連結\" title=\"使用 create_join_table_tableName_tableName的直接連結\">​</a></h3><p>使用關鍵字 <code>join_table</code> 可以建立關連性資料表</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># bin/rails g migration CreateJoinTableTable1Table2 table1 table2</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bin/rails g migration CreateJoinTableProductProductItem product product_item</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"操作-migration-檔\">操作 migration 檔<a href=\"#操作-migration-檔\" class=\"hash-link\" aria-label=\"操作 migration 檔的直接連結\" title=\"操作 migration 檔的直接連結\">​</a></h2><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails db:create           # 依照目前的 RAILS_ENV 環境建立資料庫</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails db:create:all       # 建立所有環境的資料庫</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails db:drop             # 依照目前的 RAILS_ENV 環境刪除資料庫</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails db:drop:all         # 刪除所有環境的資料庫</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails db:migrate           # 將 migration 檔產成實際的資料庫檔案</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails db:migrate:status    # 檢視哪些 migration 被執行過（up 已執行/down 未執行）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails db:rollback</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails db:rollback STEP=1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails db:seed              # 把種子資料寫入資料庫中</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails db:setup             # 同時執行 migrate 和 seed 指令</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails db:reset             # 把 db 重置(drop + setup)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>因為 Rollback 通常會造成刪除資料表或是刪除欄位的效果，所以如果原本該資料表或該欄位已經有資料的話，請儘量不要使用 Rollback 方式來修正 Migration，建議直接再新增一個 Migration 來進行修正。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"migration-檔內容\">migration 檔內容<a href=\"#migration-檔內容\" class=\"hash-link\" aria-label=\"migration 檔內容的直接連結\" title=\"migration 檔內容的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"cheatsheet\">CheatSheet<a href=\"#cheatsheet\" class=\"hash-link\" aria-label=\"CheatSheet的直接連結\" title=\"CheatSheet的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># function &lt;:table_names&gt; &lt;options&gt; &lt;Block[t]&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">create_table &lt;:table_names&gt; &lt;Block[t]&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">drop_table &lt;:table_names&gt; &lt;Block[t]&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">add_column &lt;:table_name&gt;, &lt;:column_name&gt;, &lt;:column_type&gt;, &lt;options&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">remove_column &lt;:table_name&gt;, &lt;:column_name&gt;, &lt;:column_type&gt;, &lt;options&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">change_table</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">change_column</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">change_column_null</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">change_column_default</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">add_index &lt;:table_name&gt;, &lt;:column_name&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">add_reference &lt;:table_name&gt;, &lt;:table_name&gt;, &lt;options&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">add_foreign_key &lt;:table_name&gt; &lt;:table_name&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">create_join_table &lt;:table_name&gt;, &lt;:table_name&gt; &lt;block[t]&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># property in t, t.&lt;property&gt; &lt;:column_name&gt; &lt;Hash&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># t.&lt;column_type&gt; :&lt;column_name&gt;, &lt;options&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">t.string &lt;:column_name&gt; &lt;options&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">t.decimal &lt;:column_name&gt; &lt;options&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">t.references &lt;:column_name&gt; &lt;options&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">t.timestamps &lt;:column_name&gt; &lt;options&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"table-methods\">Table Methods<a href=\"#table-methods\" class=\"hash-link\" aria-label=\"Table Methods的直接連結\" title=\"Table Methods的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立資料表-create_table\">建立資料表 create_table<a href=\"#建立資料表-create_table\" class=\"hash-link\" aria-label=\"建立資料表 create_table的直接連結\" title=\"建立資料表 create_table的直接連結\">​</a></h4><ul><li><code>CreateStores</code> 是用 generator 下 migration 指令時的檔名</li><li><code>create_table</code> 表示要新增 table，這裡 table 的名稱為 candidates<ul><li>如果不想要使用主鍵，可以加上 <code>id: false</code></li><li>用 <code>t.&lt;type&gt; :&lt;column&gt;, &lt;options&gt;</code> 建立資料表中的欄位</li></ul></li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># $ bin/rails g migration createStores title tel address</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># create_table &lt;table_name&gt;, &lt;options&gt;, block(&lt;t&gt;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class CreateStores &lt; ActiveRecord::Migration[5.1]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :stores do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :title</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :tel</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :address</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"修改資料表add_column-remove_column-change_column\">修改資料表（add_column, remove_column, change_column）<a href=\"#修改資料表add_column-remove_column-change_column\" class=\"hash-link\" aria-label=\"修改資料表（add_column, remove_column, change_column）的直接連結\" title=\"修改資料表（add_column, remove_column, change_column）的直接連結\">​</a></h4><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"add_column\">add_column<a href=\"#add_column\" class=\"hash-link\" aria-label=\"add_column的直接連結\" title=\"add_column的直接連結\">​</a></h5><ul><li>使用 <code>add_column</code> 來新增欄位</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># $ bin/rails g migration add_name_to_stores name:string</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># add_column &lt;:table_name&gt;, &lt;:column_name&gt;, &lt;:column_type&gt;, &lt;options&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class AddNameToStores &lt; ActiveRecord::Migration[5.1]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    add_column :stores, :name, :string, {comment: &#x27;店名&#x27;}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"remove_column\">remove_column<a href=\"#remove_column\" class=\"hash-link\" aria-label=\"remove_column的直接連結\" title=\"remove_column的直接連結\">​</a></h5><ul><li>使用 <code>remove_column</code> 來移除資料表欄位</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># $ bin/rails g migration remove_tel_from_users tel:string</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># remove_column &lt;:table_name&gt;, &lt;:column_name&gt;, &lt;:column_type&gt;, &lt;options&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class RemoveTelFromUsers &lt; ActiveRecord::Migration[5.1]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    remove_column :users, :tel, :string</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"change_table\">change_table<a href=\"#change_table\" class=\"hash-link\" aria-label=\"change_table的直接連結\" title=\"change_table的直接連結\">​</a></h5><ul><li>使用 <code>change_table</code> 來修改建立好的欄位</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">change_table :products do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  t.remove :description, :name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  t.string :part_number</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  t.index :part_number</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  t.rename :upccode, :upc_code</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"change_column\">change_column<a href=\"#change_column\" class=\"hash-link\" aria-label=\"change_column的直接連結\" title=\"change_column的直接連結\">​</a></h5><p>＊ 使用 <code>change_column</code> 來修改特定的欄位</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># change_column &lt;:table_name&gt;, &lt;:col_name&gt;, &lt;:col_type&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">change_column :products, :part_number, :text</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># change_column_null &lt;:table_name&gt;, &lt;:col_name&gt;, &lt;Boolean&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">change_column_null :products, :name, false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># change_column_default &lt;:table_name&gt;, &lt;:col_name&gt;, {from: xxx, to: ooo}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">change_column_default :products, :approved, from: true, to: false</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"關連式資料表create_join_table-add_reference\">關連式資料表（create_join_table, add_reference）<a href=\"#關連式資料表create_join_table-add_reference\" class=\"hash-link\" aria-label=\"關連式資料表（create_join_table, add_reference）的直接連結\" title=\"關連式資料表（create_join_table, add_reference）的直接連結\">​</a></h4><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"create_join_table\">create_join_table<a href=\"#create_join_table\" class=\"hash-link\" aria-label=\"create_join_table的直接連結\" title=\"create_join_table的直接連結\">​</a></h5><ul><li>使用 <code>create_join_table</code> 將產生一個 table ，它會包含另外兩個 table 的 id 來建立關連式資料表，這是一個 HABTM (has and belongs to many) 的結構。</li><li>預設 <code>:null</code> 會是 false，如果需要可以透過 <code>:column_options</code> 來修改</li><li>table 的名稱預設會按照字母順序加給入的兩個 table_name 合起來，若想修改可以透過 <code>table_name:</code> 來修改。</li><li>會建立一個名為 <code>product_items_products</code> 的資料表，裡面包含 <code>product_id</code> 和 <code>product_item_id</code> 這兩個欄位。</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># $ bin/rails g migration CreateJoinTableProductProductItem product product_item</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># create_join_table &lt;:table_name&gt;, &lt;:table_name&gt; &lt;block[t]&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class CreateJoinTableProductProductItem &lt; ActiveRecord::Migration[5.1]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_join_table :products, :product_items, column_options: {null: true}, table_name: :categorization do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      # t.index [:product_id, :product_item_id]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      # t.index [:product_item_id, :product_id]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"add_reference\">add_reference<a href=\"#add_reference\" class=\"hash-link\" aria-label=\"add_reference的直接連結\" title=\"add_reference的直接連結\">​</a></h5><ul><li>使用 <code>add_reference</code> 將在原本的 table 中增加另一個 table 的 id 來建立關連式資料表。</li><li><code>add_users_ref_to_stores</code> 執行完後，<code>stores</code> 資料表會多一個 <code>users_id</code> 的欄位，並且多一個名為 <code>index_stores_on_users_id</code> 的 index。</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># $ bin/rails g migration AddUsersRefToStores users:references</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># add_reference &lt;:target_table&gt;, &lt;:ref_table&gt;, &lt;options&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class AddUsersRefToStores &lt; ActiveRecord::Migration[5.1]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    add_reference :stores, :users, foreign_key: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>可以想成 前面（target_table） 會多一個 （ref_table）的 id。</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立索引add_index\">建立索引（add_index）<a href=\"#建立索引add_index\" class=\"hash-link\" aria-label=\"建立索引（add_index）的直接連結\" title=\"建立索引（add_index）的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># add_index &lt;:table_name&gt;, &lt;:column_name&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">add_index :users, :candidates</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">add_index :users, :email,  unique: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">add_index :roles, [:name, :resource_type, :resource_id]</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"table-modifiers\">Table Modifiers<a href=\"#table-modifiers\" class=\"hash-link\" aria-label=\"Table Modifiers的直接連結\" title=\"Table Modifiers的直接連結\">​</a></h3><ul><li><code>id: false</code>：不要產生 primary key</li><li><code>:primary_key</code>：修改 primary key 預設的名稱</li><li><code>:options</code>：放入的特定的 SQL 指令</li><li><code>:comment</code>：關於此資料表的註解</li><li><code>:column_options</code>: Hash，要放入 column 的屬性和值</li><li><code>:table_name</code>: Symbol，放入資料表名稱，例如（:categorizations）</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./db/migrate/migration_files.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 透過 id: false 來移除主鍵</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">create_table :assemblies_parts, id: false do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"column-type-t\">Column type (t)<a href=\"#column-type-t\" class=\"hash-link\" aria-label=\"Column type (t)的直接連結\" title=\"Column type (t)的直接連結\">​</a></h3><p>在 block|t| 中可以使用的屬性包括</p><ul><li><code>t.string</code></li><li><code>t.integer</code></li><li><code>t.text</code></li><li><code>t.decimal</code></li></ul><p>--</p><ul><li><code>t.datetime</code></li><li><code>t.timestamp</code>：自動產生 <code>created_at</code> 和 <code>updated_at</code> 欄位</li></ul><p>--</p><ul><li><code>t.remove</code>: Symbol，要移除的欄位</li><li><code>t.index</code>: Symbol，要加入索引的欄位</li><li><code>t.rename</code>：Symbol，要重新命名的欄位（<code>t.rename :upccode, :upc_code</code>）</li><li><code>t.belongs_to</code>：Symbol（<code>t.belongs_to :category, type: :uuid, foreign_key: true</code>）</li><li><code>t.references</code>: 表示它會參照到另一個 table 的 <code>uuid</code>，例如<code>t.references :user, foreign_key: true</code>）時該資料表會多一個 <code>user_id</code>。</li></ul><blockquote><p>過去在關連資料庫建立 migration 檔案時，會直接使用 <code>t.integer :user_id</code>，也可以使用 <code>t.references :user</code> 或 <code>t.belongs_to :user</code>，這三個實際做的內容是一樣的，只是語意上不同而已。都會在該 table 中多出一個 user_id 的欄位。</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"column-modifiers\">Column Modifiers<a href=\"#column-modifiers\" class=\"hash-link\" aria-label=\"Column Modifiers的直接連結\" title=\"Column Modifiers的直接連結\">​</a></h3><p>可以使用的 options 包括：</p><ul><li><code>comment</code>: String，用來描述資料欄位。</li><li><code>null</code>: Boolean，是否允許空值。</li><li><code>default</code>: String，設定預設值。</li><li><code>limit</code>: Number，限制 maxSize（string/text/binary/integer）</li><li><code>precision</code>: Number（decimal）</li><li><code>scale</code>: Number（decimal）</li><li><code>polymorphic</code>: Boolean，在 belongs_to 後加上一個 column_type。</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">t.references :imageable, polymorphic: true, type: :uuid, index: true</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li><code>type</code>: <code>:uuid</code></li><li><code>foreign_key</code>: Boolean</li><li><code>index</code>：Boolean，為該欄位加上索引</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立種子資料seed\">建立種子資料（seed）<a href=\"#建立種子資料seed\" class=\"hash-link\" aria-label=\"建立種子資料（seed）的直接連結\" title=\"建立種子資料（seed）的直接連結\">​</a></h2><p>在 <code>db/seeds.rb</code> 中，一樣可以撰寫 migration 檔，和 migration 檔不一樣的地方在於，seeds.rb 是可以重複執行的。</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 寫在 db/seeds.rb 中</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Article.create(title: &quot;五倍紅寶石 part 1&quot;, content: &quot;斷開鎖鍊吧!&quot;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Article.create(title: &quot;五倍紅寶石 part 2&quot;, content: &quot;斷開魂結吧!&quot;)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"http://edgeguides.rubyonrails.org/active_record_migrations.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Migrations</a> @ RailsGuides</li><li><a href=\"https://ihower.tw/rails/migrations.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record - 資料庫遷移(Migration)</a> @ ihower</li><li><a href=\"http://railsbook.tw/chapters/17-model-migration.html\" target=\"_blank\" rel=\"noopener noreferrer\">Model Migration</a> @ 為你自己學 Ruby on Rails</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Active Record Query（SQL Query &amp; Model 資料查詢） pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Active Record Query（SQL Query &amp; Model 資料查詢） pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Active Record Query（SQL Query &amp; Model 資料查詢）</h1></header><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-sql-query-scope-enum-find_or_create_by\">keywords: <code>SQL Query</code>, <code>scope</code>, <code>enum</code>, <code>find_or_create_by</code><a href=\"#keywords-sql-query-scope-enum-find_or_create_by\" class=\"hash-link\" aria-label=\"keywords-sql-query-scope-enum-find_or_create_by的直接連結\" title=\"keywords-sql-query-scope-enum-find_or_create_by的直接連結\">​</a></h5><blockquote><p><a href=\"http://guides.rubyonrails.org/active_record_querying.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Query Interface</a> @ RailsGuides</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"tldr\">TL;DR<a href=\"#tldr\" class=\"hash-link\" aria-label=\"TL;DR的直接連結\" title=\"TL;DR的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Post.where(&#x27;is_published = ? AND publish_at &lt;= ?&#x27;, true, Time.zone.now)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"目錄\">目錄<a href=\"#目錄\" class=\"hash-link\" aria-label=\"目錄的直接連結\" title=\"目錄的直接連結\">​</a></h2><p>[TOC]</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"取得資料retrieving-objects-from-the-database\">取得資料（Retrieving Objects from the Database）<a href=\"#取得資料retrieving-objects-from-the-database\" class=\"hash-link\" aria-label=\"取得資料（Retrieving Objects from the Database）的直接連結\" title=\"取得資料（Retrieving Objects from the Database）的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"取得單一物件retrieving-a-single-object\">取得單一物件（Retrieving a Single Object）<a href=\"#取得單一物件retrieving-a-single-object\" class=\"hash-link\" aria-label=\"取得單一物件（Retrieving a Single Object）的直接連結\" title=\"取得單一物件（Retrieving a Single Object）的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-find-find_by-where-first-last-take\">keywords: <code>find</code>, <code>find_by</code>, <code>where</code>, <code>first</code>, <code>last</code>, <code>take</code><a href=\"#keywords-find-find_by-where-first-last-take\" class=\"hash-link\" aria-label=\"keywords-find-find_by-where-first-last-take的直接連結\" title=\"keywords-find-find_by-where-first-last-take的直接連結\">​</a></h5><div class=\"language-Ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-Ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># find: 透過 Primary Key 搜尋資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">product = Product.find(10)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">products = Product.find([1, 10])      # 等同於 Client.find(1, 10)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># find_by: 根據欄位找出第一筆符合的資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">product = Product.find_by name: &#x27;car&#x27;    # 找出第一筆欄位 name 中值為 car 的資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">product = Product.where(name: &#x27;car&#x27;).take   # 和上面的寫法相同</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># first: 根據 id 排序，取得第一筆資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">product = Product.first            # 根據 id 排序取得第一筆資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">products = Product.first(3)          # 根據 id 排序取得前三筆資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># last：根據 id 排序，取得最後一筆資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">product = Product.last            # 根據 id 排序取得最後一筆資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">products = Product.last(3)          # 根據 id 排序取得倒數後三筆資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># take: 取得資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">product = Product.take            # 取得一筆 Product 的資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">products = Product.take(2)          # 取得兩筆 Product 的資料</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 其他</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Candidate.count                                  # 計算資料筆數</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Candidate.average(:age).to_f                     # 根據某資料平均</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Candidate.sum(:age)                              # 根據某資料加總</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Candidate.maximum(:age)                          # 取的最大值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Candidate.minimum(:age)                          # 取的最小值</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"分批取得多筆資料retrieving-multiple-objects-in-batches\">分批取得多筆資料（Retrieving Multiple Objects in Batches）<a href=\"#分批取得多筆資料retrieving-multiple-objects-in-batches\" class=\"hash-link\" aria-label=\"分批取得多筆資料（Retrieving Multiple Objects in Batches）的直接連結\" title=\"分批取得多筆資料（Retrieving Multiple Objects in Batches）的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-find_each-find_in_batches\">keywords: <code>find_each</code>, <code>find_in_batches</code><a href=\"#keywords-find_each-find_in_batches\" class=\"hash-link\" aria-label=\"keywords-find_each-find_in_batches的直接連結\" title=\"keywords-find_each-find_in_batches的直接連結\">​</a></h5><p>在取得多筆資料時我們很容易會使用：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Products.all.each do |product|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    #...</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>但這樣的做法，會一次將整個 table 的資料提取出來，並存放在記憶體中，<strong>因此這個做在當資料量很龐大時，很有可能會超過記憶體的負荷</strong>。</p><p>Rails 提供兩種方式來改善記憶體潰乏的問題，這兩種方式都對記憶體的使用更為友善，分別是 <code>find_each</code> 和 <code>find_in_batches</code>。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"條件篩選conditions\">條件篩選（Conditions）<a href=\"#條件篩選conditions\" class=\"hash-link\" aria-label=\"條件篩選（Conditions）的直接連結\" title=\"條件篩選（Conditions）的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"基本的條件篩選\">基本的條件篩選<a href=\"#基本的條件篩選\" class=\"hash-link\" aria-label=\"基本的條件篩選的直接連結\" title=\"基本的條件篩選的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-where\">keywords: <code>where</code><a href=\"#keywords-where\" class=\"hash-link\" aria-label=\"keywords-where的直接連結\" title=\"keywords-where的直接連結\">​</a></h5><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># !!非常不建議這樣寫!!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用純字串篩選（Pure String Conditions）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.where(&quot;orders_count = &#x27;2&#x27;&quot;)                # 非常不建議這樣寫</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.where(&quot;first_name LIKE &#x27;%#{params[:first_name]}%&#x27;&quot;)    # 非常不建議這樣寫</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.where(&quot;orders_count = #{params[:orders]}&quot;)          # 非常不建議這樣寫</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 ? （Array Conditions）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Active Record 會把第一個參數當作條件，後面的參數則會分別取代掉前面的 (?)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.where(&quot;orders_count = ?&quot;, params[:orders])              # 單一條件</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.where(&quot;orders_count = ? AND locked = ?&quot;, params[:orders], false)    # 多個條件</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 Symbol 定義變數，再透過 Hash 給值（placeholder conditions）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.where(&quot;created_at &gt;= :start_date AND created_at &lt;= :end_date&quot;,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  {start_date: params[:start_date], end_date: params[:end_date]})</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 Hash</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.where(locked: true)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.where(&#x27;locked&#x27; =&gt; true)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.where(status: :active)      # 錯誤寫法，Hash 的值不能是 Symbol</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><strong>注意：</strong> &gt; <strong>使用單純的字串來定義條件很容易陷入 SQL injection 的危險中。</strong> &gt; <strong>千萬不要把「參數」直接帶入條件篩選的字串內！</strong></p><p>因為參數的安全性，把變數直接帶到條件式中，等同於直接把使用者輸入的內容如實的帶入資料庫查詢中，因此即使使用者輸入非法字元也不會被跳脫掉，這將使得你的資料庫面臨危險。</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"搜尋功能\">搜尋功能<a href=\"#搜尋功能\" class=\"hash-link\" aria-label=\"搜尋功能的直接連結\" title=\"搜尋功能的直接連結\">​</a></h3><ul><li><code>ILIKE</code> 是 postgreSQL 的擴充功能，表示針對字串進行 insensitive（忽略大小寫）的比較。</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 非常不建議這樣寫</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">App::Completion.joins(:personal_info).where(&#x27;name ILIKE ? OR country ILIKE ? OR city ILIKE ?&#x27;, &quot;%#{search}%&quot;, &quot;%#{search}%&quot;, &quot;%#{search}%&quot;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 非常不建議這樣寫</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">App::Completion.joins(:personal_info).where(&quot;name ILIKE &#x27;%tester%&#x27;&quot;).all</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他條件篩選\">其他條件篩選<a href=\"#其他條件篩選\" class=\"hash-link\" aria-label=\"其他條件篩選的直接連結\" title=\"其他條件篩選的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-between--and--in-not\">keywords: <code>BETWEEN … AND …</code>, <code>IN</code>, <code>NOT</code><a href=\"#keywords-between--and--in-not\" class=\"hash-link\" aria-label=\"keywords-between--and--in-not的直接連結\" title=\"keywords-between--and--in-not的直接連結\">​</a></h5><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 .. （Range Conditions）：BETWEEN ... AND ...</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.where(created_at: (Time.now.midnight - 1.day)..Time.now.midnight)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.where(created_at: Date.parse(&#x27;2018-01-01&#x27;)..Date.parse(&#x27;2019-01-01&#x27;))</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 [] （Subset Conditions）：IN</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.where(orders_count: [1,3,5])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 NOT</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.where.not(locked: true)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.where.not(payment_type: [&#x27;GAME&#x27;, &#x27;COST&#x27;])</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"資料排序ordering\">資料排序（Ordering）<a href=\"#資料排序ordering\" class=\"hash-link\" aria-label=\"資料排序（Ordering）的直接連結\" title=\"資料排序（Ordering）的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.order(:created_at)      # 等同於 Client.order(&quot;created_at&quot;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.order(created_at: :desc)    # 等同於 Client.order(&quot;created_at DESC&quot;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.order(created_at: :asc)    # 等同於 Client.order(&quot;created_at ASC&quot;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.order(:orders_count, created_at: :desc)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.order(orders_count: :asc, created_at: :desc)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">              # 等同於 Client.order(&quot;orders_count ASC, created_at DESC&quot;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">              # 等同於 Client.order(&quot;orders_count ASC&quot;, &quot;created_at DESC&quot;)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 order chain</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.order(&quot;orders_count ASC&quot;).order(&quot;created_at DESC&quot;)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"選擇特定欄位selecting-specific-fields\">選擇特定欄位（Selecting Specific Fields）<a href=\"#選擇特定欄位selecting-specific-fields\" class=\"hash-link\" aria-label=\"選擇特定欄位（Selecting Specific Fields）的直接連結\" title=\"選擇特定欄位（Selecting Specific Fields）的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-select\">keywords: <code>SELECT</code><a href=\"#keywords-select\" class=\"hash-link\" aria-label=\"keywords-select的直接連結\" title=\"keywords-select的直接連結\">​</a></h5><p>預設的情況下，使用 <code>Model.find</code> 來選擇資料時，會透過 <code>select *</code> 來選擇所有欄位，如果只想撈出某些欄位呈現，可以使用 <code>select</code> 方法：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 只選擇 viewable_by 和 locked 這兩個欄位</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.select(&quot;viewable_by, locked&quot;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Order.select(&quot;date(created_at) as ordered_date, sum(price) as total_price&quot;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 只選擇 name 欄位，而且只保留獨特值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.select(:name).distinct          # SELECT DISTINCT name FROM clients</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>使用 <code>select</code> 的時候要特別留意，因為表示<strong>這個 model 物件只會包含所選擇的欄位</strong>。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"設定限制數量limit和從哪個開始取offset\">設定限制數量（limit）和從哪個開始取（offset）<a href=\"#設定限制數量limit和從哪個開始取offset\" class=\"hash-link\" aria-label=\"設定限制數量（limit）和從哪個開始取（offset）的直接連結\" title=\"設定限制數量（limit）和從哪個開始取（offset）的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-limit-offset\">keywords: <code>LIMIT</code>, <code>OFFSET</code><a href=\"#keywords-limit-offset\" class=\"hash-link\" aria-label=\"keywords-limit-offset的直接連結\" title=\"keywords-limit-offset的直接連結\">​</a></h5><p>透過 <code>limit</code> 可以限制要取出來的資料數目；<code>offset</code> 則可以指定要從哪一筆資料開始算起。</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.limit(5).offset(30)    # 從第 31 筆開始取 5 筆資料</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"分群group\">分群（Group）<a href=\"#分群group\" class=\"hash-link\" aria-label=\"分群（Group）的直接連結\" title=\"分群（Group）的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywordsgroup-by\">keywords:<code>GROUP BY</code><a href=\"#keywordsgroup-by\" class=\"hash-link\" aria-label=\"keywordsgroup-by的直接連結\" title=\"keywordsgroup-by的直接連結\">​</a></h5><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Order.select(&quot;date(created_at) as ordered_date, sum(price) as total_price&quot;).group(&quot;date(created_at)&quot;)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"大量取出關連資料eager-loading-associations\">大量取出關連資料（Eager Loading Associations）<a href=\"#大量取出關連資料eager-loading-associations\" class=\"hash-link\" aria-label=\"大量取出關連資料（Eager Loading Associations）的直接連結\" title=\"大量取出關連資料（Eager Loading Associations）的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-includes\">keywords: <code>includes</code><a href=\"#keywords-includes\" class=\"hash-link\" aria-label=\"keywords-includes的直接連結\" title=\"keywords-includes的直接連結\">​</a></h5><blockquote><p><a href=\"http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" target=\"_blank\" rel=\"noopener noreferrer\">Eager Loading Associations</a> @ RailsGuides</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"n--1-queries-problem-and-solution\">N + 1 Queries Problem and Solution<a href=\"#n--1-queries-problem-and-solution\" class=\"hash-link\" aria-label=\"N + 1 Queries Problem and Solution的直接連結\" title=\"N + 1 Queries Problem and Solution的直接連結\">​</a></h3><p>當我們執行下面的程式時，我們只是想要找出 10 篇貼文的使用者（user）名稱：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Post belongs_to User</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">posts = Post.limit(10)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">posts.map(&amp;:user)    # 會發動很多次的 query 去找關連的使用者</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>然而，上面的程式碼會執行：</p><div class=\"language-text codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">1 （找出 10 筆貼文） + 10（每個貼文都去找關連它的使用者） = 總共 11 次查詢</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>這樣的問題被稱作 n + 1 queries problem。</p><p>要解決這樣的問題，在 Active Record 中可以讓你<strong>事先定義即將要使用到的關連</strong>，透過 <strong><code>includes</code></strong> 這個方法，Active Record 將會確保所有相關連的欄位被使用最少次的 queries 來載入：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Post belongs_to User</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 同樣的內容，但這次多了 includes</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">posts = Post.includes(:user).limit(10)    # 發動兩次 query</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">posts.map(&amp;:user)              # 不需要在 query</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>這次只會 query 兩次，而非 11 次：</p><div class=\"language-sql codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sql codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">SELECT</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">FROM</span><span class=\"token plain\"> posts </span><span class=\"token keyword\" style=\"font-style:italic\">LIMIT</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">10</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">SELECT</span><span class=\"token plain\"> users</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">FROM</span><span class=\"token plain\"> users</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">WHERE</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token keyword\" style=\"font-style:italic\">user</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">id </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">IN</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">3</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">4</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">5</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">6</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">7</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">8</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">9</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">10</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"一次載入多個欄位eager-loading-multiple-associations\">一次載入多個欄位（Eager Loading Multiple Associations）<a href=\"#一次載入多個欄位eager-loading-multiple-associations\" class=\"hash-link\" aria-label=\"一次載入多個欄位（Eager Loading Multiple Associations）的直接連結\" title=\"一次載入多個欄位（Eager Loading Multiple Associations）的直接連結\">​</a></h3><p>Active Record 讓你可以在 <strong><code>includes</code></strong> 方法中，代入陣列、hash 或槽狀的 hash/array 當作參數，來在單一個 <code>Model.find</code> 中一次載入許多的關連：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 先把和 Articles 有關連的 Category 和 Comments Model 都載入</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Article.includes(:category, :comments)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 這將會找到 id 為 1 的 category instance 並載入所有相關連的 Article，</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 以及和 Article 有關的 Tag 和 Comment</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 以及所有和 Comment 有關連的 Guest</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Category.includes(articles: [{ comments: :guest }, :tags]).find(1)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"和-join-的差別\">和 join 的差別<a href=\"#和-join-的差別\" class=\"hash-link\" aria-label=\"和 join 的差別的直接連結\" title=\"和 join 的差別的直接連結\">​</a></h3><p>雖然 <strong><code>includes</code></strong> 這個方法可以和 <code>joins</code> 一樣定義篩選的條件，但比較推薦的方式還是使用 <code>joins</code>，因為如果是透過 <code>includes</code> 來查詢的話，即時 Article 的 Comments 沒有資料仍然會載入；但如果是使用 <code>joins</code> 的話，join 的條件必須要先符合，否則沒有結果會回傳。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"scope\">Scope<a href=\"#scope\" class=\"hash-link\" aria-label=\"Scope的直接連結\" title=\"Scope的直接連結\">​</a></h2><p>在 Rails 中 scope 可以讓你定義一些常會使到的 queries：</p><div class=\"language-Ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-Ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># define scope in MODEL</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 基本的 scope</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Article &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  scope :published, -&gt; { where(published: true) }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 在 scope 中帶入參數</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Candidate &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  scope :created_before, -&gt;(time) { where(&quot;created_at &lt; ?&quot;, time) }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  scope :limit_age, -&gt; (age) { where(&quot;age &gt; #{age}&quot;) }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  scope :limit_votes, -&gt; (p) { where([&quot;votes &gt; ?&quot;, p]) }            # 兩種寫法都可以</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 定義條件</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Article &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  scope :created_before, -&gt;(time) { where(&quot;created_at &lt; ?&quot;, time) if time.present? }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 在 scope 中可以帶入另一個 scope</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Candidate</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # scope 中可以代入另一個 scope</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  scope :available, -&gt; { limit_age(30).where(&#x27;votes &gt; 3&#x27;) }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在 Controller 中只需使用：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># use scope in CONTROLLER</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 基本的使用</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Article.published # =&gt; [published articles]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 帶入參數</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Article.created_before(Time.zone.now)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"default-scope-and-unscope\">Default Scope and Unscope<a href=\"#default-scope-and-unscope\" class=\"hash-link\" aria-label=\"Default Scope and Unscope的直接連結\" title=\"Default Scope and Unscope的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-default_scope-unscoped\">keywords: <code>default_scope</code>, <code>unscoped</code><a href=\"#keywords-default_scope-unscoped\" class=\"hash-link\" aria-label=\"keywords-default_scope-unscoped的直接連結\" title=\"keywords-default_scope-unscoped的直接連結\">​</a></h5><p>在 Model 中我們也可以定義 <strong>default scope</strong> ，如果所有經過這個 model 內 query 都會套用到這個 <code>default_scope</code>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># define default scope in model</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Client &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  default_scope { where(&quot;removed_at IS NULL&quot;) }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  default_scope { order(created_at: :desc) }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  default_scope { order(&#x27;created_at DESC&#x27;) }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><code>default_scope</code> 會在 creating/building 資料的時候套用，但不會在 updating 的時候呼叫到。</p></blockquote><p>如果基於某些理由，你不希望套用 scope 時，可以使用 <code>unscoped</code> 這個方法，如此原本的 <strong>default scope</strong> 將不會被套用到：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># in CONTROLLER</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.unscoped.load</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"scope--class-method\">Scope &amp; Class Method<a href=\"#scope--class-method\" class=\"hash-link\" aria-label=\"Scope &amp; Class Method的直接連結\" title=\"Scope &amp; Class Method的直接連結\">​</a></h3><p>實際上 scope 的用法是透過定義 Class Method，因此上面 scope 的寫法等同於：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 等同於 scope 的寫法</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Article &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def self.published</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    where(published: true)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Article &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def self.created_before(time)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    where(&quot;created_at &lt; ?&quot;, time)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>兩者不同之處在於，使用 scope 總是會回傳 <strong>ActiveRecord::Relation</strong> 物件，當篩選的條件不存在時，會回傳 <code>false</code> ，但是透過 class method 則是會回傳 <code>nil</code>。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"enum\">Enum<a href=\"#enum\" class=\"hash-link\" aria-label=\"Enum的直接連結\" title=\"Enum的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-enum\">keywords: <code>enum</code><a href=\"#keywords-enum\" class=\"hash-link\" aria-label=\"keywords-enum的直接連結\" title=\"keywords-enum的直接連結\">​</a></h5><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Book &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  enum availability: [:available, :unavailable]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"找到或建立新物件find-or-build-a-new-object\">找到或建立新物件（Find or Build a New Object）<a href=\"#找到或建立新物件find-or-build-a-new-object\" class=\"hash-link\" aria-label=\"找到或建立新物件（Find or Build a New Object）的直接連結\" title=\"找到或建立新物件（Find or Build a New Object）的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-find_or_create_by\">keywords: <code>find_or_create_by</code><a href=\"#keywords-find_or_create_by\" class=\"hash-link\" aria-label=\"keywords-find_or_create_by的直接連結\" title=\"keywords-find_or_create_by的直接連結\">​</a></h5><p>透過 <code>find_or_create_by</code> 方法可以檢驗一筆紀錄中某個屬性是否存在，如果存在則讀取；如果不存在的話，那麼就建立它：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Client.find_or_create_by(first_name: &#x27;Andy&#x27;)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"可用方法參考\">可用方法參考<a href=\"#可用方法參考\" class=\"hash-link\" aria-label=\"可用方法參考的直接連結\" title=\"可用方法參考的直接連結\">​</a></h2><ul><li><code>find</code></li><li><code>create_with</code></li><li><code>distinct</code></li><li><code>eager_load</code></li><li><code>extending</code></li><li><code>from</code></li><li><code>group</code></li><li><code>having</code></li><li><code>includes</code></li><li><code>joins</code></li><li><code>left_outer_joins</code></li><li><code>limit</code></li><li><code>lock</code></li><li><code>none</code></li><li><code>offset</code></li><li><code>order</code></li><li><code>preload</code></li><li><code>readonly</code></li><li><code>references</code></li><li><code>reorder</code></li><li><code>reverse_order</code></li><li><code>select</code></li><li><code>where</code></li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"範例程式碼\">範例程式碼<a href=\"#範例程式碼\" class=\"hash-link\" aria-label=\"範例程式碼的直接連結\" title=\"範例程式碼的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"處理時間搜尋\">處理時間搜尋<a href=\"#處理時間搜尋\" class=\"hash-link\" aria-label=\"處理時間搜尋的直接連結\" title=\"處理時間搜尋的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def record</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    @transactions = Transaction.all</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    where_condition = {}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    arel_update_at = Transaction.arel_table[:updated_at]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    if params[:start_at].present?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      start_at_condition = arel_update_at.gteq(Date.parse(params[:start_at]).beginning_of_day)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    if params[:end_at].present?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      end_at_condition = arel_update_at.lteq(Date.parse(params[:end_at]).end_of_day)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    if params[:status].present?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      where_condition[:status] = params[:status]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    if params[:payment_type].present?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      where_condition[:payment_type] = params[:payment_type]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    @transactions = Transaction.where(start_at_condition).where(end_at_condition).where(where_condition)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"http://guides.rubyonrails.org/active_record_querying.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Query Interface</a> @ RailsGuides</li><li><a href=\"https://railsbook.tw/chapters/16-model-basic.html\" target=\"_blank\" rel=\"noopener noreferrer\">Rails Active Record Basic - Model</a></li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Active Record Validations（Model 資料驗證） pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Active Record Validations（Model 資料驗證） pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Active Record Validations（Model 資料驗證）</h1></header><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-資料驗證-valid-error\">keywords: <code>資料驗證</code>, <code>valid</code>, <code>error</code><a href=\"#keywords-資料驗證-valid-error\" class=\"hash-link\" aria-label=\"keywords-資料驗證-valid-error的直接連結\" title=\"keywords-資料驗證-valid-error的直接連結\">​</a></h5><p>資料驗證這件事在 Rails 的 MVC 三分天下的架構中，Controller 跟 Model 都可以做這件事，要在 View 裡寫 JavaScript 做檢查也可以，但這件事如果交給 Controller 或 View 來做的話，一來會讓程式碼的邏輯變得更複雜，二來這個驗證也不容易被重複使用，也不容易被測試，所以資料機制寫在 Model 裡是比較合理而且單純的。</p><blockquote><p><a href=\"http://guides.rubyonrails.org/active_record_validations.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Validations</a> @ RailsGuides</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"model-資料驗證設定\">Model 資料驗證設定<a href=\"#model-資料驗證設定\" class=\"hash-link\" aria-label=\"Model 資料驗證設定的直接連結\" title=\"Model 資料驗證設定的直接連結\">​</a></h2><p>除了 presence 之外，Rails 還有提供其它像是 uniqueness、length 或 numericality 等便利的驗證器，使用方法可直接參考 Rails Guide 的 <a href=\"http://guides.rubyonrails.org/active_record_validations.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Validations 章節</a>。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"範例一\">範例一<a href=\"#範例一\" class=\"hash-link\" aria-label=\"範例一的直接連結\" title=\"範例一的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#####################################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##             在 Model 中進行資料驗證                ##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#####################################################</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Candidate &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  validates :name, presence: true                # 寫法一</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  validates_presence_of :party                   # 寫法二</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"範例二\">範例二<a href=\"#範例二\" class=\"hash-link\" aria-label=\"範例二的直接連結\" title=\"範例二的直接連結\">​</a></h3><p><code>validates</code>：是標準 Rails 的驗證器（validator）",
      "<code>presence: true</code>：則是告訴驗證器要驗證每個欄位是否存在，而且不是空值。",
      "<code>numericality</code>： 用來確認內容是有效的數值",
      "<code>uniqueness</code>：檢驗資料庫中有無具有相同 title 的列",
      "<code>allow_blank</code>：用來允許欄位是空值</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Product &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  validates :title, :description, :image_url, presence: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  validates :price, numericality: {greater_than_or_equal_to: 0.01}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  validates :title, uniqueness: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  validates :image_url, allow_blank: true, format:{</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      with: %r{\\.(gif|jpg|png)\\Z}i,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      message: &#x27;must be a URL for GIF, JPG or PNG image.&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"檢視錯誤訊息\">檢視錯誤訊息<a href=\"#檢視錯誤訊息\" class=\"hash-link\" aria-label=\"檢視錯誤訊息的直接連結\" title=\"檢視錯誤訊息的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 在 Rails Console 中測試</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">c1 = Candidate.new</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">c1.errors.any?                 # 回傳 false，檢驗 c1 有無錯誤</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">c1.valid?                      # 驗證資料格式是否正確（透過 save 也會進行驗證）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">c1.errors.any?                 # 回傳 true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">c1.errors.full_messages        # 回傳 &quot;Name can&#x27;t be blank&quot;，顯示錯誤訊息內容</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">c1.save(validates: false)      # 跳過資料驗證</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"注意事項\">注意事項<a href=\"#注意事項\" class=\"hash-link\" aria-label=\"注意事項的直接連結\" title=\"注意事項的直接連結\">​</a></h3><p>雖然驗證功能很方便，但並不是每種方法都會觸發驗證，僅有以下這些方法會觸發驗證 <code>create</code>, <code>create!</code>, <code>save</code>, <code>save!</code>, <code>update</code>, <code>update!</code>，而 <code>toggle!</code> 或 <code>increment!</code> 等方法會跳過驗證流程。</p><blockquote><p>有驚嘆號版本的，如果驗證未通過會產生錯誤訊息，而沒有驚嘆號版本則僅會回傳該 Model 的一個空物件。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"客制化資料驗證\">客制化資料驗證<a href=\"#客制化資料驗證\" class=\"hash-link\" aria-label=\"客制化資料驗證的直接連結\" title=\"客制化資料驗證的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"方法一遵循-rails-驗證器規則\">方法一：遵循 Rails 驗證器規則<a href=\"#方法一遵循-rails-驗證器規則\" class=\"hash-link\" aria-label=\"方法一：遵循 Rails 驗證器規則的直接連結\" title=\"方法一：遵循 Rails 驗證器規則的直接連結\">​</a></h3><p>這個驗證器可以跟其它內建的驗證器一起混著使用，使用起來會更簡潔。要寫這樣的驗證器需要符合 Rails Validator 的命名規則：</p><ol><li>參數是 begin_with_ruby 的話，類別名稱則是 BeginWithRuby 加上 Validator，並繼承自 ActiveModel::EachValidator 類別。</li><li>必須實作 validate_each 方法。</li></ol><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 客制化驗證器（class）要放在驗證步驟（validates）前</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class BeginWithRubyValidator &lt; ActiveModel::EachValidator</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def validate_each(record, attribute, value)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    unless value.starts_with? &#x27;Ruby&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      record.errors[attribute] &lt;&lt; &quot;必需是 Ruby 開頭喔!&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">validates :name, begin_with_ruby: true</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"方法二使用-validate-自己寫判斷\">方法二：使用 validate 自己寫判斷<a href=\"#方法二使用-validate-自己寫判斷\" class=\"hash-link\" aria-label=\"方法二：使用 validate 自己寫判斷的直接連結\" title=\"方法二：使用 validate 自己寫判斷的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Candidate &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  validate :name_validator         # 這裡是 validate（單數）不是上面的 validates</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  private</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def name_validator</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    unless name.starts_with? &#x27;Ruby&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      errors[:name] &lt;&lt; &#x27;必需是 Ruby 開頭喔！&#x27;       # 當不符合規定時，就在 errors 的 Hash 裡面塞錯誤訊息。</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"關閉錯誤區塊field-with-errors\">關閉錯誤區塊(field with errors)<a href=\"#關閉錯誤區塊field-with-errors\" class=\"hash-link\" aria-label=\"關閉錯誤區塊(field with errors)的直接連結\" title=\"關閉錯誤區塊(field with errors)的直接連結\">​</a></h2><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-field_with_errors\">keywords: <code>field_with_errors</code><a href=\"#keywords-field_with_errors\" class=\"hash-link\" aria-label=\"keywords-field_with_errors的直接連結\" title=\"keywords-field_with_errors的直接連結\">​</a></h5><p>當表單驗證出現錯誤時，會自動為該 input 帶上一個 <code>.field_with_errors</code> 的 <code>&lt;div&gt;</code> 區塊。如果不希望出現此區塊，可以在 <code>config/environment.rb</code> 中加上：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./OnePageShop/config/environment.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  html_tag.html_safe</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"https://coderwall.com/p/s-zwrg/remove-rails-field_with_errors-wrapper\" target=\"_blank\" rel=\"noopener noreferrer\">Remove Rails field_with_errors wrapper</a></p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"範例\">範例<a href=\"#範例\" class=\"hash-link\" aria-label=\"範例的直接連結\" title=\"範例的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./OnePageShop/app/models/invoice.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Invoice &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  validates :address_line, presence: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  validates :ban, :company, presence: true, if: :is_three_copies?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  private</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def is_three_copies?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      inv_type == &#x27;three_copies&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"http://guides.rubyonrails.org/active_record_validations.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record Validations</a> @ RailsGuides</li><li><a href=\"http://railsbook.tw/chapters/19-model-validation-and-callback.html\" target=\"_blank\" rel=\"noopener noreferrer\">Model 驗證及回呼</a> @ 為你自己學 Ruby on Rails</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Active Storage Overview pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Active Storage Overview pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Active Storage Overview</h1></header><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywordsactive-storage-檔案上傳-雲端儲存\">keywords：<code>active storage</code>, <code>檔案上傳</code>, <code>雲端儲存</code><a href=\"#keywordsactive-storage-檔案上傳-雲端儲存\" class=\"hash-link\" aria-label=\"keywordsactive-storage-檔案上傳-雲端儲存的直接連結\" title=\"keywordsactive-storage-檔案上傳-雲端儲存的直接連結\">​</a></h5><blockquote><ul><li><a href=\"https://blog.chyang.me/2018/05/18/active-storage-overview/\" target=\"_blank\" rel=\"noopener noreferrer\">Active Storage 概要</a> @ Calvert&#x27;s murmur</li><li><a href=\"https://andyyou.github.io/2018/06/26/using-active-storage/\" target=\"_blank\" rel=\"noopener noreferrer\">Using Active Storage</a> @ Andyyou devBlog</li><li><a href=\"http://guides.rubyonrails.org/active_storage_overview.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Storage Overview</a> @ RailsGuides</li></ul></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"安裝\">安裝<a href=\"#安裝\" class=\"hash-link\" aria-label=\"安裝的直接連結\" title=\"安裝的直接連結\">​</a></h2><div class=\"language-Bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-Bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 建立專案後</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails new &lt;project_name&gt; --webpack=stimulus --database=postgresql --skip-coffee --skip-test</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails active_storage:install</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails db:migrate</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"設定\">設定<a href=\"#設定\" class=\"hash-link\" aria-label=\"設定的直接連結\" title=\"設定的直接連結\">​</a></h2>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [gem] Acts as list pjchender.dev": {
    "prefix": "hruby-on-rails [gem] Acts as list pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[gem] Acts as list</h1></header><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"install\">Install<a href=\"#install\" class=\"hash-link\" aria-label=\"Install的直接連結\" title=\"Install的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Gemfile</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># With ActsAsTaggableOn, you can tag a single model on several contexts.</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;acts-as-taggable-on&#x27;, &#x27;~&gt; 6.0&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bundle</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"post-install\">Post Install<a href=\"#post-install\" class=\"hash-link\" aria-label=\"Post Install的直接連結\" title=\"Post Install的直接連結\">​</a></h3><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># For the latest versions :</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rake acts_as_taggable_on_engine:install:migrations</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"model\">Model<a href=\"#model\" class=\"hash-link\" aria-label=\"Model的直接連結\" title=\"Model的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/models/event.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Event &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  acts_as_taggable_on :genres                       # 如果不須保留 tags 的順序</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  acts_as_ordered_taggable_on :skills, :interests   # 如果保留 tags 的順序</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"controller\">Controller<a href=\"#controller\" class=\"hash-link\" aria-label=\"Controller的直接連結\" title=\"Controller的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/controllers/event_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Never trust parameters from the scary internet, only allow the white list through.</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def event_params</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  params.fetch(:event, {}).permit( :genre_list)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"view\">View<a href=\"#view\" class=\"hash-link\" aria-label=\"View的直接連結\" title=\"View的直接連結\">​</a></h3><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- app/views/events/_form.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% @genre_list = event.genre_list %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= f.hidden_field :genre_list, &#x27;data-target&#x27;: &#x27;form.taggable&#x27;, value: &#x27;1, 2, 3&#x27; %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>產生出來的 HTML 會像這樣：</p><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">hidden</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">1, 2, 3</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">event[genre_list][]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">id</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">event_genre_list</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"取得所有的-tags\">取得所有的 tags<a href=\"#取得所有的-tags\" class=\"hash-link\" aria-label=\"取得所有的 tags的直接連結\" title=\"取得所有的 tags的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">event.all_tags_list</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 或</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">@tag_options = ActsAsTaggableOn::Tag.all.map { |tag| tag.name }</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>參考：<a href=\"https://stackoverflow.com/questions/22710243/how-to-get-a-list-of-all-tags-while-using-the-gem-acts-as-taggable-on-in-rails\" target=\"_blank\" rel=\"noopener noreferrer\">How to get a list of all tags while using the gem &#x27;acts-as-taggable-on&#x27; in Rails (not the counts)</a> @ StackOverflow</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"configuration\">Configuration<a href=\"#configuration\" class=\"hash-link\" aria-label=\"Configuration的直接連結\" title=\"Configuration的直接連結\">​</a></h3><p>如果要加相關的設定，可以設在 <code>config/application.rb</code> 中：</p><blockquote><p>參考：<a href=\"https://github.com/mbleigh/acts-as-taggable-on/issues/252\" target=\"_blank\" rel=\"noopener noreferrer\">Where do I set the configuration options like ActsAsTaggableOn.remove_unused_tags = true</a> @ Github Issue</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"資料來源\">資料來源<a href=\"#資料來源\" class=\"hash-link\" aria-label=\"資料來源的直接連結\" title=\"資料來源的直接連結\">​</a></h2><ul><li><a href=\"https://github.com/mbleigh/acts-as-taggable-on\" target=\"_blank\" rel=\"noopener noreferrer\">Acts as taggable</a> @ Github</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] AJAX 小技巧 pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] AJAX 小技巧 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] AJAX 小技巧</h1></header><p>[TOC]</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-ajax-注意事項\">使用 AJAX 注意事項<a href=\"#使用-ajax-注意事項\" class=\"hash-link\" aria-label=\"使用 AJAX 注意事項的直接連結\" title=\"使用 AJAX 注意事項的直接連結\">​</a></h2><ul><li>如果是透過 props 把資料代到 Vue 裡面使用，那麼最好在送「建立」或「儲存」的時，可以重新轉譯整個 partial view，避免卡一些髒髒的內容。</li><li>如果「建立」或「儲存」是透過 AJAX 的方式送出表單，最好鎖上 <code>data-disable=&quot;true&quot;</code> 或 <code>data-disable_with = &quot;儲存中&quot;</code> 避免表單重複送出。</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"方法一在-rails-本身中使用-ajax回傳的是-js-檔\">方法一：在 Rails 本身中使用 AJAX（回傳的是 js 檔）<a href=\"#方法一在-rails-本身中使用-ajax回傳的是-js-檔\" class=\"hash-link\" aria-label=\"方法一：在 Rails 本身中使用 AJAX（回傳的是 js 檔）的直接連結\" title=\"方法一：在 Rails 本身中使用 AJAX（回傳的是 js 檔）的直接連結\">​</a></h2><p><strong>優點：</strong>這麼做的好處在於，不用自己透過 AJAX 的方式把資料透過 JSON 送出去，而是可以直接用 Rails 在 <code>&lt;form&gt;</code> 中慣例的 <code>name</code>。透過 <code>js.erb</code> 來執行送出後的結果。<strong>適合用在表單送出後不用使用回傳的資料重新轉譯太多複雜的頁面時。</strong></p><p>在 Rails 中使用 AJAX 時，需要在原本的 form 表單中加上 <code>remote: true</code>。</p><blockquote><p>❗用 <code>remote-true</code> 的話，不能使用 <code>querySelector(&#x27;from&#x27;).submit()</code>，要使用 <code>Rails.fire(&lt;formElement&gt;, &#x27;submit&#x27;)</code>。</p></blockquote><p><strong>在 form 當中加上 <code>remote: true</code></strong>：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- app/views/subdomains/_form.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_for :subdomain, remote: true, html: { novalidate: true, id: &#x27;needs-validation&#x27; } do |f| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如果是使用在 link_to 一樣是使用 <code>remote: true</code>：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= link_to &#x27;foobar&#x27;, url_path, method: :post, remote: true %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在 Controller 中指定 <code>format.js</code>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">respond_to do |format|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  format.html { render :index }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  format.js      # ★★★★★</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在 View 中要加上一支 <code>&lt;action-name&gt;.js.erb</code> 的檔案來透過 JS 處理回傳的結果：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// app/views/subdomains/create.js.erb</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>之所以稱為 Unobtrusive JavaScript 是因為我們不把 JavaScript 混在 HTML 中（inline-javascript）。</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"如果不是要回傳預設的-action-namejserb\">如果不是要回傳預設的 action-name.js.erb<a href=\"#如果不是要回傳預設的-action-namejserb\" class=\"hash-link\" aria-label=\"如果不是要回傳預設的 action-name.js.erb的直接連結\" title=\"如果不是要回傳預設的 action-name.js.erb的直接連結\">​</a></h4><p>在 Controller 中可以使用 <code>render</code> 指定要 render 的 js 是哪一支：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/controllers/members_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 預設會回傳 create.js.erb，透過 render 可以選擇回傳的 js 檔，這裡是 member/update.js.erb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def create</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  flash.now[ :notice] = I18n.t(&#x27;common.remove_successfully&#x27;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  render &#x27;members/update.js.erb&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"範例程式碼回傳-js\">範例程式碼（回傳 JS）<a href=\"#範例程式碼回傳-js\" class=\"hash-link\" aria-label=\"範例程式碼（回傳 JS）的直接連結\" title=\"範例程式碼（回傳 JS）的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"controller-加上-formatjs\">controller 加上 format.js<a href=\"#controller-加上-formatjs\" class=\"hash-link\" aria-label=\"controller 加上 format.js的直接連結\" title=\"controller 加上 format.js的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/controllers/products_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class ProductsController &lt; ApplicationController</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def index</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    @products = Product.all</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    respond_to do |format|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      format.html {render :index}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      format.js    # ★★★★★</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"view-加上-remote-true\">view 加上 remote: true<a href=\"#view-加上-remote-true\" class=\"hash-link\" aria-label=\"view 加上 remote: true的直接連結\" title=\"view 加上 remote: true的直接連結\">​</a></h4><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- ./app/views/products/index.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- ★★★★★ 記得 remote: true --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= link_to &#x27;Refresh with JS&#x27;, products_path, remote: true %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"js-中可以使用-rails-view-helper\">JS 中可以使用 Rails view helper<a href=\"#js-中可以使用-rails-view-helper\" class=\"hash-link\" aria-label=\"JS 中可以使用 Rails view helper的直接連結\" title=\"JS 中可以使用 Rails view helper的直接連結\">​</a></h4><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-escape_javascript\">keywords: <code>escape_javascript</code><a href=\"#keywords-escape_javascript\" class=\"hash-link\" aria-label=\"keywords-escape_javascript的直接連結\" title=\"keywords-escape_javascript的直接連結\">​</a></h5><p>這支檔案就和一般的 <code>foo.html.erb</code> <strong>可以使用 Rails View Helper，並且可以取得 controller 中的變數</strong>。</p><blockquote><p>注意：controller 中的變數如果要直接使用，而不是透過 local_variable 的方式傳到 view 時，要加上 &quot;@&quot;（例如 <code>@foo = &#x27;213&#x27;</code>）</p></blockquote><p>如果是要直接把一整個包含 JS 的 partial view 換掉，可以使用 <code>&lt;%= escape_javascript(inner_html) %&gt;</code> ，如此該 partial 中的 js 才能正確載入：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- ./app/views/products/index.js.erb  --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">console.log(&#x27;All product&#x27;, &#x27;&lt;%= @products.to_json %&gt;&#x27;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  inner_html =</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    if notice</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      render &#x27;shared/flash&#x27;, type: &#x27;success&#x27;, message: notice</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    elsif alert</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      render &#x27;shared/flash&#x27;, type: &#x27;alert&#x27;, message: alert</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">%&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">document.querySelector(&#x27;#flash-message&#x27;).innerHTML = &quot;&lt;%= escape_javascript(inner_html) %&gt;&quot;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>注意：<code>escape_javascript()</code> 裡面放的 html 中若有 JavaScript 是不會被執行到的。</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"如果要回傳的-js-檔在不同資料夾的話\">如果要回傳的 js 檔在不同資料夾的話<a href=\"#如果要回傳的-js-檔在不同資料夾的話\" class=\"hash-link\" aria-label=\"如果要回傳的 js 檔在不同資料夾的話的直接連結\" title=\"如果要回傳的 js 檔在不同資料夾的話的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/controllers/products_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def send_js</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  render &#x27;blogs/index.js&#x27;    # 會回傳 app/views/blogs/index.js.erb 這隻檔案</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"remote-true-的原理\">remote true 的原理<a href=\"#remote-true-的原理\" class=\"hash-link\" aria-label=\"remote true 的原理的直接連結\" title=\"remote true 的原理的直接連結\">​</a></h3><p>上述 <code>:remote =&gt; true</code> 背後的原理，如同以下的 jQuery 程式碼：</p><div class=\"language-Js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-Js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$(&quot;#ajaxscript&quot;).click(function(e){</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  e.preventDefault();</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  var url =  $(this).attr(&quot;href&quot;);</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  $.ajax(url, {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    dataType: &quot;script&quot;        // 希望 server 回傳的資料類型</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  })</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">})</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"https://ihower.tw/rails/ajax.html\" target=\"_blank\" rel=\"noopener noreferrer\">ihower AJAX 應用程式</a></p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"方法二透過-ajax-回傳-json-檔案\">方法二：透過 AJAX 回傳 JSON 檔案<a href=\"#方法二透過-ajax-回傳-json-檔案\" class=\"hash-link\" aria-label=\"方法二：透過 AJAX 回傳 JSON 檔案的直接連結\" title=\"方法二：透過 AJAX 回傳 JSON 檔案的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"send-request-to-server-formdata\">Send Request To Server (FormData)<a href=\"#send-request-to-server-formdata\" class=\"hash-link\" aria-label=\"Send Request To Server (FormData)的直接連結\" title=\"Send Request To Server (FormData)的直接連結\">​</a></h3><p>如果要用 jQuery formData 的方式傳送資料資料，在設定的時候需要註明 <code>contentType</code>，同時 <code>data</code> 需要經過 <code>JSON.stringify()</code>：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">ajax</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">url</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">${</span><span class=\"token template-string interpolation constant\" style=\"color:rgb(130, 170, 255)\">API_URL</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token template-string string\" style=\"color:rgb(195, 232, 141)\">/pre_survey</span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">type</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;POST&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">dataType</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;json&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 希望 server 回傳的資料類型</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">contentType</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;application/json&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 指定傳送到 server 的資料類型</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">data</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token known-class-name class-name\" style=\"color:rgb(255, 203, 107)\">JSON</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">stringify</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">preSurvey</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">then</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token console class-name\" style=\"color:rgb(255, 203, 107)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;response&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> data</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">fail</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">xhr</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token console class-name\" style=\"color:rgb(255, 203, 107)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">error</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">xhr</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">always</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    _vm</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">frozenIndex</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"send-request-to-server-json\">Send Request To Server (JSON)<a href=\"#send-request-to-server-json\" class=\"hash-link\" aria-label=\"Send Request To Server (JSON)的直接連結\" title=\"Send Request To Server (JSON)的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-data-type\">keywords: <code>data-type</code><a href=\"#keywords-data-type\" class=\"hash-link\" aria-label=\"keywords-data-type的直接連結\" title=\"keywords-data-type的直接連結\">​</a></h5><p>在 View 的部分把需要送出 AJAX Request 的元件使用：</p><ul><li><code>remote: true</code>：使用 Rails AJAX 模式</li><li><code>data: {type: &#x27;json&#x27;}</code>：使用 <code>data-type=&quot;json&quot;</code> 可以改變 Request 的 <strong>Accept Header</strong>，這裏只要回傳 JSON 格式。</li></ul><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- ./app/views/products/index.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= link_to &#x27;透過 AJAX 回傳&#x27;, products_path, id: &#x27;send-ajax&#x27;, remote: true, data: {type: :json} %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>並且綁定 AJAX 事件，Rails 中基於安全性的考量，在傳送請求到伺服器時，必須帶上特定的 token：</p><ul><li>確定在 layout 中有放入 <code>&lt;%= csrf_meta_tag %&gt;</code></li><li>在 jQuery AJAX 請求的 <code>beforeSend</code> 中加入 <code>header</code></li></ul><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// ./app/views/products/index.html.erb</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">$</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">$</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;#send-ajax&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">on</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;click&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    e</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">preventDefault</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    $</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">ajax</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token function-variable function\" style=\"color:rgb(130, 170, 255)\">beforeSend</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">xhr</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        xhr</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">setRequestHeader</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">          </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;X-CSRF-Token&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">          </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">$</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;meta[name=&quot;csrf-token&quot;]&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">attr</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;content&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token literal-property property\">url</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">$</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token keyword\" style=\"font-style:italic\">this</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">attr</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;href&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// get the link of &lt;a&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token literal-property property\">dataType</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;json&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 希望 server 回傳的資料類型</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token literal-property property\">processData</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(255, 88, 116)\">false</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token literal-property property\">cache</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(255, 88, 116)\">false</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token literal-property property\">contentType</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(255, 88, 116)\">false</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 指定傳送到 server 的資料類型</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token literal-property property\">data</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// data send to backend</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token literal-property property\">status</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;send request &#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">done</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">response</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token console class-name\" style=\"color:rgb(255, 203, 107)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;success&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> response</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">fail</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">jqXHR</span><span class=\"token parameter punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token parameter\"> textStatus</span><span class=\"token parameter punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token parameter\"> errorThrown</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token console class-name\" style=\"color:rgb(255, 203, 107)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;fail&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> textStatus</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> errorThrown</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如果希望在所有發出的 request 請求中都代入 token，可以使用：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">ajaxSetup</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">headers</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token string-property property\">&#x27;X-CSRF-Token&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">$</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;meta[name=&quot;csrf-token&quot;]&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">attr</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;content&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"https://stackoverflow.com/questions/7203304/warning-cant-verify-csrf-token-authenticity-rails#\" target=\"_blank\" rel=\"noopener noreferrer\">WARNING: Can&#x27;t verify CSRF token authenticity rails</a> @ StackOverflow</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"send-json-response-from-server\">Send JSON Response From Server<a href=\"#send-json-response-from-server\" class=\"hash-link\" aria-label=\"Send JSON Response From Server的直接連結\" title=\"Send JSON Response From Server的直接連結\">​</a></h3><p>如果這個路由只是要回傳 json 可以使用 <code>render :json</code></p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def update_images</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    msg = {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      status: &#x27;get data&#x27;,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      products: @products.to_json</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    render json: msg</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"https://stackoverflow.com/questions/12385345/how-to-send-simple-json-response-in-rails\" target=\"_blank\" rel=\"noopener noreferrer\">How to send simple json response in Rails?</a> @ StackOverflow</p></blockquote><p>如果這個路由同時處理多個請求，可以使用 <code>respond_to</code> ，但在 view 的地方記得加上 <code>data: {type: :json}</code>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/controllers/products_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # GET /products</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # GET /products.json</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def index</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    @products = Product.all</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    msg = {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      status: &#x27;get data&#x27;,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      products: @products.to_json</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    respond_to do |format|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      format.html { render :index }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      format.js</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      format.json { render json: msg }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"sending-files-to-server-through-ajax\">Sending Files to Server Through AJAX<a href=\"#sending-files-to-server-through-ajax\" class=\"hash-link\" aria-label=\"Sending Files to Server Through AJAX的直接連結\" title=\"Sending Files to Server Through AJAX的直接連結\">​</a></h3><p>透過下面的方式，可以將欲上傳的檔案 append 到 <code>FormData()</code> 上：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// form.append(&quot;&lt;formFieldName&gt;&quot;, &lt;file&gt;)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">let</span><span class=\"token plain\"> form </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">new</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">FormData</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">form</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">append</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;product[photos][]&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> e</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">target</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">files</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token plain\">i</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>透過 jQuery 裡的 <code>data</code> 可以把資料掛上：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">ajax</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">processData</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(255, 88, 116)\">false</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">data</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> form</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>要完整的程式範例如下：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">let</span><span class=\"token plain\"> currFiles </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> e</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">target</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">files</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">let</span><span class=\"token plain\"> form </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">new</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">FormData</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword control-flow\" style=\"font-style:italic\">for</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token keyword\" style=\"font-style:italic\">let</span><span class=\"token plain\"> i </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"> i </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&lt;</span><span class=\"token plain\"> currFiles</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">length</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"> i</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">++</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// check file type</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">let</span><span class=\"token plain\"> imageType </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token regex regex-delimiter\">/</span><span class=\"token regex regex-source language-regex\">^image\\/</span><span class=\"token regex regex-delimiter\">/</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword control-flow\" style=\"font-style:italic\">if</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">!</span><span class=\"token plain\">imageType</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">test</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">currFiles</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token plain\">i</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">type</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword control-flow\" style=\"font-style:italic\">continue</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// append photos into form</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  form</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">append</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;product[photos][]&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> e</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">target</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">files</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token plain\">i</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">ajax</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">type</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;PUT&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token function-variable function\" style=\"color:rgb(130, 170, 255)\">beforeSend</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">xhr</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    xhr</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">setRequestHeader</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;X-CSRF-Token&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">$</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;meta[name=&quot;csrf-token&quot;]&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">attr</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;content&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">url</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">this</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">endpoint</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">+</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;/update_images&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">dataType</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;json&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 希望 server 回傳的資料類型</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">processData</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(255, 88, 116)\">false</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">cache</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(255, 88, 116)\">false</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">contentType</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(255, 88, 116)\">false</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 指定傳送到 server 的資料類型</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">data</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> form</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">done</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">data</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    e</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">target</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">value</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    vm</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">imageGalleryInit</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">vm</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> data</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">photos</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    vm</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">showMask</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token boolean\" style=\"color:rgb(255, 88, 116)\">false</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">fail</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">jqXHR</span><span class=\"token parameter punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token parameter\"> textStatus</span><span class=\"token parameter punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token parameter\"> errorThrown</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token console class-name\" style=\"color:rgb(255, 203, 107)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;fail&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> textStatus</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> errorThrown</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他\">其他<a href=\"#其他\" class=\"hash-link\" aria-label=\"其他的直接連結\" title=\"其他的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"在-rails-中的表單代入-token-optional\">在 Rails 中的表單代入 Token (Optional)<a href=\"#在-rails-中的表單代入-token-optional\" class=\"hash-link\" aria-label=\"在 Rails 中的表單代入 Token (Optional)的直接連結\" title=\"在 Rails 中的表單代入 Token (Optional)的直接連結\">​</a></h3><p>如果碰到表單沒有自己附加上 token 的情況，可以使用下述語法：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">var</span><span class=\"token plain\"> forms </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token dom variable\" style=\"color:rgb(191, 199, 213)\">document</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">querySelectorAll</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;form&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">var</span><span class=\"token plain\"> token </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">$</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;meta[name=&quot;csrf-token&quot;]&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">attr</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;content&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">forms</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">forEach</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">form</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">var</span><span class=\"token plain\"> input </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token dom variable\" style=\"color:rgb(191, 199, 213)\">document</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">createElement</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;input&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  input</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">setAttribute</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;type&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;hidden&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  input</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">setAttribute</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;name&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;authenticity_token&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  input</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">setAttribute</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;value&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> token</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">$</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">form</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">prepend</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">input</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"將資料以-json-從-controller-帶入-view-的方式\">將資料以 JSON 從 controller 帶入 view 的方式<a href=\"#將資料以-json-從-controller-帶入-view-的方式\" class=\"hash-link\" aria-label=\"將資料以 JSON 從 controller 帶入 view 的方式的直接連結\" title=\"將資料以 JSON 從 controller 帶入 view 的方式的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"方法一在-html-tag-中帶入-data-attribute\">方法一：在 HTML tag 中帶入 data attribute<a href=\"#方法一在-html-tag-中帶入-data-attribute\" class=\"hash-link\" aria-label=\"方法一：在 HTML tag 中帶入 data attribute的直接連結\" title=\"方法一：在 HTML tag 中帶入 data attribute的直接連結\">​</a></h4><p>當我們在 HTML 中使用 Rails 來的 JSON 資料時，可以直接使用 <code>.to_json</code>：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;div id=&quot;success-rate-chart&quot; data-success-rate-data=&quot;&lt;%= @success_rate_data.to_json %&gt;&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;script&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  var successRateData = $(`#${id}`).data(&#x27;success-rate-data&#x27;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/script&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"方法二使用-raw\">方法二：使用 raw<a href=\"#方法二使用-raw\" class=\"hash-link\" aria-label=\"方法二：使用 raw的直接連結\" title=\"方法二：使用 raw的直接連結\">​</a></h4><p>另一種方式是，我們直接在 javascript 中引入 Rails 的變數，但<strong>這種方法的問題是會出現 <code>&amp;</code> 這類的跳脫字元，在 JS 中無法直接使用</strong>，因此若想正常使用，需搭配使用 <code>raw</code> 關鍵字</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;script&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  var array = &lt;%= raw @activity.tickets.map(&amp;:name) %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/script&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"更新或刪除資料\">更新或刪除資料<a href=\"#更新或刪除資料\" class=\"hash-link\" aria-label=\"更新或刪除資料的直接連結\" title=\"更新或刪除資料的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-id-_destroy\">keywords: <code>id</code>, <code>_destroy</code><a href=\"#keywords-id-_destroy\" class=\"hash-link\" aria-label=\"keywords-id-_destroy的直接連結\" title=\"keywords-id-_destroy的直接連結\">​</a></h5><p>在 Rails 中，當一個表單裡面有鑲嵌的資料庫時（例如 Quotation 底下的 Items），這時候若我們想要刪除或修改某一 items 可以在表單中插入具有特定關鍵字的 <code>&lt;input&gt;</code>：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;tr v-for=&quot;(item, index) in quotation.items&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;td width=&quot;10%&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;input type=&quot;number&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      :name=`quotation[items_attributes][${index}][qty]`</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      v-model=&quot;item.qty&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/td&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;!-- ... --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;td&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;input type=&quot;number&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      :name=`quotation[items_attributes][${index}][price]`</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      v-model=&quot;item.price&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">     &gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/td&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;!-- 用帶有 [id] 的 name 來讓 Rails 能夠 UPDATE 該 item --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;input type=&quot;hidden&quot; :value=&quot;item.id&quot; :name=`quotation[items_attributes][${index}][id]`&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;!-- 用帶有 [_destroy] 的 name 來讓 Rails 能夠 DESTROY 該 item --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;input type=&quot;hidden&quot; v-model=&quot;item._isDestroy&quot; :name=`quotation[items_attributes][${index}][_destroy]`&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/tr&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"http://guides.rubyonrails.org/working_with_javascript_in_rails.html\" target=\"_blank\" rel=\"noopener noreferrer\">Working with JavaScript in Rails</a> @ RailsGuides</li><li><a href=\"https://ihower.tw/rails/ajax.html\" target=\"_blank\" rel=\"noopener noreferrer\">Ajax 應用程式</a> @ Ruby on Rails 實戰聖經</li><li><a href=\"https://quickleft.com/blog/how-to-upload-to-carrierwave-with-javascript/\" target=\"_blank\" rel=\"noopener noreferrer\">How to Upload to Carrierwave with JavaScript</a> @ QuickLeft Blog</li></ul><p>相關閱讀</p><ul><li><a href=\"https://hackmd.io/s/Byc9WT2LW\" target=\"_blank\" rel=\"noopener noreferrer\">[JS] 檔案上傳（Input File）</a> @ PJCHENder HackMD</li><li><a href=\"https://hackmd.io/s/SkhZCl0Ub\" target=\"_blank\" rel=\"noopener noreferrer\">[Rails] carrierwave uploader</a> @ PJCHENder HackMD</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] 靜態檔案處理（The AssetPipeline） pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] 靜態檔案處理（The AssetPipeline） pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] 靜態檔案處理（The AssetPipeline）</h1></header><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-rails-assets-public-static-manifest\">keywords: <code>rails</code>, <code>assets</code>, <code>public</code>, <code>static</code>, <code>manifest</code><a href=\"#keywords-rails-assets-public-static-manifest\" class=\"hash-link\" aria-label=\"keywords-rails-assets-public-static-manifest的直接連結\" title=\"keywords-rails-assets-public-static-manifest的直接連結\">​</a></h6><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"sprockets\">Sprockets<a href=\"#sprockets\" class=\"hash-link\" aria-label=\"Sprockets的直接連結\" title=\"Sprockets的直接連結\">​</a></h2><p>透過 Rails 的 pipeline 可以對檔案（例如，SCSS, CoffeeScript, ERB）進行前處理（pre-process），這些是透過 <code>sprockets-rails </code> 這個 gem 完成的。</p><p>Sprockets 會打包（編譯、最小化、壓縮）所有的 <code>.js</code>, <code>.css</code> 檔案成為一支 <code>.js</code> 和 <code>.css</code> 檔。在開發環境下，所有的檔名都會加入一段 SHA256 的編碼，若檔案沒有變更，則使用 cache 的資料，減少伺服器的負擔；一旦檔案有變更，這個編碼就會改變，以此避免 cache 問題。</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 檔名</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">global-908e25f4bf641868d8683022a5b62f54.css</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"設定打包方式\">設定打包方式<a href=\"#設定打包方式\" class=\"hash-link\" aria-label=\"設定打包方式的直接連結\" title=\"設定打包方式的直接連結\">​</a></h2><p>一般來說我們會在 <code>./config/application.rb</code> 中看到</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./config/application.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">require &quot;sprockets/railtie&quot;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>我們可以在 <code>./config/environments/production.rb</code> 中設定要打包的方法：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./config/environments/production.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 如果有安裝 sass-rails 這個 gem，則這會預設作為 css_compressor 的社竟</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">config.assets.js_compressor = :uglifier</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">config.assets.css_compressor = :sass</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"assets-建立與管理\">assets 建立與管理<a href=\"#assets-建立與管理\" class=\"hash-link\" aria-label=\"assets 建立與管理的直接連結\" title=\"assets 建立與管理的直接連結\">​</a></h2><p>這些要打包的檔案會放在 <code>./app/assets/</code> 這個資料夾中；如果是其他不需要打包的檔案，則可以放在 <code>./public</code> 這個資料夾中，這些檔案會被當作靜態檔案（<code>config.public_file_server.enabled = true</code>）</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./config/environments/production.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 設定能否以靜態檔案的方式存取 public 中的檔案</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">config.public_file_server.enabled = true</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在開發環境下， Rails 預設會將打包好的檔案放到 <code>./public/assets</code> 中，接著會以靜態檔案的方式存取，因此在開發環境下，是無法直接透過 server 讀取道 <code>app/assets</code> 中的檔案。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"scaffold\">Scaffold<a href=\"#scaffold\" class=\"hash-link\" aria-label=\"Scaffold的直接連結\" title=\"Scaffold的直接連結\">​</a></h3><p>在預設的情況下，當我們使用產生器（generate）來建立檔案時，例如，建立 <code>ProjectsController</code>，Rails 會自動在 <code>./app/assets</code> 產生 JS 檔和 SCSS 檔，這些檔案將可以透過 <code>require_tree</code> 來載入：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 如果有安裝 coffee-rails 和 sass-rails 的 gem</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">./app/assets/javascripts/projects.coffee</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">./app/assets/stylesheets/projects.scss</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>你也可以在特定的頁面中指定特定要載入的 stylesheets 和 JS 檔，但要留意，當這樣使用時，不要使用 <code>require_tree</code>，否則同樣的 assets 可能會多次載入：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= javascript_include_tag params[:controller] %&gt; or &lt;%= stylesheet_link_tag</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">params[:controller] %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>當只在特定的頁面載入 JS 或 CSS 時，要留意不要使用 <code>require_tree</code>，否則同樣的 assets 可能會多次載入。</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"避免自動產生-js-和-css-檔\">避免自動產生 JS 和 CSS 檔<a href=\"#避免自動產生-js-和-css-檔\" class=\"hash-link\" aria-label=\"避免自動產生 JS 和 CSS 檔的直接連結\" title=\"避免自動產生 JS 和 CSS 檔的直接連結\">​</a></h3><p>如果不希望在使用產生器時自動產生 JS 和 CSS 檔，可以在 <code>application.rb</code> 中設定：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./config/application.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">#</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">module Passer</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  class Application &lt; Rails::Application</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    config.generators do |g|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      # g.stylesheets false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      # g.javascripts false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      g.assets false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"assets-檔案位置\">Assets 檔案位置<a href=\"#assets-檔案位置\" class=\"hash-link\" aria-label=\"Assets 檔案位置的直接連結\" title=\"Assets 檔案位置的直接連結\">​</a></h3><p>Pipeline assets 的檔案可以放在下面三個位置 <code>app/assets</code>, <code>lib/assets</code> 或 <code>vendor/assets</code>：</p><ul><li><code>app/assets</code>：通常放應用程式自身的檔案，例如自己寫的圖檔、JS 或 CSS。</li><li><code>lib/assets</code>：通常放的是自己寫的函式庫（library），通常不限於在這個應用程式中使用。</li><li><code>vendor/assets</code>：通常放的第三方的函式庫。</li></ul><p>當我們透過 manifest（安裝設定檔）或 helper 要使用 asset 檔案時，Sprockets 會從這三個預設的位置搜尋檔案，任何在 <code>assets/*</code> 裡面的檔案都將被搜尋。舉例來說，當 manifest 檔案要載入下述檔案時：</p><div class=\"language-javascript codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-javascript codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">//= require home</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">//= require moovinator</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">//= require slider</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">//= require phonebox</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">//= require sub/something</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>require 也可以直接載入 npm（如果有安裝 webpacker）的套件。",
      "安裝的 gem 會自動被 require，不用重複寫（因此不要安裝用不到的 gem）。</p></blockquote><p>下面這些檔案都會被處理：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 在 app/assets, lib/assets, vendor/assets 裡面的檔案</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">app/assets/javascripts/home.js</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">lib/assets/javascripts/moovinator.js</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">vendor/assets/javascripts/slider.js</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">vendor/assets/somepackage/phonebox.js</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># assets/* 的檔案都可以被處理到</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">app/assets/javascripts/sub/something.js</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># gems/* 的檔案也會自動被 require 到</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>可以在下面的檔案中，看到會搜尋的路徑有哪些：</p><div class=\"codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./config/initializers/assets.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Rails.application.config.assets.paths &lt;&lt; Rails.root.join(&#x27;node_modules&#x27;)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>如果不確定有檔案載入的順序或有哪些資料夾被載入，可以 <code>//= require xxx</code> \b 一個不存在的檔案讓它噴錯，就可以看到載入的路徑：</p></blockquote><p><img loading=\"lazy\" src=\"../../../i.imgur.com/Zj846NX.png\" alt=\"Imgur\" class=\"img_ev3q\"></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-index-檔名的檔案\">使用 index 檔名的檔案<a href=\"#使用-index-檔名的檔案\" class=\"hash-link\" aria-label=\"使用 index 檔名的檔案的直接連結\" title=\"使用 index 檔名的檔案的直接連結\">​</a></h3><p>Sprockets 會自動以名為 <code>index</code> 的檔案當作 manifest 檔來加載其他檔案，舉例來說，如果你的 jQuery 函式庫包含許多的模組，儲存在 <code>lib/assets/javascripts/library_name</code> 中，則 <code>lib/assets/javascripts/library_name/index.js</code> 這支檔案會被當作 manifest 檔案，並根據它在加載其他檔案。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"透過-helper-使用-assets-檔案\">透過 Helper 使用 Assets 檔案<a href=\"#透過-helper-使用-assets-檔案\" class=\"hash-link\" aria-label=\"透過 Helper 使用 Assets 檔案的直接連結\" title=\"透過 Helper 使用 Assets 檔案的直接連結\">​</a></h3><p>透過 pipeline 使用的檔案會由 Sprockets 提供；如果是將檔案放在 <code>public/assets/rails.png</code> 則會是由伺服器直接提供：</p><ul><li><code>javascript_include_tag</code></li><li><code>stylesheet_link_tag</code></li><li><code>image_tag</code></li><li><code>asset_path</code></li><li><code>asset_data_uri</code></li></ul><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= stylesheet_link_tag &quot;application&quot;, media: &quot;all&quot;, &quot;data-turbolinks-track&quot; =&gt; &quot;reload&quot; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= javascript_include_tag &quot;application&quot;, &quot;data-turbolinks-track&quot; =&gt; &quot;reload&quot; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--  ./app/assets/images  --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= image_tag &quot;rails.png&quot; %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;style&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">.class { background-image: url(&lt;%= asset_path &#x27;image.png&#x27; %&gt;) }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">.logo { background: url(&lt;%= asset_data_uri &#x27;logo.png&#x27; %&gt;) }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/style&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">asset-url(&quot;rails.png&quot;)        &lt;!--  url(/assets/rails.png)  --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">asset-path(&quot;rails.png&quot;)       &lt;!--  &quot;/assets/rails.png&quot;  --&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"安裝設定檔manifest\">安裝設定檔（manifest）<a href=\"#安裝設定檔manifest\" class=\"hash-link\" aria-label=\"安裝設定檔（manifest）的直接連結\" title=\"安裝設定檔（manifest）的直接連結\">​</a></h2><p>Sprockets 使用安裝設定檔（manifest files）來決定要載入哪些 assets。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"javascript\">JavaScript<a href=\"#javascript\" class=\"hash-link\" aria-label=\"JavaScript的直接連結\" title=\"JavaScript的直接連結\">​</a></h3><p><code>./app/assets/javascripts/application.js</code></p><p>在 Sprockets 的設定檔中，會使用 <code>//=</code> 作為開頭，並且使用一些指令：</p><ul><li><code>require</code>: 告訴 Sprockets 要載入哪支檔案</li><li><code>require_tree</code>: 以疊代的方式（recursive）載入特定資料夾內的所有檔案</li><li><code>require_directory</code>: 載入特定資料夾內的檔案，但不會在以疊代的方式進入該資料夾中的其他資料夾。</li></ul><p>這些指令會從上往下開始執行，但是如果是透過 <code>require_tree</code> 載入的檔案則不會依循任何順序；另外，這些指令不會載到同一之檔案兩次。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"css\">CSS<a href=\"#css\" class=\"hash-link\" aria-label=\"CSS的直接連結\" title=\"CSS的直接連結\">​</a></h3><p><code>./app/assets/stylesheets/application.css</code></p><div class=\"language-scss codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-scss codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">@import</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;bootstrap&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 載入特定檔案</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">@import</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;*&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">@import</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;**/*&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>For more information: <a href=\"https://github.com/rails/sass-rails#features\" target=\"_blank\" rel=\"noopener noreferrer\">sass-rails</a></p></blockquote><p>在開發模式（development）或沒有沒有啟用 asset pipeline 的情況下，這些檔案會透過 coffee-script 和 rails-sass 的 gems 回傳到瀏覽器；當有啟用 asset pipeline 時，這些檔案會先被前處理（preprocessed）然後放到 <code>public/asset</code> 的資料夾中。</p><p>如果一支檔案要經過多次不同的前處理，可以使用多個副檔名，會以副檔名 ++由右至左++ 的順序加以編譯，例如，<code>projects.scss.erb</code> 會先經過 <code>ERB</code> 再來是 <code>SCSS</code> 最後以 <code>CSS</code> 檔給瀏覽器；如果是 <code>projects.coffee.erb</code> 會先經過 <code>ERB</code> 再來是 <code>CoffeeScript</code> 最後以 <code>JS</code> 檔給瀏覽器。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"開發模式development-mode\">開發模式（Development Mode）<a href=\"#開發模式development-mode\" class=\"hash-link\" aria-label=\"開發模式（Development Mode）的直接連結\" title=\"開發模式（Development Mode）的直接連結\">​</a></h2><p>在開發模式下，所有的 assets 會根據安裝設定檔（manifest）中所定義的順序，以獨立的檔案呈現：</p><div class=\"language-jsx codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-jsx codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// app/assets/javascripts/application.js</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">//= require core</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">//= require projects</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">//= require tickets</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>這樣的檔案在 HTML 獨立呈現：</p><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">script</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">src</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">/assets/core.js?body=1</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token script\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">script</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">script</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">src</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">/assets/projects.js?body=1</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token script\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">script</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">script</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">src</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">/assets/tickets.js?body=1</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token script\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">script</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"發佈模式production-mode\">發佈模式（Production Mode）<a href=\"#發佈模式production-mode\" class=\"hash-link\" aria-label=\"發佈模式（Production Mode）的直接連結\" title=\"發佈模式（Production Mode）的直接連結\">​</a></h2><p>在發佈模式下，Rails 會假設 assets 已經被編譯好，並且以靜態檔案的方式由伺服器提供。</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= javascript_include_tag &quot;application&quot; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= stylesheet_link_tag &quot;application&quot; %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在 HTML 中：</p><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">script</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">src</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">/assets/application-908e25f4bf641868d8683022a5b62f54.js</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token script\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">script</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">link</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">href</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">/assets/application-4dd5b109ee3439da54f5bdfd78a80473.css</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">media</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">screen</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">rel</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">stylesheet</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"http://guides.rubyonrails.org/asset_pipeline.html\" target=\"_blank\" rel=\"noopener noreferrer\">The Asset Pipeline</a> @ RailsGuides</li><li><a href=\"https://ihower.tw/rails/assets-pipeline.html\" target=\"_blank\" rel=\"noopener noreferrer\">Asset Pipeline</a> @ Ruby on Rails 實戰聖經</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] carrierwave uploader pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] carrierwave uploader pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] carrierwave uploader</h1></header><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-file-upload\">keywords: <code>file upload</code><a href=\"#keywords-file-upload\" class=\"hash-link\" aria-label=\"keywords-file-upload的直接連結\" title=\"keywords-file-upload的直接連結\">​</a></h6><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"產生-uploader\">產生 uploader<a href=\"#產生-uploader\" class=\"hash-link\" aria-label=\"產生 uploader的直接連結\" title=\"產生 uploader的直接連結\">​</a></h2><p>執行下面其他步驟前，要先建立 <code>uploader</code>：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># create  app/uploaders/fieldname_uploader.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails generate uploader Avatar</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"上傳單一檔案\">上傳單一檔案<a href=\"#上傳單一檔案\" class=\"hash-link\" aria-label=\"上傳單一檔案的直接連結\" title=\"上傳單一檔案的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"generator\">Generator<a href=\"#generator\" class=\"hash-link\" aria-label=\"Generator的直接連結\" title=\"Generator的直接連結\">​</a></h3><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails g migration add_avatar_to_users avatar:string</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"model\">Model<a href=\"#model\" class=\"hash-link\" aria-label=\"Model的直接連結\" title=\"Model的直接連結\">​</a></h3><p>在 model 中掛入 uploader</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/user.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class User &lt; ActiveRecord::Base</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  mount_uploader :avatar, AvatarUploader</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"controller\">Controller<a href=\"#controller\" class=\"hash-link\" aria-label=\"Controller的直接連結\" title=\"Controller的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/controllers/users_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def user_params</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  params.require(:user).permit(:name, :avatar)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"view\">View<a href=\"#view\" class=\"hash-link\" aria-label=\"View的直接連結\" title=\"View的直接連結\">​</a></h3><p>在 View 中使用，這時候送出表單，就會自動將檔案上傳到 <code>./public/uploads/&lt;fieldName&gt;</code> 資料夾中，同時將檔名存入相對應的 table field 中。</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- ./app/views/users/_form.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_with(model: user, local: true) do |form| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;div class=&quot;field&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;%= form.label :avatar %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;%= form.file_field :avatar, id: :product_avatar %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;div class=&quot;actions&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;%= form.submit %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>利用在 View 中可以透過：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">product.avatar              # 取得圖檔相對路徑</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">product.avatar.url          # 取得圖檔相對路徑（和上面一樣）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">product.avatar.current_path # 取得圖檔絕對路徑</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">product.avatar_identifier   # 取得檔名（是用底線 _ ）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">product.avatar.file.nil?    # 判斷檔案是否存在</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>注意：<code>product.avatar</code> 永遠不會回傳 <code>nil</code>，即使沒有和它關連的圖片也一樣。可以透過 <code>product.avatar.file.nil?</code> 來檢驗是否有相關連的圖片。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"上傳多個檔案-multiple-files-upload\">上傳多個檔案 multiple files upload<a href=\"#上傳多個檔案-multiple-files-upload\" class=\"hash-link\" aria-label=\"上傳多個檔案 multiple files upload的直接連結\" title=\"上傳多個檔案 multiple files upload的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"generator-1\">Generator<a href=\"#generator-1\" class=\"hash-link\" aria-label=\"Generator的直接連結\" title=\"Generator的直接連結\">​</a></h3><p>上傳多個檔案時，欄位名稱加上 s ，且欄位格式為 json</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails g migration add_avatars_to_users avatars:json</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails db:migrate</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"model-1\">Model<a href=\"#model-1\" class=\"hash-link\" aria-label=\"Model的直接連結\" title=\"Model的直接連結\">​</a></h3><p>原本的 <code>mount_uploader</code> 和 <code>:avatar</code> 都要變成複數：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/user.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class User &lt; ActiveRecord::Base</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  mount_uploaders :avatars, AvatarUploader</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"controller-1\">Controller<a href=\"#controller-1\" class=\"hash-link\" aria-label=\"Controller的直接連結\" title=\"Controller的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 這是透過 AJAX 上傳圖檔</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/controllers/users_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def update_images</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  add_more_images(params[:product][:photos]) unless params[:product][:photos].nil?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  msg = {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    :status =&gt; &#x27;get data&#x27;,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    :photos =&gt; @product.photos.map(&amp;:url)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  render :json =&gt; msg</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># controller</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># new_images 代入 params 傳入的圖檔，例如 params[:product][:photos]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def add_more_images(new_images)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  images = @product.photos</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  images += new_images</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @product.photos = images</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @product.save</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"view-1\">View<a href=\"#view-1\" class=\"hash-link\" aria-label=\"View的直接連結\" title=\"View的直接連結\">​</a></h3><p><code>file_field</code> 要記得加上 <code>multiple: true</code>：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- ./app/views/users/_form.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_with(model: user, local: true) do |form| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;field&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= form.label :avatars %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= form.file_field :avatars, id: :user_avatars, multiple: true %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;actions&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= form.submit %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>透過 <code>form.file_field</code> 產生的 input tag 會長像下面這樣，其中 name 會是 <code>name=&quot;user[avatars][]&quot;</code>：</p><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">id</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">user_avatars</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">multiple</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">multiple</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">file</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">user[avatars][]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>上傳後 db 的 table 中會以陣列的方式儲存<code>[&quot;Chrome.jpeg&quot;,&quot;html5.png&quot;,&quot;JS.png&quot;]</code></p><p>在 View 中可以透過下面方式來採用：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--  identifier 目前無法在 multiple upload 使用 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= &quot;url：#{avatar.url}&quot; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%#= &quot;identifier: #{avatar.identifier}&quot; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= &quot;current_path: #{avatar.current_path}&quot; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= &quot;file.nil?: #{avatar.file.nil?}&quot; %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"移除上傳的檔案\">移除上傳的檔案<a href=\"#移除上傳的檔案\" class=\"hash-link\" aria-label=\"移除上傳的檔案的直接連結\" title=\"移除上傳的檔案的直接連結\">​</a></h2><p>下面這是可以透過 AJAX 的方式刪除圖檔，其中 <code>@product.write_attribute(:photos, []) if @product.photos.empty?</code> 這行是修復 CarrierWave 已經的 Issue，如果沒有這行，將無法刪除最後一張圖片：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># controller</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def delete_images</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  remove_images(params[:remove_photos_url]) unless params[:remove_photos_url].nil?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  msg = {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    :status =&gt; &#x27;delete data&#x27;,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    :photos =&gt; @product.photos.map(&amp;:url)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  render :json =&gt; msg</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def remove_images(photos_url)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  remain_images = @product.photos                # copy the array</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  remain_images = remain_images.reject do |image|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    photos_url == image.url</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @product.photos = remain_images               # re-assign back</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @product.write_attribute(:photos, []) if @product.photos.empty?   # Fix carrierwave issues when deleting last file</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @product.save</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"known-issue\">Known Issue<a href=\"#known-issue\" class=\"hash-link\" aria-label=\"Known Issue的直接連結\" title=\"Known Issue的直接連結\">​</a></h2><ul><li><a href=\"https://github.com/carrierwaveuploader/carrierwave/issues/1990\" target=\"_blank\" rel=\"noopener noreferrer\">沒辦法刪除最後一張圖片：Can not delete all images on a upload that handles multiple files</a></li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"https://github.com/carrierwaveuploader/carrierwave/wiki\" target=\"_blank\" rel=\"noopener noreferrer\">CarrierWave Wiki</a> @ github</li><li><a href=\"https://github.com/carrierwaveuploader/carrierwave/wiki/How-to:-Add-more-files-and-remove-single-file-when-using-default-multiple-file-uploads-feature\" target=\"_blank\" rel=\"noopener noreferrer\">How to: Add more files and remove single file when using default multiple file uploads feature</a> @ carrierwave</li><li><a href=\"http://bobintornado.github.io/rails/2015/12/29/Multiple-Images-Uploading-With-CarrierWave-and-PostgreSQL-Array.html\" target=\"_blank\" rel=\"noopener noreferrer\">Multiple Images Uploading With CarrierWave and PostgreSQL Array</a> by Bob Cao</li><li><a href=\"https://github.com/bobintornado/sample-gallery-app-with-carrierwave\" target=\"_blank\" rel=\"noopener noreferrer\">Sample Gallery App with Carrier Wave</a> @ Github by Bob Cao</li><li><a href=\"https://github.com/carrierwaveuploader/carrierwave/issues/1545\" target=\"_blank\" rel=\"noopener noreferrer\">Append more files</a> @ carrierwave github issues</li><li><a href=\"https://quickleft.com/blog/how-to-upload-to-carrierwave-with-javascript/\" target=\"_blank\" rel=\"noopener noreferrer\">How to Upload to Carrierwave with JavaScript</a> @ QuickLeft Blog</li></ul><p>相關閱讀</p><ul><li><a href=\"https://hackmd.io/s/Byc9WT2LW\" target=\"_blank\" rel=\"noopener noreferrer\">[JS] 檔案上傳（Input File）</a> @ PJCHENder HackMD</li><li><a href=\"https://hackmd.io/s/rJIS-sC_-\" target=\"_blank\" rel=\"noopener noreferrer\">[Rails] AJAX 小技巧</a> @ PJCHENder HackMD</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Config 相關設定 pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Config 相關設定 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Config 相關設定</h1></header><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"assets\">assets<a href=\"#assets\" class=\"hash-link\" aria-label=\"assets的直接連結\" title=\"assets的直接連結\">​</a></h4><p>在預設的情況下，Rails 會在當前的 host 中把 assets 放在共用資料夾中，並且可以透過 <code>http://localhost:3000/assets/xxx.jpg</code> 存取，但你若想變更 <code>asset_host</code> 的位置，可以設定<code>config.action_controller.asset_host</code> ：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">config.action_controller.asset_host = &quot;www.example.com&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">image_tag(&quot;rails.png&quot;) # =&gt; &lt;img src=&quot;http://www.example.com/assets/rails.png&quot; alt=&quot;Rails&quot; /&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [gem] Devise pjchender.dev": {
    "prefix": "hruby-on-rails [gem] Devise pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[gem] Devise</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"install\">Install<a href=\"#install\" class=\"hash-link\" aria-label=\"Install的直接連結\" title=\"Install的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Gemfile</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Flexible authentication solution for Rails with Warden</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;devise&#x27;, &#x27;~&gt; 4.3&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"usage\">Usage<a href=\"#usage\" class=\"hash-link\" aria-label=\"Usage的直接連結\" title=\"Usage的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># in controller</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Admin::BaseController &lt; ApplicationController</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  before_action :authenticate_user!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  layout &#x27;admin/layouts/application&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- in view --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= link_to destroy_user_session_path, method: :delete, class: &#x27;nav-link&#x27; do %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;i class=&quot;fas fa-sign-out-alt&quot;&gt;&lt;/i&gt;&lt;span class=&quot;ml-1&quot;&gt;登出&lt;/span&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"設定可接收的註冊資料參數\">設定可接收的註冊資料（參數）<a href=\"#設定可接收的註冊資料參數\" class=\"hash-link\" aria-label=\"設定可接收的註冊資料（參數）的直接連結\" title=\"設定可接收的註冊資料（參數）的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/controllers/application_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class ApplicationController &lt; ActionController::Base</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # Add additional parameters for Devise Model</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  before_action :configure_permitted_parameters, if: :devise_controller?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  protected</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def configure_permitted_parameters</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      devise_parameter_sanitizer.permit(:sign_up, keys: %i(name title birthday sex phone timezone))</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      devise_parameter_sanitizer.permit(:account_update, keys: %i(name title birthday sex phone timezone))</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def redirect_to_unauthorized</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      redirect_to unauthorized_path</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      return</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"example\">Example<a href=\"#example\" class=\"hash-link\" aria-label=\"Example的直接連結\" title=\"Example的直接連結\">​</a></h2><ul><li><a href=\"http://192.168.1.7/Calvert/OnePageShop/commit/9f5594cc12015b6181af2c0ca294d2a18dd43211\" target=\"_blank\" rel=\"noopener noreferrer\">OnePageShop</a> @ wavinfo</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [gem] Enumerize pjchender.dev": {
    "prefix": "hruby-on-rails [gem] Enumerize pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[gem] Enumerize</h1></header><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Gemfile</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Enumerated attributes with I18n and ActiveRecord/Mongoid/MongoMapper support</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;enumerize&#x27;, &#x27;~&gt; 2.3&#x27;, &#x27;&gt;= 2.3.1&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"https://github.com/brainspec/enumerize\" target=\"_blank\" rel=\"noopener noreferrer\">enumerize</a> @ Github</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"basic-usage\">Basic Usage<a href=\"#basic-usage\" class=\"hash-link\" aria-label=\"Basic Usage的直接連結\" title=\"Basic Usage的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"migrate\">Migrate<a href=\"#migrate\" class=\"hash-link\" aria-label=\"Migrate的直接連結\" title=\"Migrate的直接連結\">​</a></h3><p>enumerize 搭配欄位的資料格式是字串：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class CreateUsers &lt; ActiveRecord::Migration</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :users do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :sex</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :role</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"model\">Model<a href=\"#model\" class=\"hash-link\" aria-label=\"Model的直接連結\" title=\"Model的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/user.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class User</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  extend Enumerize</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  enumerize :sex, in: [:male, :female], default: :male, predicates: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  enumerize :status, in: %i(publish private top), predicates: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"controller-and-view\">Controller and View<a href=\"#controller-and-view\" class=\"hash-link\" aria-label=\"Controller and View的直接連結\" title=\"Controller and View的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># in controller or view</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.sex.values  # 取得 sex 所有的列舉值，[&quot;male&quot;, &quot;female&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.sex.options # 可以用來產收 select 下拉選單的 options，[[&quot;Male&quot;, &quot;male&quot;], [&quot;Female&quot;, &quot;female&quot;]]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.sex.text    # or @user.sex_text，取得 user 目前 sex 的值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.sex_text    # 等同於上面</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.sex.male?   #=&gt; true，檢驗 user 目前 sex 的值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.sex.female? #=&gt; false</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>使用於 <code>&lt;input type=&quot;select&quot;&gt;</code>：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 使用 User.sex.options --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= f.select(:sex, User.sex.options, { prompt: &#x27;- 請選擇 -&#x27; }, { class: &#x27;custom-select&#x27; }) %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如果在 model 的地方有使用 <code>predicates: true</code> 或 <code>predicates: { prefix: true }</code> ，則可以使用下列方法：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># predicates: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.male?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.female?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># predicates: {prefix: true}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.sex_female?</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>在 Ruby 中 Predicate methods 指的是名稱最後帶有 <code>?</code> 的方法，並且會回傳布林值。</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"i18n\">i18n<a href=\"#i18n\" class=\"hash-link\" aria-label=\"i18n的直接連結\" title=\"i18n的直接連結\">​</a></h3><div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># enumerize.zh-TW.yml</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token key atrule\">zh-TW</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token key atrule\">enumerize</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token key atrule\">defaults</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">question_type</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">alliance</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 異業合作</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">product</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 產品詢問</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">buy</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 購買問題</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">suggest</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 服務建議</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">other</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 其他</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">inv_type</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">two_copies</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 二聯式</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">three_copies</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 三聯式</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># enumerize.en.yml</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token key atrule\">en</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token key atrule\">enumerize</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token key atrule\">user&lt;model-name&gt;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">sex&lt;field-name&gt;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">male&lt;option-name&gt;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Male&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">female&lt;option-name&gt;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Female&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] 環境變數 environment variables pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] 環境變數 environment variables pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] 環境變數 environment variables</h1></header><p>對於<strong>機密性較低</strong>的環境變數，可以直接設定在 <code>config/environments/</code> 裡面的 <code>development.rb</code> 和 <code>production.rb</code> 中，例如：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># config/environments/development.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Rails.application.configure do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># API URL</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  config.api_url = &#x27;http://localhost:8080/v1&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如此 Rails 將根據當時執行的環境（即，development 或 production）可以直接透過 <code>Rails.application.config.api_url</code> 在 Controller 中取得此環境變數：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">uri = URI(&quot;#{Rails.application.config.api_url}/languages?limit=-1&quot;)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] 在 Rails 專案中使用 gem (Gemfile) pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] 在 Rails 專案中使用 gem (Gemfile) pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] 在 Rails 專案中使用 gem (Gemfile)</h1></header><p>如果要在 Rails 專案中使用 Gem 的話，需要把要使用的 Gem 標註在專案目錄下的 <code>Gemfile</code>：</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"安裝-gem-到-rails-中\">安裝 gem 到 rails 中<a href=\"#安裝-gem-到-rails-中\" class=\"hash-link\" aria-label=\"安裝 gem 到 rails 中的直接連結\" title=\"安裝 gem 到 rails 中的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"step-1-標註要加進-rails-的套件到-gemfile\">Step 1: 標註要加進 Rails 的套件到 Gemfile<a href=\"#step-1-標註要加進-rails-的套件到-gemfile\" class=\"hash-link\" aria-label=\"Step 1: 標註要加進 Rails 的套件到 Gemfile的直接連結\" title=\"Step 1: 標註要加進 Rails 的套件到 Gemfile的直接連結\">​</a></h3><p>打開 <code>Gemfile</code>，加上這行：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;kaminari&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"step-2-執行-bundle-install\">STEP 2: 執行 bundle install<a href=\"#step-2-執行-bundle-install\" class=\"hash-link\" aria-label=\"STEP 2: 執行 bundle install的直接連結\" title=\"STEP 2: 執行 bundle install的直接連結\">​</a></h3><p>更新 Gemfile 檔案內容後，要到該專案目錄底下執行 <code>bundle install</code> 指令，確保所有套件都有正常安裝。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"gemfile-加入要安裝的-gem\">Gemfile 加入要安裝的 gem<a href=\"#gemfile-加入要安裝的-gem\" class=\"hash-link\" aria-label=\"Gemfile 加入要安裝的 gem的直接連結\" title=\"Gemfile 加入要安裝的 gem的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"沒加註版號\">沒加註版號<a href=\"#沒加註版號\" class=\"hash-link\" aria-label=\"沒加註版號的直接連結\" title=\"沒加註版號的直接連結\">​</a></h3><p>在安裝的時候選用「最新的穩定（stable）版本」，要注意這裡的重點是「穩定」而不是「最新」。</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;sqlite3&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;jquery-rails&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"加註明確版號\">加註明確版號<a href=\"#加註明確版號\" class=\"hash-link\" aria-label=\"加註明確版號的直接連結\" title=\"加註明確版號的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &quot;rails&quot;, &quot;5.0.1&quot;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"大於小於版號\">大於、小於版號<a href=\"#大於小於版號\" class=\"hash-link\" aria-label=\"大於、小於版號的直接連結\" title=\"大於、小於版號的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;uglifier&#x27;, &#x27;&gt;= 1.3.0&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;rails&#x27;,&#x27;&gt;= 5.0.0.beta4&#x27;, &#x27;&lt; 5.1&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用箭頭\">使用箭頭<a href=\"#使用箭頭\" class=\"hash-link\" aria-label=\"使用箭頭的直接連結\" title=\"使用箭頭的直接連結\">​</a></h3><p>使用 <code>~&gt;</code> 的「差不多」寫法，可以確保不會因為套件升級而把原本正常運作的系統弄壞了。",
      "選用 4.1.0 以上，但 4.2 以下（不含括 4.2）的最新版本。</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;coffee-rails&#x27;, &#x27;~&gt; 4.1.0&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用外部github\">使用外部（github）<a href=\"#使用外部github\" class=\"hash-link\" aria-label=\"使用外部（github）的直接連結\" title=\"使用外部（github）的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 直接從 github 拉檔案</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;acts-as-taggable-on&#x27;, github: &#x27;mbleigh/acts-as-taggable-on&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"http://railsbook.tw/chapters/09-using-gems.html\" target=\"_blank\" rel=\"noopener noreferrer\">使用套件（Gem）讓開發更有效率</a> @ RailsBook</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [gem] 常用模組套件 pjchender.dev": {
    "prefix": "hruby-on-rails [gem] 常用模組套件 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[gem] 常用模組套件</h1></header><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"tags-gem-ruby-package-rails\">tags: <code>gem</code>, <code>ruby</code>, <code>package</code>, <code>Rails</code><a href=\"#tags-gem-ruby-package-rails\" class=\"hash-link\" aria-label=\"tags-gem-ruby-package-rails的直接連結\" title=\"tags-gem-ruby-package-rails的直接連結\">​</a></h6><table><thead><tr><th>Package</th><th>描述</th><th>其他說明</th></tr></thead><tbody><tr><td><a href=\"https://github.com/plataformatec/devise\" target=\"_blank\" rel=\"noopener noreferrer\">Devise</a></td><td>驗證使用者</td><td><a href=\"https://ihower.tw/rails/auth.html\" target=\"_blank\" rel=\"noopener noreferrer\">使用者認證</a>(ihower), <a href=\"https://ihower.tw/rails/\" target=\"_blank\" rel=\"noopener noreferrer\">Ruby on Rails 實戰聖經</a>(ihower)</td></tr><tr><td><a href=\"https://github.com/RolifyCommunity/rolify\" target=\"_blank\" rel=\"noopener noreferrer\">Rolify</a></td><td>管理使用者角色</td><td>...</td></tr><tr><td><a href=\"https://github.com/brainspec/enumerize\" target=\"_blank\" rel=\"noopener noreferrer\">enumerize</a></td><td>方便取得資料庫內容</td><td>...</td></tr><tr><td><a href=\"https://github.com/mbleigh/acts-as-taggable-on\" target=\"_blank\" rel=\"noopener noreferrer\">taggable</a></td><td>...</td><td>...</td></tr><tr><td><a href=\"https://rubygems.org/gems/acts_as_list\" target=\"_blank\" rel=\"noopener noreferrer\">act_as_list</a></td><td>排序列表中的物件</td><td>...</td></tr><tr><td><a href=\"https://github.com/aasm/aasm\" target=\"_blank\" rel=\"noopener noreferrer\">AASM</a></td><td>流程管理</td><td>...</td></tr><tr><td><a href=\"https://github.com/carrierwaveuploader/carrierwave\" target=\"_blank\" rel=\"noopener noreferrer\">carrierwave</a></td><td>圖片上傳處理</td><td>...</td></tr><tr><td><a href=\"https://github.com/ankane/chartkick\" target=\"_blank\" rel=\"noopener noreferrer\">chartkick</a></td><td>圖表繪製</td><td>在 Rails 中可以同時使用 chart.js, google charts 和 High Charts</td></tr></tbody></table><div class=\"language-shell codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-shell codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">install</span><span class=\"token plain\"> gem_name</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bundler</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">nokogiri</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">pg              # postgreSql</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Paginator for Rails 4+</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;kaminari&#x27;, &#x27;~&gt; 1.0&#x27;, &#x27;&gt;= 1.0.1&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Enumerated attributes with I18n and ActiveRecord/Mongoid/MongoMapper support</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;enumerize&#x27;, &#x27;~&gt; 2.0&#x27;, &#x27;&gt;= 2.0.1&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Flexible authentication solution for Rails with Warden</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;devise&#x27;, &#x27;~&gt; 4.3&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 讓 Rails Console 好看很多</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;pry-rails&#x27;, &#x27;~&gt; 0.3.4&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Supporting gem for Rails Panel (Google Chrome extension for Rails development)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;meta_request&#x27;, &#x27;~&gt; 0.4.3&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># help to kill N+1 queries and unused eager loading.</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;bullet&#x27;, &#x27;~&gt; 5.5&#x27;, &#x27;&gt;= 5.5.1&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># A static analysis security vulnerability scanner for Ruby on Rails applications</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;brakeman&#x27;, require: false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># rspec command for spring</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;spring-commands-rspec&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li><a href=\"http://www.nokogiri.org/\" target=\"_blank\" rel=\"noopener noreferrer\">nokogiri</a></li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"kaminari\">kaminari<a href=\"#kaminari\" class=\"hash-link\" aria-label=\"kaminari的直接連結\" title=\"kaminari的直接連結\">​</a></h2><p>製作自動分頁功能。後面的 <code>per(5)</code> 就是「每頁有 5 筆資料」的意思：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/controllers/admin/coupons_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># controller</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def index</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # 原本是 @posts = Post.all</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @posts = Post.includes(:user).page(params[:page]).per(5)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # 透過 AJAX 更新</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   respond_to do |format|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    format.html</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    format.js</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>打開相對應的 view，在想要加上分頁的地方加上 <code>&lt;%= paginate @posts, remote: true %&gt;</code>。</p><p>建立一支相對應的 JS 檔</p><div class=\"language-javascript codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-javascript codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// .app/views/admin/events/show.js.erb</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token dom variable\" style=\"color:rgb(191, 199, 213)\">document</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">querySelector</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;#order-list&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">innerHTML</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;&lt;%= escape_javascript(render &#x27;orders&#x27;, orders: @orders) %&gt;&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"enumerize\">enumerize<a href=\"#enumerize\" class=\"hash-link\" aria-label=\"enumerize的直接連結\" title=\"enumerize的直接連結\">​</a></h2><p>可以在 Rails 中更方便取用 enumerize 的資料。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"基本設定\">基本設定<a href=\"#基本設定\" class=\"hash-link\" aria-label=\"基本設定的直接連結\" title=\"基本設定的直接連結\">​</a></h3><p>使用 <code>enumerize</code> 關鍵字：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># migration(Active Record)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class User</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  extend Enumerize</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  enumerize :sex, in: [:male, :female]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"取值\">取值<a href=\"#取值\" class=\"hash-link\" aria-label=\"取值的直接連結\" title=\"取值的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># controller</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 取得某個欄位的屬性值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">@user.sex_text # or @user.sex.text</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 取得某個 enumerized 屬性的所有值</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.sex.values # or User.enumerized_attributes[:sex].values</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在表單中使用時，支援 <code>:only</code> 和 <code>:except</code></p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># erb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_for @user do |f| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;%= f.select :sex, User.sex.options %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"boolean-方法\">Boolean 方法<a href=\"#boolean-方法\" class=\"hash-link\" aria-label=\"Boolean 方法的直接連結\" title=\"Boolean 方法的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.sex = :male</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.sex.male? #=&gt; true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.sex.female? #=&gt; false</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"predicate-方法\">Predicate 方法<a href=\"#predicate-方法\" class=\"hash-link\" aria-label=\"Predicate 方法的直接連結\" title=\"Predicate 方法的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># model</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class User</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  extend Enumerize</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  enumerize :sex, in: %w(male female), predicates: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user = User.new</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.male?   # =&gt; false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.female? # =&gt; false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.sex = &#x27;male&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.male?   # =&gt; true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.female? # =&gt; false</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"在不同的-model-中共享相同的-enumerize\">在不同的 model 中共享相同的 enumerize<a href=\"#在不同的-model-中共享相同的-enumerize\" class=\"hash-link\" aria-label=\"在不同的 model 中共享相同的 enumerize的直接連結\" title=\"在不同的 model 中共享相同的 enumerize的直接連結\">​</a></h3><p>可以使用 Ruby 的 Module:</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">module PersonEnumerations</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  extend Enumerize</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  enumerize :sex, in: %w[male female]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Person</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  include PersonEnumerations</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class User</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  include PersonEnumerations</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"為-enumerized-屬性添加值\">為 enumerized 屬性添加值<a href=\"#為-enumerized-屬性添加值\" class=\"hash-link\" aria-label=\"為 enumerized 屬性添加值的直接連結\" title=\"為 enumerized 屬性添加值的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class User &lt; ActiveRecord::Base</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  extend Enumerize</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  enumerize :role, in: {:user =&gt; 1, :admin =&gt; 2}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user = User.new</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.role = :user</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.role #=&gt; &#x27;user&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.role_value #=&gt; 1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.role.find_value(:user).value #=&gt; 1</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.role.find_value(:admin).value #=&gt; 2</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li><a href=\"https://github.com/brainspec/enumerize\" target=\"_blank\" rel=\"noopener noreferrer\">enumerize</a></li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"chartkick\">chartkick<a href=\"#chartkick\" class=\"hash-link\" aria-label=\"chartkick的直接連結\" title=\"chartkick的直接連結\">​</a></h2><ul><li><a href=\"https://github.com/ankane/chartkick\" target=\"_blank\" rel=\"noopener noreferrer\">chartkick</a></li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"安裝\">安裝<a href=\"#安裝\" class=\"hash-link\" aria-label=\"安裝的直接連結\" title=\"安裝的直接連結\">​</a></h3><p>在 Rails 的 <code>Gemfile</code> 中加入：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &quot;chartkick&quot;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在 <code>./app/assets/javascripts/application.js</code> 中加入：</p><div class=\"language-jsx codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-jsx codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">//= require Chart.bundle</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">//= require chartkick</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>即可開始使用。</p></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] 安裝並啟動 Rails 專案 pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] 安裝並啟動 Rails 專案 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] 安裝並啟動 Rails 專案</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立-rails-新專案流程\">建立 Rails 新專案流程<a href=\"#建立-rails-新專案流程\" class=\"hash-link\" aria-label=\"建立 Rails 新專案流程的直接連結\" title=\"建立 Rails 新專案流程的直接連結\">​</a></h2><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 安裝 Ruby</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rvm get stable           </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 更新 rvm 至最新版本</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rvm list known           </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 取的目前最新版可用的 Ruby 版本</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rvm </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">install</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.6</span><span class=\"token plain\">.3       </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 安裝當前最新版的 Ruby</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rvm use </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.6</span><span class=\"token plain\">.3 --default </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 使用最新版的 Ruby 並設為預設值</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ ruby -v                  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 確定使用的 Ruby 版本</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 如果有要使用 gemset 的話，否則可以跳過</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rvm gemset create rails600</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rvm use </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.6</span><span class=\"token plain\">.3@rails600           </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 選擇使用 Ruby 2.6.3 搭配 gemsets “rails600”</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 安裝 Rails 和 PostgreSQL 的 GEM</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ gem </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">install</span><span class=\"token plain\"> rails --no-document    </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 若想要安裝到最新的開發版可以加上 --pre</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ gem </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">install</span><span class=\"token plain\"> pg --no-document</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ gem </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">install</span><span class=\"token plain\"> rails --pre            </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 安裝最新版（包含開發中版本）的 Rails</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 建立專案</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails new </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token plain\">projectName</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token plain\"> --webpack</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\">react --database</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\">postgresql --skip-coffee --skip-test</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># Scaffold</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails generate scaffold Product title:string description:text image_url:string price:decimal</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立-rake-helper\">建立 rake helper<a href=\"#建立-rake-helper\" class=\"hash-link\" aria-label=\"建立 rake helper的直接連結\" title=\"建立 rake helper的直接連結\">​</a></h2><p>可以寫一個 rake 來自動化執行：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># lib/tasks/dev.rake</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">namespace :dev do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  desc &#x27;Rebuild system&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  task build: [&#x27;tmp:clear&#x27;, &#x27;log:clear&#x27;, &#x27;db:drop&#x27;, &#x27;db:create&#x27;, &#x27;db:migrate&#x27;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  task rebuild: [&#x27;dev:build&#x27;, &#x27;db:seed&#x27;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>這樣只要打</p><ul><li><code>rails dev:build</code>：即可把專案資料一切清空歸零重建</li><li><code>rails dev:rebuild</code>：即可重建完再跑 seed</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-uuid-和-jsonb\">使用 uuid 和 jsonb<a href=\"#使用-uuid-和-jsonb\" class=\"hash-link\" aria-label=\"使用 uuid 和 jsonb的直接連結\" title=\"使用 uuid 和 jsonb的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-jsonb\">使用 jsonb<a href=\"#使用-jsonb\" class=\"hash-link\" aria-label=\"使用 jsonb的直接連結\" title=\"使用 jsonb的直接連結\">​</a></h3><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails g migration enable_hstore_extension</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># migration 檔案中放入以下內容</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class EnableHstoreExtension &lt; ActiveRecord::Migration[6.0]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    enable_extension &#x27;hstore&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-uuid\">使用 uuid<a href=\"#使用-uuid\" class=\"hash-link\" aria-label=\"使用 uuid的直接連結\" title=\"使用 uuid的直接連結\">​</a></h3><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails g migration enable_uuid_extension</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># migration 檔案中放入以下內容</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class EnableUuidExtension &lt; ActiveRecord::Migration[6.0]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    enable_extension &#x27;uuid-ossp&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    enable_extension &#x27;pgcrypto&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"設定-webpack\">設定 webpack<a href=\"#設定-webpack\" class=\"hash-link\" aria-label=\"設定 webpack的直接連結\" title=\"設定 webpack的直接連結\">​</a></h2><div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># config/webpacker.yml</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 改成 true 後才會編譯出 CSS 「檔案」而不是 blob</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 可以避免重新整理時，因為 CSS 還沒載入完成導致畫面跳一下的情況</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># Extract and emit a css file</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token key atrule\">extract_css</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean important\" style=\"color:rgb(255, 88, 116)\">true</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] i18n pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] i18n pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] i18n</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用\">使用<a href=\"#使用\" class=\"hash-link\" aria-label=\"使用的直接連結\" title=\"使用的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># controller</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">I18n.t &#x27;store.title&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">I18n.l Time.now</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"configuration\">Configuration<a href=\"#configuration\" class=\"hash-link\" aria-label=\"Configuration的直接連結\" title=\"Configuration的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./config/initializers/i18n.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Rails.application.config.i18n.available_locales = [:&quot;zh-TW&quot;, :en]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Rails.application.config.i18n.default_locale = :&quot;zh-TW&quot;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/controllers/application_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class ApplicationController &lt; ActionController::Base</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  before_action :set_locale</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  protected</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def set_locale</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      if params[:locale] &amp;&amp; I18n.available_locales.include?( params[:locale].to_sym )</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        session[:locale] = params[:locale]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      I18n.locale = session[:locale] || I18n.default_locale</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><blockquote><p><a href=\"https://guides.rubyonrails.org/i18n.html\" target=\"_blank\" rel=\"noopener noreferrer\">Rails Internationalization (I18n) API</a> @ RailsGuides</p></blockquote></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] 判斷內容是空或有 pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] 判斷內容是空或有 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] 判斷內容是空或有</h1></header><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"tags-ruby-rails-empty-blank-present-nil\">tags: <code>ruby</code>, <code>rails</code>, <code>empty</code>, <code>blank</code>, <code>present</code>, <code>nil</code><a href=\"#tags-ruby-rails-empty-blank-present-nil\" class=\"hash-link\" aria-label=\"tags-ruby-rails-empty-blank-present-nil的直接連結\" title=\"tags-ruby-rails-empty-blank-present-nil的直接連結\">​</a></h6><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"rails-方法\">Rails 方法<a href=\"#rails-方法\" class=\"hash-link\" aria-label=\"Rails 方法的直接連結\" title=\"Rails 方法的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"blank\"><code>.blank?</code><a href=\"#blank\" class=\"hash-link\" aria-label=\"blank的直接連結\" title=\"blank的直接連結\">​</a></h4><ul><li>Rails Method</li><li>任何型態都可使用不會噴錯</li><li>空白的字串也算空</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">nil.blank?     #true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">[].blank?      #true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">{}.blank?      #true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot;&quot;.blank?      #true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot; &quot;.blank?     #true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot;abc&quot;.blank?   #false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">123.blank?     #false</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"present\"><code>.present?</code><a href=\"#present\" class=\"hash-link\" aria-label=\"present的直接連結\" title=\"present的直接連結\">​</a></h4><ul><li>Rails Method</li><li>任何型態都可使用不會噴錯</li><li>空白的字串也算空</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">nil.present?   #false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">[].present?    #false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">{}.present?    #false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot;&quot;.present?    #false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot; &quot;.present?   #false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot;abc&quot;.present? #true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">123.present?   #true</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"persisted--new_record\"><code>.persisted?</code> &amp; <code>new_record</code><a href=\"#persisted--new_record\" class=\"hash-link\" aria-label=\"persisted--new_record的直接連結\" title=\"persisted--new_record的直接連結\">​</a></h4><p>判斷 Object 是否已經存在資料庫的 method：</p><ul><li>new_record: 尚未存入資料庫</li><li>persisted: 已存入資料庫</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a = User.new   #還沒存入資料庫以前</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a.persisted?   #false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a.new_record?  #true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a.save         #存入資料庫</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a.persisted?   #true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a.new_record?  #false</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"ruby-內建方法\">Ruby 內建方法<a href=\"#ruby-內建方法\" class=\"hash-link\" aria-label=\"Ruby 內建方法的直接連結\" title=\"Ruby 內建方法的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"empty\"><code>.empty?</code><a href=\"#empty\" class=\"hash-link\" aria-label=\"empty的直接連結\" title=\"empty的直接連結\">​</a></h4><ul><li>Ruby Method</li><li>可以判斷 <code>[]</code>, <code>{}</code> 和字串</li><li>無法判斷 <code>nil</code> 和數值（會噴錯）</li><li>字串內有空白就不算 empty</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">nil.empty?     #NoMethodError: undefined method `empty?&#x27; for nil:NilClass</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">[].empty?      #true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">{}.empty?      #true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot;&quot;.empty?      #true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot; &quot;.empty?     #false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot;abc&quot;.empty?   #false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">123.empty?     #NoMethodError: undefined method `empty?&#x27; for 123:Fixnum</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"any\"><code>.any?</code><a href=\"#any\" class=\"hash-link\" aria-label=\"any的直接連結\" title=\"any的直接連結\">​</a></h4><ul><li>Ruby Method</li><li>只能判斷 <code>[]</code> 和 <code>{}</code></li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">nil.any?       #NoMethodError: undefined method `any?&#x27; for nil:NilClass</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">[].any?        #false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">{}.any?        #false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot;&quot;.any?        #NoMethodError: undefined method `any?&#x27; for &quot;&quot;:String</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot; &quot;.any?       #NoMethodError: undefined method `any?&#x27; for &quot;&quot;:String</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot;abc&quot;.any?     #NoMethodError: undefined method `any?&#x27; for &quot;&quot;:String</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">123.any?       #NoMethodError: undefined method `any?&#x27; for 123:Fixnum</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"nil\"><code>.nil?</code><a href=\"#nil\" class=\"hash-link\" aria-label=\"nil的直接連結\" title=\"nil的直接連結\">​</a></h4><ul><li>Ruby Method</li><li>只能判斷該物件是否為 <code>nil</code></li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">nil.nil?       #true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">[].nil?        #false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">{}.nil?        #false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot;&quot;.nil?        #false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot; &quot;.nil?       #false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot;abc&quot;.nil?     #false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">123.nil?       #false</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"exist\"><code>.exist?</code><a href=\"#exist\" class=\"hash-link\" aria-label=\"exist的直接連結\" title=\"exist的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.where(name: &#x27;Aaron&#x27;).exist?        # []</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"https://mgleon08.github.io/blog/2015/12/16/ruby-on-rail-nil-empty-blank-present/\" target=\"_blank\" rel=\"noopener noreferrer\">.nil? .empty? .blank? .present? 傻傻分不清楚？</a></li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] 判斷物件有哪些方法？上一層是誰？屬於哪個型態 pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] 判斷物件有哪些方法？上一層是誰？屬於哪個型態 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] 判斷物件有哪些方法？上一層是誰？屬於哪個型態</h1></header><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"tags-rails-ruby-typeof-methods\">tags: <code>rails</code>, <code>ruby</code>, <code>typeof</code>, <code>methods?</code><a href=\"#tags-rails-ruby-typeof-methods\" class=\"hash-link\" aria-label=\"tags-rails-ruby-typeof-methods的直接連結\" title=\"tags-rails-ruby-typeof-methods的直接連結\">​</a></h6><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 繼承關係</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Object.superclass       ＃查上一層是誰?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Object.ancestors        ＃查祖宗十八代是誰?</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 有哪些方法可使用</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Object.methods          ＃查物件有哪些方法?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Object.respond_to? :new ＃查物件是否有這個方法?</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 資料型態</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Object.class      # 查看物件資料型態</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">arr.is_a? Array         # 檢驗 arr 是否為陣列</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">str.is_a? String        # 檢驗 str 是否為字串</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"https://en.wikibooks.org/wiki/Ruby_Programming/Data_types\" target=\"_blank\" rel=\"noopener noreferrer\">Ruby Data Types</a></p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"https://mgleon08.github.io/blog/2015/12/16/ruby-on-rail-nil-empty-blank-present/\" target=\"_blank\" rel=\"noopener noreferrer\">.nil? .empty? .blank? .present? 傻傻分不清楚？</a></li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [gem] kaminari pjchender.dev": {
    "prefix": "hruby-on-rails [gem] kaminari pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[gem] kaminari</h1></header><blockquote><p><a href=\"https://github.com/kaminari/kaminari\" target=\"_blank\" rel=\"noopener noreferrer\">Kaminari</a> @ GitHub</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"安裝\">安裝<a href=\"#安裝\" class=\"hash-link\" aria-label=\"安裝的直接連結\" title=\"安裝的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Gemfile</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Kaminari is a Scope &amp; Engine based, clean, powerful, agnostic, customizable and sophisticated paginator for Rails 4+</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;kaminari&#x27;, &#x27;~&gt; 1.1&#x27;, &#x27;&gt;= 1.1.1&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"設定\">設定<a href=\"#設定\" class=\"hash-link\" aria-label=\"設定的直接連結\" title=\"設定的直接連結\">​</a></h3><div class=\"language-Sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-Sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 產生設定檔</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails g kaminari:config             # create  config/initializers/kaminari_config.rb</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用\">使用<a href=\"#使用\" class=\"hash-link\" aria-label=\"使用的直接連結\" title=\"使用的直接連結\">​</a></h3><p>在 <strong>Controller</strong> 中把需要分頁的頁面，從原本的 <code>@posts = Post.all</code> 改成 <code>@posts = Post.all.page(params[:page])</code>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/controllers/posts_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class PostsController &lt; ApplicationController</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def index</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # @posts = Post.all</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    @posts = Post.all.page(params[:page])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    respond_to :html, :js</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在 <strong>View</strong> 中把需要分頁的頁面加入：<code>&lt;%= paginate @posts %&gt;</code>，接著就會產生醜醜的 view 了：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/cDzExzb.png\" alt=\"Imgur\" class=\"img_ev3q\"></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"產生好看的分頁\">產生好看的分頁<a href=\"#產生好看的分頁\" class=\"hash-link\" aria-label=\"產生好看的分頁的直接連結\" title=\"產生好看的分頁的直接連結\">​</a></h3><p>可以在 <a href=\"https://github.com/amatsuda/kaminari_themes\" target=\"_blank\" rel=\"noopener noreferrer\">kaminari themes</a> 中看看有沒有支援的主題</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails g kaminari:views &lt;THEME&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails g kaminari:views bootstrap4</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"issues\">Issues<a href=\"#issues\" class=\"hash-link\" aria-label=\"Issues的直接連結\" title=\"Issues的直接連結\">​</a></h3><p>原本的 paginator 沒辦法載到正確的 css class，需要加上 <code>href: &#x27;javascript:;</code> ：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- OnePageShop/app/views/kaminari/_page.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% if page.current? %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;li class=&quot;page-item active&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= content_tag :a, page, href: &#x27;javascript:;&#x27;, remote: remote, rel: (page.next? ? &#x27;next&#x27; : (page.prev? ? &#x27;prev&#x27; : nil)), class: &#x27;page-link&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/li&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% else %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;li class=&quot;page-item&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= link_to page, url, remote: remote, rel: (page.next? ? &#x27;next&#x27; : (page.prev? ? &#x27;prev&#x27; : nil)), class: &#x27;page-link&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/li&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"加上-i18n\">加上 i18n<a href=\"#加上-i18n\" class=\"hash-link\" aria-label=\"加上 i18n的直接連結\" title=\"加上 i18n的直接連結\">​</a></h3><p>在 <code>/OnePageShop/config/locales/</code> 中加上這兩隻檔案：</p><div class=\"language-yml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-yml codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># OnePageShop/config/locales/kaminari.en.yml</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token key atrule\">en</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token key atrule\">views</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token key atrule\">pagination</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">first</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;&amp;laquo; First&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">last</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Last &amp;raquo;&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">previous</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;&amp;lsaquo; Prev&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">next</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Next &amp;rsaquo;&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">truncate</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;&amp;hellip;&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token key atrule\">helpers</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token key atrule\">page_entries_info</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">one_page</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">display_entries</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">          </span><span class=\"token key atrule\">zero</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;No %{entry_name} found&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">          </span><span class=\"token key atrule\">one</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Displaying &lt;b&gt;1&lt;/b&gt; %{entry_name}&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">          </span><span class=\"token key atrule\">other</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Displaying &lt;b&gt;all %{count}&lt;/b&gt; %{entry_name}&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">more_pages</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">display_entries</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Displaying %{entry_name} &lt;b&gt;%{first}&amp;nbsp;-&amp;nbsp;%{last}&lt;/b&gt; of &lt;b&gt;%{total}&lt;/b&gt; in total&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-yml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-yml codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># OnePageShop/config/locales/kaminari.zh-TW.yml</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token key atrule\">zh-TW</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token key atrule\">views</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token key atrule\">pagination</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">first</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;&amp;laquo; 第一頁&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">last</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;最後一頁 &amp;raquo;&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">previous</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;&amp;lsaquo; 上一頁&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">next</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;下一頁 &amp;rsaquo;&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">truncate</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;&amp;hellip;&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token key atrule\">helpers</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token key atrule\">page_entries_info</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">one_page</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">display_entries</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">          </span><span class=\"token key atrule\">zero</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;找不到 %{entry_name}&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">          </span><span class=\"token key atrule\">one</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;只有 &lt;b&gt;1&lt;/b&gt; 筆 %{entry_name}&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">          </span><span class=\"token key atrule\">other</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;顯示 &lt;b&gt;所有 %{count}&lt;/b&gt; 筆 %{entry_name}&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token key atrule\">more_pages</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        </span><span class=\"token key atrule\">display_entries</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;顯示 &lt;b&gt;%{first}&amp;nbsp;-&amp;nbsp;%{last}&lt;/b&gt; 筆 %{entry_name}，共 &lt;b&gt;%{total}&lt;/b&gt; 筆&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Nested Model pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Nested Model pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Nested Model</h1></header><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-fields_for-accepts_nested_attributes_for\">keywords: <code>fields_for</code>, <code>accepts_nested_attributes_for</code><a href=\"#keywords-fields_for-accepts_nested_attributes_for\" class=\"hash-link\" aria-label=\"keywords-fields_for-accepts_nested_attributes_for的直接連結\" title=\"keywords-fields_for-accepts_nested_attributes_for的直接連結\">​</a></h5><blockquote><p><a href=\"http://guides.rubyonrails.org/form_helpers.html#building-complex-forms\" target=\"_blank\" rel=\"noopener noreferrer\">Building Complex Form</a> @ RailsGuides</p></blockquote><p>許多時候我們都不是只要修改單一個 Model，例如，當我們建立 <code>Person</code> 時，你可能會想要讓使用者可以在同一個表單同時建立/編輯與該 <code>Person</code> 有關的許多 <code>Address</code> 的資料。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"可參考專案\">可參考專案<a href=\"#可參考專案\" class=\"hash-link\" aria-label=\"可參考專案的直接連結\" title=\"可參考專案的直接連結\">​</a></h4><ul><li>需要關聯到對應的屬性時 <code>filmCloud &gt; posts_controller</code></li><li>只需要取得對應的 ids 時 <code>ux-website &gt; articles_controller, article/_form</code></li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"概念\">概念<a href=\"#概念\" class=\"hash-link\" aria-label=\"概念的直接連結\" title=\"概念的直接連結\">​</a></h2><p>透過在 Model 中使用 <code>accepts_nested_attributes_for</code> 可以自動幫我們建立相對應的方法可以使用，例如：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/models/person.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 透過 accepts_nested_attributes_for :address</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 會產生相對應的 addresses_attributes= 方法讓我們可以對 address 進行 crud</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Person &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_one :address</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  accepts_nested_attributes_for :address, allow_destroy: true, reject_if: :all_blank</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"一對一關係-one-to-one\">一對一關係 One to One<a href=\"#一對一關係-one-to-one\" class=\"hash-link\" aria-label=\"一對一關係 One to One的直接連結\" title=\"一對一關係 One to One的直接連結\">​</a></h2><p>假設 Person <code>has_one</code> Address：</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"model\">Model<a href=\"#model\" class=\"hash-link\" aria-label=\"Model的直接連結\" title=\"Model的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-accepts_nested_attributes_for\">keywords: <code>accepts_nested_attributes_for</code><a href=\"#keywords-accepts_nested_attributes_for\" class=\"hash-link\" aria-label=\"keywords-accepts_nested_attributes_for的直接連結\" title=\"keywords-accepts_nested_attributes_for的直接連結\">​</a></h5><ul><li><strong><code>accepts_nested_attributes_for</code></strong></li><li><strong><code>allow_destroy</code></strong></li><li><strong><code>reject_if</code></strong></li></ul><p>當 Person 已經有定義 <code>has_one :address</code> 後，可以使用 <code>accepts_nested_attributes_for :address</code> ：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/models/person.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Person &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_one :address</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  accepts_nested_attributes_for :address, allow_destroy: true, reject_if: :all_blank</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"view\">View<a href=\"#view\" class=\"hash-link\" aria-label=\"View的直接連結\" title=\"View的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-instancefields_for\">keywords: <code>&lt;instance&gt;.fields_for</code><a href=\"#keywords-instancefields_for\" class=\"hash-link\" aria-label=\"keywords-instancefields_for的直接連結\" title=\"keywords-instancefields_for的直接連結\">​</a></h5><p>可以使用 <code>&lt;instance&gt;.fields_for</code>：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- app/views/people/_form.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_for @person do |person_form| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;!-- Person 的欄位 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;field&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= person_form.label :name %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= person_form.text_field :name %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;&lt;!-- / Person 的欄位 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;!-- Person.address 的欄位 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;field&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= person_form.fields_for :address do |address_fields| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      Location  : &lt;%= address_fields.text_field :location %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      Delete: &lt;%= address_fields.check_box :_destroy %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;% end %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;&lt;!-- Person.address 的欄位 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;actions&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= person_form.submit %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如此將會產生相對應的 HTML：</p><ul><li><strong><code>_id</code></strong>：value 的值會對應到 DB 當中的 id，用來告訴 Rails 上面的內容是要修改 DB 中的哪筆 record</li><li><strong><code>_destroy</code></strong>：當 value 設成 1 或 true 時將會刪除該筆資料</li></ul><blockquote><p>如果有使用 <code>_destroy</code> 的話，記得在 Model 的地方要設定 <code>allow_destroy: true</code></p></blockquote><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">div</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">class</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">field</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  Location :</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">text</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">123</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person[address_attributes][location]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">id</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person_address_attributes_location</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  Delete:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person[address_attributes][_destroy]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">hidden</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">0</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">checkbox</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">1</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person[address_attributes][_destroy]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">id</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person_address_attributes__destroy</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">hidden</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">3</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person[address_attributes][id]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">id</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person_address_attributes_id</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">div</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"controller\">Controller<a href=\"#controller\" class=\"hash-link\" aria-label=\"Controller的直接連結\" title=\"Controller的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-instance_attributes\">keywords: <code>&lt;instance&gt;_attributes</code><a href=\"#keywords-instance_attributes\" class=\"hash-link\" aria-label=\"keywords-instance_attributes的直接連結\" title=\"keywords-instance_attributes的直接連結\">​</a></h5><p>Person.address 的資料到 Controller 後會自動變成 <code>address_attributes</code>。</p><p>在 Controller 的地方要記得把允許的欄位（<code>address_attributes: [:location, :id, :_destroy]</code>）加到 <code>permit</code> 中 。</p><p>如果你想要允許 address_attributes 中的所有參數，<strong>可以透過物件<code>{ }</code>的方式允許所有參數</strong>，使用 <code>address_attributes: {}</code>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class PeopleController &lt; ApplicationController</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  before_action :set_person, only: [:show, :edit, :update, :destroy]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # ...</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  private</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # Never trust parameters from the scary internet, only allow the white list through.</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def person_params</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      # 允許所有參數：</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      # params.require(:person).permit(:name, address_attributes: {})</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      params.require(:person).permit(:name, address_attributes: [:location, :id, :_destroy])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"一對多關係-one-to-many\">一對多關係 One to Many<a href=\"#一對多關係-one-to-many\" class=\"hash-link\" aria-label=\"一對多關係 One to Many的直接連結\" title=\"一對多關係 One to Many的直接連結\">​</a></h2><p>假設 Person <code>has_many</code> Address：</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"model-1\">Model<a href=\"#model-1\" class=\"hash-link\" aria-label=\"Model的直接連結\" title=\"Model的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-accepts_nested_attributes_for-1\">keywords: <code>accepts_nested_attributes_for</code><a href=\"#keywords-accepts_nested_attributes_for-1\" class=\"hash-link\" aria-label=\"keywords-accepts_nested_attributes_for-1的直接連結\" title=\"keywords-accepts_nested_attributes_for-1的直接連結\">​</a></h5><ul><li><strong><code>accepts_nested_attributes_for</code></strong></li><li><strong><code>allow_destroy</code></strong></li><li><strong><code>reject_if</code></strong></li></ul><p>當 Person 已經有定義 <code>has_one :address</code> 後，可以使用 <code>accepts_nested_attributes_for :address</code> ：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/models/person.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Person &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_many :address</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  accepts_nested_attributes_for :address, allow_destroy: true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"view-1\">View<a href=\"#view-1\" class=\"hash-link\" aria-label=\"View的直接連結\" title=\"View的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-instancefields_for-1\">keywords: <code>&lt;instance&gt;.fields_for</code><a href=\"#keywords-instancefields_for-1\" class=\"hash-link\" aria-label=\"keywords-instancefields_for-1的直接連結\" title=\"keywords-instancefields_for-1的直接連結\">​</a></h5><p>可以使用 <code>&lt;instance&gt;.fields_for</code>：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- app/views/people/_form.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_for @person do |person_form| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;!-- Person 的欄位 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;field&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= person_form.label :name %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= person_form.text_field :name %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;&lt;!-- / Person 的欄位 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;!-- Person.address 的欄位 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;field&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= person_form.fields_for :address do |address_fields| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      Location  : &lt;%= address_fields.text_field :location %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      Delete: &lt;%= address_fields.check_box :_destroy %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;% end %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;&lt;!-- Person.address 的欄位 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;actions&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= person_form.submit %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如此將會產生相對應的 HTML：</p><p>在 <code>person[address_attributes]</code> 後因為可以接多個 address，所以多了一個 <code>[]</code> ，這是用來方便後端對應哪些資料是屬於同一群的</p><ul><li><strong><code>_id</code></strong>：value 的值會對應到 DB 當中的 id，用來告訴 Rails 上面的內容是要修改 DB 中的哪筆 record</li><li><strong><code>_destroy</code></strong>：當 value 設成 1 或 true 時將會刪除該筆資料</li><li><strong><code>[ ]</code></strong>：用來讓後端對應哪些是同一群的資料，<strong>所以不同群的不能用同一個值</strong>。通常會用 0, 1, 2 區別；但當內容是 <code>uuid</code> 或字串時，記得在 controller <code>.permit()</code> 的地方要用 <code>{ }</code> 允許整個物件。</li></ul><blockquote><p>如果有使用 <code>_destroy</code> 的話，記得在 Model 的地方要設定 <code>allow_destroy: true</code></p></blockquote><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">div</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">class</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">field</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">&lt;!-- 第一列 --&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  Location :</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">text</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">123</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person[address_attributes][0][location]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">id</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person_address_attributes_0_location</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  Delete:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person[address_attributes][0][_destroy]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">hidden</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">0</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">checkbox</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">1</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person[address_attributes][0][_destroy]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">id</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person_address_attributes_0__destroy</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">hidden</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">3</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person[address_attributes][0][id]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">id</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person_address_attributes_0_id</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">&lt;!-- 第二列 --&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  Location :</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">text</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">10666</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person[address_attributes][1][location]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">id</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person_address_attributes_1_location</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  Delete:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person[address_attributes][1][_destroy]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">hidden</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">0</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">checkbox</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">1</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person[address_attributes][1][_destroy]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">id</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person_address_attributes_1__destroy</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">hidden</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">4</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person[address_attributes][1][id]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">    </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">id</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">person_address_attributes_1_id</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">div</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"controller-1\">Controller<a href=\"#controller-1\" class=\"hash-link\" aria-label=\"Controller的直接連結\" title=\"Controller的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-instance_attributes-1\">keywords: <code>&lt;instance&gt;_attributes</code><a href=\"#keywords-instance_attributes-1\" class=\"hash-link\" aria-label=\"keywords-instance_attributes-1的直接連結\" title=\"keywords-instance_attributes-1的直接連結\">​</a></h5><p>Person.address 的資料到 Controller 後會自動變成 <code>address_attributes</code>。</p><p>在 Controller 的地方要記得把允許的欄位（<code>address_attributes: [:location, :id, :_destroy]</code>）加到 <code>permit</code> 中 。</p><p>如果你想要允許 address_attributes 中的所有參數，<strong>可以透過物件<code>{ }</code>的方式允許所有參數</strong>，使用 <code>address_attributes: {}</code>。</p><blockquote><p>如果在 View 中用來辨認群組的 <code>[ ]</code> 中帶入的是 uuid，因為在後端會把 uuid 當成物件的 key，所以 <code>.permit()</code>中需要透過 <code>foobar_attributes: {}</code> 當成物件來允許所有欄位內容。</p></blockquote><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class PeopleController &lt; ApplicationController</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  before_action :set_person, only: [:show, :edit, :update, :destroy]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # ...</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  private</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # Never trust parameters from the scary internet, only allow the white list through.</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def person_params</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      # 允許所有參數（當 View 中使用 uuid 時）：</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      # params.require(:person).permit(:name, address_attributes: {})</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    params.require(:person).permit(:name, address_attributes: [:location, :id, :_destroy])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"針對-create-時的情況\">針對 create 時的情況<a href=\"#針對-create-時的情況\" class=\"hash-link\" aria-label=\"針對 create 時的情況的直接連結\" title=\"針對 create 時的情況的直接連結\">​</a></h2><p>你會發現，如果 <code>Person.address</code> 中沒有資料時，在表單中不會產生任何可以填寫 address 的欄位，這時候常用的方式是在 <code>people_controller.rb</code> 中加上：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/controllers/people_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def new</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @person = Person.new</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  2.times { @person.address.build }    # @person 後的 Model (address) 可能需要用複數</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"避免空資料存到-model-中\">避免空資料存到 Model 中<a href=\"#避免空資料存到-model-中\" class=\"hash-link\" aria-label=\"避免空資料存到 Model 中的直接連結\" title=\"避免空資料存到 Model 中的直接連結\">​</a></h2><p>使用 <code>reject_if</code> 可以避面空的資料存到 Model 中：</p><ul><li><code>reject_if: :all_blank</code></li><li><code>reject_if: lambda {|attributes| attributes[&#x27;kind&#x27;].blank?}</code></li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Person &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_many :addresses</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  accepts_nested_attributes_for :addresses, reject_if: lambda {|attributes| attributes[&#x27;kind&#x27;].blank?}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"只需要關聯到的-id-而不需要內部的-attributes-時\">只需要關聯到的 id 而不需要內部的 attributes 時<a href=\"#只需要關聯到的-id-而不需要內部的-attributes-時\" class=\"hash-link\" aria-label=\"只需要關聯到的 id 而不需要內部的 attributes 時的直接連結\" title=\"只需要關聯到的 id 而不需要內部的 attributes 時的直接連結\">​</a></h2><p>這種情況通常用在 JOIN TABLE，在 JOIN TABLE 中只會存放兩個不同表中 id 是如何關聯起來的，而不會有其他的 attributes，這時候的做法可以參考：</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"view-2\">View<a href=\"#view-2\" class=\"hash-link\" aria-label=\"View的直接連結\" title=\"View的直接連結\">​</a></h3><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%# app/views/articles/_form.html.erb %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%# 直接關聯到 article.users %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= form_with model: article, local: true, html: { class: &#x27;needs-validation&#x27;, novalidate: true } do |form| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;form-group&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= form.label :status, class: &#x27;d-block&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= form.collection_check_boxes(:user_ids, User.all, :id, :name) %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"controller-2\">Controller<a href=\"#controller-2\" class=\"hash-link\" aria-label=\"Controller的直接連結\" title=\"Controller的直接連結\">​</a></h3><p>記得要設定 params permit 的部分：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def article_params</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  params.fetch(:article, {}).permit(:title, user_ids: [])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在 <strong>Controller</strong> 的部分，則可以透過：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">article.user_ids    # 取得和此 article 關聯的所有 user ids</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">article.users        # 取得和此 article 關聯的所有 user (object)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">article.user_ids = [1, 2]    # 直接使用 user id 建立關聯</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">u = User.first</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">article.users = [u]      # 透過 User Object 建立關聯</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>⚠️ 注意：<code>xxx_ids</code> 這是 Rails 的慣例。</p></blockquote><p>最後產生出來的 <strong>HTML</strong> 結構會像這樣：</p><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">div</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">class</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">form-group</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">label</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">class</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">d-block</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">for</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">article_status</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\">Status</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">label</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">hidden</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">article[user_ids][]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">checkbox</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">2</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">article[user_ids][]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">id</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">article_user_ids_2</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">label</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">for</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">article_user_ids_2</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\">Wei</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">label</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">input</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">type</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">checkbox</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">value</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">1</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">article[user_ids][]</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">id</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">article_user_ids_1</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">label</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">for</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">article_user_ids_1</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\">PJCHENder</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">label</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">div</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p><strong>Model</strong> 地方的設定類似這樣：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/models/article.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Article &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_and_belongs_to_many :users</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/models/user.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Article &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_and_belongs_to_many :articles</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><ul><li><a href=\"https://medium.com/@kansetsu7/rails-多對多關聯設定與存取-37f57bbcad73\" target=\"_blank\" rel=\"noopener noreferrer\">Rails 多對多關聯設定與存取</a></li><li><a href=\"https://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/collection_check_boxes\" target=\"_blank\" rel=\"noopener noreferrer\">collection_check_boxes</a> @APIDock</li></ul></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"http://guides.rubyonrails.org/form_helpers.html#building-complex-forms\" target=\"_blank\" rel=\"noopener noreferrer\">Building complex form</a> @ RailsGuides - Form Helpers</li><li><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" target=\"_blank\" rel=\"noopener noreferrer\">Active Record: Nested Attributes</a> @ Rails API</li><li><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormBuilder.html#method-i-fields_for\" target=\"_blank\" rel=\"noopener noreferrer\">method: fields_for</a> @ Rails API</li><li><a href=\"https://ihower.tw/rails/restful-practices.html#%E6%A1%88%E4%BE%8B%E4%BA%8C%E7%94%A8-nested-model-%E9%A0%86%E5%B8%B6%E7%B7%A8%E8%BC%AF%E8%B7%9F%E6%96%B0%E5%A2%9E\" target=\"_blank\" rel=\"noopener noreferrer\">RESTful 應用實作</a> @ Rails 實戰聖經 by ihower</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Number（數值、價格） pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Number（數值、價格） pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Number（數值、價格）</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"常用方法\">常用方法<a href=\"#常用方法\" class=\"hash-link\" aria-label=\"常用方法的直接連結\" title=\"常用方法的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">20.odd?               # 判斷是否為奇數</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">20.even?              # 判斷是否為偶數</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">20.33334.round(2)     # 四捨五入到小數第二位，沒代參數預設是取到整數</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">20.22224.floor        # 無條件捨去</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">20.22224.floor        # 無條件進位</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">## 常數</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">MATH::PI</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"ruby\">Ruby<a href=\"#ruby\" class=\"hash-link\" aria-label=\"Ruby的直接連結\" title=\"Ruby的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"基本運算\">基本運算<a href=\"#基本運算\" class=\"hash-link\" aria-label=\"基本運算的直接連結\" title=\"基本運算的直接連結\">​</a></h3><p><code>1 + 2</code> 執行時實際上的意思是 1.+(2)，「數字物件 1」呼叫了 + 這個方法，並且把「數字物件 2」當做參數傳進去</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">1 + 2</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">a ** b                # 次方</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">x % y                 # 餘數</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">MATH.sqrt([number])   # 次方</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他方法\">其他方法<a href=\"#其他方法\" class=\"hash-link\" aria-label=\"其他方法的直接連結\" title=\"其他方法的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">10.divmod(3)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">=&gt; [3, 1]</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"rails\">Rails<a href=\"#rails\" class=\"hash-link\" aria-label=\"Rails的直接連結\" title=\"Rails的直接連結\">​</a></h2><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= number_to_currency(@order.total_price, locale: :&#x27;zh-TW&#x27;, precision: 0, unit: &#x27;NT$&#x27;, format: &#x27;%u%n&#x27;) %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= @product.name %&gt;（已售出：&lt;%= @product.sold_quantity %&gt;）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= number_with_delimiter(product.stock) %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"https://www.codecademy.com/courses/\" target=\"_blank\" rel=\"noopener noreferrer\">Codecademy</a></li><li><a href=\"http://referrals.trhou.se/pojungchen\" target=\"_blank\" rel=\"noopener noreferrer\">Treehouse</a></li><li><a href=\"http://railsbook.tw/\" target=\"_blank\" rel=\"noopener noreferrer\">為你自己學 Ruby on Rails</a></li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [gem] Rolify pjchender.dev": {
    "prefix": "hruby-on-rails [gem] Rolify pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[gem] Rolify</h1></header><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Gemfile</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Very simple Roles library without any authorization enforcement supporting scope on resource objects (instance or class). Supports ActiveRecord and Mongoid ORMs.</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;rolify&#x27;, &#x27;~&gt; 5.2&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><ul><li><a href=\"https://github.com/RolifyCommunity/rolify/wiki/Usage\" target=\"_blank\" rel=\"noopener noreferrer\">rolify - usage</a> @ Github WIki</li><li><a href=\"https://github.com/RolifyCommunity/rolify/wiki/Configuration#dynamic_shortcuts\" target=\"_blank\" rel=\"noopener noreferrer\">rolify - configuration</a> @ Github Wiki</li><li><a href=\"https://github.com/RolifyCommunity/rolify\" target=\"_blank\" rel=\"noopener noreferrer\">rolify</a> @ Github</li></ul></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"設定\">設定<a href=\"#設定\" class=\"hash-link\" aria-label=\"設定的直接連結\" title=\"設定的直接連結\">​</a></h2><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails g rolify Role User</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails db:migrate</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>若使用的 id 是 uuid，則在 migrate 檔中記得要作對應的修改：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># db/migrate/20180619081033_rolify_create_roles.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class RolifyCreateRoles &lt; ActiveRecord::Migration[5.2]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def change</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table :roles, id: :uuid do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.string :name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.references :resource, :polymorphic =&gt; true, type: :uuid</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.timestamps</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    create_table(:users_roles, :id =&gt; false) do |t|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.references :user, type: :uuid</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      t.references :role, type: :uuid</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    add_index(:roles, [ :name, :resource_type, :resource_id ])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    add_index(:users_roles, [ :user_id, :role_id ])</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"如果角色需要-scope-在某個-model-底下\">如果角色需要 scope 在某個 model 底下<a href=\"#如果角色需要-scope-在某個-model-底下\" class=\"hash-link\" aria-label=\"如果角色需要 scope 在某個 model 底下的直接連結\" title=\"如果角色需要 scope 在某個 model 底下的直接連結\">​</a></h3><p>假設 Event 底下會有許多不同的 roles：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/models/event.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Event &lt; ActiveRecord::Base</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  resourcify</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"新增刪除角色\">新增刪除角色<a href=\"#新增刪除角色\" class=\"hash-link\" aria-label=\"新增刪除角色的直接連結\" title=\"新增刪除角色的直接連結\">​</a></h2><p>新增角色（role）的時候， 角色可以被定義在 <strong>Global, Class 或 Instance</strong> 這幾個不同層級：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># define GLOBAL role</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.add_role :admin</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># define a role scope for specific CLASS resource</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.add_role :admin, Organization</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># define a role scope for specific INSTANCE resource</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.add_role :organization_manager, Organization.first</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># remove a role    刪除的時候可以不用指定 instance</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.remove_role :moderator</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"角色查詢\">角色查詢<a href=\"#角色查詢\" class=\"hash-link\" aria-label=\"角色查詢的直接連結\" title=\"角色查詢的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"instance-method\">instance method<a href=\"#instance-method\" class=\"hash-link\" aria-label=\"instance method的直接連結\" title=\"instance method的直接連結\">​</a></h3><p>回傳 true 或 false：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.has_role? :admin            # 如果當初角色是定義在 Global</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.has_role? :admin, Organization      # 如果當初角色是定義在 Class</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.has_role? :admin, Organization.first # 如果當初角色是定義在 Instance</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.has_role? :admin, :any          # 不管當初角色定義在哪一個 scope</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.roles_name.include? &#x27;admin&#x27;      # 不管當初角色定義在哪一個 scope，效能可能較好</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># user.has_all_roles?  是否具有所有列出的角色</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.has_all_roles? :admin, {name: :event_member, resource: event}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># user.has_any_role?  是否具有所列的其中一種角色</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.has_any_role? (:admin, {name: :event_member, resource: event})</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># user.only_has_role?  是否只具有這個角色</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.only_has_role? :admin</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>❗ 如果當初角色定義在 instance 層級，那麼用 global 的查詢方式回查不到，但用 <code>:any</code> 則可以查到。",
      "❗ 如果當初角色定義在 global 層級，那麼用 instance 的方式也查得到。</p></blockquote><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># instance method for role (user)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.roles          # 列出該使用者所有的 roles，[ActiveRecord, ActiveRecord]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">user.roles_name          # 以陣列顯示使用者的所有角色名稱，[&quot;admin&quot;, &quot;event_member&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># instance method for resource</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">organization.roles      # 列出 organization instance 中所有的 roles</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">organization.applied_roles  # 列出 organization instance 和 Organization Class 的所有角色</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"class-method\">class method<a href=\"#class-method\" class=\"hash-link\" aria-label=\"class method的直接連結\" title=\"class method的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Class method for role (user)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.with_role(:admin, :any)          # 不論 :admin 在哪一層級</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.with_any_role(:reviewer, :admin)    # 列出所有具有 :admin 或 :reviewer 角色的 users</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.with_all_roles(:site_admin, :admin) # 列出同時具有 :site_admin 和 :admin 的 User</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Class method for resource</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">##</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 列出具有 admin 角色的所有 organization instances</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Organization.with_role(:admin)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 列出不具有 admin 角色的所有 organization instances</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Organization.without_role(:admin)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 列出所有具有 admin 角色的 organization instances 而且是屬於 current_user 的</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Organization.with_role(:admin, current_user)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 列出所有具有 admin 或 user 角色的 organization instances，而且是屬於 current_user 的</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Organization.with_roles([:admin, :user], current_user)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 回傳帶有 Role::ActiveRecord 的陣列，[Role::ActiveRecord, Role::ActiveRecord]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 列出 Organization 中的所有 roles</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Organization.find_roles</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 列出 Organization 中具有 :admin 角色的所有 roles</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Organization.find_roles(:admin)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 列出 Organization 中具有 :admin 角色的所有 roles，且是屬於 current_user 的</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Organization.find_roles(:admin, current_user)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"rolify-提供的-callback\">rolify 提供的 callback<a href=\"#rolify-提供的-callback\" class=\"hash-link\" aria-label=\"rolify 提供的 callback的直接連結\" title=\"rolify 提供的 callback的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">before_add</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">after_add</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">before_remove</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">after_remove</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] routes 的使用 pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] routes 的使用 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] routes 的使用</h1></header><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># method in block</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">namespace</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># verb options</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">to: &lt;String || Function&gt;           # controller#action, redirect</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">controllers: &lt;String&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">as: &lt;String&gt;                       # prefix</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">path: &lt;String&gt;                     # uri</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">on: &lt;Symbol&gt;                       # :collection | :member</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">path_names: &lt;Hash&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># special verb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">resources &lt;:table_names&gt;, &lt;:table_names&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">resource &lt;:table_name&gt;, &lt;:table_name&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">root: &lt;String&gt;          # controller#action</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># resource options</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">shallow: &lt;Boolean&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">param: &lt;Symbol&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">only: [:action, :action]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">except: [:action, :action]</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>routes 的檔案位置在 <code>config/routes.rb</code>。</p>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Rails with Stimulus 起手式 pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Rails with Stimulus 起手式 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Rails with Stimulus 起手式</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"確認-ruby-環境與-rails-版本\">確認 Ruby 環境與 Rails 版本<a href=\"#確認-ruby-環境與-rails-版本\" class=\"hash-link\" aria-label=\"確認 Ruby 環境與 Rails 版本的直接連結\" title=\"確認 Ruby 環境與 Rails 版本的直接連結\">​</a></h2><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 建立並確定 Ruby 版本</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rvm list known      </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 找出最新版本的 Ruby</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rvm </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">install</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.5</span><span class=\"token plain\">      </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 安裝特定版本的 Ruby</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rvm --default use </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2.5</span><span class=\"token plain\">     </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 使用特定版本的 Ruby 並設為預設值</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 確認 RubyGems 版本和套件版本</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ gem update --system         </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 若版本不夠新，則升級 RubyGems 的版本（不是 gems）</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ gem list </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">|</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">grep</span><span class=\"token plain\"> rails        </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 確認當前 Rails 版本</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ gem update rails            </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 若版本不夠新，則將 Rails 更新至最新版</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立-rails--stimulus-專案\">建立 Rails + Stimulus 專案<a href=\"#建立-rails--stimulus-專案\" class=\"hash-link\" aria-label=\"建立 Rails + Stimulus 專案的直接連結\" title=\"建立 Rails + Stimulus 專案的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立專案\">建立專案<a href=\"#建立專案\" class=\"hash-link\" aria-label=\"建立專案的直接連結\" title=\"建立專案的直接連結\">​</a></h3><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 建立 Rails + Stimulus 專案</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails new </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&lt;</span><span class=\"token plain\">project_name</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&gt;</span><span class=\"token plain\"> --webpack</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\">stimulus --database</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\">postgresql --skip-coffee --skip-test</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token builtin class-name\" style=\"color:rgb(255, 203, 107)\">cd</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&lt;</span><span class=\"token plain\">project_name</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails db:migrate</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"測試使用-stimulus\">測試使用 Stimulus<a href=\"#測試使用-stimulus\" class=\"hash-link\" aria-label=\"測試使用 Stimulus的直接連結\" title=\"測試使用 Stimulus的直接連結\">​</a></h3><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># 測試 Rails + Stimulus 能否使用</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails g controller pages index    </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># http://localhost:3000/pages/index</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>將 <code>javascript/packs/application.js</code> 掛入 layout 中：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- app/views/layouts/application.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!DOCTYPE html&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;html&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;head&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  ...</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= javascript_pack_tag &#x27;application&#x27; %&gt; &lt;!-- 將 webpack entry 掛入 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  ...</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/head&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;body&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= yield %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/body&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/html&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>把內建的範例複製到 <code>app/views/pages/index</code>：</p><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">&lt;!-- app/views/pages/index.html.erb --&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">div</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">data-controller</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">hello</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">h1</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">data-target</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">hello.output</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">h1</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">div</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>若於頁面上看到 <strong>Hello, Stimulus!!</strong> 即表示已完成 Stimulus 安裝。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"設定-css-檔\">設定 CSS 檔<a href=\"#設定-css-檔\" class=\"hash-link\" aria-label=\"設定 CSS 檔的直接連結\" title=\"設定 CSS 檔的直接連結\">​</a></h2><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># Using webpacker for stylesheets</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">mkdir</span><span class=\"token plain\"> app/javascript/stylesheets</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">touch</span><span class=\"token plain\"> app/javascript/stylesheets/application.scss</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">touch</span><span class=\"token plain\"> app/javascript/stylesheets/_variables.scss</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>Import CSS file in <code>app/javascript/pack/application.js</code> ：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// layout file, like app/views/layouts/application.html.erb</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"font-style:italic\">import</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;stylesheets/application&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>Import CSS file by <code>stylesheet_pack_tag</code> in <code>app/views/layout/application.html.erb</code> :</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- app/views/layouts/application.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!DOCTYPE html&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;html&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;head&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  ...</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= javascript_pack_tag &#x27;application&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= stylesheet_pack_tag &#x27;application&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   ...</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/head&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/html&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>現在你可以在開始撰寫 CSS 了：</p><div class=\"language-scss codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-scss codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// app/javascript/stylesheets/application.scss</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">@import</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;variables&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-scss codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-scss codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// app/javascript/stylesheets/_variables.scss</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token property variable\" style=\"color:rgb(191, 199, 213)\">$colors</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">major</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token hexcode color\">#00d252</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">minor</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token hexcode color\">#2f3b59</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"安裝-bootstrap\">安裝 Bootstrap<a href=\"#安裝-bootstrap\" class=\"hash-link\" aria-label=\"安裝 Bootstrap的直接連結\" title=\"安裝 Bootstrap的直接連結\">​</a></h2><div class=\"language-Bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-Bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># https://getbootstrap.com/docs/4.1/getting-started/webpack/</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ yarn add jquery popper.js bootstrap</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"appjavascriptstylesheetsapplicationscss\">app/javascript/stylesheets/application.scss<a href=\"#appjavascriptstylesheetsapplicationscss\" class=\"hash-link\" aria-label=\"app/javascript/stylesheets/application.scss的直接連結\" title=\"app/javascript/stylesheets/application.scss的直接連結\">​</a></h4><div class=\"language-scss codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-scss codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// app/javascript/stylesheets/application.scss</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">@import</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;~bootstrap/scss/bootstrap&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">...</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"appjavascriptpackapplicationjs\">app/javascript/pack/application.js<a href=\"#appjavascriptpackapplicationjs\" class=\"hash-link\" aria-label=\"app/javascript/pack/application.js的直接連結\" title=\"app/javascript/pack/application.js的直接連結\">​</a></h4><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// app/javascript/pack/application.js</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"font-style:italic\">import</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;bootstrap&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token spread operator\" style=\"color:rgb(137, 221, 255)\">...</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>Add configuration to <strong>config/webpack/environment.js</strong></p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// config/webpack/environment.js</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"> environment </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">require</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;@rails/webpacker&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> webpack </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">require</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;webpack&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">/**</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"> * Automatically load modules instead of having to import or require them everywhere.</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"> * Support by webpack. To get more information:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"> *</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"> * https://webpack.js.org/plugins/provide-plugin/</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"> * http://j.mp/2JzG1Dm</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"> */</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">environment</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">plugins</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">prepend</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Provide&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">new</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">webpack</span><span class=\"token class-name punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">ProvidePlugin</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token literal-property property\">$</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;jquery&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token literal-property property\">jQuery</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;jquery&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token literal-property property\">jquery</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;jquery&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token string-property property\">&#x27;window.jQuery&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;jquery&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token literal-property property\">Popper</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;popper.js&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;default&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">module</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">exports</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> environment</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"測試-bootstrap-的使用\">測試 Bootstrap 的使用<a href=\"#測試-bootstrap-的使用\" class=\"hash-link\" aria-label=\"測試 Bootstrap 的使用的直接連結\" title=\"測試 Bootstrap 的使用的直接連結\">​</a></h3><p>在 <code>app/views/pages/index.html.erb</code> 中使用 Bootstrap 模板：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- app/views/pages/index.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;h1&gt;Pages#index&lt;/h1&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;p&gt;Find me in app/views/pages/index.html.erb&lt;/p&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;div data-controller=&quot;hello&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;h1 data-target=&quot;hello.output&quot;&gt;&lt;/h1&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;alert alert-primary&quot; role=&quot;alert&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    This is a primary alert—check it out!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;alert alert-secondary&quot; role=&quot;alert&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    This is a secondary alert—check it out!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;button type=&quot;button&quot; class=&quot;btn btn-secondary&quot; data-toggle=&quot;tooltip&quot; data-placement=&quot;top&quot; title=&quot;Tooltip on top&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    Tooltip on top</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/button&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/div&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>此時因為 jQuery 並沒有載入到全域，因此要在 <code>app/javascript/</code> 內才可以使用 jQuery：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// app/javascript/packs/application.js</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"font-style:italic\">import</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;bootstrap&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"font-style:italic\">import</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;stylesheets/application&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"font-style:italic\">import</span><span class=\"token plain\"> </span><span class=\"token imports punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token imports\"> </span><span class=\"token imports maybe-class-name\">Application</span><span class=\"token imports\"> </span><span class=\"token imports punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"> </span><span class=\"token keyword module\" style=\"font-style:italic\">from</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;stimulus&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"font-style:italic\">import</span><span class=\"token plain\"> </span><span class=\"token imports punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token imports\"> definitionsFromContext </span><span class=\"token imports punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"> </span><span class=\"token keyword module\" style=\"font-style:italic\">from</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;stimulus/webpack-helpers&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> application </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token maybe-class-name\">Application</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">start</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> context </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> require</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">context</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;controllers&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(255, 88, 116)\">true</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token regex regex-delimiter\">/</span><span class=\"token regex regex-source language-regex\">.js$</span><span class=\"token regex regex-delimiter\">/</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">application</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">load</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">definitionsFromContext</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">context</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">$</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">$</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;[data-toggle=&quot;tooltip&quot;]&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">tooltip</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>若有看到 Bootstrap alert 樣式，另外 tooltip 能夠使用的話，即表示正常運作。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他\">其他<a href=\"#其他\" class=\"hash-link\" aria-label=\"其他的直接連結\" title=\"其他的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"將-jquery-載入到全域\">將 jQuery 載入到全域<a href=\"#將-jquery-載入到全域\" class=\"hash-link\" aria-label=\"將 jQuery 載入到全域的直接連結\" title=\"將 jQuery 載入到全域的直接連結\">​</a></h3><p>在上面的範例中，並沒有將 jQuery 載入到全域，若有需要在全域的環境下使用 jQuery（例如在 template 中透過 <code>&lt;script&gt;</code> 使用），則需要：</p><div class=\"language-Bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-Bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># https://webpack.js.org/loaders/expose-loader/</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ yarn add expose-loader -D</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>Add configuration to <strong>config/webpack/environment.js</strong>：</p><div class=\"language-javascript codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-javascript codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// config/webpack/environment.js</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">environment</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">loaders</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">append</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;expose&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">test</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> require</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">resolve</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;jquery&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token literal-property property\">use</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token literal-property property\">loader</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;expose-loader&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token literal-property property\">options</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;$&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如此將可以在全域（window）底下使用到 jQuery。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"more-example-clipboard_controllerjs\">More example: clipboard_controller.js<a href=\"#more-example-clipboard_controllerjs\" class=\"hash-link\" aria-label=\"More example: clipboard_controller.js的直接連結\" title=\"More example: clipboard_controller.js的直接連結\">​</a></h3><div class=\"language-Bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-Bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ touch app/javascript/controllers/clipboard_controller.js</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>Provide an example of clipboard controller in <strong>app/views/pages/index.html.erb</strong>：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- app/views/pages/index.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;div data-controller=&quot;clipboard&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  PIN:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;input type=&quot;text&quot; value=&quot;1234&quot; data-target=&quot;clipboard.source&quot; readonly&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;button data-action=&quot;click-&gt;clipboard#copy&quot; class=&quot;clipboard-button&quot;&gt;Copy to Clipboard&lt;/button&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/div&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>Add <strong>app/javascript/controllers/clipboard_controller.js</strong></p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// app/javascript/controllers/clipboard_controller.js</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"font-style:italic\">import</span><span class=\"token plain\"> </span><span class=\"token imports punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token imports\"> </span><span class=\"token imports maybe-class-name\">Controller</span><span class=\"token imports\"> </span><span class=\"token imports punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"> </span><span class=\"token keyword module\" style=\"font-style:italic\">from</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;stimulus&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"font-style:italic\">export</span><span class=\"token plain\"> </span><span class=\"token keyword module\" style=\"font-style:italic\">default</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">extends</span><span class=\"token plain\"> </span><span class=\"token maybe-class-name\">Controller</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">static</span><span class=\"token plain\"> targets </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;source&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">connect</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword control-flow\" style=\"font-style:italic\">if</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token dom variable\" style=\"color:rgb(191, 199, 213)\">document</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">queryCommandSupported</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;copy&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token console class-name\" style=\"color:rgb(255, 203, 107)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;clipboard-supported&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token keyword\" style=\"font-style:italic\">this</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">element</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">classList</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">add</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;clipboard--supported&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">copy</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">this</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">sourceTarget</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">select</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token dom variable\" style=\"color:rgb(191, 199, 213)\">document</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">execCommand</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;copy&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token console class-name\" style=\"color:rgb(255, 203, 107)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token template-string string\" style=\"color:rgb(195, 232, 141)\">text &quot;</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">${</span><span class=\"token template-string interpolation keyword\" style=\"font-style:italic\">this</span><span class=\"token template-string interpolation punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token template-string interpolation property-access\">sourceTarget</span><span class=\"token template-string interpolation punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token template-string interpolation property-access\">value</span><span class=\"token template-string interpolation interpolation-punctuation punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token template-string string\" style=\"color:rgb(195, 232, 141)\">&quot; has been copied into your clipboard</span><span class=\"token template-string template-punctuation string\" style=\"color:rgb(195, 232, 141)\">`</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"讓透過-generator-產生的-model-有預設內容\">讓透過 generator 產生的 Model 有預設內容<a href=\"#讓透過-generator-產生的-model-有預設內容\" class=\"hash-link\" aria-label=\"讓透過 generator 產生的 Model 有預設內容的直接連結\" title=\"讓透過 generator 產生的 Model 有預設內容的直接連結\">​</a></h3><div class=\"language-bash codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-bash codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">mkdir</span><span class=\"token plain\"> -p lib/templates/active_record/model</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">touch</span><span class=\"token plain\"> lib/templates/active_record/model/model.rb</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p><code>lib/templates/active_record/model/model.rb</code>:</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- lib/templates/active_record/model/model.rb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% module_namespacing do -%&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class &lt;%= class_name %&gt; &lt; &lt;%= parent_class_name.classify %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # scope macros</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # Concerns macros</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # Constants</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # Attributes related macros</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% if attributes.any?(&amp;:password_digest?) -%&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  has_secure_password</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end -%&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # association macros</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% attributes.select(&amp;:reference?).each do |attribute| -%&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  belongs_to :&lt;%= attribute.name %&gt;&lt;%= &#x27;, polymorphic: true&#x27; if attribute.polymorphic? %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end -%&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # validation macros</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # callbacks</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # other</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  private</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # callback methods</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end -%&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"資料來源\">資料來源<a href=\"#資料來源\" class=\"hash-link\" aria-label=\"資料來源的直接連結\" title=\"資料來源的直接連結\">​</a></h2><ul><li><a href=\"https://gist.github.com/andyyou/834e82f5723fec9d2dc021fb7b819517\" target=\"_blank\" rel=\"noopener noreferrer\">Rails 5.2 with webpacker, bootstrap, stimulus starter</a> @ Andyyou</li><li><a href=\"https://www.gitbook.com/book/andyyou/stimulusjs\" target=\"_blank\" rel=\"noopener noreferrer\">Stimulus 手冊 - 繁體中文版</a> @ Andyyou</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] 時間相關函式（Time） pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] 時間相關函式（Time） pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] 時間相關函式（Time）</h1></header><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-time-date-datetime\">keywords: <code>time</code>, <code>date</code>, <code>datetime</code><a href=\"#keywords-time-date-datetime\" class=\"hash-link\" aria-label=\"keywords-time-date-datetime的直接連結\" title=\"keywords-time-date-datetime的直接連結\">​</a></h6><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"ruby\">Ruby<a href=\"#ruby\" class=\"hash-link\" aria-label=\"Ruby的直接連結\" title=\"Ruby的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.now                              # =&gt; 2017-10-04 20:48:52 +0800</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.now.strftime(&#x27;%Y/%m/%d&#x27;)         # =&gt; &quot;2017/10/04&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.now.strftime(&#x27;%Y/%m/%d %T&#x27;)       # =&gt; &quot;2017/12/19 11:27:11&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.now.strftime(&#x27;%Y/%m/%d %R&#x27;)       # =&gt; &quot;2017/12/19 11:28&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.now.strftime(&#x27;%Y/%m/%d %I:%M %p&#x27;) # =&gt; &quot;2017/12/19 11:27 AM&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.now.strftime(&#x27;%F&#x27;)          # =&gt; &quot;2018-01-12&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.now.strftime(&#x27;%F %R&#x27;)         # =&gt; &quot;2018-01-15 17:18&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.now.strftime(&quot;%B %e, %Y at %I:%M %p&quot;)  # =&gt; &quot;March 23, 2013 at 09:48 AM&quot;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"rails\">Rails<a href=\"#rails\" class=\"hash-link\" aria-label=\"Rails的直接連結\" title=\"Rails的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 根據使用者機器的時區，忽略你設定的時區（不建議）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.now</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.now + 5.days                 # =&gt; 2017-10-09 20:47:07 +0800</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.now.beginning_of_day         # =&gt; 2017-10-04 00:00:00 +0800</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 根據在 config/application.rb 中所設定的時區（建議）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.zone.now                  # 使用設定的 Timezone</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.current            # 等同於 Time.zone.now</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">1.day.from_now            # 從現在往後推算一天</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">1.day.ago              # 從現在往前推算一天</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.current.utc.iso8601      # 將時間轉成 utc iso8601 傳送給 app</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.zone.parse(time_string)        # 解析時間，並轉成伺服器時區</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.zone.strptime(time_string, &#x27;%Y-%m-%dT%H:%M:%S%z&#x27;)  # 解析時間，並轉成伺服器時區</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"設定時區\">設定時區<a href=\"#設定時區\" class=\"hash-link\" aria-label=\"設定時區的直接連結\" title=\"設定時區的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># config/application.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">config.time_zone = &#x27;Taipei&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"取得時區\">取得時區<a href=\"#取得時區\" class=\"hash-link\" aria-label=\"取得時區的直接連結\" title=\"取得時區的直接連結\">​</a></h3><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rake time:zones:all      # 會列出所有時區</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"比較時間\">比較時間<a href=\"#比較時間\" class=\"hash-link\" aria-label=\"比較時間的直接連結\" title=\"比較時間的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">e.start_at &gt; Time.now    # false / true</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"查詢時間\">查詢時間<a href=\"#查詢時間\" class=\"hash-link\" aria-label=\"查詢時間的直接連結\" title=\"查詢時間的直接連結\">​</a></h3><div class=\"language-sql codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sql codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Post</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token keyword\" style=\"font-style:italic\">where</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;posts.published_at &gt; ?&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">Time</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token keyword\" style=\"font-style:italic\">current</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"傳送時間資訊\">傳送時間資訊<a href=\"#傳送時間資訊\" class=\"hash-link\" aria-label=\"傳送時間資訊的直接連結\" title=\"傳送時間資訊的直接連結\">​</a></h3><p>傳送時間資訊到客戶端（APP）時，記得使用 <code>utc.iso8601</code> 轉成 UTC 格式：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 伺服器傳送 utc iso8601 的時間格式給 APP</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">time_string = Time.current.utc.iso8601    # &quot;2018-08-14T07:09:41Z&quot;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>接收由客戶端傳來的時間資訊：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># APP 傳送 utc iso8601 的時間格式給伺服器，並轉換成伺服器時區</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.zone.parse(time_string)        # Mon, 13 Aug 2018 23:09:41 AKDT -08:00</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.zone.strptime(time_string, &#x27;%Y-%m-%dT%H:%M:%S%z&#x27;)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 如果只是使用 Time.parse 不會轉成正確的時區，而是保留為 UTC</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Time.parse(time_string)            # 2018-08-14 07:09:41 UTC</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"https://hackhands.com/format-datetime-ruby/\" target=\"_blank\" rel=\"noopener noreferrer\">Format Datetime in Ruby</a></li><li><a href=\"http://stevenyue.com/blogs/date-time-datetime-in-ruby-and-rails/\" target=\"_blank\" rel=\"noopener noreferrer\">Date, Time, DateTime in Ruby and Rails</a> @ Steven Yue</li><li><a href=\"https://ruby-doc.org/core-2.4.1/Time.html\" target=\"_blank\" rel=\"noopener noreferrer\">Time</a> @ Ruby-doc</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] 小技巧 Rails Tips pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] 小技巧 Rails Tips pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] 小技巧 Rails Tips</h1></header><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-helper\">keywords: <code>helper</code><a href=\"#keywords-helper\" class=\"hash-link\" aria-label=\"keywords-helper的直接連結\" title=\"keywords-helper的直接連結\">​</a></h6><p>[TOC]</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"常用\">常用<a href=\"#常用\" class=\"hash-link\" aria-label=\"常用的直接連結\" title=\"常用的直接連結\">​</a></h2><ul><li>[判斷內容是空或有]<!-- -->(<!-- -->[Rails]<!-- --> 判斷內容是空或有.md)</li><li>[判斷物件有哪些方法？上一層是誰？屬於哪個型態]<!-- -->(<!-- -->[Rails]<!-- --> 判斷物件有哪些方法？上一層是誰？屬於哪個型態.md)</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他\">其他<a href=\"#其他\" class=\"hash-link\" aria-label=\"其他的直接連結\" title=\"其他的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"清除-rails-內的快取cache\">清除 Rails 內的快取（Cache）<a href=\"#清除-rails-內的快取cache\" class=\"hash-link\" aria-label=\"清除 Rails 內的快取（Cache）的直接連結\" title=\"清除 Rails 內的快取（Cache）的直接連結\">​</a></h3><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 必要時需要手動 rm -rf 刪除</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails log:clear</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rake tmp:clear</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rm -rf tmp/cache tmp/data tmp/miniprofiler</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"檢視-secret--credentials-檔案\">檢視 secret / credentials 檔案<a href=\"#檢視-secret--credentials-檔案\" class=\"hash-link\" aria-label=\"檢視 secret / credentials 檔案的直接連結\" title=\"檢視 secret / credentials 檔案的直接連結\">​</a></h3><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ EDITOR=&quot;sublime -w&quot; rails credentials:edit</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ EDITOR=vim rails credentials:edit</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"scss-載入圖片\">SCSS 載入圖片<a href=\"#scss-載入圖片\" class=\"hash-link\" aria-label=\"SCSS 載入圖片的直接連結\" title=\"SCSS 載入圖片的直接連結\">​</a></h4><p>在 SCSS 中使用圖片 url 時，需使用 <code>image-url</code> 這個 helper，否則開發環境看得到，但到 production mode 就會炸掉：</p><div class=\"language-scss codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-scss codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token selector\" style=\"color:rgb(199, 146, 234)\">.banner </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token property\">background</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token url\" style=\"color:rgb(221, 221, 221)\">image-url</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;banner.png&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> center center no-repeat</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"https://stackoverflow.com/questions/15257555/how-to-reference-images-in-css-within-rails-4\" target=\"_blank\" rel=\"noopener noreferrer\">How to reference images in CSS within Rails 4</a> @ StackOverflow</p></blockquote><p>如果是在 Webpacker 中要用圖片，則是要使用 <code>asset-image()</code> 這個 helper：</p><div class=\"language-scss codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-scss codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 圖片路徑 app/assets/images/event-header-bg.png</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token property\">background-image</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">asset-image</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;event-header-bg&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"自訂錯誤訊息樣式customize-field-error\">自訂錯誤訊息樣式（Customize Field Error）<a href=\"#自訂錯誤訊息樣式customize-field-error\" class=\"hash-link\" aria-label=\"自訂錯誤訊息樣式（Customize Field Error）的直接連結\" title=\"自訂錯誤訊息樣式（Customize Field Error）的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./config/environment.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">ActionView::Base.field_error_proc = Proc.new do |html_tag, instance|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  html_tag.html_safe</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"https://rubyplus.com/articles/3401-Customize-Field-Error-in-Rails-5\" target=\"_blank\" rel=\"noopener noreferrer\">Customize Field Error in Rails 5</a> @ Ruby Plus</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"methods\">Methods<a href=\"#methods\" class=\"hash-link\" aria-label=\"Methods的直接連結\" title=\"Methods的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"陣列array\">陣列（Array）<a href=\"#陣列array\" class=\"hash-link\" aria-label=\"陣列（Array）的直接連結\" title=\"陣列（Array）的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"元素分群\">元素分群<a href=\"#元素分群\" class=\"hash-link\" aria-label=\"元素分群的直接連結\" title=\"元素分群的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 把 @products 這個大陣列以 3 個為一組拆成小陣列，不足的用 false 填補</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Array.in_groups_of(3, false){|group|}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"取得陣列元素數目\">取得陣列元素數目<a href=\"#取得陣列元素數目\" class=\"hash-link\" aria-label=\"取得陣列元素數目的直接連結\" title=\"取得陣列元素數目的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 取得陣列元素數目建議使用 size 效能較好（替代掉 count 或 length）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">Order.all.size</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"產生-secure-token\">產生 Secure Token<a href=\"#產生-secure-token\" class=\"hash-link\" aria-label=\"產生 Secure Token的直接連結\" title=\"產生 Secure Token的直接連結\">​</a></h3><p>在建立某欄位的時候自動產生 Token：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/models/event.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class Event &lt; ApplicationRecord</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  validates_uniqueness_of :authentication_token</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  before_create :generate_unique_secure_token</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  private</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def generate_unique_secure_token</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      # return if self.authentication_token.present?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      loop do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        token = SecureRandom.base58(24)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        self.authentication_token = token</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        break token unless Event.find_by(authentication_token: token)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>驗證該 token 是否符合格式：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/controllers/api_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def token_format_valid?(authentication_token)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  base58_alphabet = (&quot;0&quot;..&quot;9&quot;).to_a + (&quot;A&quot;..&quot;Z&quot;).to_a + (&quot;a&quot;..&quot;z&quot;).to_a - [&quot;0&quot;, &quot;O&quot;, &quot;I&quot;, &quot;l&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  (authentication_token.split(&#x27;&#x27;) - base58_alphabet).blank? &amp;&amp; authentication_token.size == 24</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"view-helper\">View Helper<a href=\"#view-helper\" class=\"hash-link\" aria-label=\"View Helper的直接連結\" title=\"View Helper的直接連結\">​</a></h2><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 刪減多於字數 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= truncate(&quot;Once upon a time in a world far far away&quot;, length: 17) %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 檢驗路由是否為 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% current_page?(controller: &#x27;shop&#x27;, action: &#x27;checkout&#x27;, order: &#x27;desc&#x27;, page: &#x27;2&#x27;) %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% current_page?(&#x27;/shop/checkout&#x27;) %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html\" target=\"_blank\" rel=\"noopener noreferrer\">ActionView URL Helpers</a> @ RailsAPI</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"常用變數\">常用變數<a href=\"#常用變數\" class=\"hash-link\" aria-label=\"常用變數的直接連結\" title=\"常用變數的直接連結\">​</a></h3><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- in erb file --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= root_url %&gt;         &lt;!-- 取得根網址 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= controller_name %&gt;     &lt;!-- 取得 controller 名稱 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= action_name %&gt;       &lt;!-- 取得 action 的名稱 --&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"動態-i18n\">動態 i18n<a href=\"#動態-i18n\" class=\"hash-link\" aria-label=\"動態 i18n的直接連結\" title=\"動態 i18n的直接連結\">​</a></h3><div class=\"language-yaml codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-yaml codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"># zh-TW.yaml</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token key atrule\">form</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token key atrule\">en</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 英文</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token key atrule\">zh-TW</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> 中文</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 直接使用 t(&quot;form.#{...}&quot;) 即可動態使用 i18n</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% I18n.available_locales.each do |locale| %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;%= t(&quot;form.#{locale}&quot;) %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"避免-html-encode\">避免 HTML Encode<a href=\"#避免-html-encode\" class=\"hash-link\" aria-label=\"避免 HTML Encode的直接連結\" title=\"避免 HTML Encode的直接連結\">​</a></h3><div class=\"language-Erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-Erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= raw(data) %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= string.html_safe %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"如果有傳入-local_variable-才使用該變數\">如果有傳入 local_variable 才使用該變數<a href=\"#如果有傳入-local_variable-才使用該變數\" class=\"hash-link\" aria-label=\"如果有傳入 local_variable 才使用該變數的直接連結\" title=\"如果有傳入 local_variable 才使用該變數的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-local_assigns\">keywords: <code>local_assigns</code><a href=\"#keywords-local_assigns\" class=\"hash-link\" aria-label=\"keywords-local_assigns的直接連結\" title=\"keywords-local_assigns的直接連結\">​</a></h5><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- Without default value --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% if local_assigns.has_key? :headline %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  Headline: &lt;%= headline %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- With default value --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% some_local = default_value if local_assigns[:some_local].nil? %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"https://stackoverflow.com/questions/2060561/optional-local-variables-in-rails-partial-templates-how-do-i-get-out-of-the-de\" target=\"_blank\" rel=\"noopener noreferrer\">Optional local variables in rails partial templates</a> @ StackOverflow</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-content_tag-自定義元素\">使用 content_tag 自定義元素<a href=\"#使用-content_tag-自定義元素\" class=\"hash-link\" aria-label=\"使用 content_tag 自定義元素的直接連結\" title=\"使用 content_tag 自定義元素的直接連結\">​</a></h3><p>在 <code>do...end</code> block 中如果希望有 <code>if</code> 判斷，可以在 <code>end</code> 後面使用 <code>if</code></p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= content_tag :p, &#x27;Hello&#x27;, class: &#x27;mb-1&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 使用 do end block --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= content_tag :p, class: &#x27;mb-1&#x27; do %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;i class=&quot;fas fa-fw fa-globe&quot;&gt;&lt;/i&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;%= link_to &#x27;Website&#x27;, @event.website, class: &#x27;pl-2&#x27;, target: :_blank %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end if @event.website.present? %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-radio-和-label\">使用 radio 和 label<a href=\"#使用-radio-和-label\" class=\"hash-link\" aria-label=\"使用 radio 和 label的直接連結\" title=\"使用 radio 和 label的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-fradio_button-label_tag\">keywords: <code>f.radio_button</code>, <code>label_tag</code><a href=\"#keywords-fradio_button-label_tag\" class=\"hash-link\" aria-label=\"keywords-fradio_button-label_tag的直接連結\" title=\"keywords-fradio_button-label_tag的直接連結\">​</a></h5><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;div class=&quot;form-group&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;label&gt;Gender&lt;/label&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;w-100&quot;&gt;&lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;custom-control custom-radio custom-control-inline&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= f.radio_button :gender, &#x27;male&#x27;, checked: @personal_info.gender == &#x27;male&#x27;, class: &#x27;custom-control-input&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= label_tag &#x27;personal_info_gender_male&#x27;, &#x27;Male&#x27;, class: &#x27;custom-control-label&#x27; %&gt;    &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;custom-control custom-radio custom-control-inline&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= f.radio_button :gender, &#x27;female&#x27;, checked: @personal_info.gender == &#x27;female&#x27;, class: &#x27;custom-control-input&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= label_tag &#x27;personal_info_gender_female&#x27;, &#x27;Female&#x27;, class: &#x27;custom-control-label&#x27; %&gt;    &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/div&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"選擇國家的下拉選單select\">選擇國家的下拉選單（select）<a href=\"#選擇國家的下拉選單select\" class=\"hash-link\" aria-label=\"選擇國家的下拉選單（select）的直接連結\" title=\"選擇國家的下拉選單（select）的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/helpers/common_helper.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def country_options(selected = nil, options = nil, locale = I18n.locale)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  options =</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    if options.blank?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      ISO3166::Country.translations(locale).sort.to_h.invert.entries</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    else</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      ISO3166::Country.translations(locale).select{ |k, v| options.include?(k) }.sort.to_h.invert.entries</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  options_for_select(options, selected)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- _form.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;div class=&quot;form-group&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;%= f.label :country, class: &#x27;col-form-label fz-13  text-muted&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;%= f.select(:country, country_options(event.country), { prompt: &#x27;- 請選擇 -&#x27; }, { class: &#x27;custom-select&#x27; }) %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;div class=&quot;invalid-feedback feedback-icon&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;i class=&quot;fas fa-exclamation-triangle&quot;&gt;&lt;/i&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/div&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"在-partial--template-中使用-yield-和-content_for\">在 partial / template 中使用 yield 和 content_for<a href=\"#在-partial--template-中使用-yield-和-content_for\" class=\"hash-link\" aria-label=\"在 partial / template 中使用 yield 和 content_for的直接連結\" title=\"在 partial / template 中使用 yield 和 content_for的直接連結\">​</a></h3><p>這是 partial / template，在這裡面的 <code>&lt;%= yield %&gt;</code> 一定要寫在其他有名稱的 <code>&lt;%= yield :foo %&gt;</code> 之前，才能把要 render 它的樣板的內容帶進來：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%# ./app/views/shared/_navbar.html.erb %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;!-- 沒有名稱的 yield 一定要寫在最前面 --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;%= yield %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;ul class=&quot;left&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= yield :before_left_nav %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;li&gt;Some items ...&lt;/li&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= yield :after_left_nav %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/ul&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;ul class=&quot;right&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= yield :before_right_nav %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;li&gt;Some items ...&lt;/li&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= yield :after_right_nav %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/ul&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/div&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>這是要 render 上面這個 partial 的樣板，在 <code>render</code> 後 <code>do ... end</code> 中的所有內容都會帶入到 <code>_navbar.html.erb</code> 裡面的 <code>&lt;%= yield %&gt;</code> 裡面，在從中看要對應到哪個有名稱的 <code>yield</code>：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%# ./app/views/pages/tester.html.erb %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= render &#x27;shared/navbar&#x27;, navbar_class: &#x27;navbar-darker-background&#x27; do %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;% content_for :before_left_nav do %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;li class=&quot;nav-item&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      &lt;%= link_to &#x27;Before&#x27;, products_path, class: &quot;nav-link #{&#x27;active&#x27; if action_name == &#x27;products&#x27;}&quot; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;/li&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;% end %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;% content_for :after_left_nav do %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%# ... %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;% end %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;% content_for :before_right_nav do %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%# ... %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;% end %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;% content_for :after_right_nav do %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%# ... %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;% end %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"controller\">Controller<a href=\"#controller\" class=\"hash-link\" aria-label=\"Controller的直接連結\" title=\"Controller的直接連結\">​</a></h2><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"在-controller-轉譯某個-partial-view\">在 controller 轉譯某個 partial view<a href=\"#在-controller-轉譯某個-partial-view\" class=\"hash-link\" aria-label=\"在 controller 轉譯某個 partial view的直接連結\" title=\"在 controller 轉譯某個 partial view的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># app/controllers/*_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 把轉譯出來的 html 塞到 innerHTML 這個變數</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">innerHTML = ApplicationController.renderer.render(partial: &#x27;projects/collects/issue_next&#x27;, locals: { app: @app, collect: @collect, issue: @issue, editable: true })</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立一個-controller-helper-讓所有-controller-都能用\">建立一個 controller helper 讓所有 controller 都能用<a href=\"#建立一個-controller-helper-讓所有-controller-都能用\" class=\"hash-link\" aria-label=\"建立一個 controller helper 讓所有 controller 都能用的直接連結\" title=\"建立一個 controller helper 讓所有 controller 都能用的直接連結\">​</a></h4><p>將要共用的 helper 寫在 <code>application_controller.rb</code> 中：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/controllers/application_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">class ApplicationController &lt; ActionController::Base</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # STEP 2：補上 helper_method</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  helper_method :current_cart</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  protected</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    # STEP 1： 將要共用的 method 寫在這</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    def current_cart</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      @current_cart ||= Cart.find_by!(user: current_user)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    rescue ActiveRecord::RecordNotFound</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      Cart.create(user: current_user)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-transaction\">使用 transaction<a href=\"#使用-transaction\" class=\"hash-link\" aria-label=\"使用 transaction的直接連結\" title=\"使用 transaction的直接連結\">​</a></h4><p>透過 <code>Model.transaction</code> 或 <code>@instance.transaction</code> 當 model 變更的過程中如果有任何錯誤發生，則這個變更會整個 rol back 回去。</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ShoppingMall/app/controllers/admin/orders_controller.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def shipped</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  if @order.may_mark_as_shipped?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    begin</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      Order.transaction do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        @order.mark_as_shipped!</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        redirect_to admin_orders_url, notice: &#x27;訂單狀態變更成功&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    rescue</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      redirect_to admin_orders_url, alert: &#x27;訂單狀態變更失敗&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  else</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    redirect_to admin_orders_url, alert: &#x27;訂單狀態錯誤&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"動態-hash-key-動態呼叫-methods移除空值\">動態 Hash key 、動態呼叫 methods、移除空值<a href=\"#動態-hash-key-動態呼叫-methods移除空值\" class=\"hash-link\" aria-label=\"動態 Hash key 、動態呼叫 methods、移除空值的直接連結\" title=\"動態 Hash key 、動態呼叫 methods、移除空值的直接連結\">​</a></h4><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-dynamic-hash-key-dynamic-invoke-methods-reject-empty-item\">keywords: <code>dynamic hash key,</code> <code>dynamic invoke methods</code>, <code>reject empty item</code><a href=\"#keywords-dynamic-hash-key-dynamic-invoke-methods-reject-empty-item\" class=\"hash-link\" aria-label=\"keywords-dynamic-hash-key-dynamic-invoke-methods-reject-empty-item的直接連結\" title=\"keywords-dynamic-hash-key-dynamic-invoke-methods-reject-empty-item的直接連結\">​</a></h5><ul><li>使用 <code>Hash[&lt;key&gt;, &lt;value&gt;]</code>，可以動態建立 Hash 的 Key</li><li>使用 <code>project.send(&lt;method&gt;)</code> 可以動態的呼叫 project 的方法</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">available_medias = [&quot;website&quot;, &quot;facebook&quot;, &quot;twitter&quot;, &quot;instagram&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">project_links = available_medias.map do |media|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  Hash[media, project[:&quot;#{media}&quot;]] if project[:&quot;#{media}&quot;]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end.reject(&amp;:blank?)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"一次取出所有-id-的值ids\">一次取出所有 id 的值（ids）<a href=\"#一次取出所有-id-的值ids\" class=\"hash-link\" aria-label=\"一次取出所有 id 的值（ids）的直接連結\" title=\"一次取出所有 id 的值（ids）的直接連結\">​</a></h4><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">User.all.ids      # 回傳陣列，可以取得所有 User 的 id</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"models\">Models<a href=\"#models\" class=\"hash-link\" aria-label=\"Models的直接連結\" title=\"Models的直接連結\">​</a></h2><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-params\">使用 params<a href=\"#使用-params\" class=\"hash-link\" aria-label=\"使用 params的直接連結\" title=\"使用 params的直接連結\">​</a></h4><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-fetch-dig\">keywords: <code>fetch</code>, <code>dig</code><a href=\"#keywords-fetch-dig\" class=\"hash-link\" aria-label=\"keywords-fetch-dig的直接連結\" title=\"keywords-fetch-dig的直接連結\">​</a></h5><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 一般取得 params 的方式</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">params[:product][:remove_photos_index]</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 如果有定義 params 的話</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">product_params</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">def product_params</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  params.fetch(:product, {}).permit(:name, :brief, :description)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # params.require(:product).permit(:name, :brief, :description)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 dig 取得 order 裡面的 promo_code 時，如果 promo_code 不存在時程市不會炸掉</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">unless params.dig(:order, :promo_code).blank?</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  promo_code = PromoCode.where(code: params.dig(:order, :promo_code)).first</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  @order.promo_code = promo_code</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>可參考 Action Controller Overview</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"操作-params\">操作 params<a href=\"#操作-params\" class=\"hash-link\" aria-label=\"操作 params的直接連結\" title=\"操作 params的直接連結\">​</a></h4><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-update-model-params-delete\">keywords: <code>update model</code>, <code>params</code>, <code>delete</code><a href=\"#keywords-update-model-params-delete\" class=\"hash-link\" aria-label=\"keywords-update-model-params-delete的直接連結\" title=\"keywords-update-model-params-delete的直接連結\">​</a></h6><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"刪除某個-params\">刪除某個 params<a href=\"#刪除某個-params\" class=\"hash-link\" aria-label=\"刪除某個 params的直接連結\" title=\"刪除某個 params的直接連結\">​</a></h5><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 刪除 product params 中的 photos</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">params[:product].delete(:photos)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"把-params-存起來\">把 params 存起來<a href=\"#把-params-存起來\" class=\"hash-link\" aria-label=\"把 params 存起來的直接連結\" title=\"把 params 存起來的直接連結\">​</a></h5><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 update</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">@product.update(product_params)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 使用 assign_attribute</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">@product.assign_attributes(product_params)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-safe-navigation-operator-\">使用 Safe Navigation Operator （<code>&amp;.</code>）<a href=\"#使用-safe-navigation-operator-\" class=\"hash-link\" aria-label=\"使用-safe-navigation-operator-的直接連結\" title=\"使用-safe-navigation-operator-的直接連結\">​</a></h3><h5 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-\">keywords: <code>&amp;.</code><a href=\"#keywords-\" class=\"hash-link\" aria-label=\"keywords-的直接連結\" title=\"keywords-的直接連結\">​</a></h5><p>不用擔心前面的值是 <code>nil</code> 時會拋錯誤（<code>undefined method for nil:NilClass</code>），類似於<strong>前面存在時才會跑後面</strong>：</p><div class=\"language-Ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-Ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">@person&amp;.spouse&amp;.name</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">@person.spouse.name if @person &amp;&amp; @person.spouse  # 等同於上面那句</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>但是<strong>不可作為判斷</strong>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">nil.nil?    # true</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">nil&amp;.nil?   # nil</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">nil&amp;.foobar   # nil</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p><a href=\"https://stackoverflow.com/questions/36812647/what-does-ampersand-dot-mean-in-ruby\" target=\"_blank\" rel=\"noopener noreferrer\">What does ampers and dot mean in ruby</a> @ Stack Overflow</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"turbolinks\">Turbolinks<a href=\"#turbolinks\" class=\"hash-link\" aria-label=\"Turbolinks的直接連結\" title=\"Turbolinks的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"在特定頁面關掉-turbolinks\">在特定頁面關掉 turbolinks<a href=\"#在特定頁面關掉-turbolinks\" class=\"hash-link\" aria-label=\"在特定頁面關掉 turbolinks的直接連結\" title=\"在特定頁面關掉 turbolinks的直接連結\">​</a></h3><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">meta</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">name</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">turbolinks-visit-control</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">content</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">reload</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">/&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用矛點--的連結卻會重新-refresh-頁面\">使用矛點 <code>#</code> 的連結卻會重新 refresh 頁面<a href=\"#使用矛點--的連結卻會重新-refresh-頁面\" class=\"hash-link\" aria-label=\"使用矛點--的連結卻會重新-refresh-頁面的直接連結\" title=\"使用矛點--的連結卻會重新-refresh-頁面的直接連結\">​</a></h3><p>在目前 turbolinks 使用 <code>anchor links</code>（<code>&lt;a href=&quot;#foo&quot;</code>） 還是會 refresh page，這時候可以加上 <code>data-turbolinks=&quot;false&quot;</code>：</p><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">&lt;!-- 此 issue 正在修正中 --&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">a</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">href</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">#foo</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">data-turbolinks</span><span class=\"token tag attr-value punctuation attr-equals\" style=\"color:rgb(199, 146, 234)\">=</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag attr-value\" style=\"color:rgb(255, 85, 114)\">false</span><span class=\"token tag attr-value punctuation\" style=\"color:rgb(199, 146, 234)\">&quot;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">a</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>為了避免使用 <code>data-turbolinks=&quot;false&quot;</code> 之後，使用者無法重新返回上一頁，可以使用 <code>window.location</code> 搭配 <code>window.history.pushState()</code> 來保留 turbolinks 的 state 物件：</p><blockquote><p><a href=\"https://github.com/turbolinks/turbolinks/issues/214\" target=\"_blank\" rel=\"noopener noreferrer\">此 Issue 正在修正中</a> @ Turbolinks Github</p></blockquote><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> turbolinksState </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"> </span><span class=\"token spread operator\" style=\"color:rgb(137, 221, 255)\">...</span><span class=\"token dom variable\" style=\"color:rgb(191, 199, 213)\">window</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">history</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">state</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">$</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;[href^=&quot;#&quot;]&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">off</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;click&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">$</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;[href^=&quot;#&quot;]&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">on</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;click&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token maybe-class-name\">Rails</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">stopEverything</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">e</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">let</span><span class=\"token plain\"> anchor </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> e</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">target</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">getAttribute</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;href&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token dom variable\" style=\"color:rgb(191, 199, 213)\">window</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">location</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> anchor</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token dom variable\" style=\"color:rgb(191, 199, 213)\">window</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">history</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">pushState</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">turbolinksState</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token keyword null nil\" style=\"font-style:italic\">null</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>留意 <code>window.history.pushSate()</code> 需放在 <code>window.location</code> 才不會又被 turbolinks 清空。</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"解決使用-vue-時被-cache-的問題\">解決使用 Vue 時被 cache 的問題<a href=\"#解決使用-vue-時被-cache-的問題\" class=\"hash-link\" aria-label=\"解決使用 Vue 時被 cache 的問題的直接連結\" title=\"解決使用 Vue 時被 cache 的問題的直接連結\">​</a></h3><blockquote><p><a href=\"https://github.com/turbolinks/turbolinks/wiki/VueJs-and-Turbolinks\" target=\"_blank\" rel=\"noopener noreferrer\">VueJS and Turbolinks</a> @ Turbolinks Wiki</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"檢視錯誤訊息\">檢視錯誤訊息<a href=\"#檢視錯誤訊息\" class=\"hash-link\" aria-label=\"檢視錯誤訊息的直接連結\" title=\"檢視錯誤訊息的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">order.mark_as_canceled!      # ROLLBACK =&gt; false</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">order.errors                 # 檢視錯誤訊息</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$!               # 前一次拋出的錯誤訊息</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"設定-config\">設定 config<a href=\"#設定-config\" class=\"hash-link\" aria-label=\"設定 config的直接連結\" title=\"設定 config的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"支援-es6\">支援 ES6<a href=\"#支援-es6\" class=\"hash-link\" aria-label=\"支援 ES6的直接連結\" title=\"支援 ES6的直接連結\">​</a></h3><p>要讓 rails 能夠正常編譯 ES6 的語法，需要在 <code>OnePageShop/config/environments/production.rb</code> 這支檔案中，把 <code>config.assets.js_compressor = :uglifier</code> 改成 <code>config.assets.js_compressor = Uglifier.new(harmony: true)</code>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># OnePageShop/config/environments/production.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">config.assets.js_compressor = Uglifier.new(harmony: true)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"開發者工具\">開發者工具<a href=\"#開發者工具\" class=\"hash-link\" aria-label=\"開發者工具的直接連結\" title=\"開發者工具的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"pry-rails-gem\">Pry-Rails (gem)<a href=\"#pry-rails-gem\" class=\"hash-link\" aria-label=\"Pry-Rails (gem)的直接連結\" title=\"Pry-Rails (gem)的直接連結\">​</a></h3><p><strong>作用</strong>：在 <code>.erb</code> 檔中，加上 <code>&lt;%= binding.pry %&gt;</code> 當程式執行到該處時，會停在那。按 <code>Ctrl + D</code> 可以跳出 Pry。</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># in pry</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ exit-program      # 跳出所有 pry</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$!            # 列出錯誤訊息</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p><strong>安裝</strong>：透過在 Rails 中的 Gemfile 安裝 gem</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">group :development do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # Use Pry as your rails console</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  gem &#x27;pry-rails&#x27;, &#x27;~&gt; 0.3.7&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"rails-panel-chrome-extension-and-meta_request-gem\">Rails Panel (Chrome extension) and meta_request (gem)<a href=\"#rails-panel-chrome-extension-and-meta_request-gem\" class=\"hash-link\" aria-label=\"Rails Panel (Chrome extension) and meta_request (gem)的直接連結\" title=\"Rails Panel (Chrome extension) and meta_request (gem)的直接連結\">​</a></h3><p><strong>作用</strong>：可以在 chrome dev tool 中看到和 rails 相關的變數資訊</p><p><strong>安裝</strong>：</p><ul><li>STEP1: 安裝 Chrome Extension <a href=\"https://chrome.google.com/webstore/detail/railspanel/gjpfobpafnhjhbajcjgccbbdofdckggg?hl=zh-TW\" target=\"_blank\" rel=\"noopener noreferrer\">Rails Panel</a> 。</li><li>STEP2: 透過 Rails 中的 gemfile 安裝 gem：</li></ul><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 寫在 gemfile 中，接著執行 bundle install</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">group :development do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # Supporting gem for Rails Panel (Google Chrome extension for Rails development)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  gem &#x27;meta_request&#x27;, &#x27;~&gt; 0.4.3&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"web-consolegem\">web-console(gem)<a href=\"#web-consolegem\" class=\"hash-link\" aria-label=\"web-console(gem)的直接連結\" title=\"web-console(gem)的直接連結\">​</a></h3><p><strong>作用</strong>：可以在 view 中使用 <code>&lt;%= console %&gt;</code>，接著就可以在 view 中使用 Rails 的指令測試。</p><p><strong>安裝</strong>：透過 Rails 中的 Gemfile 安裝 gem</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">group :development do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  gem &#x27;web-console&#x27;, &#x27;&gt;= 3.7.0&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Vue-outlet for Turbolinks pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Vue-outlet for Turbolinks pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Vue-outlet for Turbolinks</h1></header><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-webpacker\">keywords: <code>webpacker</code><a href=\"#keywords-webpacker\" class=\"hash-link\" aria-label=\"keywords-webpacker的直接連結\" title=\"keywords-webpacker的直接連結\">​</a></h6><p>說明如何在 Rails Turbolinks 中搭配使用 Vue。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"initialize-the-app\">Initialize the App<a href=\"#initialize-the-app\" class=\"hash-link\" aria-label=\"Initialize the App的直接連結\" title=\"Initialize the App的直接連結\">​</a></h3><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># initialize the app</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">rails new rails_sandbox_vue --database=postgresql --webpack=vue</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># install package</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bundle</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">yarn</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"scaffold-the-app\">Scaffold the app<a href=\"#scaffold-the-app\" class=\"hash-link\" aria-label=\"Scaffold the app的直接連結\" title=\"Scaffold the app的直接連結\">​</a></h3><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Scaffold the app</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails g scaffold User name email</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Create database and migrate</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails db:setup</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails db:migrate</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"create-vue-component\">Create Vue Component<a href=\"#create-vue-component\" class=\"hash-link\" aria-label=\"Create Vue Component的直接連結\" title=\"Create Vue Component的直接連結\">​</a></h3><p>在 <code>./app/javascript/</code> 中建立 vue component <code>hello_vue.vue</code></p><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">&lt;!--</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">./app/javascript/hello_vue.vue</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">--&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">template</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">div</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">h4</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\">{{ message }}</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">h4</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">ul</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">li</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\">Object: {{ obj }}</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">li</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">li</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\">Number: {{ num }}</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">li</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">li</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\">Array: {{ arr }}</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">li</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">li</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\">String: {{ str }}</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">li</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">ul</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">div</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">template</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">script</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">  </span><span class=\"token script language-javascript keyword module\" style=\"font-style:italic\">export</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript keyword module\" style=\"font-style:italic\">default</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">    </span><span class=\"token script language-javascript literal-property property\">props</span><span class=\"token script language-javascript operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token script language-javascript string\" style=\"color:rgb(195, 232, 141)\">&#x27;obj&#x27;</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript string\" style=\"color:rgb(195, 232, 141)\">&#x27;arr&#x27;</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript string\" style=\"color:rgb(195, 232, 141)\">&#x27;num&#x27;</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript string\" style=\"color:rgb(195, 232, 141)\">&#x27;str&#x27;</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">    </span><span class=\"token script language-javascript function-variable function\" style=\"color:rgb(130, 170, 255)\">data</span><span class=\"token script language-javascript operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript keyword\" style=\"font-style:italic\">function</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">      </span><span class=\"token script language-javascript keyword control-flow\" style=\"font-style:italic\">return</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">        </span><span class=\"token script language-javascript literal-property property\">message</span><span class=\"token script language-javascript operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript string\" style=\"color:rgb(195, 232, 141)\">&#x27;Hello, Vue and Turbolinks&#x27;</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">      </span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">    </span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">  </span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">script</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">style</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">scoped</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token style language-css\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token style language-css\">  </span><span class=\"token style language-css selector\" style=\"color:rgb(199, 146, 234)\">h4</span><span class=\"token style language-css\"> </span><span class=\"token style language-css punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token style language-css\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token style language-css\">    </span><span class=\"token style language-css property\">font-size</span><span class=\"token style language-css punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token style language-css\"> </span><span class=\"token style language-css number\" style=\"color:rgb(247, 140, 108)\">2</span><span class=\"token style language-css unit\">em</span><span class=\"token style language-css punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token style language-css\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token style language-css\">    </span><span class=\"token style language-css property\">text-align</span><span class=\"token style language-css punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token style language-css\"> center</span><span class=\"token style language-css punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token style language-css\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token style language-css\">    </span><span class=\"token style language-css property\">color</span><span class=\"token style language-css punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token style language-css\"> </span><span class=\"token style language-css color\">steelblue</span><span class=\"token style language-css punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token style language-css\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token style language-css\">  </span><span class=\"token style language-css punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token style language-css\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token style language-css\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">style</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"create-vue-adapter\">Create Vue Adapter<a href=\"#create-vue-adapter\" class=\"hash-link\" aria-label=\"Create Vue Adapter的直接連結\" title=\"Create Vue Adapter的直接連結\">​</a></h3><p>在 <code>./app/javascript/packs/</code>",
      "中建立 <code>vue_adapter.js</code>，在 import Vue 的地方要載入 <code>vue.esm.js</code> 可以 compile template 的版本。另外要把需要使用到的 Vue Component 在這裡執行註冊：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// ./app/javascript/packs/vue_adapter.js</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// import Vue</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"font-style:italic\">import</span><span class=\"token plain\"> </span><span class=\"token imports maybe-class-name\">Vue</span><span class=\"token plain\"> </span><span class=\"token keyword module\" style=\"font-style:italic\">from</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;vue/dist/vue.esm.js&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// import your components</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"font-style:italic\">import</span><span class=\"token plain\"> </span><span class=\"token imports maybe-class-name\">HelloVue</span><span class=\"token plain\"> </span><span class=\"token keyword module\" style=\"font-style:italic\">from</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;hello-vue&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// register your components</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token maybe-class-name\">Vue</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">component</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;hello-vue&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token maybe-class-name\">HelloVue</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token function maybe-class-name\" style=\"color:rgb(130, 170, 255)\">VueConstructor</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">let</span><span class=\"token plain\"> outlets </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token dom variable\" style=\"color:rgb(191, 199, 213)\">document</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">querySelectorAll</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;[data-vue-component-outlet]&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  outlets</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">forEach</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token parameter\">outlet</span><span class=\"token parameter punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token parameter\"> index</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">let</span><span class=\"token plain\"> id </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> outlet</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">getAttribute</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;data-vue-component-outlet&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">new</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">Vue</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token literal-property property\">el</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;[data-vue-component-outlet=&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">+</span><span class=\"token plain\"> id </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">+</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;]&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword control-flow\" style=\"font-style:italic\">if</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token keyword\" style=\"font-style:italic\">typeof</span><span class=\"token plain\"> </span><span class=\"token maybe-class-name\">Turbolinks</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">!==</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;undefined&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&amp;&amp;</span><span class=\"token plain\"> </span><span class=\"token maybe-class-name\">Turbolinks</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token property-access\">supported</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token dom variable\" style=\"color:rgb(191, 199, 213)\">document</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">addEventListener</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;turbolinks:load&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token maybe-class-name\">VueConstructor</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"> </span><span class=\"token keyword control-flow\" style=\"font-style:italic\">else</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token dom variable\" style=\"color:rgb(191, 199, 213)\">document</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">addEventListener</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;DOMContentLoaded&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token maybe-class-name\">VueConstructor</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>Notice:",
      "-import 的 Vue 要匯入的是 vue.esm.js -記得註冊使用到的 Vue Component</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"add-vue_adapter-in-head\">add vue_adapter in head<a href=\"#add-vue_adapter-in-head\" class=\"hash-link\" aria-label=\"add vue_adapter in head的直接連結\" title=\"add vue_adapter in head的直接連結\">​</a></h3><p>在 layouts/application.html.erb 中的 <code>head</code> 中加入 <code>&lt;%= javascript_pack_tag &#x27;vue_adapter&#x27;, &#x27;data-turbolinks-track&#x27;: &#x27;reload&#x27; %&gt;</code>，以及 <code>&lt;%= stylesheet_pack_tag &#x27;vue_adapter&#x27;, &#x27;data-turbolinks-track&#x27;: &#x27;reload&#x27; %&gt;</code>：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- ./app/views/layouts/application.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!DOCTYPE html&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;html&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;head&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;title&gt;RailsSandboxVue&lt;/title&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= csrf_meta_tags %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= stylesheet_link_tag    &#x27;application&#x27;, media: &#x27;all&#x27;, &#x27;data-turbolinks-track&#x27;: &#x27;reload&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= javascript_include_tag &#x27;application&#x27;, &#x27;data-turbolinks-track&#x27;: &#x27;reload&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= stylesheet_pack_tag &#x27;vue_adapter&#x27;, &#x27;data-turbolinks-track&#x27;: &#x27;reload&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= javascript_pack_tag &#x27;vue_adapter&#x27;, &#x27;data-turbolinks-track&#x27;: &#x27;reload&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/head&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;body&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;%= yield %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/body&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/html&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>Notice: -要把 javascript_pack_tag 放在 head 當中 -如果 Vue 中有使用 SCSS 則需在 head 中再放入 stylesheet_pack_tag</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"import-vue-component-in-template\">Import Vue component in template<a href=\"#import-vue-component-in-template\" class=\"hash-link\" aria-label=\"Import Vue component in template的直接連結\" title=\"Import Vue component in template的直接連結\">​</a></h3><p>我們把 Vue 的元件載入 index.html.erb 中，<code>data-vue-components-outlet</code> 這個屬性是關鍵字，後面放要載入的 Vue 元件名稱：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- ./app/views/users/index.html.erb --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--  ...  --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--  假設這是透過 controller 傳過來的資料  --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% @hello_message = {num: 1, str: &#x27;2&#x27;, arr: [1, 2, 3], obj: {name: &#x27;foo&#x27;, age: 12}} %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- Import Vue Component --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;div data-vue-components-outlet=&quot;hello-turbolinks&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;hello-turbolinks</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :obj=&quot;&lt;%= @hello_message[:obj].to_json %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :arr=&quot;&lt;%= @hello_message[:arr] %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :str=&quot;&lt;%= @hello_message[:str] %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :num=&quot;&lt;%= @hello_message[:num] %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &gt;&lt;/hello-turbolinks&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- End of Import Vue Component --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= link_to &#x27;New User&#x27;, new_user_path %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"完成\">完成<a href=\"#完成\" class=\"hash-link\" aria-label=\"完成的直接連結\" title=\"完成的直接連結\">​</a></h3><p>分別開兩個 terminal 到 app 目錄底下，分別執行：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/webpack-dev-server</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">bin/rails s</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>就可以看到 Vue Component 正確運作了。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-inline-template\">使用 inline-template<a href=\"#使用-inline-template\" class=\"hash-link\" aria-label=\"使用 inline-template的直接連結\" title=\"使用 inline-template的直接連結\">​</a></h3><p>依照上面的邏輯，我們可以透過 inline-template 的方式來使用 Vue，\b 這樣就可以把 Vue Template 的部分寫在 erb 中而不用拉到 <code>.vue</code> 裡面，以下是所建立的檔案：</p><div class=\"language-html codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-html codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">&lt;!--  ./app/javascript/hello-vue-inline.vue  --&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">script</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">  </span><span class=\"token script language-javascript keyword module\" style=\"font-style:italic\">export</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript keyword module\" style=\"font-style:italic\">default</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">    </span><span class=\"token script language-javascript literal-property property\">props</span><span class=\"token script language-javascript operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token script language-javascript string\" style=\"color:rgb(195, 232, 141)\">&#x27;obj&#x27;</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript string\" style=\"color:rgb(195, 232, 141)\">&#x27;arr&#x27;</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript string\" style=\"color:rgb(195, 232, 141)\">&#x27;num&#x27;</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript string\" style=\"color:rgb(195, 232, 141)\">&#x27;str&#x27;</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">    </span><span class=\"token script language-javascript function-variable function\" style=\"color:rgb(130, 170, 255)\">data</span><span class=\"token script language-javascript operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript keyword\" style=\"font-style:italic\">function</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">      </span><span class=\"token script language-javascript keyword control-flow\" style=\"font-style:italic\">return</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">        </span><span class=\"token script language-javascript literal-property property\">message</span><span class=\"token script language-javascript operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token script language-javascript\"> </span><span class=\"token script language-javascript string\" style=\"color:rgb(195, 232, 141)\">&#x27;Hello, Vue in inline-template.&#x27;</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">      </span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">    </span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\">  </span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token script language-javascript punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token script language-javascript\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token script language-javascript\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">script</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">style</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\"> </span><span class=\"token tag attr-name\" style=\"color:rgb(255, 203, 107)\">scoped</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><span class=\"token style language-css\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token style language-css\">  </span><span class=\"token style language-css selector\" style=\"color:rgb(199, 146, 234)\">h4</span><span class=\"token style language-css\"> </span><span class=\"token style language-css punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token style language-css\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token style language-css\">    </span><span class=\"token style language-css property\">font-size</span><span class=\"token style language-css punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token style language-css\"> </span><span class=\"token style language-css number\" style=\"color:rgb(247, 140, 108)\">2</span><span class=\"token style language-css unit\">em</span><span class=\"token style language-css punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token style language-css\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token style language-css\">    </span><span class=\"token style language-css property\">text-align</span><span class=\"token style language-css punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token style language-css\"> center</span><span class=\"token style language-css punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token style language-css\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token style language-css\">    </span><span class=\"token style language-css property\">color</span><span class=\"token style language-css punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token style language-css\"> </span><span class=\"token style language-css color\">purple</span><span class=\"token style language-css punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token style language-css\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token style language-css\">  </span><span class=\"token style language-css punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token style language-css\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token style language-css\"></span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&lt;/</span><span class=\"token tag\" style=\"color:rgb(255, 85, 114)\">style</span><span class=\"token tag punctuation\" style=\"color:rgb(199, 146, 234)\">&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// ./app/javascript/packs/vue_adapter.js</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">/**</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"> * 新增兩行</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"> * &quot;import HelloVueInline from &#x27;hello-vue-inline&#x27;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"> * &quot;Vue.component(&#x27;hello-vue-inline&#x27;, HelloVueInline)&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\"> **/</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token spread operator\" style=\"color:rgb(137, 221, 255)\">...</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// import your components</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"font-style:italic\">import</span><span class=\"token plain\"> </span><span class=\"token imports maybe-class-name\">HelloVue</span><span class=\"token plain\"> </span><span class=\"token keyword module\" style=\"font-style:italic\">from</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;hello-vue&#x27;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword module\" style=\"font-style:italic\">import</span><span class=\"token plain\"> </span><span class=\"token imports maybe-class-name\">HelloVueInline</span><span class=\"token plain\"> </span><span class=\"token keyword module\" style=\"font-style:italic\">from</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;hello-vue-inline&#x27;</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 新增這行</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// register your components</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token maybe-class-name\">Vue</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">component</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;hello-vue&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token maybe-class-name\">HelloVue</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token maybe-class-name\">Vue</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">component</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;hello-vue-inline&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token maybe-class-name\">HelloVueInline</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token spread operator\" style=\"color:rgb(137, 221, 255)\">...</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--  ./app/views/users/index.html.erb  --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> - 留意 Use Vue Component by inline-template 的部分</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--  ...  --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% @hello_message = {num: 1, str: &#x27;2&#x27;, arr: [1, 2, 3], obj: {name: &#x27;foo&#x27;, age: 12}} %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- Import Vue Component --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;div data-vue-component-outlet=&quot;v-hello-vue&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;hello-vue</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :obj=&quot;&lt;%= @hello_message[:obj].to_json %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :arr=&quot;&lt;%= @hello_message[:arr] %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :str=&quot;&lt;%= @hello_message[:str] %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :num=&quot;&lt;%= @hello_message[:num] %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &gt;&lt;/hello-vue&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- End of Import Vue Component --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- Use Vue Component by inline-template --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;div data-vue-component-outlet=&quot;v-hello-vue-inline&quot;&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;hello-vue-inline</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :obj=&quot;&lt;%= @hello_message[:obj].to_json %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :arr=&quot;&lt;%= @hello_message[:arr] %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :str=&quot;&lt;%= @hello_message[:str] %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :num=&quot;&lt;%= @hello_message[:num] %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  inline-template</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      &lt;h4&gt;{{ message }}&lt;/h4&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      &lt;ul&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        &lt;li&gt;Object: {{ obj }} &lt;/li&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        &lt;li&gt;Number: {{ num }} &lt;/li&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        &lt;li&gt;Array: {{ arr }} &lt;/li&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">        &lt;li&gt;String: {{ str }} &lt;/li&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      &lt;/ul&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    &lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;/hello-vue-inline&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;/div&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- End of Vue Component by inline-template --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= link_to &#x27;New User&#x27;, new_user_path %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"加入-view-helper\">加入 View Helper<a href=\"#加入-view-helper\" class=\"hash-link\" aria-label=\"加入 View Helper的直接連結\" title=\"加入 View Helper的直接連結\">​</a></h3><p>我們也可以寫一個 Rails View Helper 來方便我們使用 Vue 元件：</p><p>在 <code>./app/helpers/</code> 中建立一支 <code>vue_helper.rb</code>：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># ./app/helpers/vue_helper.rb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">module VueHelper</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  def vue_outlet(html_options = {})</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    html_options = html_options.reverse_merge(data: {})</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    html_options[:data].tap do |data|</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      data[:vue_component_outlet] = &quot;_v&quot; + SecureRandom.hex(5)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    html_tag = html_options[:tag] || :div</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    html_options.except!(:tag)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    content_tag(html_tag, &#x27;&#x27;, html_options) do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      yield</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>使用方式如下：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">./app/views/users/index.html.erb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% @hello_message = {num: 1, str: &#x27;2&#x27;, arr: [1, 2, 3], obj: {name: &#x27;foo&#x27;, age: 12}} %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- Import Vue Component by Helper --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= vue_outlet do %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;hello-turbolinks</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :obj=&quot;&lt;%= @hello_message[:obj].to_json %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :arr=&quot;&lt;%= @hello_message[:arr] %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :str=&quot;&lt;%= @hello_message[:str] %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :num=&quot;&lt;%= @hello_message[:num] %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- End of Import Vue Component by Helper --&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如果 tag 不想要使用 div 可以加上 options：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!--</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">./app/views/users/index.html.erb</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">--&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- With &lt;p&gt; --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= vue_outlet tag: &#x27;p&#x27; do %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &lt;hello-turbolinks</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :obj=&quot;&lt;%= @hello_message[:obj].to_json %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :arr=&quot;&lt;%= @hello_message[:arr] %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :str=&quot;&lt;%= @hello_message[:str] %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :num=&quot;&lt;%= @hello_message[:num] %&gt;&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  &gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;% end %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- End of With &lt;p&gt; --&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"檔案範例\">檔案範例<a href=\"#檔案範例\" class=\"hash-link\" aria-label=\"檔案範例的直接連結\" title=\"檔案範例的直接連結\">​</a></h2><p><a href=\"https://github.com/PJCHENder/template-rails-vue-turbolinks\" target=\"_blank\" rel=\"noopener noreferrer\">template-rails-vue-turbolinks</a> @ Github</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"開發者\">開發者<a href=\"#開發者\" class=\"hash-link\" aria-label=\"開發者的直接連結\" title=\"開發者的直接連結\">​</a></h2><ul><li><a href=\"https://github.com/andyyou\" target=\"_blank\" rel=\"noopener noreferrer\">Andyyou</a> @ Github</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"https://gist.github.com/scottcorgan/b35cb59f21acd392d07020a700d017b7\" target=\"_blank\" rel=\"noopener noreferrer\">Make Vue.js works with Ruby on Rails and Turbolinks 5</a> @ Gist</li><li><a href=\"https://github.com/jeffreyguenther/vue-turbolinks\" target=\"_blank\" rel=\"noopener noreferrer\">A Vue mixin to fix Turbolinks caching</a> @ Vue Turbolinks</li><li><a href=\"https://github.com/turbolinks/turbolinks/wiki/VueJs-and-Turbolinks\" target=\"_blank\" rel=\"noopener noreferrer\">VueJs and Turbolinks</a> @ turbolinks</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Rails] Webpacker pjchender.dev": {
    "prefix": "hruby-on-rails [Rails] Webpacker pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Rails] Webpacker</h1></header><h6 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"keywords-npm-yarn\">keywords: <code>npm</code>, <code>yarn</code><a href=\"#keywords-npm-yarn\" class=\"hash-link\" aria-label=\"keywords-npm-yarn的直接連結\" title=\"keywords-npm-yarn的直接連結\">​</a></h6><blockquote><p>筆記使用版本：rails/webpacker @ 4.0.2</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"目錄\">目錄<a href=\"#目錄\" class=\"hash-link\" aria-label=\"目錄的直接連結\" title=\"目錄的直接連結\">​</a></h2><p>[TOC]</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"安裝\">安裝<a href=\"#安裝\" class=\"hash-link\" aria-label=\"安裝的直接連結\" title=\"安裝的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"透過指令\">透過指令<a href=\"#透過指令\" class=\"hash-link\" aria-label=\"透過指令的直接連結\" title=\"透過指令的直接連結\">​</a></h3><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Available Rails 5.1+</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails new myapp --webpack</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails new myapp --webpack=vue</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails new myapp --webpack=react</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"透過-gemfile\">透過 Gemfile<a href=\"#透過-gemfile\" class=\"hash-link\" aria-label=\"透過 Gemfile的直接連結\" title=\"透過 Gemfile的直接連結\">​</a></h3><p>將 webpacker 加到 Gemfile 當中：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Gemfile</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">gem &#x27;webpacker&#x27;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>接著執行：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bundle</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bundle exec rails webpacker:install</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 執行完上面者指令後，可在執行下面的指令補近 vue 需要的套件</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bundle exec rails webpacker:install:vue</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># $ bundle exec rails webpacker:install:react</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>或者也可以執行：</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails webpacker:install</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 執行完上面者指令後，可在執行下面的指令補近 vue 需要的套件</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails webpacker:install:vue</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>如果沒先執行 webpacker:install 就直接執行 webpacker:install:vue 會出現錯誤",
      "<a href=\"https://github.com/rails/webpacker/issues/379\" target=\"_blank\" rel=\"noopener noreferrer\">webpacker is installed... ./bin/webpack: not found</a> @ Webpacker Github</p></blockquote><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"錯誤處理\">錯誤處理<a href=\"#錯誤處理\" class=\"hash-link\" aria-label=\"錯誤處理的直接連結\" title=\"錯誤處理的直接連結\">​</a></h3><p>如果不是透過指令一開始 <code>rails new</code> 時就安裝 webpacker，或者安裝後有其他問題，大絕招就是把所有 webpacker 相關的檔案都砍掉後，再重新執行一次 <code>rails webpacker:install</code>，其中包含：</p><div class=\"language-text codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">./</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> ├── bin:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> │    ├── webpack</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> │    └── webpack-dev-server</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> ├── config:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> │    ├── webpack:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> │    └── webpacker.yml</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> ├── node_modules:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> ├── .babelrc</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> ├── package.json</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> └── yarn.lock</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>刪除完後，在執行一次 <code>rails webpacker:install</code></p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用\">使用<a href=\"#使用\" class=\"hash-link\" aria-label=\"使用的直接連結\" title=\"使用的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"資料結構\">資料結構<a href=\"#資料結構\" class=\"hash-link\" aria-label=\"資料結構的直接連結\" title=\"資料結構的直接連結\">​</a></h3><div class=\"language-text codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-text codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">app/javascript:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  ├── packs:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  │   └── application.js</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  └── stylesheets:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  │   └── application.css</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  └── images:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      └── logo.svg</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"載入打包檔案\">載入打包檔案<a href=\"#載入打包檔案\" class=\"hash-link\" aria-label=\"載入打包檔案的直接連結\" title=\"載入打包檔案的直接連結\">​</a></h3><p>使用 <code>javascript_pack_tag</code> 和 <code>stylesheet_pack_tag</code> 來載入打包的檔案：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%# ./app/views/layouts/application.html.erb %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 會載入 app/javascript/packs/application.js --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= javascript_pack_tag &#x27;application&#x27; %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;!-- 會載入 app/javascript/packs/application.scss --&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%= stylesheet_pack_tag &#x27;application&#x27; %&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"直接載入靜態檔案\">直接載入靜態檔案<a href=\"#直接載入靜態檔案\" class=\"hash-link\" aria-label=\"直接載入靜態檔案的直接連結\" title=\"直接載入靜態檔案的直接連結\">​</a></h3><p>使用 <code>asset_pack_path</code> helper 來載入靜態檔案：</p><div class=\"language-erb codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-erb codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;%# erb %&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;link rel=&quot;prefetch&quot; href=&quot;&lt;%= asset_pack_path &#x27;application.css&#x27; %&gt;&quot; /&gt;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&lt;img src=&quot;&lt;%= asset_pack_path &#x27;images/logo.svg&#x27; %&gt;&quot; /&gt;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><blockquote><p>⚠️ 新版的路徑前面需要加上 <code>media</code>，所以會變成 <code>media/images/logo.svg</code>，參考 <a href=\"https://github.com/rails/webpacker/blob/2b0d5075f1ea85499ff7f1bd412e2c840e1c9c59/CHANGELOG.md#400rc6---2019-01-25\" target=\"_blank\" rel=\"noopener noreferrer\">CHAGNELOG</a>。</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"開發\">開發<a href=\"#開發\" class=\"hash-link\" aria-label=\"開發的直接連結\" title=\"開發的直接連結\">​</a></h2><p>Webpacker 透過兩支檔案在運行：<code>./bin/webpack</code> 和 <code>./bind/webpack-dev-server</code>，主要是在原本的 <code>webpack.js</code> 和 <code>webpack-dev-server.js</code> 外包了一層來確認可以根據環境執行。</p><p>在開發時，Webpacker 預設會根據需要時（on demand）才編譯而不會預先編譯（upfront），也就是當你透過 Webpacker 的 helper 方法來指稱到任何 pack 中的資源時才會發生，因此你不需要分開的執行獨立的程序。</p><p>如果你希望使用 live code reloading 的功能，或者需要時（on demand）時要編譯的檔案很多速度太慢，那麼你可以執行 <code>./bin/webpack-dev-server</code> 或 <code>ruby ./bi/webpack-dev-server</code>。這會去監控 <code>app/javascript/packs/*.js</code> 裡的檔案，一旦有變更就會自動重新整理瀏覽器。</p><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># webpack dev server</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">./bin/webpack-dev-server</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># watcher</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">./bin/webpack --watch --colors --progress</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># standalone build</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">./bin/webpack</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p><strong>一旦你啟動 development server，所有向此伺服器發送 webpack asset 的請求都會透過 webpacker 自動代理，一旦停止此 server 則會回覆到 on-demand 的編譯方式。</strong></p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"設定\">設定<a href=\"#設定\" class=\"hash-link\" aria-label=\"設定的直接連結\" title=\"設定的直接連結\">​</a></h2><p>設定檔的路徑在：<code>./config/webpacker.yml</code></p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"更新\">更新<a href=\"#更新\" class=\"hash-link\" aria-label=\"更新的直接連結\" title=\"更新的直接連結\">​</a></h2><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ bundle update webpacker</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ yarn upgrade @rails/webpacker --latest</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ yarn upgrade webpack-dev-server --latest</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他\">其他<a href=\"#其他\" class=\"hash-link\" aria-label=\"其他的直接連結\" title=\"其他的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"在-webpacker-中使用-rails-變數\">在 Webpacker 中使用 Rails 變數<a href=\"#在-webpacker-中使用-rails-變數\" class=\"hash-link\" aria-label=\"在 Webpacker 中使用 Rails 變數的直接連結\" title=\"在 Webpacker 中使用 Rails 變數的直接連結\">​</a></h3><div class=\"language-sh codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-sh codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 讓 webpacker 也能吃 .js.erb 的檔案</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">$ rails webpacker:install:erb</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>如此即可在 Rails Webpacker 中使用 Rails 的變數</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// ./apff/app/javascript/controllers/posts_controller.js.erb</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">get</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">token</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword control-flow\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;&lt;%= Rails.application.credentials.filmcloud_access_token %&gt;&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考\">參考<a href=\"#參考\" class=\"hash-link\" aria-label=\"參考的直接連結\" title=\"參考的直接連結\">​</a></h2><ul><li><a href=\"https://github.com/rails/webpacker\" target=\"_blank\" rel=\"noopener noreferrer\">webpacker</a> @ Github</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hruby-on-rails [Ruby] Symbol pjchender.dev": {
    "prefix": "hruby-on-rails [Ruby] Symbol pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Ruby] Symbol</h1></header><p>可以把 Symbol 想像是一個「帶有名字的物件」。因為下面的一些特性，讓 Symbol 在 Ruby 中主要用作 hash 的鍵（key）或者是用來指稱方法的名稱。</p><ul><li><code>immutable</code>: 被建立後就不能改變。</li><li>任何 symbol 都指稱到同一個記憶體位置，因此較省記憶體。</li><li>以 Symbol 當作鍵（key）的效能會比字串當作鍵的效能來得好。</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"建立-hash\">建立 Hash<a href=\"#建立-hash\" class=\"hash-link\" aria-label=\"建立 Hash的直接連結\" title=\"建立 Hash的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Symbol 都是以冒號（:）開頭</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Hash Rocket</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">new_hash = {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :one =&gt; 1,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :two =&gt; 2,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  :three =&gt; 3</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 把冒號放在 symbol 的後面，並可省略 &#x27;=&gt;&#x27;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 不能寫 &quot;one : 1&quot;，sybmol 後面要直接接&#x27;:&#x27;，不能先接空格</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">new_hash = {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  one: 1,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  two: 2,</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  three: 3</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"symbol-跟變數有什麼不同\">Symbol 跟變數有什麼不同？<a href=\"#symbol-跟變數有什麼不同\" class=\"hash-link\" aria-label=\"Symbol 跟變數有什麼不同？的直接連結\" title=\"Symbol 跟變數有什麼不同？的直接連結\">​</a></h2><p>變數是一個指向某個物件的名字，例如：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">greeting = &quot;Hello Ruby&quot;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>上面這行語法，是指 greeting 這個名字指向 &quot;Hello Ruby&quot; 這個字串物件，但如果沒有 &quot;Hello Ruby&quot; 這個字串給它指，這個名字本身是沒辦法單獨存在的。</p><p>而 Symbol 是一個「帶有名字的物件」，本身不需要指向任何東西也可以拿來用。而且你也沒辦法直接拿 Symbol 來當變數，像這樣會出現語法錯誤：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">:name = &quot;Aaron Chen&quot;   # 這得到 SyntaxError 的錯誤訊息</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"symbol-跟字串有什麼不同\">Symbol 跟字串有什麼不同？<a href=\"#symbol-跟字串有什麼不同\" class=\"hash-link\" aria-label=\"Symbol 跟字串有什麼不同？的直接連結\" title=\"Symbol 跟字串有什麼不同？的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"symbol-指稱的到的相同記憶體位置\">Symbol 指稱的到的相同記憶體位置<a href=\"#symbol-指稱的到的相同記憶體位置\" class=\"hash-link\" aria-label=\"Symbol 指稱的到的相同記憶體位置的直接連結\" title=\"Symbol 指稱的到的相同記憶體位置的直接連結\">​</a></h3><p>相同&quot;樣子&quot;的字串實際上都是在不同記憶體位置的不同物件，但是相同&quot;樣子&quot;的 Symbol 指稱到的是記憶體中的相同物件：</p><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">5.times do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts &quot;hello&quot;.object_id  # 會得到 5 個不同的 id (表示是在 5 個不同記憶體位置的不同物件）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">5.times do</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  puts :hello.object_id   # 只會是同一個 id（直接從記憶體拿，不用重新產生）</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">end</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"symbol-的效能比字串好\">Symbol 的效能比字串好<a href=\"#symbol-的效能比字串好\" class=\"hash-link\" aria-label=\"Symbol 的效能比字串好的直接連結\" title=\"Symbol 的效能比字串好的直接連結\">​</a></h3><p>也因此因此 Symbol 的效能比字串要好一些，因為 Symbol 在做比較的時候，是直接比對這兩顆物件的 object id 是不是相同，而字串比較則是一個字母一個字母逐一比對。所以在效能上來說，字串在做比較的時間複雜度會隨著字母的數量（N）而增加，但 Symbol 的比較因為只比較是不是同一顆物件，所以它的複雜度是固定的。</p><p>因為 Symbol 不可變（immutable）的特性，以及它的查找、比較的速度比字串還快，它很適合用來當 Hash 的 Key。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"字串的內容可以變但-symbol-不行\">字串的內容可以變，但 Symbol 不行<a href=\"#字串的內容可以變但-symbol-不行\" class=\"hash-link\" aria-label=\"字串的內容可以變，但 Symbol 不行的直接連結\" title=\"字串的內容可以變，但 Symbol 不行的直接連結\">​</a></h3><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">p :symbol       # :symbol</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">p &quot;symbol&quot;      # &quot;symbol&quot;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">p :symbol[2]    # m</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">p &quot;symbol&quot;[2]   # m</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">:symbol[2] = &quot;k&quot;         # return ERROR</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot;symbol&quot;[2] = &quot;k&quot;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"字串跟-symbol-是可以互相轉換的\">字串跟 Symbol 是可以互相轉換的<a href=\"#字串跟-symbol-是可以互相轉換的\" class=\"hash-link\" aria-label=\"字串跟 Symbol 是可以互相轉換的的直接連結\" title=\"字串跟 Symbol 是可以互相轉換的的直接連結\">​</a></h2><div class=\"language-ruby codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ruby codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># 字串轉成 Symbol</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot;name&quot;.to_sym</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">&quot;name&quot;.intern</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">%s(name)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"># Symbol 轉成字串</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">:name.to_s</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"參考資料\">參考資料<a href=\"#參考資料\" class=\"hash-link\" aria-label=\"參考資料的直接連結\" title=\"參考資料的直接連結\">​</a></h2><ul><li><a href=\"http://referrals.trhou.se/pojungchen\" target=\"_blank\" rel=\"noopener noreferrer\">Treehouse</a></li><li><a href=\"http://railsbook.tw/\" target=\"_blank\" rel=\"noopener noreferrer\">為你自己學 Ruby on Rails</a></li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  }
}