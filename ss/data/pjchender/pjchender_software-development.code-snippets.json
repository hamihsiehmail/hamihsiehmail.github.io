{
  "hsoftware-development [Book] 重構：改善既有程式的設計 pjchender.dev": {
    "prefix": "hsoftware-development [Book] 重構：改善既有程式的設計 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>[Book] 重構：改善既有程式的設計</h1></header><div class=\"theme-admonition theme-admonition-info alert alert--info admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>Web Edition</div><div class=\"admonitionContent_S0QG\"><p><a href=\"https://memberservices.informit.com/my_account/webedition/9780135425664/html/toc.html\" target=\"_blank\" rel=\"noopener noreferrer\">Refactoring: Web Edition</a> @ informit</p></div></div><div class=\"theme-admonition theme-admonition-info alert alert--info admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>Codebase</div><div class=\"admonitionContent_S0QG\"><p><a href=\"https://gitlab.com/PJCHENder/book-refactoring\" target=\"_blank\" rel=\"noopener noreferrer\">Book Refactoring</a> @ Gitlab</p></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"chapter-6第一組重構\">Chapter 6：第一組重構<a href=\"#chapter-6第一組重構\" class=\"hash-link\" aria-label=\"Chapter 6：第一組重構的直接連結\" title=\"Chapter 6：第一組重構的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"extract-function提取函式\">Extract Function（提取函式）<a href=\"#extract-function提取函式\" class=\"hash-link\" aria-label=\"Extract Function（提取函式）的直接連結\" title=\"Extract Function（提取函式）的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"時機\">時機<a href=\"#時機\" class=\"hash-link\" aria-label=\"時機的直接連結\" title=\"時機的直接連結\">​</a></h4><p>作者認為，提取函式的時間不是依照程式碼的長度、也不是只有在程式碼會被重複使用時，才來做提取函式的動作，而是「如果你必須費心查看一段程式碼才能了解它究竟在做什麼，你就應該把它拆出來，並且以它的目的來命名。」</p><blockquote><p>&quot;Separation between intention(what) and implementation.&quot;</p></blockquote><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"做法\">做法<a href=\"#做法\" class=\"hash-link\" aria-label=\"做法的直接連結\" title=\"做法的直接連結\">​</a></h4><p>建立一個新函式，並且根據函式的目的來為它命名（根據 what 而不是 how 來命名）。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"inline-function將函式內聯\">Inline Function（將函式內聯）<a href=\"#inline-function將函式內聯\" class=\"hash-link\" aria-label=\"Inline Function（將函式內聯）的直接連結\" title=\"Inline Function（將函式內聯）的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"時機-1\">時機<a href=\"#時機-1\" class=\"hash-link\" aria-label=\"時機的直接連結\" title=\"時機的直接連結\">​</a></h4><p>「當程式碼本身的內容和函式名稱一樣清楚時」就不需要額外做內聯，因為多這一層反而增加認知負擔。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"作法\">作法<a href=\"#作法\" class=\"hash-link\" aria-label=\"作法的直接連結\" title=\"作法的直接連結\">​</a></h4><p>將原本函式中的程式碼，直接放回執行它的地方，而不在包這一層函式。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"extract-variable提取變數\">Extract Variable（提取變數）<a href=\"#extract-variable提取變數\" class=\"hash-link\" aria-label=\"Extract Variable（提取變數）的直接連結\" title=\"Extract Variable（提取變數）的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"時機-2\">時機<a href=\"#時機-2\" class=\"hash-link\" aria-label=\"時機的直接連結\" title=\"時機的直接連結\">​</a></h4><p>當只看某個邏輯、運算式或判斷式沒辦法立即瞭解其意義時</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"做法-1\">做法<a href=\"#做法-1\" class=\"hash-link\" aria-label=\"做法的直接連結\" title=\"做法的直接連結\">​</a></h4><p>將比較複雜的邏輯命名，以讓其他開發者更容易理解</p><div class=\"theme-admonition theme-admonition-info alert alert--info admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>信息</div><div class=\"admonitionContent_S0QG\"><p>許多編輯器都有提供了 Refactor 的功能，方便開發者做到將程式提取成變數的動作。</p></div></div><p>VSCode 能將所選的程式碼抽取成變數：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/R3c6TJQ.gif\" alt=\"extract-variable-vscode\" class=\"img_ev3q\"></p><p>Goland 能將所選的程式碼，以及相同的程式碼片段，同時抽取成變數：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/lhGSEzx.gif\" alt=\"extract-variable\" class=\"img_ev3q\"></p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"inline-variable內聯變數\">Inline Variable（內聯變數）<a href=\"#inline-variable內聯變數\" class=\"hash-link\" aria-label=\"Inline Variable（內聯變數）的直接連結\" title=\"Inline Variable（內聯變數）的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"時機-3\">時機<a href=\"#時機-3\" class=\"hash-link\" aria-label=\"時機的直接連結\" title=\"時機的直接連結\">​</a></h4><p>運算式或程式碼本身已經能清楚傳達訊息，不需要額外提取成變數，以避免額外負擔</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"做法-2\">做法<a href=\"#做法-2\" class=\"hash-link\" aria-label=\"做法的直接連結\" title=\"做法的直接連結\">​</a></h4><p>幫變數的程式碼貼回使用它的地方</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"change-function-declaration修改函式宣告式\">Change Function Declaration（修改函式宣告式）<a href=\"#change-function-declaration修改函式宣告式\" class=\"hash-link\" aria-label=\"Change Function Declaration（修改函式宣告式）的直接連結\" title=\"Change Function Declaration（修改函式宣告式）的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"時機-4\">時機<a href=\"#時機-4\" class=\"hash-link\" aria-label=\"時機的直接連結\" title=\"時機的直接連結\">​</a></h4><p>發現函式的名稱不易理解時</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"做法-3\">做法<a href=\"#做法-3\" class=\"hash-link\" aria-label=\"做法的直接連結\" title=\"做法的直接連結\">​</a></h4><p>改善名稱的一個好方法是：「寫下註解來說明函式的用途，再把註解變成一個名稱」：</p><ul><li>修改函式名稱：讓名稱能夠更清楚該函式做了什麼</li><li>修改函式參數：傳入整個物件或特定屬性</li></ul><div class=\"theme-admonition theme-admonition-info alert alert--info admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>請善用 IDE/Editor 的 refactor 功能</div><div class=\"admonitionContent_S0QG\"><p>修改函式或變數名稱時，請善用 Editor/IDE 提供的 refactor 的功能（預設是按 F2），它會自動幫你修改所有參照到這個變數的地方。</p></div></div><p>如果我們希望將這個函式的名稱從 <code>circum</code> 改為 <code>circumference</code>：</p><div class=\"language-go codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockTitle_Ktv7\">使用遷移做法修改函式名稱（修改前）</div><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-go codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">func</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">circum</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">radius </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">float64</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">float64</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> math</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">Pi </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> radius</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>但因為使用這個函式的地方非常多，可能沒辦法一次全部取代，所以我們暫時先同時保留兩個函式：</p><div class=\"language-diff codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-diff codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">func circum(radius float64) float64 {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"> return circum(radius)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">func circumference(radius float64) float64 {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\"> return 2 * math.Pi * radius</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>在有使用到這個函式的地方，陸續進行替換，知道全部替換完畢後，在移除舊有的函式。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"思考\">思考<a href=\"#思考\" class=\"hash-link\" aria-label=\"思考的直接連結\" title=\"思考的直接連結\">​</a></h4><p>在傳遞函式參數的時候，經常會碰到要傳遞整個物件或只有使用到屬性。當傳遞整個物件時，會讓函式和這個物件的介面耦合，但卻可以輕鬆的讀取該物件中的其他屬性，<strong>當未來邏輯改變時，不需要修改這個函式的任何呼叫方</strong>，並可以增加函式的封裝性。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"rename-variable更改變數名稱\">Rename Variable（更改變數名稱）<a href=\"#rename-variable更改變數名稱\" class=\"hash-link\" aria-label=\"Rename Variable（更改變數名稱）的直接連結\" title=\"Rename Variable（更改變數名稱）的直接連結\">​</a></h3><p>如果要修改「常數」名稱，和修改函式名稱一樣，一個好用的技巧是先同時新舊兩個變數名稱，逐步替換完畢後，再把舊的變數刪除。</p><p>假設我們希望把 <code>cpyNm</code> 改成 <code>companyName</code>：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockTitle_Ktv7\">修改前</div><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 這是原本的變數名稱</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> cpyNm </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Acme Gooseberries&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>我們先建立新的變數，並將舊的變數參照到新的變數：</p><div class=\"language-js codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockTitle_Ktv7\">修改後</div><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-js codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 這是希望修改後的變數名稱</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> companyName </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;Acme Gooseberries&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> cpyNm </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> companyName</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"combine-functions-into-transform將函式組成轉換函式\">Combine Functions into Transform（將函式組成轉換函式）<a href=\"#combine-functions-into-transform將函式組成轉換函式\" class=\"hash-link\" aria-label=\"Combine Functions into Transform（將函式組成轉換函式）的直接連結\" title=\"Combine Functions into Transform（將函式組成轉換函式）的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"動機\">動機<a href=\"#動機\" class=\"hash-link\" aria-label=\"動機的直接連結\" title=\"動機的直接連結\">​</a></h4><p>我們經常需要在取得原始資料後，透過一些前處理來取得 derived data，而許多的 derived state 或 derived data 都是根據相同的邏輯而產生。作者喜歡把所有這類的計算邏輯放在一起，以便在固定的地方尋找與修改他們。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"做法-4\">做法<a href=\"#做法-4\" class=\"hash-link\" aria-label=\"做法的直接連結\" title=\"做法的直接連結\">​</a></h4><p>使用「資料轉換函式」，用它接受資料，並計算所有的衍生值。</p><p>命名上，如果轉換邏輯產生的是相同東西，但是有額外的資訊時，作者習慣用 <code>enrich</code>，例如，<code>enrichReading</code>；但如果會產生的是不一樣的東西時，則習慣用 <code>transform</code>，例如，<code>transformReading</code>。</p><p>針對還沒轉換前的資料，作者習慣加上 <code>raw</code>，例如 <code>rawReading</code>。</p><div class=\"theme-admonition theme-admonition-info alert alert--info admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>Transform or Class</div><div class=\"admonitionContent_S0QG\"><p>如果來源資料會被程式碼所更新，使用類別比較好，才能確保每次拿到的都是最新且正確的資料。</p></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他\">其他<a href=\"#其他\" class=\"hash-link\" aria-label=\"其他的直接連結\" title=\"其他的直接連結\">​</a></h3><ul><li>Encapsulate Variable（封裝變數）</li><li>Introduce Parameter Object（使用參數物件）</li><li>Combine Functions into Class（將函式移入類別）</li><li>Split Phase（拆成不同階段）：當遇到處理兩件不同事情的一段程式碼時</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"chapter-08-移動功能\">Chapter 08: 移動功能<a href=\"#chapter-08-移動功能\" class=\"hash-link\" aria-label=\"Chapter 08: 移動功能的直接連結\" title=\"Chapter 08: 移動功能的直接連結\">​</a></h2><ul><li>Demo with Github Copilot</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"移動函式move-function\">移動函式（Move Function）<a href=\"#移動函式move-function\" class=\"hash-link\" aria-label=\"移動函式（Move Function）的直接連結\" title=\"移動函式（Move Function）的直接連結\">​</a></h3><p>有時你會很難決定函式最好的位置， 但是通常選擇越困難，這件事就越不重要。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"拆開迴圈split-loop\">拆開迴圈（Split Loop）<a href=\"#拆開迴圈split-loop\" class=\"hash-link\" aria-label=\"拆開迴圈（Split Loop）的直接連結\" title=\"拆開迴圈（Split Loop）的直接連結\">​</a></h3><p>許多開發者對於這種重構感到不適，因為明明能在一個迴圈做完的事情，卻要分在多個迴圈做，但作者認為應該要把「效能優化和重構分開來看」，一旦程式清楚了，再來優化。一般來說迴圈不會是效能的瓶頸，將不同的邏輯從迴圈拆分開來後，往往更把效能優化做的更好。</p><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"將迴圈改成流程replace-loop-with-pipeline\">將迴圈改成流程（Replace Loop with Pipeline）<a href=\"#將迴圈改成流程replace-loop-with-pipeline\" class=\"hash-link\" aria-label=\"將迴圈改成流程（Replace Loop with Pipeline）的直接連結\" title=\"將迴圈改成流程（Replace Loop with Pipeline）的直接連結\">​</a></h3><ul><li><a href=\"https://github.com/tc39/proposal-change-array-by-copy\" target=\"_blank\" rel=\"noopener noreferrer\">tc39/proposal-change-array-by-copy</a> @ tc39</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"移除死代碼remove-dead-code\">移除死代碼（Remove Dead Code）<a href=\"#移除死代碼remove-dead-code\" class=\"hash-link\" aria-label=\"移除死代碼（Remove Dead Code）的直接連結\" title=\"移除死代碼（Remove Dead Code）的直接連結\">​</a></h3><p>當程式碼再也用不到，我們就要刪除它。我們不在乎以後會不會用到它，就算這件事真的發生了，我也可以用版本控制系統把它挖出來。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"chapter-10簡化條件邏輯\">Chapter 10：簡化條件邏輯<a href=\"#chapter-10簡化條件邏輯\" class=\"hash-link\" aria-label=\"Chapter 10：簡化條件邏輯的直接連結\" title=\"Chapter 10：簡化條件邏輯的直接連結\">​</a></h2><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"分解條件邏輯decompose-conditional\">分解條件邏輯（Decompose Conditional）<a href=\"#分解條件邏輯decompose-conditional\" class=\"hash-link\" aria-label=\"分解條件邏輯（Decompose Conditional）的直接連結\" title=\"分解條件邏輯（Decompose Conditional）的直接連結\">​</a></h3><div class=\"language-ts codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockTitle_Ktv7\">修改前</div><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ts codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">getPrice</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"> quantity</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> plan</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> date </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> IGetPrice</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">number</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">let</span><span class=\"token plain\"> charge</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">number</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">|</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">undefined</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 原本的寫法</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">if</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">!</span><span class=\"token plain\">date</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">isBefore</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">plan</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">summerStart</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&amp;&amp;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">!</span><span class=\"token plain\">date</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">isAfter</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">plan</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">summerEnd</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    charge </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> quantity </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> plan</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">summerRate </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> plan</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">regularServiceCharge</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">else</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    charge </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> quantity </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> plan</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">regularServiceRate </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> plan</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">regularServiceCharge</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> charge</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>情況：條件判斷式中，不易理解的 condition 和 statement</p><p>做法：將條件式及其分支抽成函式（Extract Function），並進行妥善的命名。</p><p>可以看到這裡的條件式相當不容易理解。透過分解條件邏輯，我們可以：</p><ul><li>將條件式中的判斷式（condition）抽成函式</li><li>將條件式中的 statement 也抽成函式</li></ul><div class=\"language-diff codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockTitle_Ktv7\">將條件式中的判斷式（condition）抽成函式</div><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-diff codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">function isSummer({ plan, date }: IIsSummer): boolean {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">  return !date.isBefore(plan.summerStart) &amp;&amp; !date.isAfter(plan.summerEnd);</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">interface IGetPrice {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">  quantity: number;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">  plan: Plan;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token plain\">@@ -24,7 +32,7 @@ interface IGetPrice {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">function getPrice({ quantity, plan, date }: IGetPrice): number {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">  let charge: number;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">  if (!date.isBefore(plan.summerStart) &amp;&amp; !date.isAfter(plan.summerEnd)) {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">  if (isSummer({ plan, date })) {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">    charge = quantity * plan.summerRate * plan.regularServiceCharge;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">  } else {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">    charge = quantity * plan.regularServiceRate * plan.regularServiceCharge;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-diff codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockTitle_Ktv7\">將條件式中的 statement 也抽成函式</div><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-diff codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">function getSummerCharge({ quantity, plan }: IGetCharge): number {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">  return quantity * plan.summerRate * plan.regularServiceCharge;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">function getRegularCharge({ quantity, plan }: IGetCharge): number {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">  return quantity * plan.regularServiceRate * plan.regularServiceCharge;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">function getPrice({ quantity, plan, date }: IGetPrice): number {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">  let charge: number;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">  if (isSummer({ plan, date })) {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">    charge = quantity * plan.summerRate * plan.regularServiceCharge;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">    charge = getSummerCharge({ quantity, plan });</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">  } else {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">    charge = quantity * plan.regularServiceRate * plan.regularServiceCharge;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">    charge = getRegularCharge({ quantity, plan });</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">  }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">  return charge;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-diff codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockTitle_Ktv7\">改用三元表達式</div><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-diff codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">function getPrice({ quantity, plan, date }: IGetPrice): number {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">  let charge: number;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">  if (isSummer({ plan, date })) {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">    charge = getSummerCharge({ quantity, plan });</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">  } else {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">    charge = getRegularCharge({ quantity, plan });</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">  }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">  return charge;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">  return isSummer({ plan, date })</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">    ? getSummerCharge({ quantity, plan })</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">    : getRegularCharge({ quantity, plan });</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"consolidate-conditional-expression合併條件式\">Consolidate Conditional Expression（合併條件式）<a href=\"#consolidate-conditional-expression合併條件式\" class=\"hash-link\" aria-label=\"Consolidate Conditional Expression（合併條件式）的直接連結\" title=\"Consolidate Conditional Expression（合併條件式）的直接連結\">​</a></h3><div class=\"language-go codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockTitle_Ktv7\">修改前</div><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-go codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">func</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">disabilityAmount</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">employee Employee</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">int</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">if</span><span class=\"token plain\"> employee</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">seniority </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&lt;</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">if</span><span class=\"token plain\"> employee</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">monthsDisabled </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&gt;</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">12</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">if</span><span class=\"token plain\"> employee</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">isPartTime </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// calculate disability amount</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">999</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>情況：多個條件會有相同的回傳結果時</p><p>動機：</p><ul><li>It replaces a statement of <em>what I’m doing</em> with <em>why I’m doing</em> it.</li><li>如果彼此的檢查，在邏輯上是相互獨立時，就不會做這種重構，因為他們應該放在不同區塊</li></ul><div class=\"language-diff codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockTitle_Ktv7\">合併條件式（consolidate conditional expression）</div><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-diff codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">func disabilityAmount(employee Employee) int {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"> if employee.seniority &lt; 2 {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">  return 0</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"> }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"> if employee.monthsDisabled &gt; 12 {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">  return 0</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"> }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"> if employee.isPartTime {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"> if isNotEligibleForDisability(employee) {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">  return 0</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\"> }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\"> return 999</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">func isNotEligibleForDisability(employee Employee) bool {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"> return employee.seniority &lt; 2 || employee.monthsDisabled &gt; 12 || employee.isPartTime</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">func main() {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\"> result := disabilityAmount(employee)</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\"> fmt.Println(result)</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"replace-nested-conditional-with-guard-clauses將內嵌的條件式換成防衛敘句\">Replace Nested Conditional with Guard Clauses（將內嵌的條件式換成防衛敘句）<a href=\"#replace-nested-conditional-with-guard-clauses將內嵌的條件式換成防衛敘句\" class=\"hash-link\" aria-label=\"Replace Nested Conditional with Guard Clauses（將內嵌的條件式換成防衛敘句）的直接連結\" title=\"Replace Nested Conditional with Guard Clauses（將內嵌的條件式換成防衛敘句）的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"範例一\">範例一<a href=\"#範例一\" class=\"hash-link\" aria-label=\"範例一的直接連結\" title=\"範例一的直接連結\">​</a></h4><div class=\"language-go codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockTitle_Ktv7\">修改前</div><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-go codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">func</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">payAmount</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">p Employee</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> Amount </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">var</span><span class=\"token plain\"> result Amount</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">if</span><span class=\"token plain\"> p</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">isSeparated </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  result </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> Amount</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   amount</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\">     </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   reasonCode</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;SEP&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">else</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">if</span><span class=\"token plain\"> p</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">isRetired </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   result </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> Amount</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    amount</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\">     </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    reasonCode</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;RET&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">else</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// calculate amount</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   result </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">normalPayAmount</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> result</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>情況：當條件式中 <code>if</code> 和 <code>else</code> 內的陳述句重要程度不同時</p><p>做法：提早讓函式中的條件式回傳（early return）</p><p>動機：當我們使用 if-then-else 時，表示的是 <code>if</code> 和 <code>else</code> 中的陳述句同等重要。但如果我們用的是防衛敘句（guard clauses），意思則是指「<strong>這個情況不是這個功能的重點，如果發生了，就該做些什麼後離開</strong>」。</p><div class=\"language-go codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockTitle_Ktv7\">guard clause</div><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-go codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">func</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">payAmount</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">p Employee</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> Amount </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">if</span><span class=\"token plain\"> p</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">isSeparated </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line theme-code-block-highlighted-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> Amount</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line theme-code-block-highlighted-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   amount</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\">     </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line theme-code-block-highlighted-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   reasonCode</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;SEP&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line theme-code-block-highlighted-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">if</span><span class=\"token plain\"> p</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">isRetired </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line theme-code-block-highlighted-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> Amount</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line theme-code-block-highlighted-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   amount</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\">     </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line theme-code-block-highlighted-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   reasonCode</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&quot;RET&quot;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line theme-code-block-highlighted-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line theme-code-block-highlighted-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// calculate amount</span><span class=\"token plain\"></span><br></span><span class=\"token-line theme-code-block-highlighted-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">normalPayAmount</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"範例二reversing-the-conditions\">範例二：Reversing the Conditions<a href=\"#範例二reversing-the-conditions\" class=\"hash-link\" aria-label=\"範例二：Reversing the Conditions的直接連結\" title=\"範例二：Reversing the Conditions的直接連結\">​</a></h4><div class=\"language-go codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockTitle_Ktv7\">修改前</div><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-go codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">func</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">adjustedCapital</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">instrument Instrument</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">int</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> result </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">if</span><span class=\"token plain\"> instrument</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">capital </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&gt;</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">if</span><span class=\"token plain\"> instrument</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">interestRate </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&gt;</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&amp;&amp;</span><span class=\"token plain\"> instrument</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">duration </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&gt;</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">   result </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">instrument</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">income </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">/</span><span class=\"token plain\"> instrument</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">duration</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> instrument</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">adjustmentFactor</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> result</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-diff codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockTitle_Ktv7\">reverse condition with guard clause</div><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-diff codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">func adjustedCapital(instrument Instrument) int {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\"> result := 0</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"> if instrument.capital &gt; 0 {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">  if instrument.interestRate &gt; 0 &amp;&amp; instrument.duration &gt; 0 {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">   result = (instrument.income / instrument.duration) * instrument.adjustmentFactor</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">  }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"> if instrument.capital &lt;= 0 {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">  return result</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\"> }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"> if instrument.interestRate &lt;= 0 || instrument.duration &lt;= 0 {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">  return result</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"> }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"> result = (instrument.income / instrument.duration) * instrument.adjustmentFactor</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\"> return result</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\" style=\"display:inline-block\"></span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>由於某些條件都回傳相同的結果，所以可以搭配 consolidate conditional expression：</p><div class=\"language-diff codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockTitle_Ktv7\">搭配 consolidate conditional expression</div><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-diff codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">func adjustedCapital(instrument Instrument) int {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\"> result := 0</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"> if instrument.capital &lt;= 0 {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"> if instrument.capital &lt;= 0 || instrument.interestRate &lt;= 0 || instrument.duration &lt;= 0 {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">  return result</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\"> }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"> if instrument.interestRate &lt;= 0 || instrument.duration &lt;= 0 {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">  return result</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"> }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"> result = (instrument.income / instrument.duration) * instrument.adjustmentFactor</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"> return result</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"> return (instrument.income / instrument.duration) * instrument.adjustmentFactor</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"replace-conditional-with-polymorphism將條件式換成多型\">Replace Conditional with Polymorphism（將條件式換成多型）<a href=\"#replace-conditional-with-polymorphism將條件式換成多型\" class=\"hash-link\" aria-label=\"Replace Conditional with Polymorphism（將條件式換成多型）的直接連結\" title=\"Replace Conditional with Polymorphism（將條件式換成多型）的直接連結\">​</a></h3><p>情況：根據不同的「類型」會回傳不同的結果</p><p>動機：根據不同的類型（class）/型別（type）來處理條件邏輯</p><div class=\"language-typescript codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockTitle_Ktv7\">修改前</div><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-typescript codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">type</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">Bird</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  name</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">string</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  type</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;EuropeanSwallow&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">|</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;AfricanSwallow&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">|</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;NorwegianBlueParrot&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  numberOfCoconuts</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">number</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  voltage</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">number</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  isNailed</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">boolean</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">plumages</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">birds</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> Bird</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">new</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">Map</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">birds</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">map</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">b</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token plain\">b</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">name</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">plumage</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">b</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">speeds</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">birds</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> Bird</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">new</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">Map</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">birds</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">map</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">b</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token plain\">b</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">name</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">airSpeedVelocity</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">b</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">plumage</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">bird</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> Bird</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">switch</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">bird</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">type</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">case</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;EuropeanSwallow&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;average&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">case</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;AfricanSwallow&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> bird</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">numberOfCoconuts </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&gt;</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">?</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;tired&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;average&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">case</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;NorwegianBlueParrot&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> bird</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">voltage </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&gt;</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">100</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">?</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;scorched&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;beautiful&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">default</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;unknown&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">airSpeedVelocity</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">bird</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> Bird</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">switch</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">bird</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">type</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">case</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;EuropeanSwallow&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">35</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">case</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;AfricanSwallow&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">40</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">-</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\"> bird</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">numberOfCoconuts</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">case</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;NorwegianBlueParrot&#x27;</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> bird</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">isNailed </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">?</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">10</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">+</span><span class=\"token plain\"> bird</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">voltage </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">/</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">10</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">default</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">null</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><div class=\"language-diff codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockTitle_Ktv7\">建立類別</div><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-diff codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">type Bird = {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">class Bird {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">  name: string;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">  type: &#x27;EuropeanSwallow&#x27; | &#x27;AfricanSwallow&#x27; | &#x27;NorwegianBlueParrot&#x27;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">  numberOfCoconuts: number;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">  voltage: number;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">  isNailed: boolean;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">};</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">  constructor({ name, type, numberOfCoconuts, voltage, isNailed }: Bird) {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">    this.name = name;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">    this.type = type;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">    this.numberOfCoconuts = numberOfCoconuts;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">    this.voltage = voltage;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">    this.isNailed = isNailed;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">  }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">  get plumage() {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">    switch (this.type) {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">      case &#x27;EuropeanSwallow&#x27;:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">        return &#x27;average&#x27;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">      case &#x27;AfricanSwallow&#x27;:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">        return this.numberOfCoconuts &gt; 2 ? &#x27;tired&#x27; : &#x27;average&#x27;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">      case &#x27;NorwegianBlueParrot&#x27;:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">        return this.voltage &gt; 100 ? &#x27;scorched&#x27; : &#x27;beautiful&#x27;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">      default:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">        return &#x27;unknown&#x27;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">    }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">  }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">  get airSpeedVelocity() {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">    switch (this.type) {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">      case &#x27;EuropeanSwallow&#x27;:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">        return 35;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">      case &#x27;AfricanSwallow&#x27;:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">        return 40 - 2 * this.numberOfCoconuts;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">      case &#x27;NorwegianBlueParrot&#x27;:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">        return this.isNailed ? 0 : 10 + this.voltage / 10;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">      default:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">        return null;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">    }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">  }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">function plumage(bird: Bird) {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">  switch (bird.type) {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">    case &#x27;EuropeanSwallow&#x27;:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">      return &#x27;average&#x27;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">    case &#x27;AfricanSwallow&#x27;:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">      return bird.numberOfCoconuts &gt; 2 ? &#x27;tired&#x27; : &#x27;average&#x27;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">    case &#x27;NorwegianBlueParrot&#x27;:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">      return bird.voltage &gt; 100 ? &#x27;scorched&#x27; : &#x27;beautiful&#x27;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">    default:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">      return &#x27;unknown&#x27;;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">  }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">  return new Bird(bird).plumage;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">}</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">function airSpeedVelocity(bird: Bird) {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token unchanged line\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">  switch (bird.type) {</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">    case &#x27;EuropeanSwallow&#x27;:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">      return 35;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">    case &#x27;AfricanSwallow&#x27;:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">      return 40 - 2 * bird.numberOfCoconuts;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">    case &#x27;NorwegianBlueParrot&#x27;:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">      return bird.isNailed ? 0 : 10 + bird.voltage / 10;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">    default:</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">      return null;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token deleted-sign deleted prefix deleted\" style=\"color:rgb(255, 85, 114)\">-</span><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\">  }</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token deleted-sign deleted line\" style=\"color:rgb(255, 85, 114)\"></span><span class=\"token inserted-sign inserted prefix inserted\" style=\"color:rgb(195, 232, 141)\">+</span><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\">  return new Bird(bird).airSpeedVelocity;</span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token inserted-sign inserted line\" style=\"color:rgb(195, 232, 141)\"></span><span class=\"token unchanged prefix unchanged\"> </span><span class=\"token unchanged line\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"加入特例introduce-special-case\">加入特例（Introduce Special Case）<a href=\"#加入特例introduce-special-case\" class=\"hash-link\" aria-label=\"加入特例（Introduce Special Case）的直接連結\" title=\"加入特例（Introduce Special Case）的直接連結\">​</a></h3><p>動機：程式中針對特定值都採取了相同的動作時，把那個行為拿到單一地點。</p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"範例\">範例<a href=\"#範例\" class=\"hash-link\" aria-label=\"範例的直接連結\" title=\"範例的直接連結\">​</a></h4><div class=\"language-ts codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ts codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">Site</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">private</span><span class=\"token plain\"> _customer</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> Customer </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">|</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;unknown&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;unknown&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">get</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">customer</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line theme-code-block-highlighted-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// !! 把原本判斷的地方統一改到這裡</span><span class=\"token plain\"></span><br></span><span class=\"token-line theme-code-block-highlighted-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">this</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">_customer </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">===</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;unknown&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">?</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">new</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">UnknownCustomer</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">this</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">_customer</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">interface</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">ICustomer</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">readonly</span><span class=\"token plain\"> name</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">string</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">readonly</span><span class=\"token plain\"> paymentHistory</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> IPaymentHistory</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  billingPlan</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">any</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 新添加的屬性</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">readonly</span><span class=\"token plain\"> isUnknown</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">boolean</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">Customer</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">implements</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">ICustomer</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">/* ... */</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 實作一個 `UnknownCustomer` 的 class，它具有和原本 `Customer` 相同的屬性或方法，只是它回傳的結果都是當 customer 為 `unknown` 時的結果</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">UnknownCustomer</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">implements</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">ICustomer</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">/* ... */</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// theCustomer 一開始就會根據是不是 &quot;unknown&quot; 而有不同的屬性</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> theCustomer </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">new</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">Site</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">customer</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 拿到的 name 會是根據 customer 是不是 unknown 而有不同</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> name </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> theCustomer</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">name</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><ul><li>實作一個 <code>UnknownCustomer</code> 的 class，它具有和原本 <code>Customer</code> 相同的屬性或方法，只是它回傳的結果都是當 customer 為 <code>unknown</code> 時的結果</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"範例使用物件常值\">範例：使用物件常值<a href=\"#範例使用物件常值\" class=\"hash-link\" aria-label=\"範例：使用物件常值的直接連結\" title=\"範例：使用物件常值的直接連結\">​</a></h3><p>在前一個例子中，由於 Customer 能改被更新（<code>billingPlan</code> 是 setter），所以我們建立一個專門的類別（class）。</p><p>在沒有 setter 的情況下，我們可以建立一個參數的物件即可，例如：</p><div class=\"language-ts codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ts codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 因為會回傳的是「常數」，建議使用「Readonly」以避免被修改</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">createUnknownCustomer</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> Readonly</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&lt;</span><span class=\"token plain\">ICustomer</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    isUnknown</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token boolean\" style=\"color:rgb(255, 88, 116)\">true</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    name</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;occupant&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    paymentHistory</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      weeksDelinquentInLastYear</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    billingPlan</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> registry</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">billingPlans</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">basic</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">class</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">Site</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">private</span><span class=\"token plain\"> _customer</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> Customer </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">|</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;unknown&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;unknown&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">get</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">customer</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line theme-code-block-highlighted-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 改成呼叫 createUnknownCustomer</span><span class=\"token plain\"></span><br></span><span class=\"token-line theme-code-block-highlighted-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">this</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">_customer </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">===</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;unknown&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">?</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">createUnknownCustomer</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">this</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">_customer</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"加入斷言introduce-assertion\">加入斷言（Introduce Assertion）<a href=\"#加入斷言introduce-assertion\" class=\"hash-link\" aria-label=\"加入斷言（Introduce Assertion）的直接連結\" title=\"加入斷言（Introduce Assertion）的直接連結\">​</a></h3><ul><li>An assertion is a conditional statement presumed to be always true.</li><li>斷言失敗就代表程式有錯</li><li>即時把這些斷言全部移除，程式也應該能正確執行</li><li>斷言不應該影響系統的執行，有沒有斷言都不能改變系統的行為</li><li>斷言是追蹤 bug 的最後一種手段</li></ul><h3 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"其他好用的方法\">其他好用的方法<a href=\"#其他好用的方法\" class=\"hash-link\" aria-label=\"其他好用的方法的直接連結\" title=\"其他好用的方法的直接連結\">​</a></h3><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"搭配-iife\">搭配 IIFE<a href=\"#搭配-iife\" class=\"hash-link\" aria-label=\"搭配 IIFE的直接連結\" title=\"搭配 IIFE的直接連結\">​</a></h4><p><img loading=\"lazy\" src=\"../../../i.imgur.com/nGTMfd6.png\" alt=\"Imgur\" class=\"img_ev3q\"></p><h4 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"使用-object-literal\">使用 Object Literal<a href=\"#使用-object-literal\" class=\"hash-link\" aria-label=\"使用 Object Literal的直接連結\" title=\"使用 Object Literal的直接連結\">​</a></h4><div class=\"theme-admonition theme-admonition-info alert alert--info admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z\"></path></svg></span>信息</div><div class=\"admonitionContent_S0QG\"><p><a href=\"https://ultimatecourses.com/blog/deprecating-the-switch-statement-for-object-literals\" target=\"_blank\" rel=\"noopener noreferrer\">Replacing switch statements with Object literals</a></p></div></div><p>使用 Object Literal 來省去 <code>if else</code> 或 <code>switch</code> 的使用：</p><div class=\"language-ts codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ts codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">type</span><span class=\"token plain\"> </span><span class=\"token class-name\" style=\"color:rgb(255, 203, 107)\">Fruit</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;apple&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">|</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;orange&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">|</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;banana&#x27;</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">|</span><span class=\"token plain\"> </span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;strawberry&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">logFruit</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">fruit</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> Fruit</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token function-variable function\" style=\"color:rgb(130, 170, 255)\">apple</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;🍎&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token function-variable function\" style=\"color:rgb(130, 170, 255)\">orange</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;🍊&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token function-variable function\" style=\"color:rgb(130, 170, 255)\">strawberry</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;🍓&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token function-variable function\" style=\"color:rgb(130, 170, 255)\">banana</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">console</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">log</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;🍌&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token plain\">fruit</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">logFruit</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;apple&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;🍎&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>透過 Object Literal，可以把原本長這樣的程式碼：</p><div class=\"language-ts codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ts codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">getRate</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"> price</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> billingInterval </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> IGetRate</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">number</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">|</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">null</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">let</span><span class=\"token plain\"> rate</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">number</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">|</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">null</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">null</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">switch</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">billingInterval</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">case</span><span class=\"token plain\"> BillingInterval</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">Month</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      rate </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">isCustom</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">price</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">monthly</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">?</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">null</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> price</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">monthly</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token keyword\" style=\"font-style:italic\">break</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">case</span><span class=\"token plain\"> BillingInterval</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">Year</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      rate </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">isCustom</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">price</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">yearly</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">?</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">null</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> price</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">yearly</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">      </span><span class=\"token keyword\" style=\"font-style:italic\">break</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">default</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> rate</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>改成（精簡非常多）：</p><div class=\"language-ts codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-ts codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">function</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">getRate</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"> price</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> billingInterval </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> IGetRate</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> </span><span class=\"token builtin\" style=\"color:rgb(130, 170, 255)\">number</span><span class=\"token plain\"> </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">|</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">null</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> rate </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token plain\">BillingInterval</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">Month</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> price</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">monthly</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token plain\">BillingInterval</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">Year</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:</span><span class=\"token plain\"> price</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">yearly</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">[</span><span class=\"token plain\">billingInterval</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">]</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">if</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">isCustom</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">rate</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">    </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">null</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">return</span><span class=\"token plain\"> rate</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hsoftware-development Abstraction pjchender.dev": {
    "prefix": "hsoftware-development Abstraction pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>Abstraction</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"the-wrong-abstraction\">The Wrong Abstraction<a href=\"#the-wrong-abstraction\" class=\"hash-link\" aria-label=\"The Wrong Abstraction的直接連結\" title=\"The Wrong Abstraction的直接連結\">​</a></h2><blockquote><p>以下內容來自：<a href=\"https://sandimetz.com/blog/2016/1/20/the-wrong-abstraction\" target=\"_blank\" rel=\"noopener noreferrer\">The Wrong Abstraction</a>。</p></blockquote><p>如果你發現自己開始在共用的程式碼中開始添加額外的參數或條件判斷是時，表示原本的抽象化可能已經不在適用。一開始的時候這個抽象化可能是正確的，但隨著需求的改變，它已經不再適用。當這個抽象化已經不再適用時，最好的方式是重新使用 duplication 的方式來寫程式，而不是在原本抽象化中的程式裡掙扎。你可以這麼做：</p><ol><li>重新使用 duplication 的方式，將原本抽象化後的邏輯以 inline 的方式寫進原本呼叫它的位置</li><li>只保留下實際上會用到的邏輯，並移除其他不相干的</li><li>開始並重新進行抽象化</li></ol></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hsoftware-development Inheritance and Composition pjchender.dev": {
    "prefix": "hsoftware-development Inheritance and Composition pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>Inheritance and Composition</h1></header><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"inheritance\">Inheritance<a href=\"#inheritance\" class=\"hash-link\" aria-label=\"Inheritance的直接連結\" title=\"Inheritance的直接連結\">​</a></h2><ul><li>使用 inheritance 的話，一旦 parent class 需要修改，可能就會連帶影響到所有的 child class，這個改動成本是很大的。</li><li>Inheritance 同時扮演了兩個角色：「reuse code」（透過繼承）和「create abstraction」（透過 parent class）</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"composition\">Composition<a href=\"#composition\" class=\"hash-link\" aria-label=\"Composition的直接連結\" title=\"Composition的直接連結\">​</a></h2><ul><li>Composition is the pattern you&#x27;re doing whenever you reuse code without inheritance</li></ul></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  },
  "hsoftware-development 程式是人寫出來的，測試也是 pjchender.dev": {
    "prefix": "hsoftware-development 程式是人寫出來的，測試也是 pjchender.dev",
    "type": "html",
    "isCode": false,
    "body": [
      "<div><h1>程式是人寫出來的，測試也是</h1></header><blockquote><p>本文章首次刊登於 <a href=\"https://www.xuemi.co/projects/83b040a7-8140-4383-a2ae-31d49aa7b250\" target=\"_blank\" rel=\"noopener noreferrer\">Web 長島計畫</a>《第三期：<a href=\"https://www.xuemi.co/programs/2f69595f-f11c-4278-b209-19117549c3ff\" target=\"_blank\" rel=\"noopener noreferrer\">測試，這不是測試</a>》</p></blockquote><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"軟體測試是什麼\">軟體測試是什麼<a href=\"#軟體測試是什麼\" class=\"hash-link\" aria-label=\"軟體測試是什麼的直接連結\" title=\"軟體測試是什麼的直接連結\">​</a></h2><p>軟體開發的過程中，除了功能本身的開發外，還有一個很重要的環節是「測試」。有的人聽到「寫測試」，直覺反應是「好麻煩」，或覺得這只是個浪費時間的事。如果程式一開始就寫的好，為什麼還需要花時間來寫測試呢？</p><p>當然，如果能確定程式是「正確無誤的」，就可以省去寫測試的時間。然而，實際情況下，程式是人寫出來的；是人寫的，就有機會犯錯，只是錯的多或少罷了。</p><p>如果把整個「軟體開發」的過程比喻做「寫考卷」，開發者就像是寫考卷的學生。不管你有沒有讀書，都還是可以作答並交出考卷。至於要怎麼知道答案寫的正不正確、能夠得到多少分數，就得要靠「對答案」才能知道了。「對答案」這個動作，其實就是「測試」在做的事。測試是在核對開發者開發出來的功能，是不是確實符合 PM 撰寫的產品規格。</p><p>相信讀者一定有過這樣的經驗：我們認為這題答案一定是 A，但解答卻是 D。寫程式也是一樣，你可能會認為，程式這樣寫應該就「對了」。然而，程式執行後到底會不會有問題，還是得要做了「測試」才知道。</p><p>實際上，平常在開發功能的過程中，開發者就一直在做測試了。</p><p>假設你正在開發一個提示視窗。你預期使用者點了問號的按鈕後，這個視窗就會彈出在畫面上。於是，在開發好這個功能後，你會實際去點這個按鈕。點下去之後，如果這個提示視窗也真的有跳出來，你才會認為，你成功完成這個功能了。在這個前端的例子中，你「預期」點了按鈕應該要有反應，且程式執行後，也「確實」得到你預期的結果。後端的例子可以是這樣的：在開發好 API 後，你會透過工具來實際看看發出請求後的「實際結果」，確認這些結果是否和你的「預期結果」相同。</p><p>這個比較「預期結果」和「實際結果」是否相同的過程，就是測試的核心概念。這裡的一個重點是，<strong>如果連你自己也不知道預期的正確結果是什麼，那根本沒辦法開始進行測試</strong>。</p><div class=\"theme-admonition theme-admonition-tip alert alert--success admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 12 16\"><path fill-rule=\"evenodd\" d=\"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z\"></path></svg></span>提示</div><div class=\"admonitionContent_S0QG\"><p>如果連你自己也不知道預期的正確結果是什麼，那根本沒辦法開始進行測試</p></div></div><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"用程式測試程式寫測試\">用程式測試程式：寫測試<a href=\"#用程式測試程式寫測試\" class=\"hash-link\" aria-label=\"用程式測試程式：寫測試的直接連結\" title=\"用程式測試程式：寫測試的直接連結\">​</a></h2><p>既然說「比較『預期結果』和『實際結果』是否相同的過程」就已經是在進行測試，為什麼我們還需要額外花時間寫測試呢？其中最大的差別就在於「手動」和「自動」。</p><p>開發者之所以要「寫測試」，就是通過程式的方式，把手動測試這個繁瑣的流程給自動化。如此，就可以在每次產品上線前，讓程式自動跑一次完整的測試，而不需要手動測試每一項功能。剩下來的時間，不論是要用來開發新功能、外出買一杯珍珠奶茶、或是轉頭和同事聊聊天，都要比每次重複手動執行測試開心得多。</p><p>除此之外，測試檔本身就是一份帶有記錄的文件。開發者可以寫下當初開發時沒留意到的情境，當成測試案例，避免未來有其他開發者重蹈覆轍。</p><p>接著就讓我們來看一下，通常測試實際是怎麼寫的。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"實際的測試範例\">實際的測試範例<a href=\"#實際的測試範例\" class=\"hash-link\" aria-label=\"實際的測試範例的直接連結\" title=\"實際的測試範例的直接連結\">​</a></h2><p>讓我們以 JavaScript 的 Jest 為例來看一段實際測試的程式碼。</p><p>假設我們寫了一個名為 <code>sum</code> 的函式，這個函式應該要把參數的值相加後回傳。如果 sum 這個函式帶入的參數是 1 和 2，應該預期可以得到 3。這時候針對 sum 這個函式，就可以寫出如下的測試：</p><div class=\"language-javascript codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-javascript codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">it</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;sums numbers&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> actualResult </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">sum</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> expectedResult </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">3</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">expect</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">actualResult</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">toEqual</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">expectedResult</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>即使你不會寫 JavaScript，從變數的命名，應該也可以猜想這段程式執行的內容：</p><ul><li>這裡有一個名為 <code>sum</code> 的函式，我們把這個函式執行的結果存成變數 <code>actualResult</code></li><li>接著把預期的正確結果存成變數 <code>expectedResult</code></li><li>最後透過 <code>expect</code> 這個方法，來比較「實際執行的結果（actualResult）」是不是和預期的結果（expectedResult）相同（<code>toEqual</code>）</li></ul><p>上面這個過程就是最基本測試的概念。透過程式來測試寫好的程式，將可以不用再手動透過 <code>console.log()</code> 的方式把結果列印出，再比對原本寫的 <code>sum</code> 有沒有錯。以上這些動作，都可以透過程式自動幫我們進行檢測。</p><p>如果測試中預期結果和函式實際執行後的結果相同時，就會得到 PASS：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/yzbLuCW.png\" alt=\"Screen Shot 2021-12-20 at 12.34.10 AM\" class=\"img_ev3q\"></p><p>相反的，如果 <code>sum</code> 這個函式的實作邏輯有錯誤，<code>sum(1, 2)</code> 得到的並不是 3 時，就會顯示 FAIL：</p><p><img loading=\"lazy\" src=\"../../../i.imgur.com/ivEFcAG.png\" alt=\"Screen Shot 2021-12-20 at 12.36.16 AM\" class=\"img_ev3q\"></p><p>這裡測試的結果告訴開發者，雖然我們預期會得到 3，但實際上得到的是 0，所以測試並不通過。</p><p>這裡雖然是以 JavaScript 來舉例，但實際上，測試的核心概念在不同語言間是通用的，都是去比較「預期的正確結果」和「程式執行後的實際結果」是否相同來判斷。</p><p>例如，以 Go 語言來說：</p><div class=\"language-go codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-go codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token keyword\" style=\"font-style:italic\">func</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">TestAdd</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">t </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">*</span><span class=\"token plain\">testing</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token plain\">T</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> actualResult </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">Sum</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> expectedResult </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">:=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">3</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token keyword\" style=\"font-style:italic\">if</span><span class=\"token plain\"> actualResult </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">!=</span><span class=\"token plain\"> expectedResult </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  t</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">Fail</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>同樣會看到需要去比較 <code>actualResult</code> 是否和 <code>expectedResult</code> 相同，如果不同的話，該測試就會 Fail。</p><p>如果讀者有在 LeetCode 刷題的經驗，實際上，當你提交答案時，背後運行的邏輯就和執行測試是一樣的。它已經預先列好了預期的正確結果（expectedResult），然後用你答案中所寫的函式去實際執行，看看得到的實際結果（actualResult）和預期的正確結果是否相同，來判斷你有沒有通過測試。這些測試，都可以透過程式實際執行，而不需要人工額外核對。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"測試的類型\">測試的類型<a href=\"#測試的類型\" class=\"hash-link\" aria-label=\"測試的類型的直接連結\" title=\"測試的類型的直接連結\">​</a></h2><p>你可能好奇，透過上面這種方法，就可以針對各種不同情境，像是網頁 UI、API 的 request-response 進行測試嗎？</p><p>答案是肯定的。根據測試的對象和範疇不同，可以分成幾種不同類型的測試。像是上面的例子中，我們針對單一 <code>sum</code> 這個函式所進行的測試，一般我們就稱作「單元測試（unit testing）」。另一方面，如果是需要多個函式共同運作才能達到的測試，例如測試某個前端框架中的元件（component）、或是測試一個 API 回應的資料是否正確這類的，則會稱作「整合測試（integration testing）」。還有一種甚至使用程式的方式，來模擬使用者實際操作網頁的行為，就好像真的有一個使用者在操作網頁一般，看整個網站的功能能否正常運作；這種類型的測試則稱作「端對端測試（End to End Testing）」。</p><p>但不論是上面那一種，核心的概念都還是一樣的：</p><ul><li>都是透過程式，而不是人工手動，來測試原本的程式邏輯是否正確</li><li>開發者都需要先有一個預期正確的結果，再拿實際執行後的結果，和預期的結果做比對</li></ul><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"一定要寫測試嗎\">一定要寫測試嗎<a href=\"#一定要寫測試嗎\" class=\"hash-link\" aria-label=\"一定要寫測試嗎的直接連結\" title=\"一定要寫測試嗎的直接連結\">​</a></h2><p>答案是「不一定」。更精確來說，答案會隨時空背景而有不同。</p><p>撰寫測試的好處，除了確保「目前」程式的穩定性外，還有一個重點：我們想要省去「未來」重複測試時，所需的人力和時間成本。寫測試絕對是個好習慣，但寫測試的當下，就需要額外的時間和人力；如果未來程式邏輯有改動，測試也勢必需要再跟著調整。</p><p>所以，如果你只是初步有個想法，想要實作看看其他人使用的反應，未來程式邏輯改動的幅度還很大；又或者只是寫個簡單的小工具，未來也不會再添加新功能，我會認為，你未必需要在一開始就補齊測試。甚至，就算假設你的專案已經稍有規模，然而你的公司目前採取的商業模式，是以開發新功能以確保新客戶簽約為主，你也未必需要把有限的資源，投入在補齊測試的撰寫上。</p><p>要特別留意的重點是，測試這件事情絕對不是全有全無；不是說你要寫測試，就一定每隻程式都要寫到。相較於完全不寫測試，或者一寫就全部的程式都要有測試，或許可以先針對你有疑慮、或是規格比較確定的程式來撰寫測試。筆者認為，相較全有全無的做法，這樣的策略比較有彈性，而且才能夠走得長久。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"測試不是考試分數寫愈多不代表程式品質就越好\">測試不是考試分數，寫愈多不代表程式品質就越好<a href=\"#測試不是考試分數寫愈多不代表程式品質就越好\" class=\"hash-link\" aria-label=\"測試不是考試分數，寫愈多不代表程式品質就越好的直接連結\" title=\"測試不是考試分數，寫愈多不代表程式品質就越好的直接連結\">​</a></h2><p>有些入門的開發者，在認識了測試的概念後，會誤以為測試寫越多，程式的品質就一定越好、bug 也一定會越少。因此，她們花了非常多的時間和篇幅在寫測試。然而，千萬切記，測試本身也程式，就和開發功能時所寫出來的程式一樣，絕對不是越多越好。比起亂槍打鳥，寫了一大堆不可能發生的測試案例，更好的策略，是用更精簡、清楚的方式，來完成預期的測試項目。</p><p>有時，甚至會看到「球員兼裁判」的荒謬情況，直接把程式執行的實際結果，當成「預期的正確結果」來進行測試。這種荒謬的測試方式，欠缺對於程式正確結果的思考。舉例來說，我們知道 <code>sum(1, 2)</code> 要得到 3，但現在這個程式卻回傳了 0。然而，如果寫測試的開發者沒有去思考正確的答案應該要是 3，而是直接拿 0 當作預期的結果，就會寫出這樣的測試：</p><div class=\"language-javascript codeBlockContainer_Ckt0 theme-code-block\" style=\"--prism-color:#bfc7d5;--prism-background-color:#292d3e\"><div class=\"codeBlockContent_biex\"><pre tabindex=\"0\" class=\"prism-code language-javascript codeBlock_bY9V thin-scrollbar\"><code class=\"codeBlockLines_e6Vv\"><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">it</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token string\" style=\"color:rgb(195, 232, 141)\">&#x27;sums numbers&#x27;</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token plain\"> </span><span class=\"token arrow operator\" style=\"color:rgb(137, 221, 255)\">=&gt;</span><span class=\"token plain\"> </span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">{</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> actualResult </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">sum</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">1</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">,</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">2</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 0</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token keyword\" style=\"font-style:italic\">const</span><span class=\"token plain\"> expectedResult </span><span class=\"token operator\" style=\"color:rgb(137, 221, 255)\">=</span><span class=\"token plain\"> </span><span class=\"token number\" style=\"color:rgb(247, 140, 108)\">0</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"> </span><span class=\"token comment\" style=\"color:rgb(105, 112, 152);font-style:italic\">// 直接拿 sum (1, 2) 的結果當作預期的正確結果</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\" style=\"display:inline-block\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\">  </span><span class=\"token function\" style=\"color:rgb(130, 170, 255)\">expect</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">actualResult</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">.</span><span class=\"token method function property-access\" style=\"color:rgb(130, 170, 255)\">toEqual</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">(</span><span class=\"token plain\">expectedResult</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><span class=\"token plain\"></span><br></span><span class=\"token-line\" style=\"color:#bfc7d5\"><span class=\"token plain\"></span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">}</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">)</span><span class=\"token punctuation\" style=\"color:rgb(199, 146, 234)\">;</span><br></span></code></pre><div class=\"buttonGroup__atx\"><button type=\"button\" aria-label=\"複製代碼至剪貼簿\" title=\"複製\" class=\"clean-btn\"><span class=\"copyButtonIcons_eSgA\" aria-hidden=\"true\"><svg viewBox=\"0 0 24 24\" class=\"copyButtonIcon_y97N\"><path fill=\"currentColor\" d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\"></path></svg><svg viewBox=\"0 0 24 24\" class=\"copyButtonSuccessIcon_LjdS\"><path fill=\"currentColor\" d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\"></path></svg></span></button></div></div></div><p>這時候測試確實會 PASS 通過，且測試的覆蓋率也有提升，但這樣的測試有意義嗎？</p><p>寫測試和軟體開發一樣，都需要思考和確保程式品質，絕對不是越多越好。在網路上，也有許多文章在說明如何寫出有品質的測試。有興趣的讀者可再根據自己所使用的程式語言，去查找相關的 best practice 或 guideline。</p><h2 class=\"anchor anchorWithStickyNavbar_LWe7\" id=\"測試的實踐\">測試的實踐<a href=\"#測試的實踐\" class=\"hash-link\" aria-label=\"測試的實踐的直接連結\" title=\"測試的實踐的直接連結\">​</a></h2><p>由於撰寫測試的確需要花上額外的時間，所以在許多公司中，會有品質保證團隊（Quality Assurance Team）。QA 團隊會整理和思考各種可能的測試情境，並且根據需求，撰寫不同類型的測試（大多是端對端測試）。另外，也會再搭配手動和自動化測試，確保產品在上線後能良好運作。</p><p>除了公司中有專職的 QA 團隊，來進行軟體測試外，還有一種開發流程稱作「測試驅動開發（Test-Driven Development，TDD）」。前面我們有提到，測試的核心概念就是去比較預期結果和實際結果。一般來說，我們會先把功能開發完後，才去寫測試來檢驗開發的功能是否符合預期，但 TDD 的流程則相反。</p><p>在 TDD 中會先撰寫測試，也就是先定義好預期的正確結果是什麼。不過，由於還沒有實際開發這個功能，所以可以預期的，一開始測試執行的結果一定是失敗的。然而，因為已經把預期的結果都定義好了，所以開發者接著要做的，就是開始實作這些功能，把原先失敗的測試，最終都轉變為成功後才算是完成開發。透過 TDD，能夠讓開發者養成先思考再實作的習慣，先釐清功能的需求、規格和介面後才能開始實作。</p><p>這篇文章中，說明了撰寫測試的許多好處，但要特別留意的是：<strong>透過測試的撰寫，可以有效避免程式可能的錯誤，但並不能保證程式一定沒有問題</strong>。畢竟，使用者實際的使用環境，往往比測試時複雜許多。除了 App 本身的穩定度之外，還會受限於 App 執行的環境，例如作業系統、網路速度、硬體規格等等。甚至，使用者的操作複雜且意想不到，也都可能導致意料之外的問題產生。這也就是為什麼，有些軟體升級後，馬上就會在推出一版更新（patch）來修正問題－－因為實際的環境，往往比測試複雜更多。不過，這並不是不寫測試的理由。畢竟，儘管寫測試也許不能讓你的軟體完全沒問題，但不做測試的軟體，絕對有更高的機會，連正常的流程都走不完就壞了。</p><div class=\"theme-admonition theme-admonition-tip alert alert--success admonition_LlT9\"><div class=\"admonitionHeading_tbUL\"><span class=\"admonitionIcon_kALy\"><svg viewBox=\"0 0 12 16\"><path fill-rule=\"evenodd\" d=\"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z\"></path></svg></span>提示</div><div class=\"admonitionContent_S0QG\"><p>透過測試的撰寫，可以有效避免程式可能的錯誤，但並不能保證程式一定沒有問題</p></div></div></div>",
      "<style>.buttonGroup__atx{display:none;}",
      "pre {background-color: rgb(41,45,62);}</style>"
    ],
    "description": "https://pjchender.dev"
  }
}