"use strict";(self["webpackChunkblocklygameweb"]=self["webpackChunkblocklygameweb"]||[]).push([[492],{1484:(t,e,o)=>{o.d(e,{Z:()=>g});var s=o(3673);const i={class:"blocklyDiv",ref:"blocklyDiv"},l={ref:"blocklyToolbox",style:{display:"none"}};function r(t,e,o,r,n,c){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",i,null,512),(0,s._)("template",l,[(0,s.WI)(t.$slots,"default",{},void 0,!0)],512)])}var n=o(755),c=o.n(n);
/**
 * @license
 *
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a={name:"BlocklyComponent",props:["options"],data(){return{mainWorkspace:null}},mounted(){var t=this.$props.options||{};t.toolbox||(t.toolbox=this.$refs["blocklyToolbox"]),this.mainWorkspace=c().inject(this.$refs["blocklyDiv"],t),c().defineBlocksWithJsonArray([{type:"player_start",message0:"Start",colour:355,message0:"Start",message1:"do %1",args1:[{type:"input_statement",name:"DO"}]}]),c().JavaScript.player_start=function(t){return c().JavaScript.statementToCode(t,"DO")};var e='<xml>  <block type="player_start" deletable="false" x="70" y="70">  </block></xml>',o=c().Xml.textToDom(e);c().Xml.domToWorkspace(o,c().getMainWorkspace())}};var h=o(4260);const u=(0,h.Z)(a,[["render",r],["__scopeId","data-v-295a7970"]]),g=u},7492:(t,e,o)=>{o.r(e),o.d(e,{default:()=>k});var s=o(3673);const i=t=>((0,s.dD)("data-v-012be2b5"),t=t(),(0,s.Cn)(),t),l=i((()=>(0,s._)("label",{text:"Logic","web-class":"ioLabel"},null,-1))),r=i((()=>(0,s._)("label",{text:"Debug/Output:","web-class":"ioLabel"},null,-1))),n=(0,s.Uk)("abc");function c(t,e,o,i,c,a){const h=(0,s.up)("block"),u=(0,s.up)("category"),g=(0,s.up)("field"),p=(0,s.up)("shadow"),_=(0,s.up)("value"),y=(0,s.up)("BlocklyComponent");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(y,{id:"blockly1",options:c.options},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{name:"L",categorystyle:"logic_category"},{default:(0,s.w5)((()=>[l,(0,s.Wm)(h,{type:"controls_if"}),(0,s.Wm)(h,{type:"logic_compare"}),(0,s.Wm)(h,{type:"logic_operation"}),(0,s.Wm)(h,{type:"logic_negate"}),(0,s.Wm)(h,{type:"logic_boolean"}),(0,s.Wm)(h,{type:"logic_ternary"})])),_:1}),(0,s.Wm)(u,{categorystyle:"text_category"},{default:(0,s.w5)((()=>[r,(0,s.Wm)(h,{type:"text_print"},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{name:"TEXT"},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{type:"text"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{name:"TEXT"},{default:(0,s.w5)((()=>[n])),_:1})])),_:1})])),_:1})])),_:1}),(0,s.Wm)(h,{type:"Breakpoint"})])),_:1})])),_:1},8,["options"])])}var a=o(755),h=o.n(a);o(71);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class u extends h().FlyoutMetricsManager{constructor(t,e){super(t,e)}getScrollMetrics(t,e,o){const s=super.getScrollMetrics(t,e,o),i=o||this.getContentMetrics(t),l=e||this.getViewMetrics(t);return s&&(s.height+=this.flyout_.calculateBottomPadding(i,l)),s}}
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class g extends h().VerticalFlyout{constructor(t){super(t),this.scrollPositions=[],this.scrollTarget=null,this.scrollAnimationFraction=.3,this.recycleBlocks_=[],this.recyclingEnabled_=!0,this.workspace_.setMetricsManager(new u(this.workspace_,this)),this.autoClose=!1}getParentToolbox_(){const t=this.targetWorkspace.getToolbox();return t}recordScrollPositions(){this.scrollPositions=[];const t=this.buttons_.filter((t=>t.isLabel()&&this.getParentToolbox_().getCategoryByName(t.getButtonText())));for(const e of t)e.isLabel()&&this.scrollPositions.push({name:e.getButtonText(),position:e.getPosition()})}getCategoryScrollPosition(t){for(const e of this.scrollPositions)if(e.name===t)return e.position;return null}selectCategoryByScrollPosition_(t){if(this.scrollTarget)return;const e=Math.round(t/this.workspace_.scale);for(let o=this.scrollPositions.length-1;o>=0;o--){const t=this.scrollPositions[o];if(e>=t.position.y)return void this.getParentToolbox_().selectCategoryByName(t.name)}}scrollTo(t){const e=this.workspace_.getMetrics();this.scrollTarget=Math.min(t*this.workspace_.scale,e.scrollHeight-e.viewHeight),this.stepScrollAnimation_()}stepScrollAnimation_(){if(!this.scrollTarget)return;const t=-this.workspace_.scrollY,e=this.scrollTarget-t;if(Math.abs(e)<1)return this.workspace_.scrollbar.setY(this.scrollTarget),void(this.scrollTarget=null);this.workspace_.scrollbar.setY(t+e*this.scrollAnimationFraction),requestAnimationFrame(this.stepScrollAnimation_.bind(this))}calculateBottomPadding(t,e){if(this.scrollPositions.length>0){const o=this.scrollPositions[this.scrollPositions.length-1],s=o.position.y*this.workspace_.scale,i=t.height-s;if(i<e.height)return e.height-i}return 0}setMetrics_(t){super.setMetrics_(t),this.scrollPositions&&this.selectCategoryByScrollPosition_(-this.workspace_.scrollY)}position(){if(!this.isVisible())return;const t=this.targetWorkspace.getMetrics();if(!t)return;this.height_=t.viewHeight;const e=this.width_-this.CORNER_RADIUS,o=t.viewHeight-2*this.CORNER_RADIUS;this.setBackgroundPath_(e,o);const s=0;let i=0;i=this.targetWorkspace.toolboxPosition==this.toolboxPosition_?t.toolboxWidth?this.toolboxPosition_==h().TOOLBOX_AT_LEFT?t.toolboxWidth:t.viewWidth:this.toolboxPosition_==h().TOOLBOX_AT_LEFT?0:t.viewWidth:this.toolboxPosition_==h().TOOLBOX_AT_LEFT?0:t.viewWidth+t.absoluteLeft-this.width_,this.positionAt_(this.width_,this.height_,i,s)}show(t){super.show(t),this.emptyRecycleBlocks_(),this.recordScrollPositions(),this.workspace_.resizeContents()}emptyRecycleBlocks_(){const t=this.recycleBlocks_;this.recycleBlocks_=[];for(const e of t)e.dispose(!1,!1)}createBlock_(t){const e=t.getAttribute("type"),o=this.recycleBlocks_.findIndex((function(t){return t.type===e}));let s;return s=o>-1?this.recycleBlocks_.splice(o,1)[0]:h().Xml.domToBlock(t,this.workspace_),s.isEnabled()||this.permanentlyDisabled_.push(s),s}clearOldBlocks_(){const t=this.workspace_.getTopBlocks(!1);for(const e of t)e.workspace==this.workspace_&&(this.recyclingEnabled_&&this.blockIsRecyclable_(e)?this.recycleBlock_(e):e.dispose(!1,!1));for(const e of this.mats_)e&&(h().Tooltip.unbindMouseEvents(e),h().utils.dom.removeNode(e));this.mats_.length=0;for(const e of this.buttons_)e.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()}blockIsRecyclable_(t){if(t.mutationToDom&&t.domToMutation)return!1;for(const e of t.inputList){for(const t of e.fieldRow){if(t instanceof h().FieldVariable)return!1;if(t instanceof h().FieldDropdown&&t.isOptionListDynamic())return!1}if(e.connection){const t=e.connection.targetBlock();if(t&&!this.blockIsRecyclable_(t))return!1}}return!0}setBlockIsRecyclable(t){this.blockIsRecyclable_=t}setRecyclingEnabled(t){this.recyclingEnabled_=t}recycleBlock_(t){const e=t.getRelativeToSurfaceXY();t.moveBy(-e.x,-e.y),this.recycleBlocks_.push(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class p extends h().Toolbox{constructor(t){super(t)}init(){super.init();const t=this.getFlyout();t.show(this.getInitialFlyoutContents_()),t.recordScrollPositions()}getFlyout(){return super.getFlyout()}getInitialFlyoutContents_(){let t=[];for(const e of this.contents_)if(e instanceof h().ToolboxCategory){t.push({kind:"LABEL",text:e.getName()});let o=e.getContents();"string"===typeof o&&(o={custom:o,kind:"CATEGORY"}),t=t.concat(o)}return t}refreshSelection(){this.getFlyout().show(this.getInitialFlyoutContents_())}updateFlyout_(t,e){if(e){const t=this.getFlyout().getCategoryScrollPosition(e.name_).y;this.getFlyout().scrollTo(t)}}shouldDeselectItem_(t,e){return t&&t!==e}getCategoryByName(t){const e=this.contents_.find((e=>e instanceof h().ToolboxCategory&&e.isSelectable()&&t===e.getName()));return e||null}selectCategoryByName(t){const e=this.getCategoryByName(t);if(!e)return;const o=this.selectedItem_;this.shouldDeselectItem_(o,e)&&this.deselectItem_(o),this.shouldSelectItem_(o,e)&&this.selectItem_(o,e)}getClientRect(){const t=this.getFlyout();return t&&!t.autoClose?t.getClientRect():super.getClientRect()}}h().Css.register([".categoryBubble {\n      margin: 0 auto 0.125rem;\n      border-radius: 100%;\n      border: 1px solid;\n      width: 1.25rem;\n      height: 1.25rem;\n    }\n    .blocklyTreeRow {\n      height: initial;\n      padding: 3px 0;\n    }\n    .blocklyTreeRowContentContainer {\n      display: flex;\n      flex-direction: column;\n    }\n    .blocklyTreeLabel {\n      margin: auto;\n    }"]);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class _ extends h().MetricsManager{constructor(t){super(t)}getViewMetrics(t){const e=t?this.workspace_.scale:1,o=this.getSvgMetrics(),s=this.getToolboxMetrics(),i=this.getFlyoutMetrics(!1),l=s.position;return this.workspace_.getToolbox()&&(l==h().TOOLBOX_AT_TOP||l==h().TOOLBOX_AT_BOTTOM?o.height-=s.height+i.height:l!=h().TOOLBOX_AT_LEFT&&l!=h().TOOLBOX_AT_RIGHT||(o.width-=s.width+i.width)),{height:o.height/e,width:o.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getAbsoluteMetrics(){const t=this.getToolboxMetrics(),e=this.getFlyoutMetrics(!1),o=t.position;let s=0;this.workspace_.getToolbox()&&o==h().TOOLBOX_AT_LEFT&&(s=t.width+e.width);let i=0;return this.workspace_.getToolbox()&&o==h().TOOLBOX_AT_TOP&&(i=t.height+e.height),{top:i,left:s}}}h().registry.register(h().registry.Type.METRICS_MANAGER,"CustomMetricsManager",_);var y=o(1484);const d={name:"tryout",components:{BlocklyComponent:y.Z},props:{gameName:{type:String,default:""}},data(){return{options:{autoClose:!1,scrollbars:!1,grid:{spacing:25,length:3,colour:"#ccc"},move:{scrollbars:!0,drag:!0,wheel:!0},zoom:{controls:!0,startScale:1,maxScale:4,minScale:.25,scaleSpeed:1.1},plugins:{toolbox:p,flyoutsVerticalToolbox:g,metricsManager:_}}}},created(){h().defineBlocksWithJsonArray([{type:"Breakpoint",message0:"Breakpoint",colour:355,previousStatement:null,nextStatement:null}]),h().JavaScript.Breakpoint=function(t){return"snowman_motion('Breakpoint');\n"}}};var m=o(4260);const b=(0,m.Z)(d,[["render",c],["__scopeId","data-v-012be2b5"]]),k=b}}]);