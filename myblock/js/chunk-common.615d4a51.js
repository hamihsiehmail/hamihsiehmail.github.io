(self["webpackChunkblocklygameweb"]=self["webpackChunkblocklygameweb"]||[]).push([[64],{595:(t,e,s)=>{"use strict";var i=s(8960),o=s.n(i);
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function n(t){const e=new i.FieldImage(a,15,15,void 0,r);return e.args_=t,e}function r(t){const e=t.getSourceBlock();if(e.isInFlyout)return;i.Events.setGroup(!0);const s=e.mutationToDom(),o=s&&i.Xml.domToText(s);e.minus(t.args_);const n=e.mutationToDom(),r=n&&i.Xml.domToText(n);o!=r&&i.Events.fire(new i.Events.BlockChange(e,"mutation",null,o,r)),i.Events.setGroup(!1)}const a="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMTggMTFoLTEyYy0xLjEwNCAwLTIgLjg5Ni0yIDJzLjg5NiAyIDIgMmgxMmMxLjEwNCAwIDItLjg5NiAyLTJzLS44OTYtMi0yLTJ6IiBmaWxsPSJ3aGl0ZSIgLz48L3N2Zz4K";
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
function l(t){const e=new i.FieldImage(h,15,15,void 0,c);return e.args_=t,e}function c(t){const e=t.getSourceBlock();if(e.isInFlyout)return;i.Events.setGroup(!0);const s=e.mutationToDom(),o=s&&i.Xml.domToText(s);e.plus(t.args_);const n=e.mutationToDom(),r=n&&i.Xml.domToText(n);o!=r&&i.Events.fire(new i.Events.BlockChange(e,"mutation",null,o,r)),i.Events.setGroup(!1)}const h="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMTggMTBoLTR2LTRjMC0xLjEwNC0uODk2LTItMi0ycy0yIC44OTYtMiAybC4wNzEgNGgtNC4wNzFjLTEuMTA0IDAtMiAuODk2LTIgMnMuODk2IDIgMiAybDQuMDcxLS4wNzEtLjA3MSA0LjA3MWMwIDEuMTA0Ljg5NiAyIDIgMnMyLS44OTYgMi0ydi00LjA3MWw0IC4wNzFjMS4xMDQgMCAyLS44OTYgMi0ycy0uODk2LTItMi0yeiIgZmlsbD0id2hpdGUiIC8+PC9zdmc+Cg==",u={elseIfCount_:0,hasElse_:!1,mutationToDom:function(){if(!this.elseIfCount_&&!this.hasElse_)return null;const t=o().utils.xml.createElement("mutation");return t.setAttribute("elseif",this.elseIfCount_),this.hasElse_&&t.setAttribute("else",1),t},domToMutation:function(t){const e=parseInt(t.getAttribute("elseif"),10)||0;this.hasElse_=!!parseInt(t.getAttribute("else"),10)||0,this.hasElse_&&!this.getInput("ELSE")&&this.appendStatementInput("ELSE").appendField(o().Msg.CONTROLS_IF_MSG_ELSE),this.updateShape_(e)},updateShape_:function(t){while(this.elseIfCount_<t)this.addElseIf_();while(this.elseIfCount_>t)this.removeElseIf_()},plus:function(){this.addElseIf_()},minus:function(t){0!=this.elseIfCount_&&this.removeElseIf_(t)},addElseIf_:function(){this.elseIfCount_++,this.appendValueInput("IF"+this.elseIfCount_).setCheck("Boolean").appendField(o().Msg.CONTROLS_IF_MSG_ELSEIF).appendField(n(this.elseIfCount_),"MINUS"+this.elseIfCount_),this.appendStatementInput("DO"+this.elseIfCount_).appendField(o().Msg.CONTROLS_IF_MSG_THEN),this.getInput("ELSE")&&this.moveInputBefore("ELSE",null)},removeElseIf_:function(t){if(void 0!==t&&t!=this.elseIfCount_){const e=2*t,s=this.inputList;let i=s[e].connection;i.isConnected()&&i.disconnect(),i=s[e+1].connection,i.isConnected()&&i.disconnect(),this.bumpNeighbours();for(let t,o=e+2;t=this.inputList[o];o++){if("ELSE"==t.name)break;const e=t.connection.targetConnection;e&&this.inputList[o-2].connection.connect(e)}}this.removeInput("IF"+this.elseIfCount_),this.removeInput("DO"+this.elseIfCount_),this.elseIfCount_--}},d=function(){this.getInput("IF0").insertFieldAt(0,l(),"PLUS")};o().Extensions.unregister("controls_if_mutator"),o().Extensions.registerMutator("controls_if_mutator",u,d),
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
delete o().Blocks.lists_create_with,o().defineBlocksWithJsonArray([{type:"lists_create_with",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE} %1",args0:[{type:"input_dummy",name:"EMPTY"}],output:"Array",style:"list_blocks",helpUrl:"%{BKY_LISTS_CREATE_WITH_HELPURL}",tooltip:"%{BKY_LISTS_CREATE_WITH_TOOLTIP}",mutator:"new_list_create_with_mutator"}]);const _={itemCount_:0,mutationToDom:function(){const t=o().utils.xml.createElement("mutation");return t.setAttribute("items",this.itemCount_),t},domToMutation:function(t){const e=parseInt(t.getAttribute("items"),10);this.updateShape_(e)},updateShape_:function(t){while(this.itemCount_<t)this.addPart_();while(this.itemCount_>t)this.removePart_();this.updateMinus_()},plus:function(){this.addPart_(),this.updateMinus_()},minus:function(){0!=this.itemCount_&&(this.removePart_(),this.updateMinus_())},addPart_:function(){0==this.itemCount_?(this.removeInput("EMPTY"),this.topInput_=this.appendValueInput("ADD"+this.itemCount_).appendField(l(),"PLUS").appendField(o().Msg.LISTS_CREATE_WITH_INPUT_WITH)):this.appendValueInput("ADD"+this.itemCount_),this.itemCount_++},removePart_:function(){this.itemCount_--,this.removeInput("ADD"+this.itemCount_),0==this.itemCount_&&(this.topInput_=this.appendDummyInput("EMPTY").appendField(l(),"PLUS").appendField(o().Msg.LISTS_CREATE_EMPTY_TITLE))},updateMinus_:function(){const t=this.getField("MINUS");!t&&this.itemCount_>0?this.topInput_.insertFieldAt(1,n(),"MINUS"):t&&this.itemCount_<1&&this.topInput_.removeField("MINUS")}},p=function(){this.getInput("EMPTY").insertFieldAt(0,l(),"PLUS"),this.updateShape_(3)};o().Extensions.registerMutator("new_list_create_with_mutator",_,p);s(5363),s(71),s(6801);
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
o().Msg.PROCEDURE_VARIABLE="variable:",delete o().Blocks.procedures_defnoreturn,delete o().Blocks.procedures_defreturn,o().defineBlocksWithJsonArray([{type:"procedures_defnoreturn",message0:"%{BKY_PROCEDURES_DEFNORETURN_TITLE} %1 %2",message1:"%{BKY_PROCEDURES_DEFNORETURN_DO} %1",args0:[{type:"field_input",name:"NAME",text:""},{type:"input_dummy",name:"TOP"}],args1:[{type:"input_statement",name:"STACK"}],style:"procedure_blocks",helpUrl:"%{BKY_PROCEDURES_DEFNORETURN_HELPURL}",tooltip:"%{BKY_PROCEDURES_DEFNORETURN_TOOLTIP}",extensions:["get_procedure_def_no_return","procedure_context_menu","procedure_rename","procedure_vars"],mutator:"procedure_def_mutator"},{type:"procedures_defreturn",message0:"%{BKY_PROCEDURES_DEFRETURN_TITLE} %1 %2",message1:"%{BKY_PROCEDURES_DEFRETURN_DO} %1",message2:"%{BKY_PROCEDURES_DEFRETURN_RETURN} %1",args0:[{type:"field_input",name:"NAME",text:""},{type:"input_dummy",name:"TOP"}],args1:[{type:"input_statement",name:"STACK"}],args2:[{type:"input_value",align:"right",name:"RETURN"}],style:"procedure_blocks",helpUrl:"%{BKY_PROCEDURES_DEFRETURN_HELPURL}",tooltip:"%{BKY_PROCEDURES_DEFRETURN_TOOLTIP}",extensions:["get_procedure_def_return","procedure_context_menu","procedure_rename","procedure_vars"],mutator:"procedure_def_mutator"}]);const g={getProcedureDef:function(){const t=this.argData_.map((t=>t.model.name));return[this.getFieldValue("NAME"),t,!1]},callType_:"procedures_callnoreturn"};o().Extensions.registerMixin("get_procedure_def_no_return",g);const m={getProcedureDef:function(){const t=this.argData_.map((t=>t.model.name));return[this.getFieldValue("NAME"),t,!0]},callType_:"procedures_callreturn"};o().Extensions.registerMixin("get_procedure_def_return",m);const I={customContextMenu:function(t){if(this.isInFlyout)return;const e=this.getFieldValue("NAME"),s=o().Msg.PROCEDURES_CREATE_DO.replace("%1",e),i=o().utils.xml.createElement("block");i.setAttribute("type",this.callType_),i.appendChild(this.mutationToDom(!0));const n=o().ContextMenu.callbackFactory(this,i);if(t.push({enabled:!0,text:s,callback:n}),this.isCollapsed())return;const r=this.getVarModels();for(const a of r){const e=o().Msg.VARIABLES_SET_CREATE_GET.replace("%1",a.name),s=o().utils.xml.createElement("block");s.setAttribute("type","variables_get"),s.appendChild(o().Variables.generateVariableFieldDom(a));const i=o().ContextMenu.callbackFactory(this,s);t.push({enabled:!0,text:e,callback:i})}}};o().Extensions.registerMixin("procedure_context_menu",I);const E={mutationToDom:function(t=!1){const e=o().utils.xml.createElement("mutation");return t&&e.setAttribute("name",this.getFieldValue("NAME")),this.argData_.forEach((s=>{const i=o().utils.xml.createElement("arg"),n=s.model;i.setAttribute("name",n.name),i.setAttribute("varid",n.getId()),i.setAttribute("argid",s.argId),t&&i.setAttribute("paramid",s.argId),e.appendChild(i)})),this.hasStatements_||e.setAttribute("statements","false"),e},domToMutation:function(t){this.hasStatements_="false"!==t.getAttribute("statements"),this.hasStatements_||this.removeInput("STACK");const e=[],s=[],i=[];for(const o of t.childNodes)"arg"==o.nodeName.toLowerCase()&&(e.push(o.getAttribute("name")),s.push(o.getAttribute("varid")||o.getAttribute("varId")),i.push(o.getAttribute("argid")));this.updateShape_(e,s,i)},updateShape_:function(t,e,s){if(t.length!=e.length)throw Error("names and varIds must have the same length.");for(let o=this.argData_.length-1;o>=0;o--)this.removeArg_(this.argData_[o].argId);this.argData_=[];const i=e.length;for(let o=0;o<i;o++)this.addArg_(t[o],e[o],s[o]);o().Procedures.mutateCallers(this)},plus:function(){this.addArg_(),o().Procedures.mutateCallers(this)},minus:function(t){this.argData_.length&&(this.removeArg_(t),o().Procedures.mutateCallers(this))},addArg_:function(t=null,e=null,s=null){if(!this.argData_.length){const t=new(o().FieldLabel)(o().Msg.PROCEDURES_BEFORE_PARAMS);this.getInput("TOP").appendField(t,"WITH")}const i=this.argData_.map((t=>t.model.name));t=t||o().Variables.generateUniqueNameFromOptions(o().Procedures.DEFAULT_ARG,i);const n=o().Variables.getOrCreateVariablePackage(this.workspace,e,t,"");s=s||o().utils.idGenerator.genUid(),this.addVarInput_(t,s),this.getInput("STACK")?this.moveInputBefore(s,"STACK"):this.moveInputBefore(s,"RETURN"),this.argData_.push({model:n,argId:s})},removeArg_:function(t){this.removeInput(t,!0)&&(1==this.argData_.length&&this.getInput("TOP").removeField("WITH"),this.argData_=this.argData_.filter((e=>e.argId!=t)))},addVarInput_:function(t,e){const s=new(o().FieldTextInput)(t,this.validator_);s.onFinishEditing_=this.finishEditing_.bind(s),s.varIdsToDelete_=[],s.preEditVarModel_=null,this.appendDummyInput(e).setAlign(o().ALIGN_RIGHT).appendField(n(e)).appendField(o().Msg.PROCEDURE_VARIABLE).appendField(s,e)},validator_:function(t){const e=this.getSourceBlock(),s=e.workspace,i=e.argData_,n=e.argData_.find((t=>t.argId==this.name)),r=n.model.getId();t=t.replace(/[\s\xa0]+/g," ").trim();const a=t.toLowerCase(),l=t=>t.argId==this.name||a!=t.model.name.toLowerCase(),c=()=>s.getVariableUsesById(r).every((t=>t.id==e.id||t.getProcedureCall&&t.getProcedureCall()==e.getProcedureDef()[0]));if(!t||!i.every(l))return this.preEditVarModel_&&(n.model=this.preEditVarModel_,this.preEditVarModel_=null),o().Procedures.mutateCallers(e),null;this.varIdsToDelete_.length||(this.preEditVarModel_=n.model,c()&&this.varIdsToDelete_.push(r));let h=s.getVariable(t,"");return h?h.name!=t&&s.renameVariableById(h.getId(),t):(h=s.createVariable(t,""),this.varIdsToDelete_.push(h.getId())),h.getId()!=r&&(n.model=h),o().Procedures.mutateCallers(e),t},finishEditing_:function(t){const e=this.getSourceBlock(),s=e.argData_.find((t=>t.argId==this.name)),i=s.model.getId();this.varIdsToDelete_.forEach((t=>{t!=i&&e.workspace.deleteVariableById(t)})),this.varIdsToDelete_.length=0,this.preEditVarModel_=null}},C=function(){this.argData_=[],this.hasStatements_=!0,this.getInput("TOP").insertFieldAt(0,l(),"PLUS")};o().Extensions.registerMutator("procedure_def_mutator",E,C);const f=function(){this.getField("NAME").setValidator(o().Procedures.rename)};o().Extensions.register("procedure_rename",f);const k=function(){const t={getVars:function(){return this.argData_.map((t=>t.model.name))},getVarModels:function(){return this.argData_.map((t=>t.model))},renameVarById:function(t,e){const s=this.argData_.find((e=>e.model.getId()==t));if(!s)return;const i=this.workspace.getVariableById(e),n=i.name;this.addVarInput_(n,e),this.moveInputBefore(e,t),this.removeInput(t),s.model=i,o().Procedures.mutateCallers(this)},updateVarName:function(t){const e=t.getId(),s=this.argData_.find((t=>t.model.getId()==e));s&&(this.setFieldValue(t.name,s.argId),s.model=t)}};this.mixin(t,!0)};o().Extensions.register("procedure_vars",k);
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const v={itemCount_:0,mutationToDom:function(){const t=o().utils.xml.createElement("mutation");return t.setAttribute("items",this.itemCount_),t},domToMutation:function(t){const e=parseInt(t.getAttribute("items"),10);this.updateShape_(e)},updateShape_:function(t){while(this.itemCount_<t)this.addPart_();while(this.itemCount_>t)this.removePart_();this.updateMinus_()},plus:function(){this.addPart_(),this.updateMinus_()},minus:function(){0!=this.itemCount_&&(this.removePart_(),this.updateMinus_())},addPart_:function(){0==this.itemCount_?(this.getInput("EMPTY")&&this.removeInput("EMPTY"),this.topInput_=this.appendValueInput("ADD"+this.itemCount_).appendField(l(),"PLUS").appendField(o().Msg.TEXT_JOIN_TITLE_CREATEWITH)):this.appendValueInput("ADD"+this.itemCount_),this.itemCount_++},removePart_:function(){this.itemCount_--,this.removeInput("ADD"+this.itemCount_),0==this.itemCount_&&(this.topInput_=this.appendDummyInput("EMPTY").appendField(l(),"PLUS").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1)))},updateMinus_:function(){const t=this.getField("MINUS");!t&&this.itemCount_>0?this.topInput_.insertFieldAt(1,n(),"MINUS"):t&&this.itemCount_<1&&this.topInput_.removeField("MINUS")}},D=function(){o().Extensions.apply("text_quotes",this,!1),this.updateShape_(2)};o().Extensions.unregister("text_join_mutator"),o().Extensions.registerMutator("text_join_mutator",v,D)}
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */,6673:(t,e,s)=>{"use strict";s.d(e,{Z:()=>r});s(71);var i=s(8960);s(5547);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class o{constructor(t){this.workspace_=t,this.activeScrollVector_=new i.utils.Coordinate(0,0),this.animationFrameId_=0,this.lastTime_=Date.now(),this.shouldAnimate_=!1}stopAndDestroy(){this.activeScrollVector_=new i.utils.Coordinate(0,0),this.shouldAnimate_=!1,cancelAnimationFrame(this.animationFrameId_),this.animationFrameId_=0}nextAnimationStep_(t){if(this.shouldAnimate_){const e=t-this.lastTime_;this.lastTime_=t,e>0&&this.scrollTick_(e),this.animationFrameId_=requestAnimationFrame((t=>this.nextAnimationStep_(t)))}}scrollTick_(t){const e=this.activeScrollVector_.x*t,s=this.activeScrollVector_.y*t;this.scrollWorkspaceWithBlock(e,s)}scrollWorkspaceWithBlock(t,e){const s=this.workspace_.getBlockDragSurface(),i=s.getWsTranslation(),o=this.workspace_.getMetricsManager();o.useCachedContentMetrics=!0;const n=this.workspace_.scrollX+t,r=this.workspace_.scrollY+e;this.workspace_.scroll(n,r),o.useCachedContentMetrics=!1;const a=s.getWsTranslation(),l=a.x-i.x,c=a.y-i.y;(l||c)&&this.workspace_.currentGesture_.getCurrentDragger().moveBlockWhileDragging(l,c)}updateProperties(t){this.activeScrollVector_=t,this.shouldAnimate_=!0,0==this.animationFrameId_&&(this.lastTime_=Date.now(),this.nextAnimationStep_(this.lastTime_))}}const n={slowBlockSpeed:.28,fastBlockSpeed:1.4,slowBlockStartDistance:0,fastBlockStartDistance:50,oversizeBlockThreshold:.85,oversizeBlockMargin:15,slowMouseSpeed:.5,fastMouseSpeed:1.6,slowMouseStartDistance:0,fastMouseStartDistance:35};class r extends i.BlockDragger{constructor(t,e){super(t,e),this.scrollDelta_=new i.utils.Coordinate(0,0),this.dragDelta_=new i.utils.Coordinate(0,0),this.scrollDirections_=["top","bottom","left","right"]}moveBlockWhileDragging(t,e){this.scrollDelta_.x-=t,this.scrollDelta_.y-=e,this.workspace_.getBlockDragSurface().translateBy(-t,-e);const s=i.utils.Coordinate.sum(this.scrollDelta_,this.dragDelta_);this.dragIcons_(s),this.draggedConnectionManager_.update(new i.utils.Coordinate(s.x/this.workspace_.scale,s.y/this.workspace_.scale),null)}startDrag(t,e){const s=i.utils.Coordinate.sum(this.scrollDelta_,t);super.startDrag(s,e),this.dragDelta_=t}drag(t,e){const s=i.utils.Coordinate.sum(this.scrollDelta_,e);super.drag(t,s),this.dragDelta_=e,r.edgeScrollEnabled&&this.scrollWorkspaceWhileDragging_(t)}endDrag(t,e){super.endDrag(t,e),this.stopAutoScrolling()}getNewLocationAfterDrag_(t){const e={},s=i.utils.Coordinate.sum(this.scrollDelta_,t);return e.delta=this.pixelsToWorkspaceUnits_(s),e.newLocation=i.utils.Coordinate.sum(this.startXY_,e.delta),e}scrollWorkspaceWhileDragging_(t){this.SCROLL_DIRECTION_VECTORS_={top:new i.utils.Coordinate(0,1),bottom:new i.utils.Coordinate(0,-1),left:new i.utils.Coordinate(1,0),right:new i.utils.Coordinate(-1,0)};const e=i.utils.svgMath.screenToWsCoordinates(this.workspace_,new i.utils.Coordinate(t.clientX,t.clientY)),s={top:[],bottom:[],left:[],right:[]},n=this.workspace_.getMetricsManager().getViewMetrics(!0);this.computeBlockCandidateScrolls_(s,n,e),this.computeMouseCandidateScrolls_(s,n,e);const r=this.getOverallScrollVector_(s);i.utils.Coordinate.equals(r,new i.utils.Coordinate(0,0))?this.stopAutoScrolling():(this.activeAutoScroll_=this.activeAutoScroll_||new o(this.workspace_),this.activeAutoScroll_.updateProperties(r))}getOverallScrollVector_(t){let e=new i.utils.Coordinate(0,0);for(const s of this.scrollDirections_){const o=t[s].reduce(((t,e)=>t&&i.utils.Coordinate.magnitude(t)>i.utils.Coordinate.magnitude(e)?t:e),new i.utils.Coordinate(0,0));e=i.utils.Coordinate.sum(e,o)}return e}computeBlockCandidateScrolls_(t,e,s){const i=this.getBlockBoundsOverflows_(e,s);for(const o of this.scrollDirections_){const e=i[o];if(e>r.options.slowBlockStartDistance){const s=e>r.options.fastBlockStartDistance?r.options.fastBlockSpeed:r.options.slowBlockSpeed,i=this.SCROLL_DIRECTION_VECTORS_[o].clone().scale(s);t[o].push(i)}}}computeMouseCandidateScrolls_(t,e,s){const i=this.getMouseOverflows_(e,s);for(const o of this.scrollDirections_){const e=i[o];if(e>r.options.slowMouseStartDistance){const s=e>r.options.fastMouseStartDistance?r.options.fastMouseSpeed:r.options.slowMouseSpeed,i=this.SCROLL_DIRECTION_VECTORS_[o].clone().scale(s);t[o].push(i)}}}getBlockBoundsOverflows_(t,e){const s=this.draggingBlock_.getBoundingRectangle(),i=s.bottom-s.top;i>t.height*r.options.oversizeBlockThreshold&&(s.top=Math.max(s.top,e.y-r.options.oversizeBlockMargin),s.bottom=Math.min(s.bottom,e.y+r.options.oversizeBlockMargin));const o=s.right-s.left;return o>t.width*r.options.oversizeBlockThreshold&&(s.left=Math.max(s.left,e.x-r.options.oversizeBlockMargin),s.right=Math.min(s.right,e.x+r.options.oversizeBlockMargin)),{top:t.top-s.top,bottom:-(t.top+t.height-s.bottom),left:t.left-s.left,right:-(t.left+t.width-s.right)}}getMouseOverflows_(t,e){return{top:t.top-e.y,bottom:-(t.top+t.height-e.y),left:t.left-e.x,right:-(t.left+t.width-e.x)}}stopAutoScrolling(){this.activeAutoScroll_&&this.activeAutoScroll_.stopAndDestroy(),this.activeAutoScroll_=null}}r.edgeScrollEnabled=!0,r.options=n,r.updateOptions=function(t){r.options={...r.options,...t}},r.resetOptions=function(){r.options=n},i.registry.register(i.registry.Type.BLOCK_DRAGGER,"ScrollBlockDragger",r)},5547:(t,e,s)=>{"use strict";s.d(e,{Z:()=>o});var i=s(8960);
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class o extends i.MetricsManager{constructor(t){super(t),this.useCachedContentMetrics=!1,this.contentMetrics=null}getContentMetrics(){return this.useCachedContentMetrics&&this.contentMetrics||(this.contentMetrics=super.getContentMetrics()),this.contentMetrics}}},7870:(t,e,s)=>{"use strict";s.d(e,{Z:()=>k});var i=s(3673);const o={class:"blocklyDiv",ref:"blocklyDiv"},n={ref:"blocklyToolbox",style:{display:"none"}};function r(t,e,s,r,a,l){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("div",o,null,512),(0,i._)("template",n,[(0,i.WI)(t.$slots,"default",{},void 0,!0)],512)])}var a=s(755),l=s.n(a);s(595),s(71),s(6801);
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
const c="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE0Ij48cGF0aCBkPSJNMTkgNi40MUwxNy41OSA1IDEyIDEwLjU5IDYuNDEgNSA1IDYuNDEgMTAuNTkgMTIgNSAxNy41OSA2LjQxIDE5IDEyIDEzLjQxIDE3LjU5IDE5IDE5IDE3LjU5IDEzLjQxIDEyeiIvPjxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz48L3N2Zz4=",h="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE0Ij48cGF0aCBkPSJNNy40MSA4LjU5TDEyIDEzLjE3bDQuNTktNC41OEwxOCAxMGwtNiA2LTYtNiAxLjQxLTEuNDF6Ii8+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PC9zdmc+",u="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjE0Ij48cGF0aCBkPSJNNy40MSAxNS40MUwxMiAxMC44M2w0LjU5IDQuNThMMTggMTRsLTYtNi02IDZ6Ii8+PHBhdGggZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjwvc3ZnPg==",d=["path.blocklyPath.blockly-ws-search-highlight {","fill: black;","}","path.blocklyPath.blockly-ws-search-highlight.blockly-ws-search-current {","fill: grey;","}",".blockly-ws-search-close-btn {","background: url("+c+") no-repeat top left;","}",".blockly-ws-search-next-btn {","background: url("+h+") no-repeat top left;","}",".blockly-ws-search-previous-btn {","background: url("+u+") no-repeat top left;","}",".blockly-ws-search {","background: white;","border: solid lightgrey .5px;","box-shadow: 0px 10px 20px grey;","justify-content: center;","padding: .25em;","position: absolute;","z-index: 70;","}",".blockly-ws-search-input input {","border: none;","}",".blockly-ws-search button {","border: none;","}",".blockly-ws-search-actions {","display: flex;","}",".blockly-ws-search-container {","display: flex;","}",".blockly-ws-search-content {","display: flex;","}"],_=function(){let t=!1;return function(){if(t)return;t=!0;const e=d.join("\n"),s=document.createElement("style");s.id="blockly-ws-search-style";const i=document.createTextNode(e);s.appendChild(i),document.head.insertBefore(s,document.head.firstChild)}}();var p=s(8960);
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */
class g{constructor(t){this.workspace_=t,this.id="workspaceSearch",this.htmlDiv_=null,this.actionDiv_=null,this.inputElement_=null,this.textInputPlaceholder_="Search",this.blocks_=[],this.currentBlockIndex_=-1,this.searchText_="",this.searchOnInput=!0,this.caseSensitive=!1,this.preserveSelected=!0,this.boundEvents_=[]}init(){this.workspace_.getComponentManager().addComponent({component:this,weight:0,capabilities:[p.ComponentManager.Capability.POSITIONABLE]}),_(),this.createDom_(),this.setVisible_(!1),this.workspace_.resize()}dispose(){for(const t of this.boundEvents_)p.unbindEvent_(t);this.boundEvents_=null,this.htmlDiv_&&(this.htmlDiv_.remove(),this.htmlDiv_=null),this.actionDiv_=null,this.inputElement_=null}createDom_(){const t=this.workspace_.getInjectionDiv();this.addEvent_(t,"keydown",this,(t=>this.onWorkspaceKeyDown_(t))),this.htmlDiv_=document.createElement("div"),p.utils.dom.addClass(this.htmlDiv_,"blockly-ws-search");const e=document.createElement("div");p.utils.dom.addClass(e,"blockly-ws-search-container");const s=document.createElement("div");p.utils.dom.addClass(s,"blockly-ws-search-content"),e.appendChild(s);const i=document.createElement("div");p.utils.dom.addClass(i,"blockly-ws-search-input"),this.inputElement_=this.createTextInput_(),this.addEvent_(this.inputElement_,"keydown",this,(t=>this.onKeyDown_(t))),this.addEvent_(this.inputElement_,"input",this,(()=>this.onInput_())),this.addEvent_(this.inputElement_,"click",this,(()=>this.searchAndHighlight(this.searchText_,this.preserveSelected))),i.appendChild(this.inputElement_),s.appendChild(i),this.actionDiv_=document.createElement("div"),p.utils.dom.addClass(this.actionDiv_,"blockly-ws-search-actions"),s.appendChild(this.actionDiv_);const o=this.createNextBtn_();o&&this.addActionBtn(o,(()=>this.next()));const n=this.createPreviousBtn_();n&&this.addActionBtn(n,(()=>this.previous()));const r=this.createCloseBtn_();r&&(this.addBtnListener_(r,(()=>this.close())),e.appendChild(r)),this.htmlDiv_.appendChild(e),t.insertBefore(this.htmlDiv_,this.workspace_.getParentSvg())}addEvent_(t,e,s,i){const o=p.browserEvents.conditionalBind(t,e,s,i);this.boundEvents_.push(o)}addActionBtn(t,e){this.addBtnListener_(t,e),this.actionDiv_.appendChild(t)}createTextInput_(){const t=document.createElement("input");return t.type="text",t.setAttribute("placeholder",this.textInputPlaceholder_),t}createNextBtn_(){return this.createBtn_("blockly-ws-search-next-btn","Find next")}createPreviousBtn_(){return this.createBtn_("blockly-ws-search-previous-btn","Find previous")}createCloseBtn_(){return this.createBtn_("blockly-ws-search-close-btn","Close search bar")}createBtn_(t,e){const s=document.createElement("button");return p.utils.dom.addClass(s,t),s.setAttribute("aria-label",e),s}addBtnListener_(t,e){this.addEvent_(t,"click",this,e),this.addEvent_(t,"keydown",this,(t=>{t.keyCode===p.utils.KeyCodes.ENTER?(e(t),t.preventDefault()):t.keyCode===p.utils.KeyCodes.ESC&&this.close(),t.stopPropagation()}))}getBoundingRectangle(){return null}position(t,e){this.workspace_.RTL?this.htmlDiv_.style.left=t.absoluteMetrics.left+"px":t.toolboxMetrics.position===p.TOOLBOX_AT_RIGHT?this.htmlDiv_.style.right=t.toolboxMetrics.width+"px":this.htmlDiv_.style.right="0",this.htmlDiv_.style.top=t.absoluteMetrics.top+"px"}onInput_(){if(this.searchOnInput){const t=this.inputElement_.value.trim();t!==this.searchText_&&this.searchAndHighlight(t,this.preserveSelected)}}onKeyDown_(t){if(t.keyCode===p.utils.KeyCodes.ESC)this.close();else if(t.keyCode===p.utils.KeyCodes.ENTER)if(this.searchOnInput)this.next();else{const t=this.inputElement_.value.trim();t!==this.searchText_&&this.searchAndHighlight(t,this.preserveSelected)}}onWorkspaceKeyDown_(t){(t.ctrlKey||t.metaKey)&&t.keyCode===p.utils.KeyCodes.F&&(this.open(),t.preventDefault(),t.stopPropagation())}previous(){this.setCurrentBlock_(this.currentBlockIndex_-1)}next(){this.setCurrentBlock_(this.currentBlockIndex_+1)}setSearchPlaceholder(t){this.textInputPlaceholder_=t,this.inputElement_&&this.inputElement_.setAttribute("placeholder",this.textInputPlaceholder_)}setCurrentBlock_(t){if(!this.blocks_.length)return;let e=this.blocks_[this.currentBlockIndex_];e&&this.unhighlightCurrentSelection_(e),this.currentBlockIndex_=(t%this.blocks_.length+this.blocks_.length)%this.blocks_.length,e=this.blocks_[this.currentBlockIndex_],this.highlightCurrentSelection_(e),this.scrollToVisible_(e)}open(){this.setVisible_(!0),this.inputElement_.focus(),this.searchText_&&this.searchAndHighlight(this.searchText_)}close(){this.setVisible_(!1),this.workspace_.markFocused(),this.clearBlocks()}setVisible_(t){this.htmlDiv_.style.display=t?"flex":"none"}searchAndHighlight(t,e){const s=this.blocks_[this.currentBlockIndex_];this.searchText_=t.trim(),this.clearBlocks(),this.blocks_=this.getMatchingBlocks_(this.workspace_,this.searchText_,this.caseSensitive),this.highlightSearchGroup_(this.blocks_);let i=0;e&&(i=this.blocks_.indexOf(s),i=i>-1?i:0),this.setCurrentBlock_(i)}getSearchPool_(t){const e=t.getAllBlocks(!0);return e.filter((t=>{const e=t.getSurroundParent();return!e||!e.isCollapsed()}))}isBlockMatch_(t,e,s){let i="";if(t.isCollapsed())i=t.toString();else{const e=[];t.inputList.forEach((t=>{t.fieldRow.forEach((t=>{e.push(t.getText())}))})),i=e.join(" ").trim()}return s||(i=i.toLowerCase()),i.indexOf(e)>-1}getMatchingBlocks_(t,e,s){if(!e)return[];this.caseSensitive||(e=e.toLowerCase());const i=this.getSearchPool_(t);return i.filter((t=>this.isBlockMatch_(t,e,s)))}clearBlocks(){this.unhighlightSearchGroup_(this.blocks_);const t=this.blocks_[this.currentBlockIndex_];t&&this.unhighlightCurrentSelection_(t),this.currentBlockIndex_=-1,this.blocks_=[]}highlightCurrentSelection_(t){const e=t.pathObject.svgPath;p.utils.dom.addClass(e,"blockly-ws-search-current")}unhighlightCurrentSelection_(t){const e=t.pathObject.svgPath;p.utils.dom.removeClass(e,"blockly-ws-search-current")}highlightSearchGroup_(t){t.forEach((t=>{const e=t.pathObject.svgPath;p.utils.dom.addClass(e,"blockly-ws-search-highlight")}))}unhighlightSearchGroup_(t){t.forEach((t=>{const e=t.pathObject.svgPath;p.utils.dom.removeClass(e,"blockly-ws-search-highlight")}))}scrollToVisible_(t){if(!this.workspace_.isMovable())return;const e=t.getRelativeToSurfaceXY(),s=this.workspace_.scale,i=t.width*s,o=t.height*s,n=e.y*s,r=(e.y+t.height)*s,a=this.workspace_.RTL?e.x*s-i:e.x*s,l=this.workspace_.RTL?e.x*s:e.x*s+i,c=this.workspace_.getMetrics();let h=c.viewLeft;const u=a<c.viewLeft,d=l>c.viewLeft+c.viewWidth,_=i>c.viewWidth;!_&&u||_&&!this.workspace_.RTL?h=a:(!_&&d||_&&this.workspace_.RTL)&&(h=l-c.viewWidth);let p=c.viewTop;const g=n<c.viewTop,m=r>c.viewTop+c.viewHeight,I=o>c.viewHeight;if(g||I&&m?p=n:m&&(p=r-c.viewHeight),h!==c.viewLeft||p!==c.viewTop){const t=document.activeElement;this.workspace_.scroll(-h,-p),t&&t.focus()}}}var m=s(6673),I=s(5547);
/**
 * @license
 *
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E={name:"BlocklyComponent",props:["options"],data(){return{mainWorkspace:null}},mounted(){var t=this.$props.options||{};t.toolbox||(t.toolbox=this.$refs["blocklyToolbox"]),void 0==t.plugins&&(t.plugins={}),t.plugins.blockDragger=m.Z,t.plugins.metricsManager=I.Z,this.mainWorkspace=l().inject(this.$refs["blocklyDiv"],t);const e=new g(this.mainWorkspace);e.init(),e.open(),l().defineBlocksWithJsonArray([{type:"player_start",message0:"Start",colour:355,message0:"Start",message1:"do %1",args1:[{type:"input_statement",name:"DO"}]}]),l().JavaScript.player_start=function(t){return l().JavaScript.statementToCode(t,"DO")};var s='<xml>  <block type="player_start" deletable="false" x="70" y="70">  </block></xml>',i=l().Xml.textToDom(s);l().Xml.domToWorkspace(i,l().getMainWorkspace())}};var C=s(4260);const f=(0,C.Z)(E,[["render",r],["__scopeId","data-v-eaff946a"]]),k=f},7048:(t,e,s)=>{"use strict";s.d(e,{Z:()=>c});var i=s(3673);function o(t,e,s,o,n,r){return(0,i.wg)(),(0,i.iD)("div")}s(2100);const n=s(1849),r=(0,i.aZ)({name:"cookieMyblock",data(){return{aesPassword:"dsakl;fv5"}},methods:{gadgeCopyAndShare(t){let e=n.AES.encrypt(JSON.stringify(t),this.aesPassword).toString(),s="#/badge?data="+encodeURIComponent(e);navigator.clipboard.writeText(window.location.origin+window.location.pathname+s),setTimeout((function(){window.open(s)}),50)},saveUserToCookie(){let t=JSON.stringify(this.$myblock.user);this.setCookie("snowmem",n.AES.encrypt(t,this.aesPassword).toString(),360)},loadUserFromCookie(){try{let t=this.getCookie("snowmem");if(""!=t){let e=n.enc.Utf8.stringify(n.AES.decrypt(t,this.aesPassword)),s=JSON.parse(e);for(let t in s)this.$myblock.user[t]=s[t]}}catch(t){this.saveUserToCookie()}},setCookie(t,e,s){const i=new Date;i.setTime(i.getTime()+24*s*60*60*1e3);let o="expires="+i.toUTCString();document.cookie=t+"="+e+";"+o+";path=/"},getCookie(t){let e=t+"=",s=decodeURIComponent(document.cookie),i=s.split(";");for(let o=0;o<i.length;o++){let t=i[o];while(" "==t.charAt(0))t=t.substring(1);if(0==t.indexOf(e))return t.substring(e.length,t.length)}return""}}});var a=s(4260);const l=(0,a.Z)(r,[["render",o]]),c=l},2480:()=>{}}]);