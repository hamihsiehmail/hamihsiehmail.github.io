(self["webpackChunkblocklygameweb"]=self["webpackChunkblocklygameweb"]||[]).push([[64],{2320:(s,t,e)=>{"use strict";e.d(t,{Z:()=>l});var i=e(3673);function a(s,t,e,a,n,o){return(0,i.wg)(),(0,i.iD)("div")}e(2100);const n=e(1849),o=(0,i.aZ)({name:"cookieMyblock",data(){return{aesPassword:"dsakl;fj"}},methods:{userInit(){this.$myblock.user={level:0}},saveUserToCookie(){let s=JSON.stringify(this.$myblock.user);this.setCookie("snowmem",n.AES.encrypt(s,this.aesPassword).toString(),360)},loadUserFromCookie(){try{let s=this.getCookie("snowmem");if(""!=s){let t=n.enc.Utf8.stringify(n.AES.decrypt(s,this.aesPassword));this.$myblock.user=JSON.parse(t)}}catch(s){this.userInit()}},setCookie(s,t,e){const i=new Date;i.setTime(i.getTime()+24*e*60*60*1e3);let a="expires="+i.toUTCString();document.cookie=s+"="+t+";"+a+";path=/"},getCookie(s){let t=s+"=",e=decodeURIComponent(document.cookie),i=e.split(";");for(let a=0;a<i.length;a++){let s=i[a];while(" "==s.charAt(0))s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return""}}});var r=e(4260);const h=(0,r.Z)(o,[["render",a]]),l=h},5252:(s,t,e)=>{"use strict";e.d(t,{Z:()=>S});var i=e(3673);const a=s=>((0,i.dD)("data-v-27cb8d4c"),s=s(),(0,i.Cn)(),s),n={class:"myflexsnow"},o=a((()=>(0,i._)("div",{id:"space"},null,-1))),r=[o];function h(s,t,e,a,o,h){return(0,i.wg)(),(0,i.iD)("div",n,r)}class l extends Phaser.Scene{constructor(){super("Boot")}create(){this.registry.set("highscore",0),this.scene.start("Preloader"),this.game.config.blocklyControlName.scene="Boot"}}class m extends Phaser.Scene{constructor(){super("Preloader"),this.loadText}preload(){this.game.config.blocklyControlName.scene="Preloader",this.loadText=this.add.text(512,360,"Loading ...",{fontFamily:"Arial",fontSize:74,color:"#e3f2ed"}),this.loadText.setOrigin(.5),this.loadText.setStroke("#203c5b",6),this.loadText.setShadow(2,2,"#2d2d2d",4,!0,!1),this.load.setPath("assets/games/snowmen-attack/"),this.load.image(["background","overlay","gameover","title"]),this.load.atlas("sprites","sprites.png","sprites.json"),this.load.glsl("snow","snow.glsl.js"),this.load.setPath("assets/games/snowmen-attack/sounds/"),this.load.audio("music",["music.ogg","music.m4a","music.mp3"]),this.load.audio("throw",["throw.ogg","throw.m4a","throw.mp3"]),this.load.audio("move",["move.ogg","move.m4a","move.mp3"]),this.load.audio("hit-snowman",["hit-snowman.ogg","hit-snowman.m4a","hit-snowman.mp3"]),this.load.audio("gameover",["gameover.ogg","gameover.m4a","gameover.mp3"])}create(){this.anims.create({key:"die",frames:this.anims.generateFrameNames("sprites",{prefix:"die",start:0,end:0,zeroPad:3})}),this.anims.create({key:"idle",frames:this.anims.generateFrameNames("sprites",{prefix:"idle",start:0,end:3,zeroPad:3}),yoyo:!0,frameRate:8,repeat:-1}),this.anims.create({key:"throwStart",frames:this.anims.generateFrameNames("sprites",{prefix:"throw",start:0,end:8,zeroPad:3}),frameRate:26}),this.anims.create({key:"throwEnd",frames:this.anims.generateFrameNames("sprites",{prefix:"throw",start:9,end:11,zeroPad:3}),frameRate:26}),this.anims.create({key:"snowmanIdleBig",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-big-idle",start:0,end:3}),yoyo:!0,frameRate:8,repeat:-1}),this.anims.create({key:"snowmanWalkBig",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-big-walk",start:0,end:7}),frameRate:8,repeat:-1}),this.anims.create({key:"snowmanThrowStartBig",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-big-throw",start:0,end:5}),frameRate:20}),this.anims.create({key:"snowmanThrowEndBig",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-big-throw",start:6,end:8}),frameRate:20}),this.anims.create({key:"snowmanDieBig",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-big-die",start:0,end:4}),frameRate:14}),this.anims.create({key:"snowmanIdleSmall",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-small-idle",start:0,end:3}),yoyo:!0,frameRate:8,repeat:-1}),this.anims.create({key:"snowmanWalkSmall",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-small-walk",start:0,end:7}),frameRate:8,repeat:-1}),this.anims.create({key:"snowmanThrowStartSmall",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-small-throw",start:0,end:5}),frameRate:20}),this.anims.create({key:"snowmanThrowEndSmall",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-small-throw",start:6,end:8}),frameRate:20}),this.anims.create({key:"snowmanDieSmall",frames:this.anims.generateFrameNames("sprites",{prefix:"snowman-small-die",start:0,end:4}),frameRate:14}),this.sound.locked?(this.loadText.setText("Click to Start"),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}))):this.scene.start("MainMenu"),this.game.config.blockControl["start"]=()=>{this.scene.start("MainGame")}}}class c extends Phaser.Scene{constructor(){super("MainMenu")}create(){this.game.config.blocklyControlName.scene="MainMenu",this.sound.play("music",{loop:!0,delay:2}),this.add.shader("snow",512,384,1024,768);let s=this.add.image(-64,300,"sprites","snowball1"),t=this.add.image(1088,360,"sprites","snowball1"),e=this.add.image(-64,320,"sprites","snowball1"),i=this.add.image(1700,384,"title");this.game.loop.actualFps=2,this.tweens.add({targets:s,x:1088,y:360,ease:"cubic.out",duration:600,onStart:()=>{this.sound.play("throw")}}),this.tweens.add({targets:t,x:-64,y:280,ease:"cubic.out",delay:700,duration:600,onStart:()=>{this.sound.play("throw")}}),this.tweens.add({targets:e,x:1088,y:380,ease:"cubic.out",delay:1200,duration:600,onStart:()=>{this.sound.play("throw")}}),this.tweens.add({targets:i,x:512,ease:"back.out",delay:1800,duration:600,onStart:()=>{this.sound.play("throw")}}),this.input.keyboard.once("keydown-SPACE",(()=>{this.scene.start("MainGame")}),this),this.input.once("pointerdown",(()=>{this.scene.start("MainGame")}))}}e(71);class d extends Phaser.Physics.Arcade.Sprite{constructor(s,t,e){const i="Small"===e?"snowman-small-idle0":"snowman-big-idle0",a="Small"===e?80:-180;super(s,a,t.y,"sprites",i),this.setOrigin(.5,1),s.add.existing(this),s.physics.add.existing(this),"Small"===e?(this.body.setSize(300,300),this.body.setOffset(20,40)):(this.body.setSize(100,120),this.body.setOffset(50,50)),this.time=s.time,this.sound=s.sound,this.isAlive=!0,this.isThrowing=!1,this.size=e,this.speed=50,this.hitCount=1,this.previousAction=0,this.currentTrack=t,this.play("snowmanIdle"+this.size)}start(){this.isAlive=!0,this.isThrowing=!1,this.previousAction=0,this.currentHitpoints=this.maxHitpoints,this.y=this.currentTrack.y,this.on("animationcomplete-snowmanThrowStart"+this.size,this.releaseSnowball,this),this.on("animationcomplete-snowmanThrowEnd"+this.size,this.throwComplete,this),this.setActive(!0),this.setVisible(!0),this.play("snowmanWalk"+this.size),this.setVelocityX(this.speed),this.chooseEvent=this.time.delayedCall(Phaser.Math.Between(3e3,6e3),this.chooseAction,[],this)}chooseAction(){this.isAlive=!0,this.body.enable=!0,this.setVelocityX(0);const s=Phaser.Math.Between(0,100);s<50?2===this.previousAction?this.walk():this.x>-100&&this.throw():s>60?this.walk():1===this.previousAction?s>55?this.walk():this.x>-100&&this.throw():this.goIdle()}walk(){this.previousAction=0,this.play("snowmanWalk"+this.size,!0),this.setVelocityX(this.speed),this.chooseEvent=this.time.delayedCall(Phaser.Math.Between(3e3,6e3),this.chooseAction,[],this)}goIdle(){this.previousAction=1,this.play("snowmanIdle"+this.size,!0),this.chooseEvent=this.time.delayedCall(Phaser.Math.Between(2e3,4e3),this.chooseAction,[],this)}throw(){this.previousAction=2,this.isThrowing=!0,this.play("snowmanThrowStart"+this.size)}releaseSnowball(){this.isAlive&&(this.play("snowmanThrowEnd"+this.size),this.currentTrack.throwEnemySnowball(this.x))}throwComplete(){this.isAlive&&(this.isThrowing=!1,this.play("snowmanIdle"+this.size),this.chooseEvent=this.time.delayedCall(Phaser.Math.Between(2e3,4e3),this.chooseAction,[],this))}hit(){this.chooseEvent&&this.chooseEvent.remove(),this.isAlive=!1,this.previousAction=-1,this.play("snowmanDie"+this.size),this.sound.play("hit-snowman"),this.body.stop(),this.body.enable=!1;let s=0;this.x>0&&(s="-="+(Phaser.Math.Between(100,200)*this.hitCount).toString(),this.hitCount=this.hitCount+.5,"Small"===this.size?this.body.setSize(100-10*this.hitCount,100-10*this.hitCount):this.body.setSize(100-10*this.hitCount,120-12*this.hitCount)),this.scene.tweens.add({targets:this,x:s,ease:"sine.out",duration:1e3,onComplete:()=>{this.x}}),this.chooseEvent=this.time.delayedCall(Phaser.Math.Between(1e3,3e3),this.chooseAction,[],this)}stop(){this.chooseEvent&&this.chooseEvent.remove(),this.isAlive=!1,this.play("snowmanIdle"+this.size),this.setVelocityX(0)}preUpdate(s,t){super.preUpdate(s,t),this.x>=880&&(this.stop(),this.scene.gameOver())}}class w extends Phaser.Physics.Arcade.Sprite{constructor(s,t,e,i,a){super(s,t,e,i,a),this.setScale(.5)}fire(s,t){this.body.enable=!0,this.body.reset(s+10,t-44),this.setActive(!0),this.setVisible(!0),this.setVelocityX(-600),this.setAccelerationX(-1400)}stop(){this.setActive(!1),this.setVisible(!1),this.setVelocityX(0),this.body.enable=!1}preUpdate(s,t){super.preUpdate(s,t),this.x<=-64&&this.stop()}}class p extends Phaser.Physics.Arcade.Sprite{constructor(s,t,e,i,a){super(s,t,e,i,a),this.setScale(.5)}fire(s,t){this.body.enable=!0,this.body.reset(s+10,t-44),this.setActive(!0),this.setVisible(!0),this.setVelocityX(200)}stop(){this.setActive(!1),this.setVisible(!1),this.setVelocityX(0),this.body.enable=!1}preUpdate(s,t){super.preUpdate(s,t),this.x>=970&&(this.stop(),this.scene.gameOver())}}class y{constructor(s,t,e){this.scene=s,this.id=t,this.y=e,this.nest=s.physics.add.image(1024,e-10,"sprites","nest").setOrigin(1,1),this.snowmanBig=new d(s,this,"Big"),this.snowmanSmall=new d(s,this,"Small"),this.snowmanBigTwo=new d(s,this,"Big"),this.snowmanSmallTwo=new d(s,this,"Small"),this.snowmanBigThree=new d(s,this,"Big"),this.snowmanSmallThree=new d(s,this,"Small"),this.snowmanBigTwo.x=this.snowmanBigTwo.x-250,this.snowmanSmallTwo.x=this.snowmanSmallTwo.x-250,this.snowmanBigThree.x=this.snowmanBigThree.x-500,this.snowmanSmallThree.x=this.snowmanSmallThree.x-500,this.playerSnowballs=s.physics.add.group({frameQuantity:8,key:"sprites",frame:"snowball2",active:!1,visible:!1,classType:w}),this.enemySnowballs=s.physics.add.group({frameQuantity:8,key:"sprites",frame:"snowball3",active:!1,visible:!1,classType:p}),this.snowBallCollider=s.physics.add.overlap(this.playerSnowballs,this.enemySnowballs,this.hitSnowball,null,this),this.snowmanSmallCollider=s.physics.add.overlap(this.snowmanSmall,this.playerSnowballs,this.hitSnowman,null,this),this.snowmanBigCollider=s.physics.add.overlap(this.snowmanBig,this.playerSnowballs,this.hitSnowman,null,this),this.snowmanSmallTwoCollider=s.physics.add.overlap(this.snowmanSmallTwo,this.playerSnowballs,this.hitSnowman,null,this),this.snowmanBigTwoCollider=s.physics.add.overlap(this.snowmanBigTwo,this.playerSnowballs,this.hitSnowman,null,this),this.snowmanSmallThreeCollider=s.physics.add.overlap(this.snowmanSmallThree,this.playerSnowballs,this.hitSnowman,null,this),this.snowmanBigThreeCollider=s.physics.add.overlap(this.snowmanBigThree,this.playerSnowballs,this.hitSnowman,null,this),this.releaseTimerSmall,this.releaseTimerBig}start(s,t){const e=Phaser.Math.Between(s,t);this.releaseTimerSmall=this.scene.time.addEvent({delay:e,callback:()=>{this.snowmanSmall.start(),this.snowmanSmallTwo.start(),this.snowmanSmallThree.start()}}),this.releaseTimerBig=this.scene.time.addEvent({delay:3*e,callback:()=>{this.snowmanBig.start(),this.snowmanBigTwo.start(),this.snowmanBigThree.start()}})}stop(){this.snowmanSmall.stop(),this.snowmanBig.stop(),this.snowmanSmallTwo.stop(),this.snowmanBigTwo.stop(),this.snowmanSmallThree.stop(),this.snowmanBigThree.stop();for(let s of this.playerSnowballs.getChildren())s.stop();for(let s of this.enemySnowballs.getChildren())s.stop();this.releaseTimerSmall.remove(),this.releaseTimerBig.remove()}hitSnowball(s,t){s.stop(),t.stop()}hitSnowman(s,t){s.isAlive&&s.x>0&&(t.stop(),s.hit())}throwPlayerSnowball(s){let t=this.playerSnowballs.getFirstDead(!1);t&&t.fire(s,this.y)}throwEnemySnowball(s){let t=this.enemySnowballs.getFirstDead(!1);t&&t.fire(s,this.y)}}class g extends Phaser.Physics.Arcade.Sprite{constructor(s,t){super(s,900,t.y,"sprites","idle000"),this.setOrigin(.5,1),s.add.existing(this),s.physics.add.existing(this),this.isAlive=!0,this.isThrowing=!1,this.sound=s.sound,this.currentTrack=t,this.spacebar=this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),this.up=this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.UP),this.down=this.scene.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.DOWN),this.play("idle")}start(){this.isAlive=!0,this.isThrowing=!1,this.currentTrack=this.scene.tracks[0],this.y=this.currentTrack.y,this.on("animationcomplete-throwStart",this.releaseSnowball,this),this.on("animationcomplete-throwEnd",this.throwComplete,this),this.play("idle",!0)}moveUp(){0===this.currentTrack.id?this.currentTrack=this.scene.tracks[3]:this.currentTrack=this.scene.tracks[this.currentTrack.id-1],this.y=this.currentTrack.y,this.sound.play("move")}moveDown(){3===this.currentTrack.id?this.currentTrack=this.scene.tracks[0]:this.currentTrack=this.scene.tracks[this.currentTrack.id+1],this.y=this.currentTrack.y,this.sound.play("move")}throw(){this.isThrowing=!0,this.play("throwStart"),this.sound.play("throw")}releaseSnowball(){this.play("throwEnd"),this.currentTrack.throwPlayerSnowball(this.x)}throwComplete(){this.isThrowing=!1,this.play("idle")}stop(){this.isAlive=!1,this.body.stop(),this.play("die")}preUpdate(s,t){super.preUpdate(s,t),this.isAlive&&(Phaser.Input.Keyboard.JustDown(this.up)?this.moveUp():Phaser.Input.Keyboard.JustDown(this.down)?this.moveDown():Phaser.Input.Keyboard.JustDown(this.spacebar)&&!this.isThrowing&&this.throw())}}class u extends Phaser.Scene{constructor(){super("MainGame"),this.player,this.tracks,this.score=0,this.highscore=0,this.infoPanel,this.scoreTimer,this.scoreText,this.highscoreText}create(){this.game.config.blocklyControlName.scene="gamestart",this.score=0,this.highscore=this.registry.get("highscore"),this.add.image(512,384,"background"),this.tracks=[new y(this,0,196),new y(this,1,376),new y(this,2,536),new y(this,3,700)],this.player=new g(this,this.tracks[0]),this.events.on("pause",(function(){})),this.events.on("resume",(function(){})),this.game.config.blockControl["score"]=()=>this.score,this.game.config.blockControl["restartMainMenu"]=()=>{this.tracks.forEach((s=>{s.stop()})),this.sound.stopAll(),this.player.stop(),this.scoreTimer.destroy(),this.scene.start("MainMenu")},this.game.config.blockControl["pause"]=()=>{this.scene.pause()},this.game.config.blockControl["resume"]=()=>{this.scene.resume()},this.game.config.blockControl["gameOver"]=()=>{this.gameOver()},this.game.config.blockControl["up"]=()=>{this.player.moveUp()},this.game.config.blockControl["down"]=()=>{this.player.moveDown()},this.game.config.blockControl["throw"]=()=>{this.player.isThrowing||this.player.throw()},this.game.config.blockControl["isThrowing"]=()=>this.player.isThrowing,this.game.config.blockControl["getTrackID"]=()=>this.player.currentTrack.id+1,this.game.config.blockControl["snowmanTrackID"]=s=>{let t=[],e=this.tracks[s].snowmanSmall.x;return e>0&&t.push(parseInt(e/8.8)),e=this.tracks[s].snowmanBig.x,e>0&&t.push(parseInt(e/8.8)),e=this.tracks[s].snowmanSmallTwo.x,e>0&&t.push(parseInt(e/8.8)),e=this.tracks[s].snowmanBigTwo.x,e>0&&t.push(parseInt(e/8.8)),e=this.tracks[s].snowmanSmallThree.x,e>0&&t.push(parseInt(e/8.8)),e=this.tracks[s].snowmanBigThree.x,e>0&&t.push(parseInt(e/8.8)),t},this.game.config.blockControl["snowmanTrackIDAll"]=()=>{let s=0,t=[];for(;s<4;s++){let e=[],i=this.tracks[s].snowmanSmall.x;i>0&&e.push(parseInt(i/8.8)),i=this.tracks[s].snowmanBig.x,i>0&&e.push(parseInt(i/8.8)),i=this.tracks[s].snowmanSmallTwo.x,i>0&&e.push(parseInt(i/8.8)),i=this.tracks[s].snowmanBigTwo.x,i>0&&e.push(parseInt(i/8.8)),i=this.tracks[s].snowmanSmallThree.x,i>0&&e.push(parseInt(i/8.8)),i=this.tracks[s].snowmanBigThree.x,i>0&&e.push(parseInt(i/8.8)),t.push(e)}return t},this.game.config.blockControl["enemyBallsArray"]=s=>{let t=[];for(let e of this.tracks[s].enemySnowballs.getChildren())e.body.enable&&t.push(parseInt(e.x/9.7));return t},this.game.config.blockControl["enemyBallsArrayAll"]=()=>{let s=0,t=[];for(;s<4;s++){let e=[];for(let t of this.tracks[s].enemySnowballs.getChildren())t.body.enable&&e.push(parseInt(t.x/9.7));t.push(e)}return t},this.game.config.blockControl.ready=!0,this.add.image(0,0,"overlay").setOrigin(0),this.add.image(16,0,"sprites","panel-score").setOrigin(0),this.add.image(1008,0,"sprites","panel-best").setOrigin(1,0),this.infoPanel=this.add.image(512,384,"sprites","controls"),this.scoreText=this.add.text(140,2,this.score,{fontFamily:"Arial",fontSize:32,color:"#ffffff"}),this.highscoreText=this.add.text(820,2,this.highscore,{fontFamily:"Arial",fontSize:32,color:"#ffffff"}),this.input.keyboard.removeAllListeners(),this.tweens.add({targets:this.infoPanel,y:700,alpha:0,duration:500,ease:"Power2"}),this.player.start(),this.tracks[0].start(4e3,8e3),this.tracks[1].start(500,1e3),this.tracks[2].start(5e3,9e3),this.tracks[3].start(6e3,1e4),this.scoreTimer=this.time.addEvent({delay:1e3,callback:()=>{this.score++,this.scoreText.setText(this.score)},callbackScope:this,repeat:-1})}gameOver(){this.game.config.blocklyControlName.scene="gameover",this.infoPanel.setTexture("gameover"),this.tweens.add({targets:this.infoPanel,y:384,alpha:1,duration:500,ease:"Power2"}),this.tracks.forEach((s=>{s.stop()})),this.sound.stopAll(),this.sound.play("gameover"),this.player.stop(),this.scoreTimer.destroy(),this.score>this.highscore&&(this.highscoreText.setText("NEW!"),this.registry.set("highscore",this.score)),this.input.keyboard.once("keydown-SPACE",(()=>{this.scene.start("MainMenu")}),this),this.input.once("pointerdown",(()=>{this.scene.start("MainMenu")}),this)}}var k=e(3617);const b={name:"snowmemAttack",data(){return{}},computed:{...(0,k.rn)(["game"])},methods:{...(0,k.OI)(["mutationsGame","mutationsGameblocklyControlName"])},mounted(){const s={type:Phaser.AUTO,width:1024,height:768,backgroundColor:"#3366b2",parent:"space",scene:[l,m,c,u],physics:{default:"arcade",arcade:{debug:!1}}};this.mutationsGame(new Phaser.Game(s)),this.mutationsGameblocklyControlName({name:this.$t("snowmenAttack.blockName"),scene:"qq",vueThis:this,playerMotion:[[this.$t("snowmenAttack.up"),"up"],[this.$t("snowmenAttack.down"),"down"],[this.$t("snowmenAttack.throw"),"throw"]],playerSensingBool:[[this.$t("snowmenAttack.isThrowing"),"isThrowing"]],playerSensingNumber:[[this.$t("snowmenAttack.getTrackID"),"getTrackID"]],enemySnowmanArray:[[this.$t("snowmenAttack.theTrackID0"),"theTrackID0"],[this.$t("snowmenAttack.theTrackID1"),"theTrackID1"],[this.$t("snowmenAttack.theTrackID2"),"theTrackID2"],[this.$t("snowmenAttack.theTrackID3"),"theTrackID3"]],enemySnowmanArrayAll:[[this.$t("snowmenAttack.theTrackIDAll"),"theTrackIDAll"]],enemyBallsArray:[[this.$t("snowmenAttack.theTrackID0"),"enemyBallsArray0"],[this.$t("snowmenAttack.theTrackID1"),"enemyBallsArray1"],[this.$t("snowmenAttack.theTrackID2"),"enemyBallsArray2"],[this.$t("snowmenAttack.theTrackID3"),"enemyBallsArray3"]],enemyBallsArrayAll:[[this.$t("snowmenAttack.theTrackIDAll"),"enemyBallsArrayAll"]]})},unmounted(){}};var T=e(4260);const f=(0,T.Z)(b,[["render",h],["__scopeId","data-v-27cb8d4c"]]),S=f},2480:()=>{}}]);