(()=>{"use strict";const a={ok:0,partial:1,all:2,noThisID:3};let e={};function s(a){let s=a.update,t=a.sPhaserID,o=a.gameIDorRoomID,r=!1,d={};if(void 0!=e[t]&&void 0!=e[t][o]){let a=e[t][o];for(let e in s)if(void 0==a[e])a[e]=s[e],d[e]=s[e];else{d[e]={};for(let t in s[e]){let o=s[e][t],l=a[e][t];if(void 0==l){a[e][t]=o,r=!0;break}for(let s in o)if(o[s]!=l[s]){a[e][t]=o,d[e][t]=o,r=!0;break}}}}return r?d:null}self.onmessage=function(t){let o,r,d=t.data;switch(d.cmd){case"init_vue2worker":o=d.data.sPhaserID,r=d.data.gameIDorRoomID,void 0==e[o]&&(e[o]={}),void 0==e[o][r]&&(e[o][r]={});break;case"destroy_vue2worker":o=d.data.sPhaserID,r=d.data.gameIDorRoomID,void 0!=e[o]&&void 0!=e[o][r]&&delete e[o][r];break;case"status_PS2C_phaser2worker":let t=s(d.data);null!=t&&self.postMessage({cmd:"updatedstatus_PS2C_worker2socket",data:{update:t,mode:a.partial,sPhaserID:d.data.sPhaserID,gameIDorRoomID:d.data.gameIDorRoomID}});break;case"allStatusREQ_phaser2worker":self.postMessage({cmd:"allStatusREQ_worker2socket",data:{sPhaserID:d.data.sPhaserID,gameIDorRoomID:d.data.gameIDorRoomID}});break;case"playerAction_2PS_phaser2worker":self.postMessage({cmd:"playerAction_2PS_worker2socket",data:d.data});break;case"player_BroadCast_phaser2worker":self.postMessage({cmd:"player_BroadCast_worker2socket",data:d.data});break;case"updatedStatus_socket2worker":self.postMessage({cmd:"updatedStatus_worker2phaser",data:d.data});break;case"allStatusRSP_socket2worker":self.postMessage({cmd:"allStatusRSP_worker2phaser",data:d.data});break;case"playerAction_2PS_socket2worker":self.postMessage({cmd:"playerAction_2PS_worker2phaser",data:d.data});break;case"player_BroadCast_socket2worker":self.postMessage({cmd:"player_BroadCast_worker2phaser",data:d.data});break;case"allStatusREQ_socket2worker":let l=e[d.data.sPhaserID][d.data.gameIDorRoomID];void 0!=l?self.postMessage({cmd:"allStatusRSP_worker2socket",data:{update:l,sPhaserID:d.data.sPhaserID,gameIDorRoomID:d.data.gameIDorRoomID,tempNote:"Out",status:a.ok}}):self.postMessage({cmd:"allStatusRSP_worker2socket",data:{update:e,sPhaserID:d.data.sPhaserID,gameIDorRoomID:d.data.gameIDorRoomID,tempNote:"Out",status:a.noThisID}});break}}})();